(self["webpackChunkpcctest"]=self["webpackChunkpcctest"]||[]).push([[504],{45:function(t,e,n){var r=n(3839);function i(t,e){return r(t,e,"pre")}t.exports=i},59:function(t,e,n){var r=n(7966),i=n(71379);function o(t,e){return i(t||[],e||[],r)}t.exports=o},588:function(t,e,n){var r=n(94804),i=n(64011);function o(t,e){return null!=t&&i(t,e,r)}t.exports=o},655:function(t,e,n){"use strict";var r=n(36955),i=String;t.exports=function(t){if("Symbol"===r(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},797:function(t,e,n){var r=n(97874),i=n(43559),o=n(86061),s=n(38478),a=n(7830),c=n(61764),l=1,u=2,h="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",g="[object Number]",v="[object RegExp]",y="[object Set]",m="[object String]",b="[object Symbol]",x="[object ArrayBuffer]",w="[object DataView]",E=r?r.prototype:void 0,k=E?E.valueOf:void 0;function S(t,e,n,r,E,S,M){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!S(new i(t),new i(e)));case h:case d:case g:return o(+t,+e);case f:return t.name==e.name&&t.message==e.message;case v:case m:return t==e+"";case p:var O=a;case y:var N=r&l;if(O||(O=c),t.size!=e.size&&!N)return!1;var T=M.get(t);if(T)return T==e;r|=u,M.set(t,e);var A=s(O(t),O(e),r,E,S,M);return M["delete"](t),A;case b:if(k)return k.call(t)==k.call(e)}return!1}t.exports=S},984:function(t,e,n){var r=n(56636);function i(t){return r(this,t).get(t)}t.exports=i},1068:function(t,e,n){var r=n(36202),i=n(76039),o=n(26323),s=n(12626),a=n(85926),c=n(75102);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype["delete"]=o,l.prototype.get=s,l.prototype.has=a,l.prototype.set=c,t.exports=l},1114:function(t,e,n){n(18111),n(7588);var r=n(27260),i=n(8961),o=n(1838);function s(t,e){var n,s=new i,a={},c=new o;function l(t){var r=t.v===n?t.w:t.v,i=c.priority(r);if(void 0!==i){var o=e(t);o<i&&(a[r]=n,c.decrease(r,o))}}if(0===t.nodeCount())return s;r.each(t.nodes(),(function(t){c.add(t,Number.POSITIVE_INFINITY),s.setNode(t)})),c.decrease(t.nodes()[0],0);var u=!1;while(c.size()>0){if(n=c.removeMin(),r.has(a,n))s.setEdge(n,a[n]);else{if(u)throw new Error("Input graph is not connected: "+t);u=!0}t.nodeEdges(n).forEach(l)}return s}t.exports=s},1235:function(t,e,n){var r=n(63066),i="Expected a function";function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},1351:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return s}});var r=n(57343);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,i=void 0===n?0:n,o=e.toIndex,s=void 0===o?t.length:o;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=i||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[i],c=i+1;c<s;c++)t[c]>a&&(a=t[c]);return a}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,i=void 0===n?0:n,o=e.toIndex,s=void 0===o?t.length:o;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=i||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[i],c=i+1;c<s;c++)t[c]<a&&(a=t[c]);return a}function s(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!(0,r.isAnyArray)(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var s=o(t),a=i(t);if(s===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var c=n.min,l=void 0===c?n.autoMinMax?s:0:c,u=n.max,h=void 0===u?n.autoMinMax?a:1:u;if(l>=h)throw new RangeError("min option must be smaller than max option");for(var d=(h-l)/(a-s),f=0;f<t.length;f++)e[f]=(t[f]-s)*d+l;return e}},1548:function(t,e,n){"use strict";var r=n(44576),i=n(79039),o=n(39519),s=n(84215),a=r.structuredClone;t.exports=!!a&&!i((function(){if("DENO"===s&&o>92||"NODE"===s&&o>94||"BROWSER"===s&&o>97)return!1;var t=new ArrayBuffer(8),e=a(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength}))},1625:function(t,e,n){"use strict";var r=n(79504);t.exports=r({}.isPrototypeOf)},1676:function(t,e,n){n(44114);var r=n(63066),i=n(6421),o=n(12550);function s(t){var e=-1,n=null==t?0:t.length;this.__data__=new r;while(++e<n)this.add(t[e])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,t.exports=s},1767:function(t){"use strict";t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},1838:function(t,e,n){n(44114),n(18111),n(61701);var r=n(27260);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,o=i.length;return n[t]=o,i.push({key:t,priority:e}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){var e,n=this._arr,r=n[t].priority;while(0!==t){if(e=t>>1,n[e].priority<r)break;this._swap(t,e),t=e}},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},1879:function(t,e,n){var r=n(55387);function i(t){try{r(t)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}t.exports=i},1976:function(t,e,n){var r=n(44823),i=n(43223),o=n(19692),s=n(42530),a=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,h=l.toString,d=u.hasOwnProperty,f=RegExp("^"+h.call(d).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(t){if(!o(t)||i(t))return!1;var e=r(t)?f:c;return e.test(s(t))}t.exports=p},2360:function(t,e,n){"use strict";var r,i=n(28551),o=n(96801),s=n(88727),a=n(30421),c=n(20397),l=n(4055),u=n(66119),h=">",d="<",f="prototype",p="script",g=u("IE_PROTO"),v=function(){},y=function(t){return d+p+h+t+d+"/"+p+h},m=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=l("iframe"),n="java"+p+":";return e.style.display="none",c.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(y("document.F=Object")),t.close(),t.F},x=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}x="undefined"!=typeof document?document.domain&&r?m(r):b():m(r);var t=s.length;while(t--)delete x[f][s[t]];return x()};a[g]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(v[f]=i(t),n=new v,v[f]=null,n[g]=t):n=x(),void 0===e?n:o.f(n,e)}},2409:function(t,e,n){var r=n(16517),i=n(53698),o=n(85340);function s(t,e){return o(i(t,e,r),t+"")}t.exports=s},2442:function(t,e,n){var r=n(48465);function i(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);var o=n.length,s=e?o:-1,a=Object(n);while(e?s--:++s<o)if(!1===i(a[s],s,a))break;return n}}t.exports=i},3026:function(t,e,n){var r=n(95722),i=n(95353),o=n(85858);function s(t){return i(t)?o(t):r(t)}t.exports=s},3238:function(t,e,n){"use strict";var r=n(44576),i=n(77811),o=n(67394),s=r.DataView;t.exports=function(t){if(!i||0!==o(t))return!1;try{return new s(t),!1}catch(e){return!0}}},3388:function(t,e,n){var r=n(6849),i=Object.prototype,o=i.hasOwnProperty;function s(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}t.exports=s},3778:function(t){function e(t,e,n,r){var i=t.length,o=n+(r?1:-1);while(r?o--:++o<i)if(e(t[o],o,t))return o;return-1}t.exports=e},3839:function(t,e,n){n(44114);var r=n(27260);function i(t,e,n){r.isArray(e)||(e=[e]);var i=(t.isDirected()?t.successors:t.neighbors).bind(t),s=[],a={};return r.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);o(t,e,"post"===n,a,i,s)})),s}function o(t,e,n,i,s,a){r.has(i,e)||(i[e]=!0,n||a.push(e),r.each(s(e),(function(e){o(t,e,n,i,s,a)})),n&&a.push(e))}t.exports=i},4055:function(t,e,n){"use strict";var r=n(44576),i=n(20034),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},4270:function(t){function e(t){return t!==t}t.exports=e},4355:function(t,e,n){var r=n(19692);function i(t){return t===t&&!r(t)}t.exports=i},4495:function(t,e,n){"use strict";var r=n(39519),i=n(79039),o=n(44576),s=o.String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol("symbol detection");return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},4727:function(t,e,n){var r=n(99231),i=n(72715),o=n(588),s=n(14915),a=n(4355),c=n(82976),l=n(99416),u=1,h=2;function d(t,e){return s(t)&&a(e)?c(l(t),e):function(n){var s=i(n,t);return void 0===s&&s===e?o(n,t):r(e,s,u|h)}}t.exports=d},5576:function(t,e,n){var r=n(6849),i="__lodash_hash_undefined__",o=Object.prototype,s=o.hasOwnProperty;function a(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return s.call(e,t)?e[t]:void 0}t.exports=a},5987:function(t){function e(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}t.exports=e,t.exports.__esModule=!0,t.exports["default"]=t.exports},6247:function(t,e,n){"use strict";n(44114),n(18111),n(7588),n(61701);var r=n(34230),i=n(74332).Graph;function o(t,e,n,i){var o;do{o=r.uniqueId(i)}while(t.hasNode(o));return n.dummy=e,t.setNode(o,n),o}function s(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e}function a(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e}function c(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)}function l(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)}function u(t,e){var n,r,i=t.x,o=t.y,s=e.x-i,a=e.y-o,c=t.width/2,l=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*c>Math.abs(s)*l?(a<0&&(l=-l),n=l*s/a,r=l):(s<0&&(c=-c),n=c,r=c*a/s),{x:i+n,y:o+r}}function h(t){var e=r.map(r.range(g(t)+1),(function(){return[]}));return r.forEach(t.nodes(),(function(n){var i=t.node(n),o=i.rank;r.isUndefined(o)||(e[o][i.order]=n)})),e}function d(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank})));r.forEach(t.nodes(),(function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)}))}function f(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];r.forEach(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)}));var i=0,o=t.graph().nodeRankFactor;r.forEach(n,(function(e,n){r.isUndefined(e)&&n%o!==0?--i:i&&r.forEach(e,(function(e){t.node(e).rank+=i}))}))}function p(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),o(t,"border",i,e)}function g(t){return r.max(r.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n})))}function v(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n}function y(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}}function m(t,e){return e()}t.exports={addDummyNode:o,simplify:s,asNonCompoundGraph:a,successorWeights:c,predecessorWeights:l,intersectRect:u,buildLayerMatrix:h,normalizeRanks:d,removeEmptyRanks:f,addBorderNode:p,maxRank:g,partition:v,time:y,notime:m}},6421:function(t){var e="__lodash_hash_undefined__";function n(t){return this.__data__.set(t,e),this}t.exports=n},6469:function(t,e,n){"use strict";var r=n(78227),i=n(2360),o=n(24913).f,s=r("unscopables"),a=Array.prototype;void 0===a[s]&&o(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},6849:function(t,e,n){var r=n(29531),i=r(Object,"create");t.exports=i},6980:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7022:function(t,e,n){var r=n(3778),i=n(4270),o=n(64234);function s(t,e,n){return e===e?o(t,e,n):r(t,i,n)}t.exports=s},7040:function(t,e,n){"use strict";var r=n(4495);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7096:function(t,e,n){var r=n(48882),i=n(75360),o=n(82884),s=n(22613),a=n(58728),c="[object Boolean]",l="[object Date]",u="[object Map]",h="[object Number]",d="[object RegExp]",f="[object Set]",p="[object String]",g="[object Symbol]",v="[object ArrayBuffer]",y="[object DataView]",m="[object Float32Array]",b="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",E="[object Int32Array]",k="[object Uint8Array]",S="[object Uint8ClampedArray]",M="[object Uint16Array]",O="[object Uint32Array]";function N(t,e,n){var N=t.constructor;switch(e){case v:return r(t);case c:case l:return new N(+t);case y:return i(t,n);case m:case b:case x:case w:case E:case k:case S:case M:case O:return a(t,n);case u:return new N;case h:case p:return new N(t);case d:return o(t);case f:return new N;case g:return s(t)}}t.exports=N},7588:function(t,e,n){"use strict";var r=n(46518),i=n(72652),o=n(79306),s=n(28551),a=n(1767);r({target:"Iterator",proto:!0,real:!0},{forEach:function(t){s(this),o(t);var e=a(this),n=0;i(e,(function(e){t(e,n++)}),{IS_RECORD:!0})}})},7622:function(t,e,n){"use strict";n(18111),n(7588),n(61701);var r=n(34230);function i(t,e){for(var n=0,r=1;r<e.length;++r)n+=o(t,e[r-1],e[r]);return n}function o(t,e,n){var i=r.zipObject(n,r.map(n,(function(t,e){return e}))),o=r.flatten(r.map(e,(function(e){return r.sortBy(r.map(t.outEdges(e),(function(e){return{pos:i[e.w],weight:t.edge(e).weight}})),"pos")})),!0),s=1;while(s<n.length)s<<=1;var a=2*s-1;s-=1;var c=r.map(new Array(a),(function(){return 0})),l=0;return r.forEach(o.forEach((function(t){var e=t.pos+s;c[e]+=t.weight;var n=0;while(e>0)e%2&&(n+=c[e+1]),e=e-1>>1,c[e]+=t.weight;l+=t.weight*n}))),l}t.exports=i},7830:function(t,e,n){function r(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}n(18111),n(7588),t.exports=r},7966:function(t,e,n){var r=n(39889),i=n(86061),o=Object.prototype,s=o.hasOwnProperty;function a(t,e,n){var o=t[e];s.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}t.exports=a},8081:function(t,e,n){var r=n(94857);function i(t){var e=null==t?0:t.length;return e?r(t,1):[]}t.exports=i},8845:function(t,e,n){n(44114);var r=n(43381),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=s},8961:function(t,e,n){"use strict";n(18111),n(22489),n(18237);var r=n(27260);t.exports=a;var i="\0",o="\0",s="";function a(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[o]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function c(t,e){t[e]?t[e]++:t[e]=1}function l(t,e){--t[e]||delete t[e]}function u(t,e,n,o){var a=""+e,c=""+n;if(!t&&a>c){var l=a;a=c,c=l}return a+s+c+s+(r.isUndefined(o)?i:o)}function h(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};return r&&(a.name=r),a}function d(t,e){return u(t,e.v,e.w,e.name)}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(t){return this._label=t,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return r.keys(this._nodes)},a.prototype.sources=function(){var t=this;return r.filter(this.nodes(),(function(e){return r.isEmpty(t._in[e])}))},a.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),(function(e){return r.isEmpty(t._out[e])}))},a.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,(function(t){n.length>1?i.setNode(t,e):i.setNode(t)})),this},a.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=o,this._children[t]={},this._children[o][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},a.prototype.node=function(t){return this._nodes[t]},a.prototype.hasNode=function(t){return r.has(this._nodes,t)},a.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},a.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=o;else{e+="";for(var n=e;!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},a.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},a.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==o)return e}},a.prototype.children=function(t){if(r.isUndefined(t)&&(t=o),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===o)return this.nodes();if(this.hasNode(t))return[]}},a.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},a.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},a.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},a.prototype.isLeaf=function(t){var e;return e=this.isDirected()?this.successors(t):this.neighbors(t),0===e.length},a.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),r.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var i={};function o(t){var r=n.parent(t);return void 0===r||e.hasNode(r)?(i[t]=r,r):r in i?i[r]:o(r)}return this._isCompound&&r.each(e.nodes(),(function(t){e.setParent(t,o(t))})),e},a.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return r.values(this._edgeObjs)},a.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,(function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r})),this},a.prototype.setEdge=function(){var t,e,n,i,o=!1,s=arguments[0];"object"===typeof s&&null!==s&&"v"in s?(t=s.v,e=s.w,n=s.name,2===arguments.length&&(i=arguments[1],o=!0)):(t=s,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var a=u(this._isDirected,t,e,n);if(r.has(this._edgeLabels,a))return o&&(this._edgeLabels[a]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[a]=o?i:this._defaultEdgeLabelFn(t,e,n);var l=h(this._isDirected,t,e,n);return t=l.v,e=l.w,Object.freeze(l),this._edgeObjs[a]=l,c(this._preds[e],t),c(this._sucs[t],e),this._in[e][a]=l,this._out[t][a]=l,this._edgeCount++,this},a.prototype.edge=function(t,e,n){var r=1===arguments.length?d(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return this._edgeLabels[r]},a.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?d(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},a.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?d(this._isDirected,arguments[0]):u(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],l(this._preds[e],t),l(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},a.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,(function(t){return t.v===e})):i}},a.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,(function(t){return t.w===e})):i}},a.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},9386:function(t,e,n){var r=n(86061);function i(t,e){var n=t.length;while(n--)if(r(t[n][0],e))return n;return-1}t.exports=i},9485:function(t){t.exports=function(t){return!(!t||"string"===typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},9539:function(t,e,n){"use strict";var r=n(69565),i=n(28551),o=n(55966);t.exports=function(t,e,n){var s,a;i(t);try{if(s=o(t,"return"),!s){if("throw"===e)throw n;return n}s=r(s,t)}catch(c){a=!0,s=c}if("throw"===e)throw n;if(a)throw s;return i(s),n}},9678:function(t,e,n){"use strict";var r=n(46518),i=n(37628),o=n(25397),s=n(6469),a=Array;r({target:"Array",proto:!0},{toReversed:function(){return i(o(this),a)}}),s("toReversed")},9765:function(t,e,n){var r=n(14794),i=n(21643),o=n(58728),s=n(35522),a=n(58780),c=n(15219),l=n(85366),u=n(55390),h=n(70317),d=n(44823),f=n(19692),p=n(60712),g=n(29562),v=n(73227),y=n(92911);function m(t,e,n,m,b,x,w){var E=v(t,n),k=v(e,n),S=w.get(k);if(S)r(t,n,S);else{var M=x?x(E,k,n+"",t,e,w):void 0,O=void 0===M;if(O){var N=l(k),T=!N&&h(k),A=!N&&!T&&g(k);M=k,N||T||A?l(E)?M=E:u(E)?M=s(E):T?(O=!1,M=i(k,!0)):A?(O=!1,M=o(k,!0)):M=[]:p(k)||c(k)?(M=E,c(E)?M=y(E):f(E)&&!d(E)||(M=a(k))):O=!1}O&&(w.set(k,M),b(M,k,m,x,w),w["delete"](k)),r(t,n,M)}}t.exports=m},10350:function(t,e,n){"use strict";var r=n(43724),i=n(39297),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},10405:function(t,e,n){var r=n(2409),i=n(86061),o=n(31207),s=n(58664),a=Object.prototype,c=a.hasOwnProperty,l=r((function(t,e){t=Object(t);var n=-1,r=e.length,l=r>2?e[2]:void 0;l&&o(e[0],e[1],l)&&(r=1);while(++n<r){var u=e[n],h=s(u),d=-1,f=h.length;while(++d<f){var p=h[d],g=t[p];(void 0===g||i(g,a[p])&&!c.call(t,p))&&(t[p]=u[p])}}return t}));t.exports=l},10757:function(t,e,n){"use strict";var r=n(97751),i=n(94901),o=n(1625),s=n(7040),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&o(e.prototype,a(t))}},10993:function(t,e,n){var r=n(31945),i=n(84276),o=n(80770),s=o&&o.isMap,a=s?i(s):r;t.exports=a},11567:function(t,e,n){var r=n(29531),i=n(68606),o=r(i,"DataView");t.exports=o},12211:function(t,e,n){"use strict";var r=n(79039);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},12239:function(t,e,n){"use strict";n(44114),n(18111),n(7588);var r=n(34230),i=n(56376);function o(t){var e="greedy"===t.graph().acyclicer?i(t,n(t)):s(t);function n(t){return function(e){return t.edge(e).weight}}r.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))}))}function s(t){var e=[],n={},i={};function o(s){r.has(i,s)||(i[s]=!0,n[s]=!0,r.forEach(t.outEdges(s),(function(t){r.has(n,t.w)?e.push(t):o(t.w)})),delete n[s])}return r.forEach(t.nodes(),o),e}function a(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}t.exports={run:o,undo:a}},12550:function(t){function e(t){return this.__data__.has(t)}t.exports=e},12626:function(t){function e(t){return this.__data__.get(t)}t.exports=e},13236:function(t){function e(){return!1}t.exports=e},13239:function(t,e,n){var r=n(53505);function i(t,e,n){var i=-1,o=t.criteria,s=e.criteria,a=o.length,c=n.length;while(++i<a){var l=r(o[i],s[i]);if(l){if(i>=c)return l;var u=n[i];return l*("desc"==u?-1:1)}}return t.index-e.index}t.exports=i},13579:function(t,e,n){"use strict";var r=n(46518),i=n(72652),o=n(79306),s=n(28551),a=n(1767);r({target:"Iterator",proto:!0,real:!0},{some:function(t){s(this),o(t);var e=a(this),n=0;return i(e,(function(e,r){if(t(e,n++))return r()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},13867:function(t,e,n){var r=n(77083),i=n(45556),o=n(16517),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=s},13883:function(t){function e(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=e},13925:function(t,e,n){"use strict";var r=n(20034);t.exports=function(t){return r(t)||null===t}},14603:function(t,e,n){"use strict";var r=n(36840),i=n(79504),o=n(655),s=n(22812),a=URLSearchParams,c=a.prototype,l=i(c.append),u=i(c["delete"]),h=i(c.forEach),d=i([].push),f=new a("a=1&a=2&b=3");f["delete"]("a",1),f["delete"]("b",void 0),f+""!=="a=2"&&r(c,"delete",(function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return u(this,t);var r=[];h(this,(function(t,e){d(r,{key:e,value:t})})),s(e,1);var i,a=o(t),c=o(n),f=0,p=0,g=!1,v=r.length;while(f<v)i=r[f++],g||i.key===a?(g=!0,u(this,i.key)):p++;while(p<v)i=r[p++],i.key===a&&i.value===c||l(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},14732:function(t,e,n){n(18111),n(7588),n(18237);var r=n(34230),i=n(6247);function o(t){var e=i.addDummyNode(t,"root",{},"_root"),n=a(t),o=r.max(r.values(n))-1,l=2*o+1;t.graph().nestingRoot=e,r.forEach(t.edges(),(function(e){t.edge(e).minlen*=l}));var u=c(t)+1;r.forEach(t.children(),(function(r){s(t,e,l,u,o,n,r)})),t.graph().nodeRankFactor=l}function s(t,e,n,o,a,c,l){var u=t.children(l);if(u.length){var h=i.addBorderNode(t,"_bt"),d=i.addBorderNode(t,"_bb"),f=t.node(l);t.setParent(h,l),f.borderTop=h,t.setParent(d,l),f.borderBottom=d,r.forEach(u,(function(r){s(t,e,n,o,a,c,r);var i=t.node(r),u=i.borderTop?i.borderTop:r,f=i.borderBottom?i.borderBottom:r,p=i.borderTop?o:2*o,g=u!==f?1:a-c[l]+1;t.setEdge(h,u,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(f,d,{weight:p,minlen:g,nestingEdge:!0})})),t.parent(l)||t.setEdge(e,h,{weight:0,minlen:a+c[l]})}else l!==e&&t.setEdge(e,l,{weight:0,minlen:n})}function a(t){var e={};function n(i,o){var s=t.children(i);s&&s.length&&r.forEach(s,(function(t){n(t,o+1)})),e[i]=o}return r.forEach(t.children(),(function(t){n(t,1)})),e}function c(t){return r.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}function l(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),(function(e){var n=t.edge(e);n.nestingEdge&&t.removeEdge(e)}))}t.exports={run:o,cleanup:l}},14762:function(t,e,n){var r=n(74473),i=n(51297),o=n(5576),s=n(3388),a=n(51916);function c(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype["delete"]=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},14784:function(t){function e(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(!1===e(t[n],n,t))break;return t}t.exports=e},14794:function(t,e,n){var r=n(39889),i=n(86061);function o(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}t.exports=o},14807:function(t){t.exports="0.8.5"},14915:function(t,e,n){var r=n(85366),i=n(29299),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function a(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(s.test(t)||!o.test(t)||null!=e&&t in Object(e))}t.exports=a},15024:function(t,e,n){"use strict";var r=n(46518),i=n(83650),o=n(84916);r({target:"Set",proto:!0,real:!0,forced:!o("symmetricDifference")},{symmetricDifference:i})},15219:function(t,e,n){var r=n(38843),i=n(85091),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=c},15668:function(t){function e(t,e,n){var r=-1,i=null==t?0:t.length;while(++r<i)if(n(e,t[r]))return!0;return!1}t.exports=e},15686:function(t,e,n){var r=n(57422),i=n(4727),o=n(16517),s=n(85366),a=n(37746);function c(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?s(t)?i(t[0],t[1]):r(t):a(t)}t.exports=c},15841:function(t,e,n){var r=n(43575);function i(t,e){return r(e,(function(e){return t[e]}))}t.exports=i},15881:function(t,e,n){var r=n(14784),i=n(63034),o=n(52701),s=n(85366);function a(t,e){var n=s(t)?r:i;return n(t,o(e))}t.exports=a},16193:function(t,e,n){"use strict";var r=n(84215);t.exports="NODE"===r},16259:function(t,e,n){n(18111),n(7588);var r=n(27260);t.exports=o;var i=r.constant(1);function o(t,e,n){return s(t,e||i,n||function(e){return t.outEdges(e)})}function s(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){r[t]={},r[t][t]={distance:0},i.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}}))})),i.forEach((function(t){var e=r[t];i.forEach((function(n){var o=r[n];i.forEach((function(n){var r=o[t],i=e[n],s=o[n],a=r.distance+i.distance;a<s.distance&&(s.distance=a,s.predecessor=i.predecessor)}))}))})),r}},16281:function(t,e,n){var r=n(14762),i=n(36202),o=n(27546);function s(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}t.exports=s},16517:function(t){function e(t){return t}t.exports=e},16573:function(t,e,n){"use strict";var r=n(43724),i=n(62106),o=n(3238),s=ArrayBuffer.prototype;r&&!("detached"in s)&&i(s,"detached",{configurable:!0,get:function(){return o(this)}})},16823:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},17642:function(t,e,n){"use strict";var r=n(46518),i=n(83440),o=n(84916),s=!o("difference",(function(t){return 0===t.size}));r({target:"Set",proto:!0,real:!0,forced:s},{difference:i})},18014:function(t,e,n){"use strict";var r=n(91291),i=Math.min;t.exports=function(t){var e=r(t);return e>0?i(e,9007199254740991):0}},18111:function(t,e,n){"use strict";var r=n(46518),i=n(44576),o=n(90679),s=n(28551),a=n(94901),c=n(42787),l=n(62106),u=n(97040),h=n(79039),d=n(39297),f=n(78227),p=n(57657).IteratorPrototype,g=n(43724),v=n(96395),y="constructor",m="Iterator",b=f("toStringTag"),x=TypeError,w=i[m],E=v||!a(w)||w.prototype!==p||!h((function(){w({})})),k=function(){if(o(this,p),c(this)===p)throw new x("Abstract class Iterator not directly constructable")},S=function(t,e){g?l(p,t,{configurable:!0,get:function(){return e},set:function(e){if(s(this),this===p)throw new x("You can't redefine this property");d(this,t)?this[t]=e:u(this,t,e)}}):p[t]=e};d(p,b)||S(b,m),!E&&d(p,y)&&p[y]!==Object||S(y,k),k.prototype=p,r({global:!0,constructor:!0,forced:E},{Iterator:k})},18237:function(t,e,n){"use strict";var r=n(46518),i=n(72652),o=n(79306),s=n(28551),a=n(1767),c=TypeError;r({target:"Iterator",proto:!0,real:!0},{reduce:function(t){s(this),o(t);var e=a(this),n=arguments.length<2,r=n?void 0:arguments[1],l=0;if(i(e,(function(e){n?(n=!1,r=e):r=t(r,e,l),l++}),{IS_RECORD:!0}),n)throw new c("Reduce of empty iterator with no initial value");return r}})},18727:function(t,e,n){"use strict";var r=n(36955);t.exports=function(t){var e=r(t);return"BigInt64Array"===e||"BigUint64Array"===e}},18745:function(t,e,n){"use strict";var r=n(40616),i=Function.prototype,o=i.apply,s=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(o):function(){return s.apply(o,arguments)})},18840:function(t,e,n){n(18111),n(7588),n(18237);var r=n(34230),i=n(6247),o=n(74332).Graph;function s(t){var e=i.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),r.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),r.forEach(e,(function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}t.exports={debugOrdering:s}},19462:function(t,e,n){"use strict";var r=n(69565),i=n(2360),o=n(66699),s=n(56279),a=n(78227),c=n(91181),l=n(55966),u=n(57657).IteratorPrototype,h=n(62529),d=n(9539),f=a("toStringTag"),p="IteratorHelper",g="WrapForValidIterator",v=c.set,y=function(t){var e=c.getterFor(t?g:p);return s(i(u),{next:function(){var n=e(this);if(t)return n.nextHandler();if(n.done)return h(void 0,!0);try{var r=n.nextHandler();return n.returnHandlerResult?r:h(r,n.done)}catch(i){throw n.done=!0,i}},return:function(){var n=e(this),i=n.iterator;if(n.done=!0,t){var o=l(i,"return");return o?r(o,i):h(void 0,!0)}if(n.inner)try{d(n.inner.iterator,"normal")}catch(s){return d(i,"throw",s)}return i&&d(i,"normal"),h(void 0,!0)}})},m=y(!0),b=y(!1);o(b,f,"Iterator Helper"),t.exports=function(t,e,n){var r=function(r,i){i?(i.iterator=r.iterator,i.next=r.next):i=r,i.type=e?g:p,i.returnHandlerResult=!!n,i.nextHandler=t,i.counter=0,i.done=!1,v(this,i)};return r.prototype=e?m:b,r}},19496:function(t,e,n){var r=n(9386);function i(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}t.exports=i},19505:function(t,e,n){var r=n(63034),i=n(48465);function o(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}t.exports=o},19617:function(t,e,n){"use strict";var r=n(25397),i=n(35610),o=n(26198),s=function(t){return function(e,n,s){var a=r(e),c=o(a);if(0===c)return!t&&-1;var l,u=i(s,c);if(t&&n!==n){while(c>u)if(l=a[u++],l!==l)return!0}else for(;c>u;u++)if((t||u in a)&&a[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},19692:function(t){function e(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=e},19804:function(t,e,n){var r=n(9386);function i(t){return r(this.__data__,t)>-1}t.exports=i},19903:function(t,e,n){var r=n(8081),i=n(53698),o=n(85340);function s(t){return o(i(t,void 0,r),t+"")}t.exports=s},20034:function(t,e,n){"use strict";var r=n(94901);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},20081:function(t,e,n){var r=n(47045)["default"],i=n(74612);function o(t){var e=i(t,"string");return"symbol"==r(e)?e:e+""}t.exports=o,t.exports.__esModule=!0,t.exports["default"]=t.exports},20116:function(t,e,n){"use strict";var r=n(46518),i=n(72652),o=n(79306),s=n(28551),a=n(1767);r({target:"Iterator",proto:!0,real:!0},{find:function(t){s(this),o(t);var e=a(this),n=0;return i(e,(function(e,r){if(t(e,n++))return r(e)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},20288:function(t){function e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=e},20397:function(t,e,n){"use strict";var r=n(97751);t.exports=r("document","documentElement")},20502:function(t,e,n){n(18111),n(7588);var r=n(1068),i=n(14784),o=n(7966),s=n(49866),a=n(42477),c=n(21643),l=n(35522),u=n(88090),h=n(91261),d=n(92329),f=n(22354),p=n(60710),g=n(70374),v=n(7096),y=n(58780),m=n(85366),b=n(70317),x=n(10993),w=n(19692),E=n(57255),k=n(88987),S=n(58664),M=1,O=2,N=4,T="[object Arguments]",A="[object Array]",C="[object Boolean]",P="[object Date]",R="[object Error]",_="[object Function]",L="[object GeneratorFunction]",D="[object Map]",I="[object Number]",j="[object Object]",F="[object RegExp]",B="[object Set]",z="[object String]",G="[object Symbol]",V="[object WeakMap]",W="[object ArrayBuffer]",U="[object DataView]",H="[object Float32Array]",$="[object Float64Array]",Y="[object Int8Array]",q="[object Int16Array]",X="[object Int32Array]",K="[object Uint8Array]",Z="[object Uint8ClampedArray]",J="[object Uint16Array]",Q="[object Uint32Array]",tt={};function et(t,e,n,A,C,P){var R,D=e&M,I=e&O,F=e&N;if(n&&(R=C?n(t,A,C,P):n(t)),void 0!==R)return R;if(!w(t))return t;var B=m(t);if(B){if(R=g(t),!D)return l(t,R)}else{var z=p(t),G=z==_||z==L;if(b(t))return c(t,D);if(z==j||z==T||G&&!C){if(R=I||G?{}:y(t),!D)return I?h(t,a(R,t)):u(t,s(R,t))}else{if(!tt[z])return C?t:{};R=v(t,z,D)}}P||(P=new r);var V=P.get(t);if(V)return V;P.set(t,R),E(t)?t.forEach((function(r){R.add(et(r,e,n,r,t,P))})):x(t)&&t.forEach((function(r,i){R.set(i,et(r,e,n,i,t,P))}));var W=F?I?f:d:I?S:k,U=B?void 0:W(t);return i(U||t,(function(r,i){U&&(i=r,r=t[i]),o(R,i,et(r,e,n,i,t,P))})),R}tt[T]=tt[A]=tt[W]=tt[U]=tt[C]=tt[P]=tt[H]=tt[$]=tt[Y]=tt[q]=tt[X]=tt[D]=tt[I]=tt[j]=tt[F]=tt[B]=tt[z]=tt[G]=tt[K]=tt[Z]=tt[J]=tt[Q]=!0,tt[R]=tt[_]=tt[V]=!1,t.exports=et},20713:function(t,e,n){"use strict";var r=n(69565),i=n(79306),o=n(28551),s=n(1767),a=n(19462),c=n(96319),l=a((function(){var t=this.iterator,e=o(r(this.next,t)),n=this.done=!!e.done;if(!n)return c(t,this.mapper,[e.value,this.counter++],!0)}));t.exports=function(t){return o(this),i(t),new l(s(this),{mapper:t})}},21087:function(t,e,n){var r=n(68606),i=function(){return r.Date.now()};t.exports=i},21099:function(t,e,n){"use strict";n(44114);var r=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,r,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||t,o),c=i?i+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function c(t,e){0===--t._eventsCount?t._events=new o:delete t._events[e]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,s=new Array(o);r<o;r++)s[r]=n[r].fn;return s},l.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},l.prototype.emit=function(t,e,n,r,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var c,l,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,o),!0;case 6:return u.fn.call(u.context,e,n,r,o,s),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,n);break;case 4:u[l].fn.call(u[l].context,e,n,r);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},l.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return c(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||c(this,o);else{for(var a=0,l=[],u=s.length;a<u;a++)(s[a].fn!==e||r&&!s[a].once||n&&s[a].context!==n)&&l.push(s[a]);l.length?this._events[o]=1===l.length?l[0]:l:c(this,o)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&c(this,e)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,t.exports=l},21268:function(t,e,n){var r=n(62297),i=n(85366);function o(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}t.exports=o},21413:function(t,e,n){var r=n(84243),i=1/0,o=17976931348623157e292;function s(t){if(!t)return 0===t?t:0;if(t=r(t),t===i||t===-i){var e=t<0?-1:1;return e*o}return t===t?t:0}t.exports=s},21643:function(t,e,n){t=n.nmd(t);var r=n(68606),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?r.Buffer:void 0,c=a?a.allocUnsafe:void 0;function l(t,e){if(e)return t.slice();var n=t.length,r=c?c(n):new t.constructor(n);return t.copy(r),r}t.exports=l},22046:function(t,e,n){var r=n(32188),i=n(27260);function o(t,e,n){return i.transform(t.nodes(),(function(i,o){i[o]=r(t,o,e,n)}),{})}t.exports=o},22149:function(t,e,n){"use strict";n(44114),n(18111),n(7588);var r=n(34230),i=n(12239),o=n(23668),s=n(22358),a=n(6247).normalizeRanks,c=n(87969),l=n(6247).removeEmptyRanks,u=n(14732),h=n(89678),d=n(27315),f=n(58804),p=n(45475),g=n(6247),v=n(74332).Graph;function y(t,e){var n=e&&e.debugTiming?g.time:g.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return T(t)}));n("  runLayout",(function(){m(e,n)})),n("  updateInputGraph",(function(){b(t,e)}))}))}function m(t,e){e("    makeSpaceForEdgeLabels",(function(){A(t)})),e("    removeSelfEdges",(function(){F(t)})),e("    acyclic",(function(){i.run(t)})),e("    nestingGraph.run",(function(){u.run(t)})),e("    rank",(function(){s(g.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){C(t)})),e("    removeEmptyRanks",(function(){l(t)})),e("    nestingGraph.cleanup",(function(){u.cleanup(t)})),e("    normalizeRanks",(function(){a(t)})),e("    assignRankMinMax",(function(){P(t)})),e("    removeEdgeLabelProxies",(function(){R(t)})),e("    normalize.run",(function(){o.run(t)})),e("    parentDummyChains",(function(){c(t)})),e("    addBorderSegments",(function(){h(t)})),e("    order",(function(){f(t)})),e("    insertSelfEdges",(function(){B(t)})),e("    adjustCoordinateSystem",(function(){d.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){z(t)})),e("    removeBorderNodes",(function(){j(t)})),e("    normalize.undo",(function(){o.undo(t)})),e("    fixupEdgeLabelCoords",(function(){D(t)})),e("    undoCoordinateSystem",(function(){d.undo(t)})),e("    translateGraph",(function(){_(t)})),e("    assignNodeIntersects",(function(){L(t)})),e("    reversePoints",(function(){I(t)})),e("    acyclic.undo",(function(){i.undo(t)}))}function b(t,e){r.forEach(t.nodes(),(function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))})),r.forEach(t.edges(),(function(n){var i=t.edge(n),o=e.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}t.exports=y;var x=["nodesep","edgesep","ranksep","marginx","marginy"],w={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},E=["acyclicer","ranker","rankdir","align"],k=["width","height"],S={width:0,height:0},M=["minlen","weight","width","height","labeloffset"],O={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},N=["labelpos"];function T(t){var e=new v({multigraph:!0,compound:!0}),n=V(t.graph());return e.setGraph(r.merge({},w,G(n,x),r.pick(n,E))),r.forEach(t.nodes(),(function(n){var i=V(t.node(n));e.setNode(n,r.defaults(G(i,k),S)),e.setParent(n,t.parent(n))})),r.forEach(t.edges(),(function(n){var i=V(t.edge(n));e.setEdge(n,r.merge({},O,G(i,M),r.pick(i,N)))})),e}function A(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}function C(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e:e};g.addDummyNode(t,"edge-proxy",o,"_ep")}}))}function P(t){var e=0;r.forEach(t.nodes(),(function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))})),t.graph().maxRank=e}function R(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}function _(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,s=t.graph(),a=s.marginx||0,c=s.marginy||0;function l(t){var r=t.x,s=t.y,a=t.width,c=t.height;e=Math.min(e,r-a/2),n=Math.max(n,r+a/2),i=Math.min(i,s-c/2),o=Math.max(o,s+c/2)}r.forEach(t.nodes(),(function(e){l(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.has(n,"x")&&l(n)})),e-=a,i-=c,r.forEach(t.nodes(),(function(n){var r=t.node(n);r.x-=e,r.y-=i})),r.forEach(t.edges(),(function(n){var o=t.edge(n);r.forEach(o.points,(function(t){t.x-=e,t.y-=i})),r.has(o,"x")&&(o.x-=e),r.has(o,"y")&&(o.y-=i)})),s.width=n-e+a,s.height=o-i+c}function L(t){r.forEach(t.edges(),(function(e){var n,r,i=t.edge(e),o=t.node(e.v),s=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=s,r=o),i.points.unshift(g.intersectRect(o,n)),i.points.push(g.intersectRect(s,r))}))}function D(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}}))}function I(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}function j(t){r.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),o=t.node(n.borderBottom),s=t.node(r.last(n.borderLeft)),a=t.node(r.last(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(o.y-i.y),n.x=s.x+n.width/2,n.y=i.y+n.height/2}})),r.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}function F(t){r.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}function B(t){var e=g.buildLayerMatrix(t);r.forEach(e,(function(e){var n=0;r.forEach(e,(function(e,i){var o=t.node(e);o.order=i+n,r.forEach(o.selfEdges,(function(e){g.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++n,e:e.e,label:e.label},"_se")})),delete o.selfEdges}))}))}function z(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}}))}function G(t,e){return r.mapValues(r.pick(t,e),Number)}function V(t){var e={};return r.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}},22195:function(t,e,n){"use strict";var r=n(79504),i=r({}.toString),o=r("".slice);t.exports=function(t){return o(i(t),8,-1)}},22215:function(t){function e(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}t.exports=e},22354:function(t,e,n){var r=n(21268),i=n(98184),o=n(58664);function s(t){return r(t,o,i)}t.exports=s},22358:function(t,e,n){"use strict";var r=n(30216),i=r.longestPath,o=n(39414),s=n(52587);function a(t){switch(t.graph().ranker){case"network-simplex":u(t);break;case"tight-tree":l(t);break;case"longest-path":c(t);break;default:u(t)}}t.exports=a;var c=i;function l(t){i(t),o(t)}function u(t){s(t)}},22489:function(t,e,n){"use strict";var r=n(46518),i=n(69565),o=n(79306),s=n(28551),a=n(1767),c=n(19462),l=n(96319),u=n(96395),h=c((function(){var t,e,n,r=this.iterator,o=this.predicate,a=this.next;while(1){if(t=s(i(a,r)),e=this.done=!!t.done,e)return;if(n=t.value,l(r,o,[n,this.counter++],!0))return n}}));r({target:"Iterator",proto:!0,real:!0,forced:u},{filter:function(t){return s(this),o(t),new h(a(this),{predicate:t})}})},22613:function(t,e,n){var r=n(97874),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;function s(t){return o?Object(o.call(t)):{}}t.exports=s},22812:function(t){"use strict";var e=TypeError;t.exports=function(t,n){if(t<n)throw new e("Not enough arguments");return t}},23167:function(t,e,n){"use strict";var r=n(94901),i=n(20034),o=n(52967);t.exports=function(t,e,n){var s,a;return o&&r(s=e.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},23668:function(t,e,n){"use strict";n(44114),n(18111),n(7588);var r=n(34230),i=n(6247);function o(t){t.graph().dummyChains=[],r.forEach(t.edges(),(function(e){s(t,e)}))}function s(t,e){var n=e.v,r=t.node(n).rank,o=e.w,s=t.node(o).rank,a=e.name,c=t.edge(e),l=c.labelRank;if(s!==r+1){var u,h,d;for(t.removeEdge(e),d=0,++r;r<s;++d,++r)c.points=[],h={width:0,height:0,edgeLabel:c,edgeObj:e,rank:r},u=i.addDummyNode(t,"edge",h,"_d"),r===l&&(h.width=c.width,h.height=c.height,h.dummy="edge-label",h.labelpos=c.labelpos),t.setEdge(n,u,{weight:c.weight},a),0===d&&t.graph().dummyChains.push(u),n=u;t.setEdge(n,o,{weight:c.weight},a)}}function a(t){r.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;t.setEdge(r.edgeObj,i);while(r.dummy)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)}))}t.exports={run:o,undo:a}},24145:function(t,e,n){var r=n(48731),i=n(63034),o=n(15686),s=n(63897),a=n(85366);function c(t,e,n){var c=a(t)?r:s,l=arguments.length<3;return c(t,o(e,4),n,l,i)}t.exports=c},24149:function(t){"use strict";var e=RangeError;t.exports=function(t){if(t===t)return t;throw new e("NaN is not allowed")}},24232:function(t,e,n){"use strict";n.d(e,{$3:function(){return f},$H:function(){return j},BH:function(){return H},BX:function(){return nt},Bm:function(){return w},C4:function(){return Z},CE:function(){return g},CP:function(){return l},DY:function(){return F},Gv:function(){return E},J$:function(){return Q},Kg:function(){return x},MZ:function(){return i},Mp:function(){return c},NO:function(){return a},Oj:function(){return o},PT:function(){return R},Qd:function(){return N},Ro:function(){return G},SU:function(){return A},TF:function(){return h},Tg:function(){return L},Tn:function(){return b},Tr:function(){return $},We:function(){return W},X$:function(){return u},Y2:function(){return tt},ZH:function(){return D},Zf:function(){return O},bB:function(){return z},cy:function(){return p},gd:function(){return m},pD:function(){return r},rU:function(){return I},tE:function(){return s},u3:function(){return rt},vM:function(){return v},v_:function(){return ot},yI:function(){return T},yL:function(){return k},yQ:function(){return B}});n(44114),n(18111),n(22489),n(7588);
/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
function r(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return t=>t in e}const i={},o=[],s=()=>{},a=()=>!1,c=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),l=t=>t.startsWith("onUpdate:"),u=Object.assign,h=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},d=Object.prototype.hasOwnProperty,f=(t,e)=>d.call(t,e),p=Array.isArray,g=t=>"[object Map]"===M(t),v=t=>"[object Set]"===M(t),y=t=>"[object Date]"===M(t),m=t=>"[object RegExp]"===M(t),b=t=>"function"===typeof t,x=t=>"string"===typeof t,w=t=>"symbol"===typeof t,E=t=>null!==t&&"object"===typeof t,k=t=>(E(t)||b(t))&&b(t.then)&&b(t.catch),S=Object.prototype.toString,M=t=>S.call(t),O=t=>M(t).slice(8,-1),N=t=>"[object Object]"===M(t),T=t=>x(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,A=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),C=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},P=/-(\w)/g,R=C((t=>t.replace(P,((t,e)=>e?e.toUpperCase():"")))),_=/\B([A-Z])/g,L=C((t=>t.replace(_,"-$1").toLowerCase())),D=C((t=>t.charAt(0).toUpperCase()+t.slice(1))),I=C((t=>{const e=t?`on${D(t)}`:"";return e})),j=(t,e)=>!Object.is(t,e),F=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},B=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},z=t=>{const e=parseFloat(t);return isNaN(e)?t:e},G=t=>{const e=x(t)?Number(t):NaN;return isNaN(e)?t:e};let V;const W=()=>V||(V="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const U="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",H=r(U);function $(t){if(p(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=x(r)?K(r):$(r);if(i)for(const t in i)e[t]=i[t]}return e}if(x(t)||E(t))return t}const Y=/;(?![^(]*\))/g,q=/:([^]+)/,X=/\/\*[^]*?\*\//g;function K(t){const e={};return t.replace(X,"").split(Y).forEach((t=>{if(t){const n=t.split(q);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function Z(t){let e="";if(x(t))e=t;else if(p(t))for(let n=0;n<t.length;n++){const r=Z(t[n]);r&&(e+=r+" ")}else if(E(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const J="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Q=r(J);function tt(t){return!!t||""===t}function et(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=nt(t[r],e[r]);return n}function nt(t,e){if(t===e)return!0;let n=y(t),r=y(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=w(t),r=w(e),n||r)return t===e;if(n=p(t),r=p(e),n||r)return!(!n||!r)&&et(t,e);if(n=E(t),r=E(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const n in t){const r=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(r&&!i||!r&&i||!nt(t[n],e[n]))return!1}}return String(t)===String(e)}function rt(t,e){return t.findIndex((t=>nt(t,e)))}const it=t=>!(!t||!0!==t["__v_isRef"]),ot=t=>x(t)?t:null==t?"":p(t)||E(t)&&(t.toString===S||!b(t.toString))?it(t)?ot(t.value):JSON.stringify(t,st,2):String(t),st=(t,e)=>it(e)?st(t,e.value):g(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n],r)=>(t[at(e,r)+" =>"]=n,t)),{})}:v(e)?{[`Set(${e.size})`]:[...e.values()].map((t=>at(t)))}:w(e)?at(e):!E(e)||p(e)||N(e)?e:String(e),at=(t,e="")=>{var n;return w(t)?`Symbol(${null!=(n=t.description)?n:e})`:t}},24572:function(t,e,n){var r=n(20502),i=1,o=4;function s(t){return r(t,i|o)}t.exports=s},24619:function(t,e,n){var r=n(39889),i=n(59106),o=n(15686);function s(t,e){var n={};return e=o(e,3),i(t,(function(t,i,o){r(n,i,e(t,i,o))})),n}t.exports=s},24875:function(t,e,n){n(44114),n(18111),n(7588),n(61701),function(e,n){t.exports=n()}("undefined"!==typeof self&&self,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e){function n(t,e,n,r){return void 0===r&&(r="height"),"center"===n?(t[r]+e[r])/2:t.height}t.exports={assign:Object.assign,getHeight:n}},function(t,e,n){var r=n(3),i=function(){function t(t,e){void 0===e&&(e={});var n=this;n.options=e,n.rootNode=r(t,e)}var e=t.prototype;return e.execute=function(){throw new Error("please override this method")},t}();t.exports=i},function(t,e,n){var r=n(4),i=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],s=function(t){return o.indexOf(t)>-1},a=i[0];function c(t,e){if(e.radial){var n=e.isHorizontal?["x","y"]:["y","x"],r=n[0],i=n[1],o={x:1/0,y:1/0},s={x:-1/0,y:-1/0},a=0;t.DFTraverse((function(t){a++;var e=t.x,n=t.y;o.x=Math.min(o.x,e),o.y=Math.min(o.y,n),s.x=Math.max(s.x,e),s.y=Math.max(s.y,n)}));var c=s[i]-o[i];if(0===c)return;var l=2*Math.PI/a;t.DFTraverse((function(e){var n=(e[i]-o[i])/c*(2*Math.PI-l)+l,s=e[r]-t[r];e.x=Math.cos(n)*s,e.y=Math.sin(n)*s}))}}t.exports=function(t,e,n){var o=e.direction||a;if(e.isHorizontal=s(o),o&&-1===i.indexOf(o))throw new TypeError("Invalid direction: "+o);if(o===i[0])n(t,e);else if(o===i[1])n(t,e),t.right2left();else if(o===i[2])n(t,e);else if(o===i[3])n(t,e),t.bottom2top();else if(o===i[4]||o===i[5]){var l=r(t,e),u=l.left,h=l.right;n(u,e),n(h,e),e.isHorizontal?u.right2left():u.bottom2top(),h.translate(u.x-h.x,u.y-h.y),t.x=u.x,t.y=h.y;var d=t.getBoundingBox();e.isHorizontal?d.top<0&&t.translate(0,-d.top):d.left<0&&t.translate(-d.left,0)}var f=e.fixedRoot;return void 0===f&&(f=!0),f&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),c(t,e),t}},function(t,e,n){var r=n(0),i=18,o=2*i,s=i,a={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||s},getVGap:function(t){return t.vgap||s},getChildren:function(t){return t.children},getHeight:function(t){return t.height||o},getWidth:function(t){var e=t.label||" ";return t.width||e.split("").length*i}};function c(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof c)return t;n.data=t;var r=e.getHGap(t),i=e.getVGap(t);return n.preH=e.getPreH(t),n.preV=e.getPreV(t),n.width=e.getWidth(t),n.height=e.getHeight(t),n.width+=n.preH,n.height+=n.preV,n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}function l(t,e,n){void 0===e&&(e={}),e=r.assign({},a,e);var i,o=new c(t,e),s=[o];if(!n&&!t.collapsed)while(i=s.shift())if(!i.data.collapsed){var l=e.getChildren(i.data),u=l?l.length:0;if(i.children=new Array(u),l&&u)for(var h=0;h<u;h++){var d=new c(l[h],e);i.children[h]=d,s.push(d),d.parent=i,d.depth=i.depth+1}}return o}r.assign(c.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},eachNode:function(t){var e,n=this,r=[n];while(e=r.shift())t(e),r=e.children.concat(r)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){var e,n=this,r=[n];while(e=r.shift())t(e),r=r.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)})),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode((function(n){n.x+=t,n.y+=e,n.x+=n.preH,n.y+=n.preV}))},right2left:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.x=t.x-2*(t.x-e.left)-t.width})),t.translate(e.width,0)},bottom2top:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.y=t.y-2*(t.y-e.top)-t.height})),t.translate(0,e.height)}}),t.exports=l},function(t,e,n){var r=n(3);t.exports=function(t,e){for(var n=r(t.data,e,!0),i=r(t.data,e,!0),o=t.children.length,s=Math.round(o/2),a=e.getSide||function(t,e){return e<s?"right":"left"},c=0;c<o;c++){var l=t.children[c],u=a(l,c);"right"===u?i.children.push(l):n.children.push(l)}return n.eachNode((function(t){t.isRoot()||(t.side="left")})),i.eachNode((function(t){t.isRoot()||(t.side="right")})),{left:n,right:i}}},function(t,e,n){var r={compactBox:n(6),dendrogram:n(8),indented:n(10),mindmap:n(12)};t.exports=r},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}var o=n(1),s=n(7),a=n(2),c=n(0),l=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.execute=function(){var t=this;return a(t.rootNode,t.options,s)},e}(o),u={};function h(t,e){return e=c.assign({},u,e),new l(t,e).execute()}t.exports=h},function(t,e){function n(t,e,n,r){void 0===r&&(r=[]);var i=this;i.w=t||0,i.h=e||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function r(t,e,n){n?t.y+=e:t.x+=e,t.children.forEach((function(t){r(t,e,n)}))}function i(t,e){var n=e?t.y:t.x;return t.children.forEach((function(t){n=Math.min(i(t,e),n)})),n}function o(t,e){var n=i(t,e);r(t,-n,e)}function s(t,e,n){n?e.y=t.x:e.x=t.x,t.c.forEach((function(t,r){s(t,e.children[r],n)}))}function a(t,e,n){void 0===n&&(n=0),e?(t.x=n,n+=t.width):(t.y=n,n+=t.height),t.children.forEach((function(t){a(t,e,n)}))}n.fromNode=function(t,e){if(!t)return null;var r=[];return t.children.forEach((function(t){r.push(n.fromNode(t,e))})),e?new n(t.height,t.width,t.x,r):new n(t.width,t.height,t.y,r)},t.exports=function(t,e){void 0===e&&(e={});var r=e.isHorizontal;function i(t){if(0!==t.cs){i(t.c[0]);for(var e=x(f(t.c[0].el),0,null),n=1;n<t.cs;++n){i(t.c[n]);var r=f(t.c[n].er);l(t,n,e),e=x(r,n,e)}v(t),c(t)}else c(t)}function c(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function l(t,e,n){var r=t.c[e-1],i=r.mod,o=t.c[e],s=o.mod;while(null!==r&&null!==o){f(r)>n.low&&(n=n.nxt);var a=i+r.prelim+r.w-(s+o.prelim);a>0&&(s+=a,u(t,e,n.index,a));var c=f(r),l=f(o);c<=l&&(r=d(r),null!==r&&(i+=r.mod)),c>=l&&(o=h(o),null!==o&&(s+=o.mod))}!r&&o?p(t,e,o,s):r&&!o&&g(t,e,r,i)}function u(t,e,n,r){t.c[e].mod+=r,t.c[e].msel+=r,t.c[e].mser+=r,m(t,e,n,r)}function h(t){return 0===t.cs?t.tl:t.c[0]}function d(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function f(t){return t.y+t.h}function p(t,e,n,r){var i=t.c[0].el;i.tl=n;var o=r-n.mod-t.c[0].msel;i.mod+=o,i.prelim-=o,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}function g(t,e,n,r){var i=t.c[e].er;i.tr=n;var o=r-n.mod-t.c[e].mser;i.mod+=o,i.prelim-=o,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}function v(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}function y(t,e){e+=t.mod,t.x=t.prelim+e,b(t);for(var n=0;n<t.cs;n++)y(t.c[n],e)}function m(t,e,n,r){if(n!==e-1){var i=e-n;t.c[n+1].shift+=r/i,t.c[e].shift-=r/i,t.c[e].change-=r-r/i}}function b(t){for(var e=0,n=0,r=0;r<t.cs;r++)e+=t.c[r].shift,n+=e+t.c[r].change,t.c[r].mod+=n}function x(t,e,n){while(null!==n&&t>=n.low)n=n.nxt;return{low:t,index:e,nxt:n}}a(t,r);var w=n.fromNode(t,r);return i(w),y(w,0),s(w,t,r),o(t,r),t}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}var o=n(1),s=n(9),a=n(2),c=n(0),l=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.execute=function(){var t=this;return t.rootNode.width=0,a(t.rootNode,t.options,s)},e}(o),u={};function h(t,e){return e=c.assign({},u,e),new l(t,e).execute()}t.exports=h},function(t,e,n){var r=n(0);function i(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=e}var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function s(t,e,n){n?(e.x=t.x,e.y=t.y):(e.x=t.y,e.y=t.x),t.children.forEach((function(t,r){s(t,e.children[r],n)}))}t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},o,e);var n,a=0;function c(t){if(!t)return null;t.width=0,t.depth&&t.depth>a&&(a=t.depth);var e=t.children,n=e.length,r=new i(t.height,[]);return e.forEach((function(t,e){var i=c(t);r.children.push(i),0===e&&(r.leftChild=i),e===n-1&&(r.rightChild=i)})),r.originNode=t,r.isLeaf=t.isLeaf(),r}function l(t){if(t.isLeaf||0===t.children.length)t.drawingDepth=a;else{var e=t.children.map((function(t){return l(t)})),n=Math.min.apply(null,e);t.drawingDepth=n-1}return t.drawingDepth}function u(t){t.x=t.drawingDepth*e.rankSep,t.isLeaf?(t.y=0,n&&(t.y=n.y+n.height+e.nodeSep,t.originNode.parent!==n.originNode.parent&&(t.y+=e.subTreeSep)),n=t):(t.children.forEach((function(t){u(t)})),t.y=(t.leftChild.y+t.rightChild.y)/2)}var h=c(t);return l(h),u(h),s(h,t,e.isHorizontal),t}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}var o=n(1),s=n(11),a=n(4),c=n(0),l=["LR","RL","H"],u=l[0],h=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.execute=function(){var t=this,e=t.options,n=t.rootNode;e.isHorizontal=!0;var r=e.indent,i=void 0===r?20:r,o=e.dropCap,c=void 0===o||o,h=e.direction,d=void 0===h?u:h,f=e.align;if(d&&-1===l.indexOf(d))throw new TypeError("Invalid direction: "+d);if(d===l[0])s(n,i,c,f);else if(d===l[1])s(n,i,c,f),n.right2left();else if(d===l[2]){var p=a(n,e),g=p.left,v=p.right;s(g,i,c,f),g.right2left(),s(v,i,c,f);var y=g.getBoundingBox();v.translate(y.width,0),n.x=v.x-n.width/2}return n},e}(o),d={};function f(t,e){return e=c.assign({},d,e),new h(t,e).execute()}t.exports=f},function(t,e,n){var r=n(0);function i(t,e,n,i,o){var s=("function"===typeof n?n(t):n)*t.depth;if(!i)try{if(t.id===t.parent.children[0].id)return t.x+=s,void(t.y=e?e.y:0)}catch(l){}if(t.x+=s,e){if(t.y=e.y+r.getHeight(e,t,o),e.parent&&t.parent.id!==e.parent.id){var a=e.parent,c=a.y+r.getHeight(a,t,o);t.y=c>t.y?c:t.y}}else t.y=0}t.exports=function(t,e,n,r){var o=null;t.eachNode((function(t){i(t,o,e,n,r),o=t}))}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}var o=n(1),s=n(13),a=n(2),c=n(0),l=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.execute=function(){var t=this;return a(t.rootNode,t.options,s)},e}(o),u={};function h(t,e){return e=c.assign({},u,e),new l(t,e).execute()}t.exports=h},function(t,e,n){var r=n(0);function i(t,e){var n=0;return t.children.length?t.children.forEach((function(t){n+=i(t,e)})):n=t.height,t._subTreeSep=e.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,n)+2*t._subTreeSep,t.totalHeight}function o(t){var e=t.children,n=e.length;if(n){e.forEach((function(t){o(t)}));var r=e[0],i=e[n-1],s=i.y-r.y+i.height,a=0;if(e.forEach((function(t){a+=t.totalHeight})),s>t.height)t.y=r.y+s/2-t.height/2;else if(1!==e.length||t.height>a){var c=t.y+(t.height-s)/2-r.y;e.forEach((function(t){t.translate(0,c)}))}else t.y=(r.y+r.height/2+i.y+i.height/2)/2-t.height/2}}var s={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},s,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse((function(t){t.x=t.parent.x+t.parent.width})),t.parent=null,i(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode((function(t){var e=t.children,n=e.length;if(n){var r=e[0];if(r.startY=t.startY+t._subTreeSep,1===n)r.y=t.y+t.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var o=e[i];o.startY=e[i-1].startY+e[i-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}})),o(t)}}])}))},24913:function(t,e,n){"use strict";var r=n(43724),i=n(35917),o=n(48686),s=n(28551),a=n(56969),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",f="writable";e.f=r?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var r=u(t,e);r&&r[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:h in n?n[h]:r[h],writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(s(t),e=a(e),s(n),i)try{return l(t,e,n)}catch(r){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},25114:function(t){function e(t){return function(e){return null==e?void 0:e[t]}}t.exports=e},25170:function(t,e,n){"use strict";var r=n(46706),i=n(94402);t.exports=r(i.proto,"size","get")||function(t){return t.size}},25397:function(t,e,n){"use strict";var r=n(47055),i=n(67750);t.exports=function(t){return r(i(t))}},25745:function(t,e,n){"use strict";var r=n(77629);t.exports=function(t,e){return r[t]||(r[t]=e||{})}},26198:function(t,e,n){"use strict";var r=n(18014);t.exports=function(t){return r(t.length)}},26269:function(t){"use strict";t.exports={}},26284:function(t,e,n){var r=n(7022);function i(t,e){var n=null==t?0:t.length;return!!n&&r(t,e,0)>-1}t.exports=i},26316:function(t,e,n){n(44114);var r=n(9386);function i(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}t.exports=i},26323:function(t){function e(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}t.exports=e},26409:function(t,e,n){var r=n(98230),i=r(Object.keys,Object);t.exports=i},27260:function(t,e,n){var r;try{r={clone:n(46158),constant:n(77083),each:n(28770),filter:n(90957),has:n(78695),isArray:n(85366),isEmpty:n(35738),isFunction:n(44823),isUndefined:n(70707),keys:n(88987),map:n(66697),reduce:n(24145),size:n(65242),transform:n(80475),union:n(28932),values:n(89545)}}catch(i){}r||(r=window._),t.exports=r},27315:function(t,e,n){"use strict";n(18111),n(7588);var r=n(34230);function i(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||s(t)}function o(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||c(t),"lr"!==e&&"rl"!==e||(u(t),s(t))}function s(t){r.forEach(t.nodes(),(function(e){a(t.node(e))})),r.forEach(t.edges(),(function(e){a(t.edge(e))}))}function a(t){var e=t.width;t.width=t.height,t.height=e}function c(t){r.forEach(t.nodes(),(function(e){l(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,l),r.has(n,"y")&&l(n)}))}function l(t){t.y=-t.y}function u(t){r.forEach(t.nodes(),(function(e){h(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,h),r.has(n,"x")&&h(n)}))}function h(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:i,undo:o}},27476:function(t,e,n){"use strict";var r=n(22195),i=n(79504);t.exports=function(t){if("Function"===r(t))return i(t)}},27546:function(t,e,n){var r=n(29531),i=n(68606),o=r(i,"Map");t.exports=o},28513:function(t,e,n){var r=n(9386),i=Array.prototype,o=i.splice;function s(t){var e=this.__data__,n=r(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():o.call(e,n,1),--this.size,!0}t.exports=s},28527:function(t,e,n){"use strict";var r=n(97080),i=n(94402).has,o=n(25170),s=n(83789),a=n(40507),c=n(9539);t.exports=function(t){var e=r(this),n=s(t);if(o(e)<n.size)return!1;var l=n.getIterator();return!1!==a(l,(function(t){if(!i(e,t))return c(l,"normal",!1)}))}},28551:function(t,e,n){"use strict";var r=n(20034),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw new o(i(t)+" is not an object")}},28770:function(t,e,n){t.exports=n(15881)},28932:function(t,e,n){var r=n(94857),i=n(2409),o=n(94094),s=n(55390),a=i((function(t){return o(r(t,1,s,!0))}));t.exports=a},29299:function(t,e,n){var r=n(99315),i=n(85091),o="[object Symbol]";function s(t){return"symbol"==typeof t||i(t)&&r(t)==o}t.exports=s},29309:function(t,e,n){"use strict";var r=n(46518),i=n(44576),o=n(59225).set,s=n(79472),a=i.setImmediate?s(o,!1):o;r({global:!0,bind:!0,enumerable:!0,forced:i.setImmediate!==a},{setImmediate:a})},29314:function(t,e,n){"use strict";var r=n(46518),i=n(69565),o=n(28551),s=n(1767),a=n(24149),c=n(99590),l=n(19462),u=n(96395),h=l((function(){var t,e,n=this.iterator,r=this.next;while(this.remaining)if(this.remaining--,t=o(i(r,n)),e=this.done=!!t.done,e)return;if(t=o(i(r,n)),e=this.done=!!t.done,!e)return t.value}));r({target:"Iterator",proto:!0,real:!0,forced:u},{drop:function(t){o(this);var e=c(a(+t));return new h(s(this),{remaining:e})}})},29531:function(t,e,n){var r=n(1976),i=n(98619);function o(t,e){var n=i(t,e);return r(n)?n:void 0}t.exports=o},29562:function(t,e,n){var r=n(60658),i=n(84276),o=n(80770),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},30085:function(t,e,n){n(18111),n(7588);var r=n(34230),i=n(74332).Graph;function o(t,e,n){var o=s(t),a=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel((function(e){return t.node(e)}));return r.forEach(t.nodes(),(function(i){var s=t.node(i),c=t.parent(i);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(i),a.setParent(i,c||o),r.forEach(t[n](i),(function(e){var n=e.v===i?e.w:e.v,o=a.edge(n,i),s=r.isUndefined(o)?0:o.weight;a.setEdge(n,i,{weight:t.edge(e).weight+s})})),r.has(s,"minRank")&&a.setNode(i,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))})),a}function s(t){var e;while(t.hasNode(e=r.uniqueId("_root")));return e}t.exports=o},30100:function(t,e,n){var r=n(69476),i=r();t.exports=i},30216:function(t,e,n){"use strict";n(18111),n(7588),n(61701);var r=n(34230);function i(t){var e={};function n(i){var o=t.node(i);if(r.has(e,i))return o.rank;e[i]=!0;var s=r.min(r.map(t.outEdges(i),(function(e){return n(e.w)-t.edge(e).minlen})));return s!==Number.POSITIVE_INFINITY&&void 0!==s&&null!==s||(s=0),o.rank=s}r.forEach(t.sources(),n)}function o(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}t.exports={longestPath:i,slack:o}},30354:function(t,e,n){var r=n(97311),i=n(15686),o=n(94751);function s(t,e){return t&&t.length?r(t,i(e,2),o):void 0}t.exports=s},30421:function(t){"use strict";t.exports={}},30531:function(t,e,n){"use strict";var r=n(46518),i=n(69565),o=n(79306),s=n(28551),a=n(1767),c=n(48646),l=n(19462),u=n(9539),h=n(96395),d=l((function(){var t,e,n=this.iterator,r=this.mapper;while(1){if(e=this.inner)try{if(t=s(i(e.next,e.iterator)),!t.done)return t.value;this.inner=null}catch(o){u(n,"throw",o)}if(t=s(i(this.next,n)),this.done=!!t.done)return;try{this.inner=c(r(t.value,this.counter++),!1)}catch(o){u(n,"throw",o)}}}));r({target:"Iterator",proto:!0,real:!0,forced:h},{flatMap:function(t){return s(this),o(t),new d(a(this),{mapper:t,inner:null})}})},30997:function(t,e,n){n(18111),n(22489);var r=n(27260),i=n(85386);function o(t){return r.filter(i(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}t.exports=o},31207:function(t,e,n){var r=n(86061),i=n(48465),o=n(47744),s=n(19692);function a(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&o(e,n.length):"string"==a&&e in n)&&r(n[e],t)}t.exports=a},31698:function(t,e,n){"use strict";var r=n(46518),i=n(44204),o=n(84916);r({target:"Set",proto:!0,real:!0,forced:!o("union")},{union:i})},31945:function(t,e,n){var r=n(60710),i=n(85091),o="[object Map]";function s(t){return i(t)&&r(t)==o}t.exports=s},32188:function(t,e,n){n(18111),n(7588);var r=n(27260),i=n(1838);t.exports=s;var o=r.constant(1);function s(t,e,n,r){return a(t,String(e),n||o,r||function(e){return t.outEdges(e)})}function a(t,e,n,r){var o,s,a={},c=new i,l=function(t){var e=t.v!==o?t.v:t.w,r=a[e],i=n(t),l=s.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);l<r.distance&&(r.distance=l,r.predecessor=o,c.decrease(e,l))};t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},c.add(t,n)}));while(c.size()>0){if(o=c.removeMin(),s=a[o],s.distance===Number.POSITIVE_INFINITY)break;r(o).forEach(l)}return a}},32475:function(t,e,n){"use strict";var r=n(46518),i=n(28527),o=n(84916),s=!o("isSupersetOf",(function(t){return!t}));r({target:"Set",proto:!0,real:!0,forced:s},{isSupersetOf:i})},32603:function(t,e,n){"use strict";var r=n(655);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},32749:function(t,e,n){var r=n(73355),i=0;function o(t){var e=++i;return r(t)+e}t.exports=o},33103:function(t,e,n){var r=n(60710),i=n(85091),o="[object Set]";function s(t){return i(t)&&r(t)==o}t.exports=s},33392:function(t,e,n){"use strict";var r=n(79504),i=0,o=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++i+o,36)}},33603:function(t,e,n){var r=n(97311),i=n(94751),o=n(16517);function s(t){return t&&t.length?r(t,o,i):void 0}t.exports=s},33706:function(t,e,n){"use strict";var r=n(79504),i=n(94901),o=n(77629),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},33717:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},33853:function(t,e,n){"use strict";var r=n(46518),i=n(64449),o=n(84916),s=!o("isDisjointFrom",(function(t){return!t}));r({target:"Set",proto:!0,real:!0,forced:s},{isDisjointFrom:i})},34230:function(t,e,n){var r;try{r={cloneDeep:n(24572),constant:n(77083),defaults:n(10405),each:n(28770),filter:n(90957),find:n(89712),flatten:n(8081),forEach:n(15881),forIn:n(41683),has:n(78695),isUndefined:n(70707),last:n(22215),map:n(66697),mapValues:n(24619),max:n(73809),merge:n(55763),min:n(33603),minBy:n(30354),now:n(21087),pick:n(99002),range:n(63422),reduce:n(24145),sortBy:n(89802),uniqueId:n(32749),values:n(89545),zipObject:n(59)}}catch(i){}r||(r=window._),t.exports=r},34376:function(t,e,n){"use strict";var r=n(22195);t.exports=Array.isArray||function(t){return"Array"===r(t)}},34520:function(t,e,n){var r=n(2409),i=n(31207);function o(t){return r((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);while(++r<o){var c=n[r];c&&t(e,c,r,s)}return e}))}t.exports=o},34527:function(t,e,n){"use strict";var r=n(43724),i=n(34376),o=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!s(t,"length").writable)throw new o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},34809:function(t,e,n){"use strict";n(44114),n(18111),n(22489),n(7588),n(61701);var r=n(34230);function i(t){var e={},n=r.filter(t.nodes(),(function(e){return!t.children(e).length})),i=r.max(r.map(n,(function(e){return t.node(e).rank}))),o=r.map(r.range(i+1),(function(){return[]}));function s(n){if(!r.has(e,n)){e[n]=!0;var i=t.node(n);o[i.rank].push(n),r.forEach(t.successors(n),s)}}var a=r.sortBy(n,(function(e){return t.node(e).rank}));return r.forEach(a,s),o}t.exports=i},35031:function(t,e,n){"use strict";var r=n(97751),i=n(79504),o=n(38480),s=n(33717),a=n(28551),c=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?c(e,n(t)):e}},35064:function(t){function e(t,e){return t>e}t.exports=e},35370:function(t,e,n){"use strict";var r=n(26198);t.exports=function(t,e,n){var i=0,o=arguments.length>2?n:r(e),s=new t(o);while(o>i)s[i]=e[i++];return s}},35522:function(t){function e(t,e){var n=-1,r=t.length;e||(e=Array(r));while(++n<r)e[n]=t[n];return e}t.exports=e},35610:function(t,e,n){"use strict";var r=n(91291),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},35738:function(t,e,n){var r=n(78659),i=n(60710),o=n(15219),s=n(85366),a=n(48465),c=n(70317),l=n(89426),u=n(29562),h="[object Map]",d="[object Set]",f=Object.prototype,p=f.hasOwnProperty;function g(t){if(null==t)return!0;if(a(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||c(t)||u(t)||o(t)))return!t.length;var e=i(t);if(e==h||e==d)return!t.size;if(l(t))return!r(t).length;for(var n in t)if(p.call(t,n))return!1;return!0}t.exports=g},35917:function(t,e,n){"use strict";var r=n(43724),i=n(79039),o=n(4055);t.exports=!r&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},36202:function(t,e,n){var r=n(69065),i=n(28513),o=n(19496),s=n(19804),a=n(26316);function c(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype["delete"]=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},36719:function(t,e,n){var r=n(4355),i=n(88987);function o(t){var e=i(t),n=e.length;while(n--){var o=e[n],s=t[o];e[n]=[o,s,r(s)]}return e}t.exports=o},36840:function(t,e,n){"use strict";var r=n(94901),i=n(24913),o=n(50283),s=n(39433);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:e;if(r(n)&&o(n,l,a),a.global)c?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(u){}c?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},36955:function(t,e,n){"use strict";var r=n(92140),i=n(94901),o=n(22195),s=n(78227),a=s("toStringTag"),c=Object,l="Arguments"===o(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=c(t),a))?n:l?o(e):"Object"===(r=o(e))&&i(e.callee)?"Arguments":r}},37467:function(t,e,n){"use strict";var r=n(37628),i=n(94644),o=i.aTypedArray,s=i.exportTypedArrayMethod,a=i.getTypedArrayConstructor;s("toReversed",(function(){return r(o(this),a(this))}))},37628:function(t,e,n){"use strict";var r=n(26198);t.exports=function(t,e){for(var n=r(t),i=new e(n),o=0;o<n;o++)i[o]=t[n-o-1];return i}},37746:function(t,e,n){var r=n(25114),i=n(88864),o=n(14915),s=n(99416);function a(t){return o(t)?r(s(t)):i(t)}t.exports=a},38469:function(t,e,n){"use strict";var r=n(79504),i=n(40507),o=n(94402),s=o.Set,a=o.proto,c=r(a.forEach),l=r(a.keys),u=l(new s).next;t.exports=function(t,e,n){return n?i({iterator:l(t),next:u},e):c(t,e)}},38478:function(t,e,n){n(44114);var r=n(1676),i=n(71281),o=n(44032),s=1,a=2;function c(t,e,n,c,l,u){var h=n&s,d=t.length,f=e.length;if(d!=f&&!(h&&f>d))return!1;var p=u.get(t),g=u.get(e);if(p&&g)return p==e&&g==t;var v=-1,y=!0,m=n&a?new r:void 0;u.set(t,e),u.set(e,t);while(++v<d){var b=t[v],x=e[v];if(c)var w=h?c(x,b,v,e,t,u):c(b,x,v,t,e,u);if(void 0!==w){if(w)continue;y=!1;break}if(m){if(!i(e,(function(t,e){if(!o(m,e)&&(b===t||l(b,t,n,c,u)))return m.push(e)}))){y=!1;break}}else if(b!==x&&!l(b,x,n,c,u)){y=!1;break}}return u["delete"](t),u["delete"](e),y}t.exports=c},38480:function(t,e,n){"use strict";var r=n(61828),i=n(88727),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},38574:function(t,e,n){"use strict";var r=n(79504),i=Error,o=r("".replace),s=function(t){return String(new i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(s);t.exports=function(t,e){if(c&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=o(t,a,"");return t}},38843:function(t,e,n){var r=n(99315),i=n(85091),o="[object Arguments]";function s(t){return i(t)&&r(t)==o}t.exports=s},39297:function(t,e,n){"use strict";var r=n(79504),i=n(48981),o=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},39414:function(t,e,n){"use strict";n(18111),n(7588);var r=n(34230),i=n(74332).Graph,o=n(30216).slack;function s(t){var e,n,r=new i({directed:!1}),s=t.nodes()[0],u=t.nodeCount();r.setNode(s,{});while(a(r,t)<u)e=c(r,t),n=r.hasNode(e.v)?o(t,e):-o(t,e),l(r,t,n);return r}function a(t,e){function n(i){r.forEach(e.nodeEdges(i),(function(r){var s=r.v,a=i===s?r.w:s;t.hasNode(a)||o(e,r)||(t.setNode(a,{}),t.setEdge(i,a,{}),n(a))}))}return r.forEach(t.nodes(),n),t.nodeCount()}function c(t,e){return r.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return o(e,n)}))}function l(t,e,n){r.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}t.exports=s},39433:function(t,e,n){"use strict";var r=n(44576),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},39519:function(t,e,n){"use strict";var r,i,o=n(44576),s=n(82839),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(r=u.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),t.exports=i},39889:function(t,e,n){var r=n(45556);function i(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}t.exports=i},39928:function(t,e,n){"use strict";var r=n(26198),i=n(91291),o=RangeError;t.exports=function(t,e,n,s){var a=r(t),c=i(n),l=c<0?a+c:c;if(l>=a||l<0)throw new o("Incorrect index");for(var u=new e(a),h=0;h<a;h++)u[h]=h===l?s:t[h];return u}},40118:function(t,e,n){var r=n(3839);function i(t,e){return r(t,e,"post")}t.exports=i},40507:function(t,e,n){"use strict";var r=n(69565);t.exports=function(t,e,n){var i,o,s=n?t:t.iterator,a=t.next;while(!(i=r(a,s)).done)if(o=e(i.value),void 0!==o)return o}},40616:function(t,e,n){"use strict";var r=n(79039);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},41683:function(t,e,n){var r=n(30100),i=n(52701),o=n(58664);function s(t,e){return null==t?t:r(t,i(e),o)}t.exports=s},42477:function(t,e,n){var r=n(50968),i=n(58664);function o(t,e){return t&&r(e,i(e),t)}t.exports=o},42530:function(t){var e=Function.prototype,n=e.toString;function r(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}t.exports=r},42787:function(t,e,n){"use strict";var r=n(39297),i=n(94901),o=n(48981),s=n(66119),a=n(12211),c=s("IE_PROTO"),l=Object,u=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=o(t);if(r(e,c))return e[c];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof l?u:null}},43223:function(t,e,n){var r=n(53886),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function o(t){return!!i&&i in t}t.exports=o},43325:function(t,e,n){var r=n(5987);function i(t,e,n){return t.set(r(t,e),n),n}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},43381:function(t,e,n){var r=n(1235),i=500;function o(t){var e=r(t,(function(t){return n.size===i&&n.clear(),t})),n=e.cache;return e}t.exports=o},43534:function(t,e,n){var r=n(92329),i=1,o=Object.prototype,s=o.hasOwnProperty;function a(t,e,n,o,a,c){var l=n&i,u=r(t),h=u.length,d=r(e),f=d.length;if(h!=f&&!l)return!1;var p=h;while(p--){var g=u[p];if(!(l?g in e:s.call(e,g)))return!1}var v=c.get(t),y=c.get(e);if(v&&y)return v==e&&y==t;var m=!0;c.set(t,e),c.set(e,t);var b=l;while(++p<h){g=u[p];var x=t[g],w=e[g];if(o)var E=l?o(w,x,g,e,t,c):o(x,w,g,t,e,c);if(!(void 0===E?x===w||a(x,w,n,o,c):E)){m=!1;break}b||(b="constructor"==g)}if(m&&!b){var k=t.constructor,S=e.constructor;k==S||!("constructor"in t)||!("constructor"in e)||"function"==typeof k&&k instanceof k&&"function"==typeof S&&S instanceof S||(m=!1)}return c["delete"](t),c["delete"](e),m}t.exports=a},43559:function(t,e,n){var r=n(68606),i=r.Uint8Array;t.exports=i},43575:function(t){function e(t,e){var n=-1,r=null==t?0:t.length,i=Array(r);while(++n<r)i[n]=e(t[n],n,t);return i}t.exports=e},43646:function(t,e,n){"use strict";n(44114),n(18111),n(22489),n(7588),n(61701);var r=n(34230);function i(t,e){var n={};r.forEach(t,(function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)})),r.forEach(e.edges(),(function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))}));var i=r.filter(n,(function(t){return!t.indegree}));return o(i)}function o(t){var e=[];function n(t){return function(e){e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&s(t,e)}}function i(e){return function(n){n["in"].push(e),0===--n.indegree&&t.push(n)}}while(t.length){var o=t.pop();e.push(o),r.forEach(o["in"].reverse(),n(o)),r.forEach(o.out,i(o))}return r.map(r.filter(e,(function(t){return!t.merged})),(function(t){return r.pick(t,["vs","i","barycenter","weight"])}))}function s(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}t.exports=i},43724:function(t,e,n){"use strict";var r=n(79039);t.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},44032:function(t){function e(t,e){return t.has(e)}t.exports=e},44114:function(t,e,n){"use strict";var r=n(46518),i=n(48981),o=n(26198),s=n(34527),a=n(96837),c=n(79039),l=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=l||!u();r({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=i(this),n=o(e),r=arguments.length;a(n+r);for(var c=0;c<r;c++)e[n]=arguments[c],n++;return s(e,n),n}})},44124:function(t,e,n){"use strict";var r=n(44576);t.exports=function(t,e){var n=r[t],i=n&&n.prototype;return i&&i[e]}},44166:function(t,e,n){n(44114);var r=n(27260);function i(t){var e,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),o),r.each(t.predecessors(i),o))}return r.each(t.nodes(),(function(t){e=[],o(t),e.length&&i.push(e)})),i}t.exports=i},44204:function(t,e,n){"use strict";var r=n(97080),i=n(94402).add,o=n(89286),s=n(83789),a=n(40507);t.exports=function(t){var e=r(this),n=s(t).getIterator(),c=o(e);return a(n,(function(t){i(c,t)})),c}},44209:function(t,e,n){"use strict";var r=n(78227),i=n(26269),o=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},44576:function(t,e,n){"use strict";var r=function(t){return t&&t.Math===Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},44709:function(t,e,n){var r=n(48070),i=n(31207),o=n(21413);function s(t){return function(e,n,s){return s&&"number"!=typeof s&&i(e,n,s)&&(n=s=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),s=void 0===s?e<n?1:-1:o(s),r(e,n,s,t)}}t.exports=s},44732:function(t,e,n){"use strict";var r=n(94644),i=n(79504),o=n(79306),s=n(35370),a=r.aTypedArray,c=r.getTypedArrayConstructor,l=r.exportTypedArrayMethod,u=i(r.TypedArrayPrototype.sort);l("toSorted",(function(t){void 0!==t&&o(t);var e=a(this),n=s(c(e),e);return u(n,t)}))},44823:function(t,e,n){var r=n(99315),i=n(19692),o="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",c="[object Proxy]";function l(t){if(!i(t))return!1;var e=r(t);return e==s||e==a||e==o||e==c}t.exports=l},45130:function(t,e,n){"use strict";n.d(e,{Ef:function(){return tt},Jo:function(){return Y},u1:function(){return q}});n(44114),n(18111),n(22489),n(7588),n(61701),n(13579),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698);var r=n(56768),i=n(24232);n(90144);
/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let o;const s="undefined"!==typeof window&&window.trustedTypes;if(s)try{o=s.createPolicy("vue",{createHTML:t=>t})}catch(rt){}const a=o?t=>o.createHTML(t):t=>t,c="http://www.w3.org/2000/svg",l="http://www.w3.org/1998/Math/MathML",u="undefined"!==typeof document?document:null,h=u&&u.createElement("template"),d={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i="svg"===e?u.createElementNS(c,t):"mathml"===e?u.createElementNS(l,t):n?u.createElement(t,{is:n}):u.createElement(t);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>u.createTextNode(t),createComment:t=>u.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>u.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),n),i===o||!(i=i.nextSibling))break}else{h.innerHTML=a("svg"===r?`<svg>${t}</svg>`:"mathml"===r?`<math>${t}</math>`:t);const i=h.content;if("svg"===r||"mathml"===r){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},f=Symbol("_vtc"),p={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};r.QP;function g(t,e,n){const r=t[f];r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const v=Symbol("_vod"),y=Symbol("_vsh");const m=Symbol("");const b=/(^|;)\s*display\s*:/;function x(t,e,n){const r=t.style,o=(0,i.Kg)(n);let s=!1;if(n&&!o){if(e)if((0,i.Kg)(e))for(const t of e.split(";")){const e=t.slice(0,t.indexOf(":")).trim();null==n[e]&&E(r,e,"")}else for(const t in e)null==n[t]&&E(r,t,"");for(const t in n)"display"===t&&(s=!0),E(r,t,n[t])}else if(o){if(e!==n){const t=r[m];t&&(n+=";"+t),r.cssText=n,s=b.test(n)}}else e&&t.removeAttribute("style");v in t&&(t[v]=s?r.display:"",t[y]&&(r.display="none"))}const w=/\s*!important$/;function E(t,e,n){if((0,i.cy)(n))n.forEach((n=>E(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=M(t,e);w.test(n)?t.setProperty((0,i.Tg)(r),n.replace(w,""),"important"):t[r]=n}}const k=["Webkit","Moz","ms"],S={};function M(t,e){const n=S[e];if(n)return n;let r=(0,i.PT)(e);if("filter"!==r&&r in t)return S[e]=r;r=(0,i.ZH)(r);for(let i=0;i<k.length;i++){const n=k[i]+r;if(n in t)return S[e]=n}return e}const O="http://www.w3.org/1999/xlink";function N(t,e,n,r,o,s=(0,i.J$)(e)){r&&e.startsWith("xlink:")?null==n?t.removeAttributeNS(O,e.slice(6,e.length)):t.setAttributeNS(O,e,n):null==n||s&&!(0,i.Y2)(n)?t.removeAttribute(e):t.setAttribute(e,s?"":(0,i.Bm)(n)?String(n):n)}function T(t,e,n,r,o){if("innerHTML"===e||"textContent"===e)return void(null!=n&&(t[e]="innerHTML"===e?a(n):n));const s=t.tagName;if("value"===e&&"PROGRESS"!==s&&!s.includes("-")){const r="OPTION"===s?t.getAttribute("value")||"":t.value,i=null==n?"checkbox"===t.type?"on":"":String(n);return r===i&&"_value"in t||(t.value=i),null==n&&t.removeAttribute(e),void(t._value=n)}let c=!1;if(""===n||null==n){const r=typeof t[e];"boolean"===r?n=(0,i.Y2)(n):null==n&&"string"===r?(n="",c=!0):"number"===r&&(n=0,c=!0)}try{t[e]=n}catch(rt){0}c&&t.removeAttribute(o||e)}function A(t,e,n,r){t.addEventListener(e,n,r)}function C(t,e,n,r){t.removeEventListener(e,n,r)}const P=Symbol("_vei");function R(t,e,n,r,i=null){const o=t[P]||(t[P]={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=L(e);if(r){const s=o[e]=F(r,i);A(t,n,s,a)}else s&&(C(t,n,s,a),o[e]=void 0)}}const _=/(?:Once|Passive|Capture)$/;function L(t){let e;if(_.test(t)){let n;e={};while(n=t.match(_))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):(0,i.Tg)(t.slice(2));return[n,e]}let D=0;const I=Promise.resolve(),j=()=>D||(I.then((()=>D=0)),D=Date.now());function F(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,r.qL)(B(t,n.value),e,5,[t])};return n.value=t,n.attached=j(),n}function B(t,e){if((0,i.cy)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const z=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,G=(t,e,n,r,o,s)=>{const a="svg"===o;"class"===e?g(t,r,a):"style"===e?x(t,n,r):(0,i.Mp)(e)?(0,i.CP)(e)||R(t,e,n,r,s):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):V(t,e,r,a))?(T(t,e,r),t.tagName.includes("-")||"value"!==e&&"checked"!==e&&"selected"!==e||N(t,e,r,a,s,"value"!==e)):!t._isVueCE||!/[A-Z]/.test(e)&&(0,i.Kg)(r)?("true-value"===e?t._trueValue=r:"false-value"===e&&(t._falseValue=r),N(t,e,r,a)):T(t,(0,i.PT)(e),r,s,e)};function V(t,e,n,r){if(r)return"innerHTML"===e||"textContent"===e||!!(e in t&&z(e)&&(0,i.Tn)(n));if("spellcheck"===e||"draggable"===e||"translate"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if("width"===e||"height"===e){const e=t.tagName;if("IMG"===e||"VIDEO"===e||"CANVAS"===e||"SOURCE"===e)return!1}return(!z(e)||!(0,i.Kg)(n))&&e in t}
/*! #__NO_SIDE_EFFECTS__ */
"undefined"!==typeof HTMLElement&&HTMLElement;Symbol("_moveCb"),Symbol("_enterCb");const W=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,i.cy)(e)?t=>(0,i.DY)(e,t):e};function U(t){t.target.composing=!0}function H(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const $=Symbol("_assign"),Y={created(t,{modifiers:{lazy:e,trim:n,number:r}},o){t[$]=W(o);const s=r||o.props&&"number"===o.props.type;A(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n&&(r=r.trim()),s&&(r=(0,i.bB)(r)),t[$](r)})),n&&A(t,"change",(()=>{t.value=t.value.trim()})),e||(A(t,"compositionstart",U),A(t,"compositionend",H),A(t,"change",H))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:o,number:s}},a){if(t[$]=W(a),t.composing)return;const c=!s&&"number"!==t.type||/^0\d/.test(t.value)?t.value:(0,i.bB)(t.value),l=null==e?"":e;if(c!==l){if(document.activeElement===t&&"range"!==t.type){if(r&&e===n)return;if(o&&t.value.trim()===l)return}t.value=l}}};const q={deep:!0,created(t,{value:e,modifiers:{number:n}},o){const s=(0,i.vM)(e);A(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>n?(0,i.bB)(K(t)):K(t)));t[$](t.multiple?s?new Set(e):e:e[0]),t._assigning=!0,(0,r.dY)((()=>{t._assigning=!1}))})),t[$]=W(o)},mounted(t,{value:e}){X(t,e)},beforeUpdate(t,e,n){t[$]=W(n)},updated(t,{value:e}){t._assigning||X(t,e)}};function X(t,e){const n=t.multiple,r=(0,i.cy)(e);if(!n||r||(0,i.vM)(e)){for(let o=0,s=t.options.length;o<s;o++){const s=t.options[o],a=K(s);if(n)if(r){const t=typeof a;s.selected="string"===t||"number"===t?e.some((t=>String(t)===String(a))):(0,i.u3)(e,a)>-1}else s.selected=e.has(a);else if((0,i.BX)(K(s),e))return void(t.selectedIndex!==o&&(t.selectedIndex=o))}n||-1===t.selectedIndex||(t.selectedIndex=-1)}}function K(t){return"_value"in t?t._value:t.value}const Z=(0,i.X$)({patchProp:G},d);let J;function Q(){return J||(J=(0,r.K9)(Z))}const tt=(...t)=>{const e=Q().createApp(...t);const{mount:n}=e;return e.mount=t=>{const r=nt(t);if(!r)return;const o=e._component;(0,i.Tn)(o)||o.render||o.template||(o.template=r.innerHTML),1===r.nodeType&&(r.textContent="");const s=n(r,!1,et(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},e};function et(t){return t instanceof SVGElement?"svg":"function"===typeof MathMLElement&&t instanceof MathMLElement?"mathml":void 0}function nt(t){if((0,i.Kg)(t)){const e=document.querySelector(t);return e}return t}},45475:function(t,e,n){"use strict";n(18111),n(7588),n(61701);var r=n(34230),i=n(6247),o=n(96660).positionX;function s(t){t=i.asNonCompoundGraph(t),a(t),r.forEach(o(t),(function(e,n){t.node(n).x=e}))}function a(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,o=0;r.forEach(e,(function(e){var i=r.max(r.map(e,(function(e){return t.node(e).height})));r.forEach(e,(function(e){t.node(e).y=o+i/2})),o+=i+n}))}t.exports=s},45556:function(t,e,n){var r=n(29531),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},45761:function(t){var e=/\s/;function n(t){var n=t.length;while(n--&&e.test(t.charAt(n)));return n}t.exports=n},45876:function(t,e,n){"use strict";var r=n(46518),i=n(53838),o=n(84916),s=!o("isSubsetOf",(function(t){return t}));r({target:"Set",proto:!0,real:!0,forced:s},{isSubsetOf:i})},46106:function(t,e,n){var r=n(21413);function i(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}t.exports=i},46158:function(t,e,n){var r=n(20502),i=4;function o(t){return r(t,i)}t.exports=o},46518:function(t,e,n){"use strict";var r=n(44576),i=n(77347).f,o=n(66699),s=n(36840),a=n(39433),c=n(77740),l=n(92796);t.exports=function(t,e){var n,u,h,d,f,p,g=t.target,v=t.global,y=t.stat;if(u=v?r:y?r[g]||a(g,{}):r[g]&&r[g].prototype,u)for(h in e){if(f=e[h],t.dontCallGetSet?(p=i(u,h),d=p&&p.value):d=u[h],n=l(v?h:g+(y?".":"#")+h,t.forced),!n&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(t.sham||d&&d.sham)&&o(f,"sham",!0),s(u,h,f,t)}}},46706:function(t,e,n){"use strict";var r=n(79504),i=n(79306);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(o){}}},46967:function(t,e,n){var r=n(52387),i=n(82119),o=n(71990);function s(t,e,n){var s=-1,a=e.length,c={};while(++s<a){var l=e[s],u=r(t,l);n(u,l)&&i(c,o(l,t),u)}return c}t.exports=s},47045:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports["default"]=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports["default"]=t.exports},47055:function(t,e,n){"use strict";var r=n(79504),i=n(79039),o=n(22195),s=Object,a=r("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===o(t)?a(t,""):s(t)}:s},47566:function(t,e,n){"use strict";var r=n(36840),i=n(79504),o=n(655),s=n(22812),a=URLSearchParams,c=a.prototype,l=i(c.getAll),u=i(c.has),h=new a("a=1");!h.has("a",2)&&h.has("a",void 0)||r(c,"has",(function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return u(this,t);var r=l(this,t);s(e,1);var i=o(n),a=0;while(a<r.length)if(r[a++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},47744:function(t){var e=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function r(t,r){var i=typeof t;return r=null==r?e:r,!!r&&("number"==i||"symbol"!=i&&n.test(t))&&t>-1&&t%1==0&&t<r}t.exports=r},47845:function(t,e,n){t.exports={Graph:n(8961),version:n(58109)}},48070:function(t){var e=Math.ceil,n=Math.max;function r(t,r,i,o){var s=-1,a=n(e((r-t)/(i||1)),0),c=Array(a);while(a--)c[o?a:++s]=t,t+=i;return c}t.exports=r},48465:function(t,e,n){var r=n(44823),i=n(59851);function o(t){return null!=t&&i(t.length)&&!r(t)}t.exports=o},48605:function(t,e,n){var r=n(47845);t.exports={Graph:r.Graph,json:n(96599),alg:n(82900),version:r.version}},48646:function(t,e,n){"use strict";var r=n(69565),i=n(28551),o=n(1767),s=n(50851);t.exports=function(t,e){e&&"string"===typeof t||i(t);var n=s(t);return o(i(void 0!==n?r(n,t):t))}},48686:function(t,e,n){"use strict";var r=n(43724),i=n(79039);t.exports=r&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},48731:function(t){function e(t,e,n,r){var i=-1,o=null==t?0:t.length;r&&o&&(n=t[++i]);while(++i<o)n=e(n,t[i],i,t);return n}t.exports=e},48773:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},48882:function(t,e,n){var r=n(43559);function i(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}t.exports=i},48981:function(t,e,n){"use strict";var r=n(67750),i=Object;t.exports=function(t){return i(r(t))}},49866:function(t,e,n){var r=n(50968),i=n(88987);function o(t,e){return t&&r(e,i(e),t)}t.exports=o},50283:function(t,e,n){"use strict";var r=n(79504),i=n(79039),o=n(94901),s=n(39297),a=n(43724),c=n(10350).CONFIGURABLE,l=n(33706),u=n(91181),h=u.enforce,d=u.get,f=String,p=Object.defineProperty,g=r("".slice),v=r("".replace),y=r([].join),m=a&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),b=String(String).split("String"),x=t.exports=function(t,e,n){"Symbol("===g(f(e),0,7)&&(e="["+v(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||c&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),m&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var r=h(t);return s(r,"source")||(r.source=y(b,"string"==typeof e?e:"")),t};Function.prototype.toString=x((function(){return o(this)&&d(this).source||l(this)}),"toString")},50851:function(t,e,n){"use strict";var r=n(36955),i=n(55966),o=n(64117),s=n(26269),a=n(78227),c=a("iterator");t.exports=function(t){if(!o(t))return i(t,c)||i(t,"@@iterator")||s[r(t)]}},50968:function(t,e,n){var r=n(7966),i=n(39889);function o(t,e,n,o){var s=!n;n||(n={});var a=-1,c=e.length;while(++a<c){var l=e[a],u=o?o(n[l],t[l],l,n,t):void 0;void 0===u&&(u=t[l]),s?i(n,l,u):r(n,l,u)}return n}t.exports=o},51297:function(t){function e(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=e},51683:function(t,e,n){var r=n(19692),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},51916:function(t,e,n){var r=n(6849),i="__lodash_hash_undefined__";function o(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}t.exports=o},52387:function(t,e,n){var r=n(71990),i=n(99416);function o(t,e){e=r(e,t);var n=0,o=e.length;while(null!=t&&n<o)t=t[i(e[n++])];return n&&n==o?t:void 0}t.exports=o},52587:function(t,e,n){"use strict";n(18111),n(22489),n(20116),n(7588);var r=n(34230),i=n(39414),o=n(30216).slack,s=n(30216).longestPath,a=n(74332).alg.preorder,c=n(74332).alg.postorder,l=n(6247).simplify;function u(t){t=l(t),s(t);var e,n,r=i(t);p(r),h(r,t);while(e=v(r))n=y(r,t,e),m(r,t,e,n)}function h(t,e){var n=c(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){d(t,e,n)}))}function d(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=f(t,e,n)}function f(t,e,n){var i=t.node(n),o=i.parent,s=!0,a=e.edge(n,o),c=0;return a||(s=!1,a=e.edge(o,n)),c=a.weight,r.forEach(e.nodeEdges(n),(function(r){var i=r.v===n,a=i?r.w:r.v;if(a!==o){var l=i===s,u=e.edge(r).weight;if(c+=l?u:-u,x(t,n,a)){var h=t.edge(n,a).cutvalue;c+=l?-h:h}}})),c}function p(t,e){arguments.length<2&&(e=t.nodes()[0]),g(t,{},1,e)}function g(t,e,n,i,o){var s=n,a=t.node(i);return e[i]=!0,r.forEach(t.neighbors(i),(function(o){r.has(e,o)||(n=g(t,e,n,o,i))})),a.low=s,a.lim=n++,o?a.parent=o:delete a.parent,n}function v(t){return r.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function y(t,e,n){var i=n.v,s=n.w;e.hasEdge(i,s)||(i=n.w,s=n.v);var a=t.node(i),c=t.node(s),l=a,u=!1;a.lim>c.lim&&(l=c,u=!0);var h=r.filter(e.edges(),(function(e){return u===w(t,t.node(e.v),l)&&u!==w(t,t.node(e.w),l)}));return r.minBy(h,(function(t){return o(e,t)}))}function m(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),p(t),h(t,e),b(t,e)}function b(t,e){var n=r.find(t.nodes(),(function(t){return!e.node(t).parent})),i=a(t,n);i=i.slice(1),r.forEach(i,(function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))}function x(t,e,n){return t.hasEdge(e,n)}function w(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=u,u.initLowLimValues=p,u.initCutValues=h,u.calcCutValue=f,u.leaveEdge=v,u.enterEdge=y,u.exchangeEdges=m},52701:function(t,e,n){var r=n(16517);function i(t){return"function"==typeof t?t:r}t.exports=i},52967:function(t,e,n){"use strict";var r=n(46706),i=n(20034),o=n(67750),s=n(73506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(a){}return function(n,r){return o(n),s(r),i(n)?(e?t(n,r):n.__proto__=r,n):n}}():void 0)},53505:function(t,e,n){var r=n(29299);function i(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t===t,s=r(t),a=void 0!==e,c=null===e,l=e===e,u=r(e);if(!c&&!u&&!s&&t>e||s&&a&&l&&!c&&!u||i&&a&&l||!n&&l||!o)return 1;if(!i&&!s&&!u&&t<e||u&&n&&o&&!i&&!s||c&&n&&o||!a&&o||!l)return-1}return 0}t.exports=i},53698:function(t,e,n){var r=n(20288),i=Math.max;function o(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){var o=arguments,s=-1,a=i(o.length-e,0),c=Array(a);while(++s<a)c[s]=o[e+s];s=-1;var l=Array(e+1);while(++s<e)l[s]=o[s];return l[e]=n(c),r(t,this,l)}}t.exports=o},53838:function(t,e,n){"use strict";var r=n(97080),i=n(25170),o=n(38469),s=n(83789);t.exports=function(t){var e=r(this),n=s(t);return!(i(e)>n.size)&&!1!==o(e,(function(t){if(!n.includes(t))return!1}),!0)}},53886:function(t,e,n){var r=n(68606),i=r["__core-js_shared__"];t.exports=i},54878:function(t,e,n){function r(){var t={};t._next=t._prev=t,this._sentinel=t}function i(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if("_next"!==t&&"_prev"!==t)return e}n(44114),t.exports=r,r.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return i(e),e},r.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&i(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},r.prototype.toString=function(){var t=[],e=this._sentinel,n=e._prev;while(n!==e)t.push(JSON.stringify(n,o)),n=n._prev;return"["+t.join(", ")+"]"}},55002:function(t){"use strict";t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},55169:function(t,e,n){"use strict";var r=n(3238),i=TypeError;t.exports=function(t){if(r(t))throw new i("ArrayBuffer is detached");return t}},55205:function(t,e,n){var r=n(55395),i=n(72327),o=Object.hasOwnProperty,s=Object.create(null);for(var a in r)o.call(r,a)&&(s[r[a]]=a);var c=t.exports={to:{},get:{}};function l(t,e,n){return Math.min(Math.max(e,t),n)}function u(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}c.get=function(t){var e,n,r=t.substring(0,3).toLowerCase();switch(r){case"hsl":e=c.get.hsl(t),n="hsl";break;case"hwb":e=c.get.hwb(t),n="hwb";break;default:e=c.get.rgb(t),n="rgb";break}return e?{model:n,value:e}:null},c.get.rgb=function(t){if(!t)return null;var e,n,i,s=/^#([a-f0-9]{3,4})$/i,a=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,c=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,u=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,h=/^(\w+)$/,d=[0,0,0,1];if(e=t.match(a)){for(i=e[2],e=e[1],n=0;n<3;n++){var f=2*n;d[n]=parseInt(e.slice(f,f+2),16)}i&&(d[3]=parseInt(i,16)/255)}else if(e=t.match(s)){for(e=e[1],i=e[3],n=0;n<3;n++)d[n]=parseInt(e[n]+e[n],16);i&&(d[3]=parseInt(i+i,16)/255)}else if(e=t.match(c)){for(n=0;n<3;n++)d[n]=parseInt(e[n+1],0);e[4]&&(e[5]?d[3]=.01*parseFloat(e[4]):d[3]=parseFloat(e[4]))}else{if(!(e=t.match(u)))return(e=t.match(h))?"transparent"===e[1]?[0,0,0,0]:o.call(r,e[1])?(d=r[e[1]],d[3]=1,d):null:null;for(n=0;n<3;n++)d[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(e[5]?d[3]=.01*parseFloat(e[4]):d[3]=parseFloat(e[4]))}for(n=0;n<3;n++)d[n]=l(d[n],0,255);return d[3]=l(d[3],0,1),d},c.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,o=l(parseFloat(n[2]),0,100),s=l(parseFloat(n[3]),0,100),a=l(isNaN(r)?1:r,0,1);return[i,o,s,a]}return null},c.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,o=l(parseFloat(n[2]),0,100),s=l(parseFloat(n[3]),0,100),a=l(isNaN(r)?1:r,0,1);return[i,o,s,a]}return null},c.to.hex=function(){var t=i(arguments);return"#"+u(t[0])+u(t[1])+u(t[2])+(t[3]<1?u(Math.round(255*t[3])):"")},c.to.rgb=function(){var t=i(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},c.to.rgb.percent=function(){var t=i(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},c.to.hsl=function(){var t=i(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},c.to.hwb=function(){var t=i(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},c.to.keyword=function(t){return s[t.slice(0,3)]}},55387:function(t,e,n){n(44114);var r=n(27260);function i(t){var e={},n={},i=[];function s(a){if(r.has(n,a))throw new o;r.has(e,a)||(n[a]=!0,e[a]=!0,r.each(t.predecessors(a),s),delete n[a],i.push(a))}if(r.each(t.sinks(),s),r.size(e)!==t.nodeCount())throw new o;return i}function o(){}t.exports=i,i.CycleException=o,o.prototype=new Error},55390:function(t,e,n){var r=n(48465),i=n(85091);function o(t){return i(t)&&r(t)}t.exports=o},55395:function(t){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},55763:function(t,e,n){var r=n(74907),i=n(34520),o=i((function(t,e,n){r(t,e,n)}));t.exports=o},55966:function(t,e,n){"use strict";var r=n(79306),i=n(64117);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},56279:function(t,e,n){"use strict";var r=n(36840);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},56376:function(t,e,n){n(44114),n(18111),n(7588),n(61701);var r=n(34230),i=n(74332).Graph,o=n(54878);t.exports=a;var s=r.constant(1);function a(t,e){if(t.nodeCount()<=1)return[];var n=u(t,e||s),i=c(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(i,(function(e){return t.outEdges(e.v,e.w)})),!0)}function c(t,e,n){var r,i=[],o=e[e.length-1],s=e[0];while(t.nodeCount()){while(r=s.dequeue())l(t,e,n,r);while(r=o.dequeue())l(t,e,n,r);if(t.nodeCount())for(var a=e.length-2;a>0;--a)if(r=e[a].dequeue(),r){i=i.concat(l(t,e,n,r,!0));break}}return i}function l(t,e,n,i,o){var s=o?[]:void 0;return r.forEach(t.inEdges(i.v),(function(r){var i=t.edge(r),a=t.node(r.v);o&&s.push({v:r.v,w:r.w}),a.out-=i,h(e,n,a)})),r.forEach(t.outEdges(i.v),(function(r){var i=t.edge(r),o=r.w,s=t.node(o);s["in"]-=i,h(e,n,s)})),t.removeNode(i.v),s}function u(t,e){var n=new i,s=0,a=0;r.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),r.forEach(t.edges(),(function(t){var r=n.edge(t.v,t.w)||0,i=e(t),o=r+i;n.setEdge(t.v,t.w,o),a=Math.max(a,n.node(t.v).out+=i),s=Math.max(s,n.node(t.w)["in"]+=i)}));var c=r.range(a+s+3).map((function(){return new o})),l=s+1;return r.forEach(n.nodes(),(function(t){h(c,l,n.node(t))})),{graph:n,buckets:c,zeroIdx:l}}function h(t,e,n){n.out?n["in"]?t[n.out-n["in"]+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},56636:function(t,e,n){n(18111),n(61701);var r=n(13883);function i(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}t.exports=i},56768:function(t,e,n){"use strict";n.d(e,{$u:function(){return it},CE:function(){return Ye},Df:function(){return G},FK:function(){return Ie},Fv:function(){return sn},Gy:function(){return D},K9:function(){return le},Lk:function(){return Qe},MZ:function(){return z},OW:function(){return B},Q3:function(){return an},QP:function(){return j},Wv:function(){return qe},bF:function(){return tn},bo:function(){return A},dY:function(){return v},g2:function(){return dt},nI:function(){return yn},pI:function(){return vt},qL:function(){return s},uX:function(){return Ve}});n(44114),n(18111),n(81148),n(22489),n(7588),n(61701),n(18237),n(13579),n(69479),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698);var r=n(90144),i=n(24232);function o(t,e,n,r){try{return r?t(...r):t()}catch(i){a(i,e,n)}}function s(t,e,n,r){if((0,i.Tn)(t)){const s=o(t,e,n,r);return s&&(0,i.yL)(s)&&s.catch((t=>{a(t,e,n)})),s}if((0,i.cy)(t)){const i=[];for(let o=0;o<t.length;o++)i.push(s(t[o],e,n,r));return i}}function a(t,e,n,s=!0){const a=e?e.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:u}=e&&e.appContext.config||i.MZ;if(e){let i=e.parent;const s=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;while(i){const e=i.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,s,a))return;i=i.parent}if(l)return(0,r.C4)(),o(l,null,10,[t,s,a]),void(0,r.bl)()}c(t,n,a,s,u)}function c(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const l=[];let u=-1;const h=[];let d=null,f=0;const p=Promise.resolve();let g=null;function v(t){const e=g||p;return t?e.then(this?t.bind(this):t):e}function y(t){let e=u+1,n=l.length;while(e<n){const r=e+n>>>1,i=l[r],o=k(i);o<t||o===t&&2&i.flags?e=r+1:n=r}return e}function m(t){if(!(1&t.flags)){const e=k(t),n=l[l.length-1];!n||!(2&t.flags)&&e>=k(n)?l.push(t):l.splice(y(e),0,t),t.flags|=1,b()}}function b(){g||(g=p.then(S))}function x(t){(0,i.cy)(t)?h.push(...t):d&&-1===t.id?d.splice(f+1,0,t):1&t.flags||(h.push(t),t.flags|=1),b()}function w(t,e,n=u+1){for(0;n<l.length;n++){const e=l[n];if(e&&2&e.flags){if(t&&e.id!==t.uid)continue;0,l.splice(n,1),n--,4&e.flags&&(e.flags&=-2),e(),4&e.flags||(e.flags&=-2)}}}function E(t){if(h.length){const t=[...new Set(h)].sort(((t,e)=>k(t)-k(e)));if(h.length=0,d)return void d.push(...t);for(d=t,f=0;f<d.length;f++){const t=d[f];0,4&t.flags&&(t.flags&=-2),8&t.flags||t(),t.flags&=-2}d=null,f=0}}const k=t=>null==t.id?2&t.flags?-1:1/0:t.id;function S(t){i.tE;try{for(u=0;u<l.length;u++){const t=l[u];!t||8&t.flags||(4&t.flags&&(t.flags&=-2),o(t,t.i,t.i?15:14),4&t.flags||(t.flags&=-2))}}finally{for(;u<l.length;u++){const t=l[u];t&&(t.flags&=-2)}u=-1,l.length=0,E(t),g=null,(l.length||h.length)&&S(t)}}let M=null,O=null;function N(t){const e=M;return M=t,O=t&&t.type.__scopeId||null,e}function T(t,e=M,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&He(-1);const i=N(e);let o;try{o=t(...n)}finally{N(i),r._d&&He(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function A(t,e){if(null===M)return t;const n=Rn(M),o=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[t,a,c,l=i.MZ]=e[s];t&&((0,i.Tn)(t)&&(t={mounted:t,updated:t}),t.deep&&(0,r.hV)(a),o.push({dir:t,instance:n,value:a,oldValue:void 0,arg:c,modifiers:l}))}return t}function C(t,e,n,i){const o=t.dirs,a=e&&e.dirs;for(let c=0;c<o.length;c++){const l=o[c];a&&(l.oldValue=a[c].value);let u=l.dir[i];u&&((0,r.C4)(),s(u,n,8,[t.el,l,t,e]),(0,r.bl)())}}const P=Symbol("_vte"),R=t=>t.__isTeleport;const _=Symbol("_leaveCb"),L=Symbol("_enterCb");function D(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return nt((()=>{t.isMounted=!0})),ot((()=>{t.isUnmounting=!0})),t}const I=[Function,Array],j={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:I,onEnter:I,onAfterEnter:I,onEnterCancelled:I,onBeforeLeave:I,onLeave:I,onAfterLeave:I,onLeaveCancelled:I,onBeforeAppear:I,onAppear:I,onAfterAppear:I,onAppearCancelled:I};function F(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function B(t,e,n,r,o){const{appear:a,mode:c,persisted:l=!1,onBeforeEnter:u,onEnter:h,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:v,onLeaveCancelled:y,onBeforeAppear:m,onAppear:b,onAfterAppear:x,onAppearCancelled:w}=e,E=String(t.key),k=F(n,t),S=(t,e)=>{t&&s(t,r,9,e)},M=(t,e)=>{const n=e[1];S(t,e),(0,i.cy)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},O={mode:c,persisted:l,beforeEnter(e){let r=u;if(!n.isMounted){if(!a)return;r=m||u}e[_]&&e[_](!0);const i=k[E];i&&Ke(t,i)&&i.el[_]&&i.el[_](),S(r,[e])},enter(t){let e=h,r=d,i=f;if(!n.isMounted){if(!a)return;e=b||h,r=x||d,i=w||f}let o=!1;const s=t[L]=e=>{o||(o=!0,S(e?i:r,[t]),O.delayedLeave&&O.delayedLeave(),t[L]=void 0)};e?M(e,[t,s]):s()},leave(e,r){const i=String(t.key);if(e[L]&&e[L](!0),n.isUnmounting)return r();S(p,[e]);let o=!1;const s=e[_]=n=>{o||(o=!0,r(),S(n?y:v,[e]),e[_]=void 0,k[i]===t&&delete k[i])};k[i]=t,g?M(g,[e,s]):s()},clone(t){const i=B(t,e,n,r,o);return o&&o(i),i}};return O}function z(t,e){6&t.shapeFlag&&t.component?(t.transition=e,z(t.component.subTree,e)):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function G(t,e=!1,n){let r=[],i=0;for(let o=0;o<t.length;o++){let s=t[o];const a=null==n?s.key:String(n)+String(null!=s.key?s.key:o);s.type===Ie?(128&s.patchFlag&&i++,r=r.concat(G(s.children,e,a))):(e||s.type!==Fe)&&r.push(null!=a?rn(s,{key:a}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}
/*! #__NO_SIDE_EFFECTS__ */function V(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function W(t,e,n,s,a=!1){if((0,i.cy)(t))return void t.forEach(((t,r)=>W(t,e&&((0,i.cy)(e)?e[r]:e),n,s,a)));if(U(s)&&!a)return void(512&s.shapeFlag&&s.type.__asyncResolved&&s.component.subTree.component&&W(t,e,n,s.component.subTree));const c=4&s.shapeFlag?Rn(s.component):s.el,l=a?null:c,{i:u,r:h}=t;const d=e&&e.r,f=u.refs===i.MZ?u.refs={}:u.refs,p=u.setupState,g=(0,r.ux)(p),v=p===i.MZ?()=>!1:t=>(0,i.$3)(g,t);if(null!=d&&d!==h&&((0,i.Kg)(d)?(f[d]=null,v(d)&&(p[d]=null)):(0,r.i9)(d)&&(d.value=null)),(0,i.Tn)(h))o(h,u,12,[l,f]);else{const e=(0,i.Kg)(h),o=(0,r.i9)(h);if(e||o){const r=()=>{if(t.f){const n=e?v(h)?p[h]:f[h]:h.value;a?(0,i.cy)(n)&&(0,i.TF)(n,c):(0,i.cy)(n)?n.includes(c)||n.push(c):e?(f[h]=[c],v(h)&&(p[h]=f[h])):(h.value=[c],t.k&&(f[t.k]=h.value))}else e?(f[h]=l,v(h)&&(p[h]=l)):o&&(h.value=l,t.k&&(f[t.k]=l))};l?(r.id=-1,ce(r,n)):r()}else 0}}(0,i.We)().requestIdleCallback,(0,i.We)().cancelIdleCallback;const U=t=>!!t.type.__asyncLoader
/*! #__NO_SIDE_EFFECTS__ */;const H=t=>t.type.__isKeepAlive;RegExp,RegExp;function $(t,e){return(0,i.cy)(t)?t.some((t=>$(t,e))):(0,i.Kg)(t)?t.split(",").includes(e):!!(0,i.gd)(t)&&(t.lastIndex=0,t.test(e))}function Y(t,e){X(t,"a",e)}function q(t,e){X(t,"da",e)}function X(t,e,n=vn){const r=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(Q(e,r,n),n){let t=n.parent;while(t&&t.parent)H(t.parent.vnode)&&K(r,e,n,t),t=t.parent}}function K(t,e,n,r){const o=Q(e,t,r,!0);st((()=>{(0,i.TF)(r[e],o)}),n)}function Z(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function J(t){return 128&t.shapeFlag?t.ssContent:t}function Q(t,e,n=vn,i=!1){if(n){const o=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...i)=>{(0,r.C4)();const o=xn(n),a=s(e,n,t,i);return o(),(0,r.bl)(),a});return i?o.unshift(a):o.push(a),a}}const tt=t=>(e,n=vn)=>{Mn&&"sp"!==t||Q(t,((...t)=>e(...t)),n)},et=tt("bm"),nt=tt("m"),rt=tt("bu"),it=tt("u"),ot=tt("bum"),st=tt("um"),at=tt("sp"),ct=tt("rtg"),lt=tt("rtc");function ut(t,e=vn){Q("ec",t,e)}const ht="components";function dt(t,e){return pt(ht,t,!0,e)||t}const ft=Symbol.for("v-ndc");function pt(t,e,n=!0,r=!1){const o=M||vn;if(o){const n=o.type;if(t===ht){const t=_n(n,!1);if(t&&(t===e||t===(0,i.PT)(e)||t===(0,i.ZH)((0,i.PT)(e))))return n}const s=gt(o[t]||n[t],e)||gt(o.appContext[t],e);return!s&&r?n:s}}function gt(t,e){return t&&(t[e]||t[(0,i.PT)(e)]||t[(0,i.ZH)((0,i.PT)(e))])}function vt(t,e,n,o){let s;const a=n&&n[o],c=(0,i.cy)(t);if(c||(0,i.Kg)(t)){const n=c&&(0,r.g8)(t);let i=!1;n&&(i=!(0,r.fE)(t),t=(0,r.qA)(t)),s=new Array(t.length);for(let o=0,c=t.length;o<c;o++)s[o]=e(i?(0,r.lJ)(t[o]):t[o],o,void 0,a&&a[o])}else if("number"===typeof t){0,s=new Array(t);for(let n=0;n<t;n++)s[n]=e(n+1,n,void 0,a&&a[n])}else if((0,i.Gv)(t))if(t[Symbol.iterator])s=Array.from(t,((t,n)=>e(t,n,void 0,a&&a[n])));else{const n=Object.keys(t);s=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];s[r]=e(t[i],i,r,a&&a[r])}}else s=[];return n&&(n[o]=s),s}const yt=t=>t?En(t)?Rn(t):yt(t.parent):null,mt=(0,i.X$)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>yt(t.parent),$root:t=>yt(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Nt(t),$forceUpdate:t=>t.f||(t.f=()=>{m(t.update)}),$nextTick:t=>t.n||(t.n=v.bind(t.proxy)),$watch:t=>Ee.bind(t)}),bt=(t,e)=>t!==i.MZ&&!t.__isScriptSetup&&(0,i.$3)(t,e),xt={get({_:t},e){if("__v_skip"===e)return!0;const{ctx:n,setupState:o,data:s,props:a,accessCache:c,type:l,appContext:u}=t;let h;if("$"!==e[0]){const r=c[e];if(void 0!==r)switch(r){case 1:return o[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(bt(o,e))return c[e]=1,o[e];if(s!==i.MZ&&(0,i.$3)(s,e))return c[e]=2,s[e];if((h=t.propsOptions[0])&&(0,i.$3)(h,e))return c[e]=3,a[e];if(n!==i.MZ&&(0,i.$3)(n,e))return c[e]=4,n[e];Et&&(c[e]=0)}}const d=mt[e];let f,p;return d?("$attrs"===e&&(0,r.u4)(t.attrs,"get",""),d(t)):(f=l.__cssModules)&&(f=f[e])?f:n!==i.MZ&&(0,i.$3)(n,e)?(c[e]=4,n[e]):(p=u.config.globalProperties,(0,i.$3)(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:o,ctx:s}=t;return bt(o,e)?(o[e]=n,!0):r!==i.MZ&&(0,i.$3)(r,e)?(r[e]=n,!0):!(0,i.$3)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(s[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:s}},a){let c;return!!n[a]||t!==i.MZ&&(0,i.$3)(t,a)||bt(e,a)||(c=s[0])&&(0,i.$3)(c,a)||(0,i.$3)(r,a)||(0,i.$3)(mt,a)||(0,i.$3)(o.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,i.$3)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function wt(t){return(0,i.cy)(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}let Et=!0;function kt(t){const e=Nt(t),n=t.proxy,o=t.ctx;Et=!1,e.beforeCreate&&Mt(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:c,watch:l,provide:u,inject:h,created:d,beforeMount:f,mounted:p,beforeUpdate:g,updated:v,activated:y,deactivated:m,beforeDestroy:b,beforeUnmount:x,destroyed:w,unmounted:E,render:k,renderTracked:S,renderTriggered:M,errorCaptured:O,serverPrefetch:N,expose:T,inheritAttrs:A,components:C,directives:P,filters:R}=e,_=null;if(h&&St(h,o,_),c)for(const r in c){const t=c[r];(0,i.Tn)(t)&&(o[r]=t.bind(n))}if(s){0;const e=s.call(n,n);0,(0,i.Gv)(e)&&(t.data=(0,r.Kh)(e))}if(Et=!0,a)for(const r in a){const t=a[r],e=(0,i.Tn)(t)?t.bind(n,n):(0,i.Tn)(t.get)?t.get.bind(n,n):i.tE;0;const s=!(0,i.Tn)(t)&&(0,i.Tn)(t.set)?t.set.bind(n):i.tE,c=Dn({get:e,set:s});Object.defineProperty(o,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:t=>c.value=t})}if(l)for(const r in l)Ot(l[r],o,n,r);if(u){const t=(0,i.Tn)(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{Gt(e,t[e])}))}function L(t,e){(0,i.cy)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(d&&Mt(d,t,"c"),L(et,f),L(nt,p),L(rt,g),L(it,v),L(Y,y),L(q,m),L(ut,O),L(lt,S),L(ct,M),L(ot,x),L(st,E),L(at,N),(0,i.cy)(T))if(T.length){const e=t.exposed||(t.exposed={});T.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});k&&t.render===i.tE&&(t.render=k),null!=A&&(t.inheritAttrs=A),C&&(t.components=C),P&&(t.directives=P),N&&V(t)}function St(t,e,n=i.tE){(0,i.cy)(t)&&(t=Rt(t));for(const o in t){const n=t[o];let s;s=(0,i.Gv)(n)?"default"in n?Vt(n.from||o,n.default,!0):Vt(n.from||o):Vt(n),(0,r.i9)(s)?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:t=>s.value=t}):e[o]=s}}function Mt(t,e,n){s((0,i.cy)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function Ot(t,e,n,r){let o=r.includes(".")?ke(n,r):()=>n[r];if((0,i.Kg)(t)){const n=e[t];(0,i.Tn)(n)&&xe(o,n)}else if((0,i.Tn)(t))xe(o,t.bind(n));else if((0,i.Gv)(t))if((0,i.cy)(t))t.forEach((t=>Ot(t,e,n,r)));else{const r=(0,i.Tn)(t.handler)?t.handler.bind(n):e[t.handler];(0,i.Tn)(r)&&xe(o,r,t)}else 0}function Nt(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,c=s.get(e);let l;return c?l=c:o.length||n||r?(l={},o.length&&o.forEach((t=>Tt(l,t,a,!0))),Tt(l,e,a)):l=e,(0,i.Gv)(e)&&s.set(e,l),l}function Tt(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&Tt(t,o,n,!0),i&&i.forEach((e=>Tt(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=At[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const At={data:Ct,props:Dt,emits:Dt,methods:Lt,computed:Lt,beforeCreate:_t,created:_t,beforeMount:_t,mounted:_t,beforeUpdate:_t,updated:_t,beforeDestroy:_t,beforeUnmount:_t,destroyed:_t,unmounted:_t,activated:_t,deactivated:_t,errorCaptured:_t,serverPrefetch:_t,components:Lt,directives:Lt,watch:It,provide:Ct,inject:Pt};function Ct(t,e){return e?t?function(){return(0,i.X$)((0,i.Tn)(t)?t.call(this,this):t,(0,i.Tn)(e)?e.call(this,this):e)}:e:t}function Pt(t,e){return Lt(Rt(t),Rt(e))}function Rt(t){if((0,i.cy)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function _t(t,e){return t?[...new Set([].concat(t,e))]:e}function Lt(t,e){return t?(0,i.X$)(Object.create(null),t,e):e}function Dt(t,e){return t?(0,i.cy)(t)&&(0,i.cy)(e)?[...new Set([...t,...e])]:(0,i.X$)(Object.create(null),wt(t),wt(null!=e?e:{})):e}function It(t,e){if(!t)return e;if(!e)return t;const n=(0,i.X$)(Object.create(null),t);for(const r in e)n[r]=_t(t[r],e[r]);return n}function jt(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ft=0;function Bt(t,e){return function(n,r=null){(0,i.Tn)(n)||(n=(0,i.X$)({},n)),null==r||(0,i.Gv)(r)||(r=null);const o=jt(),a=new WeakSet,c=[];let l=!1;const u=o.app={_uid:Ft++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:In,get config(){return o.config},set config(t){0},use(t,...e){return a.has(t)||(t&&(0,i.Tn)(t.install)?(a.add(t),t.install(u,...e)):(0,i.Tn)(t)&&(a.add(t),t(u,...e))),u},mixin(t){return o.mixins.includes(t)||o.mixins.push(t),u},component(t,e){return e?(o.components[t]=e,u):o.components[t]},directive(t,e){return e?(o.directives[t]=e,u):o.directives[t]},mount(i,s,a){if(!l){0;const c=u._ceVNode||tn(n,r);return c.appContext=o,!0===a?a="svg":!1===a&&(a=void 0),s&&e?e(c,i):t(c,i,a),l=!0,u._container=i,i.__vue_app__=u,Rn(c.component)}},onUnmount(t){c.push(t)},unmount(){l&&(s(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(t,e){return o.provides[t]=e,u},runWithContext(t){const e=zt;zt=u;try{return t()}finally{zt=e}}};return u}}let zt=null;function Gt(t,e){if(vn){let n=vn.provides;const r=vn.parent&&vn.parent.provides;r===n&&(n=vn.provides=Object.create(r)),n[t]=e}else 0}function Vt(t,e,n=!1){const r=vn||M;if(r||zt){const o=zt?zt._context.provides:r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&(0,i.Tn)(e)?e.call(r&&r.proxy):e}else 0}const Wt={},Ut=()=>Object.create(Wt),Ht=t=>Object.getPrototypeOf(t)===Wt;function $t(t,e,n,i=!1){const o={},s=Ut();t.propsDefaults=Object.create(null),qt(t,e,o,s);for(const r in t.propsOptions[0])r in o||(o[r]=void 0);n?t.props=i?o:(0,r.Gc)(o):t.type.props?t.props=o:t.props=s,t.attrs=s}function Yt(t,e,n,o){const{props:s,attrs:a,vnode:{patchFlag:c}}=t,l=(0,r.ux)(s),[u]=t.propsOptions;let h=!1;if(!(o||c>0)||16&c){let r;qt(t,e,s,a)&&(h=!0);for(const o in l)e&&((0,i.$3)(e,o)||(r=(0,i.Tg)(o))!==o&&(0,i.$3)(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(s[o]=Xt(u,l,o,void 0,t,!0)):delete s[o]);if(a!==l)for(const t in a)e&&(0,i.$3)(e,t)||(delete a[t],h=!0)}else if(8&c){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(Ne(t.emitsOptions,o))continue;const c=e[o];if(u)if((0,i.$3)(a,o))c!==a[o]&&(a[o]=c,h=!0);else{const e=(0,i.PT)(o);s[e]=Xt(u,l,e,c,t,!1)}else c!==a[o]&&(a[o]=c,h=!0)}}h&&(0,r.hZ)(t.attrs,"set","")}function qt(t,e,n,o){const[s,a]=t.propsOptions;let c,l=!1;if(e)for(let r in e){if((0,i.SU)(r))continue;const u=e[r];let h;s&&(0,i.$3)(s,h=(0,i.PT)(r))?a&&a.includes(h)?(c||(c={}))[h]=u:n[h]=u:Ne(t.emitsOptions,r)||r in o&&u===o[r]||(o[r]=u,l=!0)}if(a){const e=(0,r.ux)(n),o=c||i.MZ;for(let r=0;r<a.length;r++){const c=a[r];n[c]=Xt(s,e,c,o[c],t,!(0,i.$3)(o,c))}}return l}function Xt(t,e,n,r,o,s){const a=t[n];if(null!=a){const t=(0,i.$3)(a,"default");if(t&&void 0===r){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,i.Tn)(t)){const{propsDefaults:i}=o;if(n in i)r=i[n];else{const s=xn(o);r=i[n]=t.call(null,e),s()}}else r=t;o.ce&&o.ce._setProp(n,r)}a[0]&&(s&&!t?r=!1:!a[1]||""!==r&&r!==(0,i.Tg)(n)||(r=!0))}return r}const Kt=new WeakMap;function Zt(t,e,n=!1){const r=n?Kt:e.propsCache,o=r.get(t);if(o)return o;const s=t.props,a={},c=[];let l=!1;if(!(0,i.Tn)(t)){const r=t=>{l=!0;const[n,r]=Zt(t,e,!0);(0,i.X$)(a,n),r&&c.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!s&&!l)return(0,i.Gv)(t)&&r.set(t,i.Oj),i.Oj;if((0,i.cy)(s))for(let h=0;h<s.length;h++){0;const t=(0,i.PT)(s[h]);Jt(t)&&(a[t]=i.MZ)}else if(s){0;for(const t in s){const e=(0,i.PT)(t);if(Jt(e)){const n=s[t],r=a[e]=(0,i.cy)(n)||(0,i.Tn)(n)?{type:n}:(0,i.X$)({},n),o=r.type;let l=!1,u=!0;if((0,i.cy)(o))for(let t=0;t<o.length;++t){const e=o[t],n=(0,i.Tn)(e)&&e.name;if("Boolean"===n){l=!0;break}"String"===n&&(u=!1)}else l=(0,i.Tn)(o)&&"Boolean"===o.name;r[0]=l,r[1]=u,(l||(0,i.$3)(r,"default"))&&c.push(e)}}}const u=[a,c];return(0,i.Gv)(t)&&r.set(t,u),u}function Jt(t){return"$"!==t[0]&&!(0,i.SU)(t)}const Qt=t=>"_"===t[0]||"$stable"===t,te=t=>(0,i.cy)(t)?t.map(cn):[cn(t)],ee=(t,e,n)=>{if(e._n)return e;const r=T(((...t)=>te(e(...t))),n);return r._c=!1,r},ne=(t,e,n)=>{const r=t._ctx;for(const o in t){if(Qt(o))continue;const n=t[o];if((0,i.Tn)(n))e[o]=ee(o,n,r);else if(null!=n){0;const t=te(n);e[o]=()=>t}}},re=(t,e)=>{const n=te(e);t.slots.default=()=>n},ie=(t,e,n)=>{for(const r in e)(n||"_"!==r)&&(t[r]=e[r])},oe=(t,e,n)=>{const r=t.slots=Ut();if(32&t.vnode.shapeFlag){const t=e._;t?(ie(r,e,n),n&&(0,i.yQ)(r,"_",t,!0)):ne(e,r)}else e&&re(t,e)},se=(t,e,n)=>{const{vnode:r,slots:o}=t;let s=!0,a=i.MZ;if(32&r.shapeFlag){const t=e._;t?n&&1===t?s=!1:ie(o,e,n):(s=!e.$stable,ne(e,o)),a=e}else e&&(re(t,e),a={default:1});if(s)for(const i in o)Qt(i)||null!=a[i]||delete o[i]};function ae(){"boolean"!==typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&((0,i.We)().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const ce=De;function le(t){return ue(t)}function ue(t,e){ae();const n=(0,i.We)();n.__VUE__=!0;const{insert:o,remove:s,patchProp:a,createElement:c,createText:l,createComment:u,setText:h,setElementText:d,parentNode:f,nextSibling:p,setScopeId:g=i.tE,insertStaticContent:v}=t,y=(t,e,n,r=null,i=null,o=null,s=void 0,a=null,c=!!e.dynamicChildren)=>{if(t===e)return;t&&!Ke(t,e)&&(r=Q(t),q(t,i,o,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);const{type:l,ref:u,shapeFlag:h}=e;switch(l){case je:b(t,e,n,r);break;case Fe:x(t,e,n,r);break;case Be:null==t&&k(e,n,r,s);break;case Ie:D(t,e,n,r,i,o,s,a,c);break;default:1&h?O(t,e,n,r,i,o,s,a,c):6&h?I(t,e,n,r,i,o,s,a,c):(64&h||128&h)&&l.process(t,e,n,r,i,o,s,a,c,nt)}null!=u&&i&&W(u,t&&t.ref,o,e||t,!e)},b=(t,e,n,r)=>{if(null==t)o(e.el=l(e.children),n,r);else{const n=e.el=t.el;e.children!==t.children&&h(n,e.children)}},x=(t,e,n,r)=>{null==t?o(e.el=u(e.children||""),n,r):e.el=t.el},k=(t,e,n,r)=>{[t.el,t.anchor]=v(t.children,e,n,r,t.el,t.anchor)},S=({el:t,anchor:e},n,r)=>{let i;while(t&&t!==e)i=p(t),o(t,n,r),t=i;o(e,n,r)},M=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),s(t),t=n;s(e)},O=(t,e,n,r,i,o,s,a,c)=>{"svg"===e.type?s="svg":"math"===e.type&&(s="mathml"),null==t?N(e,n,r,i,o,s,a,c):R(t,e,i,o,s,a,c)},N=(t,e,n,r,s,l,u,h)=>{let f,p;const{props:g,shapeFlag:v,transition:y,dirs:m}=t;if(f=t.el=c(t.type,l,g&&g.is,g),8&v?d(f,t.children):16&v&&A(t.children,f,null,r,s,he(t,l),u,h),m&&C(t,null,r,"created"),T(f,t,t.scopeId,u,r),g){for(const t in g)"value"===t||(0,i.SU)(t)||a(f,t,null,g[t],l,r);"value"in g&&a(f,"value",null,g.value,l),(p=g.onVnodeBeforeMount)&&dn(p,r,t)}m&&C(t,null,r,"beforeMount");const b=fe(s,y);b&&y.beforeEnter(f),o(f,e,n),((p=g&&g.onVnodeMounted)||b||m)&&ce((()=>{p&&dn(p,r,t),b&&y.enter(f),m&&C(t,null,r,"mounted")}),s)},T=(t,e,n,r,i)=>{if(n&&g(t,n),r)for(let o=0;o<r.length;o++)g(t,r[o]);if(i){let n=i.subTree;if(e===n||Le(n.type)&&(n.ssContent===e||n.ssFallback===e)){const e=i.vnode;T(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},A=(t,e,n,r,i,o,s,a,c=0)=>{for(let l=c;l<t.length;l++){const c=t[l]=a?ln(t[l]):cn(t[l]);y(null,c,e,n,r,i,o,s,a)}},R=(t,e,n,r,o,s,c)=>{const l=e.el=t.el;let{patchFlag:u,dynamicChildren:h,dirs:f}=e;u|=16&t.patchFlag;const p=t.props||i.MZ,g=e.props||i.MZ;let v;if(n&&de(n,!1),(v=g.onVnodeBeforeUpdate)&&dn(v,n,e,t),f&&C(e,t,n,"beforeUpdate"),n&&de(n,!0),(p.innerHTML&&null==g.innerHTML||p.textContent&&null==g.textContent)&&d(l,""),h?_(t.dynamicChildren,h,l,n,r,he(e,o),s):c||G(t,e,l,null,n,r,he(e,o),s,!1),u>0){if(16&u)L(l,p,g,n,o);else if(2&u&&p.class!==g.class&&a(l,"class",null,g.class,o),4&u&&a(l,"style",p.style,g.style,o),8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const r=t[e],i=p[r],s=g[r];s===i&&"value"!==r||a(l,r,i,s,o,n)}}1&u&&t.children!==e.children&&d(l,e.children)}else c||null!=h||L(l,p,g,n,o);((v=g.onVnodeUpdated)||f)&&ce((()=>{v&&dn(v,n,e,t),f&&C(e,t,n,"updated")}),r)},_=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const c=t[a],l=e[a],u=c.el&&(c.type===Ie||!Ke(c,l)||70&c.shapeFlag)?f(c.el):n;y(c,l,u,null,r,i,o,s,!0)}},L=(t,e,n,r,o)=>{if(e!==n){if(e!==i.MZ)for(const s in e)(0,i.SU)(s)||s in n||a(t,s,e[s],null,o,r);for(const s in n){if((0,i.SU)(s))continue;const c=n[s],l=e[s];c!==l&&"value"!==s&&a(t,s,l,c,o,r)}"value"in n&&a(t,"value",e.value,n.value,o)}},D=(t,e,n,r,i,s,a,c,u)=>{const h=e.el=t?t.el:l(""),d=e.anchor=t?t.anchor:l("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:g}=e;g&&(c=c?c.concat(g):g),null==t?(o(h,n,r),o(d,n,r),A(e.children||[],n,d,i,s,a,c,u)):f>0&&64&f&&p&&t.dynamicChildren?(_(t.dynamicChildren,p,n,i,s,a,c),(null!=e.key||i&&e===i.subTree)&&pe(t,e,!0)):G(t,e,n,d,i,s,a,c,u)},I=(t,e,n,r,i,o,s,a,c)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,c):j(e,n,r,i,o,s,c):F(t,e,c)},j=(t,e,n,r,i,o,s)=>{const a=t.component=gn(t,r,i);if(H(t)&&(a.ctx.renderer=nt),On(a,!1,s),a.asyncDep){if(i&&i.registerDep(a,B,s),!t.el){const t=a.subTree=tn(Fe);x(null,t,e,n)}}else B(a,t,e,n,i,o,s)},F=(t,e,n)=>{const r=e.component=t.component;if(Pe(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void z(r,e,n);r.next=e,r.update()}else e.el=t.el,r.vnode=e},B=(t,e,n,o,s,a,c)=>{const l=()=>{if(t.isMounted){let{next:e,bu:n,u:r,parent:o,vnode:u}=t;{const n=ve(t);if(n)return e&&(e.el=u.el,z(t,e,c)),void n.asyncDep.then((()=>{t.isUnmounted||l()}))}let h,d=e;0,de(t,!1),e?(e.el=u.el,z(t,e,c)):e=u,n&&(0,i.DY)(n),(h=e.props&&e.props.onVnodeBeforeUpdate)&&dn(h,o,e,u),de(t,!0);const p=Te(t);0;const g=t.subTree;t.subTree=p,y(g,p,f(g.el),Q(g),t,s,a),e.el=p.el,null===d&&_e(t,p.el),r&&ce(r,s),(h=e.props&&e.props.onVnodeUpdated)&&ce((()=>dn(h,o,e,u)),s)}else{let r;const{el:c,props:l}=e,{bm:u,m:h,parent:d,root:f,type:p}=t,g=U(e);if(de(t,!1),u&&(0,i.DY)(u),!g&&(r=l&&l.onVnodeBeforeMount)&&dn(r,d,e),de(t,!0),c&&it){const e=()=>{t.subTree=Te(t),it(c,t.subTree,t,s,null)};g&&p.__asyncHydrate?p.__asyncHydrate(c,t,e):e()}else{f.ce&&f.ce._injectChildStyle(p);const r=t.subTree=Te(t);0,y(null,r,n,o,t,s,a),e.el=r.el}if(h&&ce(h,s),!g&&(r=l&&l.onVnodeMounted)){const t=e;ce((()=>dn(r,d,t)),s)}(256&e.shapeFlag||d&&U(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&ce(t.a,s),t.isMounted=!0,e=n=o=null}};t.scope.on();const u=t.effect=new r.X2(l);t.scope.off();const h=t.update=u.run.bind(u),d=t.job=u.runIfDirty.bind(u);d.i=t,d.id=t.uid,u.scheduler=()=>m(d),de(t,!0),h()},z=(t,e,n)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,Yt(t,e.props,i,n),se(t,e.children,n),(0,r.C4)(),w(t),(0,r.bl)()},G=(t,e,n,r,i,o,s,a,c=!1)=>{const l=t&&t.children,u=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void $(l,h,n,r,i,o,s,a,c);if(256&f)return void V(l,h,n,r,i,o,s,a,c)}8&p?(16&u&&J(l,i,o),h!==l&&d(n,h)):16&u?16&p?$(l,h,n,r,i,o,s,a,c):J(l,i,o,!0):(8&u&&d(n,""),16&p&&A(h,n,r,i,o,s,a,c))},V=(t,e,n,r,o,s,a,c,l)=>{t=t||i.Oj,e=e||i.Oj;const u=t.length,h=e.length,d=Math.min(u,h);let f;for(f=0;f<d;f++){const r=e[f]=l?ln(e[f]):cn(e[f]);y(t[f],r,n,null,o,s,a,c,l)}u>h?J(t,o,s,!0,!1,d):A(e,n,r,o,s,a,c,l,d)},$=(t,e,n,r,o,s,a,c,l)=>{let u=0;const h=e.length;let d=t.length-1,f=h-1;while(u<=d&&u<=f){const r=t[u],i=e[u]=l?ln(e[u]):cn(e[u]);if(!Ke(r,i))break;y(r,i,n,null,o,s,a,c,l),u++}while(u<=d&&u<=f){const r=t[d],i=e[f]=l?ln(e[f]):cn(e[f]);if(!Ke(r,i))break;y(r,i,n,null,o,s,a,c,l),d--,f--}if(u>d){if(u<=f){const t=f+1,i=t<h?e[t].el:r;while(u<=f)y(null,e[u]=l?ln(e[u]):cn(e[u]),n,i,o,s,a,c,l),u++}}else if(u>f)while(u<=d)q(t[u],o,s,!0),u++;else{const p=u,g=u,v=new Map;for(u=g;u<=f;u++){const t=e[u]=l?ln(e[u]):cn(e[u]);null!=t.key&&v.set(t.key,u)}let m,b=0;const x=f-g+1;let w=!1,E=0;const k=new Array(x);for(u=0;u<x;u++)k[u]=0;for(u=p;u<=d;u++){const r=t[u];if(b>=x){q(r,o,s,!0);continue}let i;if(null!=r.key)i=v.get(r.key);else for(m=g;m<=f;m++)if(0===k[m-g]&&Ke(r,e[m])){i=m;break}void 0===i?q(r,o,s,!0):(k[i-g]=u+1,i>=E?E=i:w=!0,y(r,e[i],n,null,o,s,a,c,l),b++)}const S=w?ge(k):i.Oj;for(m=S.length-1,u=x-1;u>=0;u--){const t=g+u,i=e[t],d=t+1<h?e[t+1].el:r;0===k[u]?y(null,i,n,d,o,s,a,c,l):w&&(m<0||u!==S[m]?Y(i,n,d,2):m--)}}},Y=(t,e,n,r,i=null)=>{const{el:s,type:a,transition:c,children:l,shapeFlag:u}=t;if(6&u)return void Y(t.component.subTree,e,n,r);if(128&u)return void t.suspense.move(e,n,r);if(64&u)return void a.move(t,e,n,nt);if(a===Ie){o(s,e,n);for(let t=0;t<l.length;t++)Y(l[t],e,n,r);return void o(t.anchor,e,n)}if(a===Be)return void S(t,e,n);const h=2!==r&&1&u&&c;if(h)if(0===r)c.beforeEnter(s),o(s,e,n),ce((()=>c.enter(s)),i);else{const{leave:t,delayLeave:r,afterLeave:i}=c,a=()=>o(s,e,n),l=()=>{t(s,(()=>{a(),i&&i()}))};r?r(s,a,l):l()}else o(s,e,n)},q=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:h,dirs:d,cacheIndex:f}=t;if(-2===h&&(i=!1),null!=a&&W(a,null,n,t,!0),null!=f&&(e.renderCache[f]=void 0),256&u)return void e.ctx.deactivate(t);const p=1&u&&d,g=!U(t);let v;if(g&&(v=s&&s.onVnodeBeforeUnmount)&&dn(v,e,t),6&u)Z(t.component,n,r);else{if(128&u)return void t.suspense.unmount(n,r);p&&C(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,n,nt,r):l&&!l.hasOnce&&(o!==Ie||h>0&&64&h)?J(l,e,n,!1,!0):(o===Ie&&384&h||!i&&16&u)&&J(c,e,n),r&&X(t)}(g&&(v=s&&s.onVnodeUnmounted)||p)&&ce((()=>{v&&dn(v,e,t),p&&C(t,null,e,"unmounted")}),n)},X=t=>{const{type:e,el:n,anchor:r,transition:i}=t;if(e===Ie)return void K(n,r);if(e===Be)return void M(t);const o=()=>{s(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:r}=i,s=()=>e(n,o);r?r(t.el,o,s):s()}else o()},K=(t,e)=>{let n;while(t!==e)n=p(t),s(t),t=n;s(e)},Z=(t,e,n)=>{const{bum:r,scope:o,job:s,subTree:a,um:c,m:l,a:u}=t;ye(l),ye(u),r&&(0,i.DY)(r),o.stop(),s&&(s.flags|=8,q(a,t,e,n)),c&&ce(c,e),ce((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},J=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)q(t[s],e,n,r,i)},Q=t=>{if(6&t.shapeFlag)return Q(t.component.subTree);if(128&t.shapeFlag)return t.suspense.next();const e=p(t.anchor||t.el),n=e&&e[P];return n?p(n):e};let tt=!1;const et=(t,e,n)=>{null==t?e._vnode&&q(e._vnode,null,null,!0):y(e._vnode||null,t,e,null,null,null,n),e._vnode=t,tt||(tt=!0,w(),E(),tt=!1)},nt={p:y,um:q,m:Y,r:X,mt:j,mc:A,pc:G,pbc:_,n:Q,o:t};let rt,it;return e&&([rt,it]=e(nt)),{render:et,hydrate:rt,createApp:Bt(et,rt)}}function he({type:t,props:e},n){return"svg"===n&&"foreignObject"===t||"mathml"===n&&"annotation-xml"===t&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function de({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function fe(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function pe(t,e,n=!1){const r=t.children,o=e.children;if((0,i.cy)(r)&&(0,i.cy)(o))for(let i=0;i<r.length;i++){const t=r[i];let e=o[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=o[i]=ln(o[i]),e.el=t.el),n||-2===e.patchFlag||pe(t,e)),e.type===je&&(e.el=t.el)}}function ge(t){const e=t.slice(),n=[0];let r,i,o,s,a;const c=t.length;for(r=0;r<c;r++){const c=t[r];if(0!==c){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}o=0,s=n.length-1;while(o<s)a=o+s>>1,t[n[a]]<c?o=a+1:s=a;c<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];while(o-- >0)n[o]=s,s=e[s];return n}function ve(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ve(e)}function ye(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const me=Symbol.for("v-scx"),be=()=>{{const t=Vt(me);return t}};function xe(t,e,n){return we(t,e,n)}function we(t,e,n=i.MZ){const{immediate:o,deep:a,flush:c,once:l}=n;const u=(0,i.X$)({},n);const h=e&&o||!e&&"post"!==c;let d;if(Mn)if("sync"===c){const t=be();d=t.__watcherHandles||(t.__watcherHandles=[])}else if(!h){const t=()=>{};return t.stop=i.tE,t.resume=i.tE,t.pause=i.tE,t}const f=vn;u.call=(t,e,n)=>s(t,f,e,n);let p=!1;"post"===c?u.scheduler=t=>{ce(t,f&&f.suspense)}:"sync"!==c&&(p=!0,u.scheduler=(t,e)=>{e?t():m(t)}),u.augmentJob=t=>{e&&(t.flags|=4),p&&(t.flags|=2,f&&(t.id=f.uid,t.i=f))};const g=(0,r.wB)(t,e,u);return Mn&&(d?d.push(g):h&&g()),g}function Ee(t,e,n){const r=this.proxy,o=(0,i.Kg)(t)?t.includes(".")?ke(r,t):()=>r[t]:t.bind(r,r);let s;(0,i.Tn)(e)?s=e:(s=e.handler,n=e);const a=xn(this),c=we(o,s.bind(r),n);return a(),c}function ke(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}const Se=(t,e)=>"modelValue"===e||"model-value"===e?t.modelModifiers:t[`${e}Modifiers`]||t[`${(0,i.PT)(e)}Modifiers`]||t[`${(0,i.Tg)(e)}Modifiers`];function Me(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||i.MZ;let o=n;const a=e.startsWith("update:"),c=a&&Se(r,e.slice(7));let l;c&&(c.trim&&(o=n.map((t=>(0,i.Kg)(t)?t.trim():t))),c.number&&(o=n.map(i.bB)));let u=r[l=(0,i.rU)(e)]||r[l=(0,i.rU)((0,i.PT)(e))];!u&&a&&(u=r[l=(0,i.rU)((0,i.Tg)(e))]),u&&s(u,t,6,o);const h=r[l+"Once"];if(h){if(t.emitted){if(t.emitted[l])return}else t.emitted={};t.emitted[l]=!0,s(h,t,6,o)}}function Oe(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(void 0!==o)return o;const s=t.emits;let a={},c=!1;if(!(0,i.Tn)(t)){const r=t=>{const n=Oe(t,e,!0);n&&(c=!0,(0,i.X$)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return s||c?((0,i.cy)(s)?s.forEach((t=>a[t]=null)):(0,i.X$)(a,s),(0,i.Gv)(t)&&r.set(t,a),a):((0,i.Gv)(t)&&r.set(t,null),null)}function Ne(t,e){return!(!t||!(0,i.Mp)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.$3)(t,e[0].toLowerCase()+e.slice(1))||(0,i.$3)(t,(0,i.Tg)(e))||(0,i.$3)(t,e))}function Te(t){const{type:e,vnode:n,proxy:r,withProxy:o,propsOptions:[s],slots:c,attrs:l,emit:u,render:h,renderCache:d,props:f,data:p,setupState:g,ctx:v,inheritAttrs:y}=t,m=N(t);let b,x;try{if(4&n.shapeFlag){const t=o||r,e=t;b=cn(h.call(e,t,d,f,g,p,v)),x=l}else{const t=e;0,b=cn(t.length>1?t(f,{attrs:l,slots:c,emit:u}):t(f,null)),x=e.props?l:Ae(l)}}catch(E){ze.length=0,a(E,t,1),b=tn(Fe)}let w=b;if(x&&!1!==y){const t=Object.keys(x),{shapeFlag:e}=w;t.length&&7&e&&(s&&t.some(i.CP)&&(x=Ce(x,s)),w=rn(w,x,!1,!0))}return n.dirs&&(w=rn(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&z(w,n.transition),b=w,N(m),b}const Ae=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,i.Mp)(n))&&((e||(e={}))[n]=t[n]);return e},Ce=(t,e)=>{const n={};for(const r in t)(0,i.CP)(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function Pe(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:c}=e,l=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&c>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||Re(r,s,l):!!s);if(1024&c)return!0;if(16&c)return r?Re(r,s,l):!!s;if(8&c){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!Ne(l,n))return!0}}return!1}function Re(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!Ne(n,o))return!0}return!1}function _e({vnode:t,parent:e},n){while(e){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r!==t)break;(t=e.vnode).el=n,e=e.parent}}const Le=t=>t.__isSuspense;function De(t,e){e&&e.pendingBranch?(0,i.cy)(t)?e.effects.push(...t):e.effects.push(t):x(t)}const Ie=Symbol.for("v-fgt"),je=Symbol.for("v-txt"),Fe=Symbol.for("v-cmt"),Be=Symbol.for("v-stc"),ze=[];let Ge=null;function Ve(t=!1){ze.push(Ge=t?null:[])}function We(){ze.pop(),Ge=ze[ze.length-1]||null}let Ue=1;function He(t,e=!1){Ue+=t,t<0&&Ge&&e&&(Ge.hasOnce=!0)}function $e(t){return t.dynamicChildren=Ue>0?Ge||i.Oj:null,We(),Ue>0&&Ge&&Ge.push(t),t}function Ye(t,e,n,r,i,o){return $e(Qe(t,e,n,r,i,o,!0))}function qe(t,e,n,r,i){return $e(tn(t,e,n,r,i,!0))}function Xe(t){return!!t&&!0===t.__v_isVNode}function Ke(t,e){return t.type===e.type&&t.key===e.key}const Ze=({key:t})=>null!=t?t:null,Je=({ref:t,ref_key:e,ref_for:n})=>("number"===typeof t&&(t=""+t),null!=t?(0,i.Kg)(t)||(0,r.i9)(t)||(0,i.Tn)(t)?{i:M,r:t,k:e,f:!!n}:t:null);function Qe(t,e=null,n=null,r=0,o=null,s=(t===Ie?0:1),a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ze(e),ref:e&&Je(e),scopeId:O,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:M};return c?(un(l,n),128&s&&t.normalize(l)):n&&(l.shapeFlag|=(0,i.Kg)(n)?8:16),Ue>0&&!a&&Ge&&(l.patchFlag>0||6&s)&&32!==l.patchFlag&&Ge.push(l),l}const tn=en;function en(t,e=null,n=null,o=0,s=null,a=!1){if(t&&t!==ft||(t=Fe),Xe(t)){const r=rn(t,e,!0);return n&&un(r,n),Ue>0&&!a&&Ge&&(6&r.shapeFlag?Ge[Ge.indexOf(t)]=r:Ge.push(r)),r.patchFlag=-2,r}if(Ln(t)&&(t=t.__vccOpts),e){e=nn(e);let{class:t,style:n}=e;t&&!(0,i.Kg)(t)&&(e.class=(0,i.C4)(t)),(0,i.Gv)(n)&&((0,r.ju)(n)&&!(0,i.cy)(n)&&(n=(0,i.X$)({},n)),e.style=(0,i.Tr)(n))}const c=(0,i.Kg)(t)?1:Le(t)?128:R(t)?64:(0,i.Gv)(t)?4:(0,i.Tn)(t)?2:0;return Qe(t,e,n,o,s,c,a,!0)}function nn(t){return t?(0,r.ju)(t)||Ht(t)?(0,i.X$)({},t):t:null}function rn(t,e,n=!1,r=!1){const{props:o,ref:s,patchFlag:a,children:c,transition:l}=t,u=e?hn(o||{},e):o,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Ze(u),ref:e&&e.ref?n&&s?(0,i.cy)(s)?s.concat(Je(e)):[s,Je(e)]:Je(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ie?-1===a?16:16|a:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&rn(t.ssContent),ssFallback:t.ssFallback&&rn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&z(h,l.clone(h)),h}function on(t=" ",e=0){return tn(je,null,t,e)}function sn(t,e){const n=tn(Be,null,t);return n.staticCount=e,n}function an(t="",e=!1){return e?(Ve(),qe(Fe,null,t)):tn(Fe,null,t)}function cn(t){return null==t||"boolean"===typeof t?tn(Fe):(0,i.cy)(t)?tn(Ie,null,t.slice()):Xe(t)?ln(t):tn(je,null,String(t))}function ln(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:rn(t)}function un(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if((0,i.cy)(e))n=16;else if("object"===typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),un(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||Ht(e)?3===r&&M&&(1===M.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=M}}else(0,i.Tn)(e)?(e={default:e,_ctx:M},n=32):(e=String(e),64&r?(n=16,e=[on(e)]):n=8);t.children=e,t.shapeFlag|=n}function hn(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=(0,i.C4)([e.class,r.class]));else if("style"===t)e.style=(0,i.Tr)([e.style,r.style]);else if((0,i.Mp)(t)){const n=e[t],o=r[t];!o||n===o||(0,i.cy)(n)&&n.includes(o)||(e[t]=n?[].concat(n,o):o)}else""!==t&&(e[t]=r[t])}return e}function dn(t,e,n,r=null){s(t,e,7,[n,r])}const fn=jt();let pn=0;function gn(t,e,n){const o=t.type,s=(e?e.appContext:t.appContext)||fn,a={uid:pn++,vnode:t,type:o,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new r.yC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zt(o,s),emitsOptions:Oe(o,s),emit:null,emitted:null,propsDefaults:i.MZ,inheritAttrs:o.inheritAttrs,ctx:i.MZ,data:i.MZ,props:i.MZ,attrs:i.MZ,slots:i.MZ,refs:i.MZ,setupState:i.MZ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Me.bind(null,a),t.ce&&t.ce(a),a}let vn=null;const yn=()=>vn||M;let mn,bn;{const t=(0,i.We)(),e=(e,n)=>{let r;return(r=t[e])||(r=t[e]=[]),r.push(n),t=>{r.length>1?r.forEach((e=>e(t))):r[0](t)}};mn=e("__VUE_INSTANCE_SETTERS__",(t=>vn=t)),bn=e("__VUE_SSR_SETTERS__",(t=>Mn=t))}const xn=t=>{const e=vn;return mn(t),t.scope.on(),()=>{t.scope.off(),mn(e)}},wn=()=>{vn&&vn.scope.off(),mn(null)};function En(t){return 4&t.vnode.shapeFlag}let kn,Sn,Mn=!1;function On(t,e=!1,n=!1){e&&bn(e);const{props:r,children:i}=t.vnode,o=En(t);$t(t,r,o,e),oe(t,i,n);const s=o?Nn(t,e):void 0;return e&&bn(!1),s}function Nn(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,xt);const{setup:s}=n;if(s){(0,r.C4)();const n=t.setupContext=s.length>1?Pn(t):null,c=xn(t),l=o(s,t,0,[t.props,n]),u=(0,i.yL)(l);if((0,r.bl)(),c(),!u&&!t.sp||U(t)||V(t),u){if(l.then(wn,wn),e)return l.then((n=>{Tn(t,n,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=l}else Tn(t,l,e)}else An(t,e)}function Tn(t,e,n){(0,i.Tn)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Gv)(e)&&(t.setupState=(0,r.Pr)(e)),An(t,n)}function An(t,e,n){const o=t.type;if(!t.render){if(!e&&kn&&!o.render){const e=o.template||Nt(t).template;if(e){0;const{isCustomElement:n,compilerOptions:r}=t.appContext.config,{delimiters:s,compilerOptions:a}=o,c=(0,i.X$)((0,i.X$)({isCustomElement:n,delimiters:s},r),a);o.render=kn(e,c)}}t.render=o.render||i.tE,Sn&&Sn(t)}{const e=xn(t);(0,r.C4)();try{kt(t)}finally{(0,r.bl)(),e()}}}const Cn={get(t,e){return(0,r.u4)(t,"get",""),t[e]}};function Pn(t){const e=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,Cn),slots:t.slots,emit:t.emit,expose:e}}function Rn(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy((0,r.Pr)((0,r.IG)(t.exposed)),{get(e,n){return n in e?e[n]:n in mt?mt[n](t):void 0},has(t,e){return e in t||e in mt}})):t.proxy}function _n(t,e=!0){return(0,i.Tn)(t)?t.displayName||t.name:t.name||e&&t.__name}function Ln(t){return(0,i.Tn)(t)&&"__vccOpts"in t}const Dn=(t,e)=>{const n=(0,r.EW)(t,e,Mn);return n};const In="3.5.13"},56817:function(t,e,n){var r=n(1068),i=n(38478),o=n(797),s=n(43534),a=n(60710),c=n(85366),l=n(70317),u=n(29562),h=1,d="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype,v=g.hasOwnProperty;function y(t,e,n,g,y,m){var b=c(t),x=c(e),w=b?f:a(t),E=x?f:a(e);w=w==d?p:w,E=E==d?p:E;var k=w==p,S=E==p,M=w==E;if(M&&l(t)){if(!l(e))return!1;b=!0,k=!1}if(M&&!k)return m||(m=new r),b||u(t)?i(t,e,n,g,y,m):o(t,e,w,n,g,y,m);if(!(n&h)){var O=k&&v.call(t,"__wrapped__"),N=S&&v.call(e,"__wrapped__");if(O||N){var T=O?t.value():t,A=N?e.value():e;return m||(m=new r),y(T,A,n,g,m)}}return!!M&&(m||(m=new r),s(t,e,n,g,y,m))}t.exports=y},56969:function(t,e,n){"use strict";var r=n(72777),i=n(10757);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},57145:function(t,e,n){"use strict";var r=n(46518),i=n(79504),o=n(79306),s=n(25397),a=n(35370),c=n(44124),l=n(6469),u=Array,h=i(c("Array","sort"));r({target:"Array",proto:!0},{toSorted:function(t){void 0!==t&&o(t);var e=s(this),n=a(u,e);return h(n,t)}}),l("toSorted")},57255:function(t,e,n){var r=n(33103),i=n(84276),o=n(80770),s=o&&o.isSet,a=s?i(s):r;t.exports=a},57343:function(t,e,n){"use strict";n.r(e),n.d(e,{isAnyArray:function(){return i}});const r=Object.prototype.toString;function i(t){const e=r.call(t);return e.endsWith("Array]")&&!e.includes("Big")}},57422:function(t,e,n){var r=n(59226),i=n(36719),o=n(82976);function s(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}t.exports=s},57657:function(t,e,n){"use strict";var r,i,o,s=n(79039),a=n(94901),c=n(20034),l=n(2360),u=n(42787),h=n(36840),d=n(78227),f=n(96395),p=d("iterator"),g=!1;[].keys&&(o=[].keys(),"next"in o?(i=u(u(o)),i!==Object.prototype&&(r=i)):g=!0);var v=!c(r)||s((function(){var t={};return r[p].call(t)!==t}));v?r={}:f&&(r=l(r)),a(r[p])||h(r,p,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:g}},57696:function(t,e,n){"use strict";var r=n(91291),i=n(18014),o=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw new o("Wrong length or index");return n}},58004:function(t,e,n){"use strict";var r=n(46518),i=n(79039),o=n(68750),s=n(84916),a=!s("intersection",(function(t){return 2===t.size&&t.has(1)&&t.has(2)}))||i((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));r({target:"Set",proto:!0,real:!0,forced:a},{intersection:o})},58063:function(t){var e=Object.prototype,n=e.hasOwnProperty;function r(t,e){return null!=t&&n.call(t,e)}t.exports=r},58109:function(t){t.exports="2.1.8"},58622:function(t,e,n){"use strict";var r=n(44576),i=n(94901),o=r.WeakMap;t.exports=i(o)&&/native code/.test(String(o))},58664:function(t,e,n){var r=n(93238),i=n(69136),o=n(48465);function s(t){return o(t)?r(t,!0):i(t)}t.exports=s},58728:function(t,e,n){var r=n(48882);function i(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}t.exports=i},58780:function(t,e,n){var r=n(51683),i=n(87136),o=n(89426);function s(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}t.exports=s},58804:function(t,e,n){"use strict";n(18111),n(7588),n(61701);var r=n(34230),i=n(34809),o=n(7622),s=n(99389),a=n(30085),c=n(72359),l=n(74332).Graph,u=n(6247);function h(t){var e=u.maxRank(t),n=d(t,r.range(1,e+1),"inEdges"),s=d(t,r.range(e-1,-1,-1),"outEdges"),a=i(t);p(t,a);for(var c,l=Number.POSITIVE_INFINITY,h=0,g=0;g<4;++h,++g){f(h%2?n:s,h%4>=2),a=u.buildLayerMatrix(t);var v=o(t,a);v<l&&(g=0,c=r.cloneDeep(a),l=v)}p(t,c)}function d(t,e,n){return r.map(e,(function(e){return a(t,e,n)}))}function f(t,e){var n=new l;r.forEach(t,(function(t){var i=t.graph().root,o=s(t,i,n,e);r.forEach(o.vs,(function(e,n){t.node(e).order=n})),c(t,n,o.vs)}))}function p(t,e){r.forEach(e,(function(e){r.forEach(e,(function(e,n){t.node(e).order=n}))}))}t.exports=h},59106:function(t,e,n){var r=n(30100),i=n(88987);function o(t,e){return t&&r(t,e,i)}t.exports=o},59225:function(t,e,n){"use strict";var r,i,o,s,a=n(44576),c=n(18745),l=n(76080),u=n(94901),h=n(39297),d=n(79039),f=n(20397),p=n(67680),g=n(4055),v=n(22812),y=n(89544),m=n(16193),b=a.setImmediate,x=a.clearImmediate,w=a.process,E=a.Dispatch,k=a.Function,S=a.MessageChannel,M=a.String,O=0,N={},T="onreadystatechange";d((function(){r=a.location}));var A=function(t){if(h(N,t)){var e=N[t];delete N[t],e()}},C=function(t){return function(){A(t)}},P=function(t){A(t.data)},R=function(t){a.postMessage(M(t),r.protocol+"//"+r.host)};b&&x||(b=function(t){v(arguments.length,1);var e=u(t)?t:k(t),n=p(arguments,1);return N[++O]=function(){c(e,void 0,n)},i(O),O},x=function(t){delete N[t]},m?i=function(t){w.nextTick(C(t))}:E&&E.now?i=function(t){E.now(C(t))}:S&&!y?(o=new S,s=o.port2,o.port1.onmessage=P,i=l(s.postMessage,s)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!d(R)?(i=R,a.addEventListener("message",P,!1)):i=T in g("script")?function(t){f.appendChild(g("script"))[T]=function(){f.removeChild(this),A(t)}}:function(t){setTimeout(C(t),0)}),t.exports={set:b,clear:x}},59226:function(t,e,n){var r=n(1068),i=n(99231),o=1,s=2;function a(t,e,n,a){var c=n.length,l=c,u=!a;if(null==t)return!l;t=Object(t);while(c--){var h=n[c];if(u&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}while(++c<l){h=n[c];var d=h[0],f=t[d],p=h[1];if(u&&h[2]){if(void 0===f&&!(d in t))return!1}else{var g=new r;if(a)var v=a(f,p,d,t,e,g);if(!(void 0===v?i(p,f,o|s,a,g):v))return!1}}return!0}t.exports=a},59276:function(t,e,n){var r=n(56636);function i(t){return r(this,t).has(t)}t.exports=i},59577:function(t,e,n){var r=n(5987);function i(t,e){return t.get(r(t,e))}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},59848:function(t,e,n){"use strict";n(86368),n(29309)},59851:function(t){var e=9007199254740991;function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}t.exports=n},60038:function(t,e,n){var r=n(97874),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;function c(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(c){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}t.exports=c},60658:function(t,e,n){var r=n(99315),i=n(59851),o=n(85091),s="[object Arguments]",a="[object Array]",c="[object Boolean]",l="[object Date]",u="[object Error]",h="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",g="[object RegExp]",v="[object Set]",y="[object String]",m="[object WeakMap]",b="[object ArrayBuffer]",x="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",k="[object Int8Array]",S="[object Int16Array]",M="[object Int32Array]",O="[object Uint8Array]",N="[object Uint8ClampedArray]",T="[object Uint16Array]",A="[object Uint32Array]",C={};function P(t){return o(t)&&i(t.length)&&!!C[r(t)]}C[w]=C[E]=C[k]=C[S]=C[M]=C[O]=C[N]=C[T]=C[A]=!0,C[s]=C[a]=C[b]=C[c]=C[x]=C[l]=C[u]=C[h]=C[d]=C[f]=C[p]=C[g]=C[v]=C[y]=C[m]=!1,t.exports=P},60710:function(t,e,n){n(16573),n(78100),n(77936);var r=n(11567),i=n(27546),o=n(67525),s=n(72288),a=n(97382),c=n(99315),l=n(42530),u="[object Map]",h="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",g="[object DataView]",v=l(r),y=l(i),m=l(o),b=l(s),x=l(a),w=c;(r&&w(new r(new ArrayBuffer(1)))!=g||i&&w(new i)!=u||o&&w(o.resolve())!=d||s&&w(new s)!=f||a&&w(new a)!=p)&&(w=function(t){var e=c(t),n=e==h?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case v:return g;case y:return u;case m:return d;case b:return f;case x:return p}return e}),t.exports=w},60712:function(t,e,n){var r=n(99315),i=n(87136),o=n(85091),s="[object Object]",a=Function.prototype,c=Object.prototype,l=a.toString,u=c.hasOwnProperty,h=l.call(Object);function d(t){if(!o(t)||r(t)!=s)return!1;var e=i(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==h}t.exports=d},61701:function(t,e,n){"use strict";var r=n(46518),i=n(20713),o=n(96395);r({target:"Iterator",proto:!0,real:!0,forced:o},{map:i})},61764:function(t,e,n){function r(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}n(18111),n(7588),t.exports=r},61806:function(t,e,n){"use strict";var r=n(46518),i=n(28551),o=n(72652),s=n(1767),a=[].push;r({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return o(s(i(this)),a,{that:t,IS_RECORD:!0}),t}})},61828:function(t,e,n){"use strict";var r=n(79504),i=n(39297),o=n(25397),s=n(19617).indexOf,a=n(30421),c=r([].push);t.exports=function(t,e){var n,r=o(t),l=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&c(u,n);while(e.length>l)i(r,n=e[l++])&&(~s(u,n)||c(u,n));return u}},62106:function(t,e,n){"use strict";var r=n(50283),i=n(24913);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),i.f(t,e,n)}},62297:function(t){function e(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}t.exports=e},62353:function(t,e,n){var r=n(56636);function i(t){var e=r(this,t)["delete"](t);return this.size-=e?1:0,e}t.exports=i},62529:function(t){"use strict";t.exports=function(t,e){return{value:t,done:e}}},62578:function(t){function e(t,e){var n=t.length;t.sort(e);while(n--)t[n]=t[n].value;return t}t.exports=e},63034:function(t,e,n){var r=n(59106),i=n(2442),o=i(r);t.exports=o},63066:function(t,e,n){var r=n(16281),i=n(62353),o=n(984),s=n(59276),a=n(63612);function c(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype["delete"]=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},63422:function(t,e,n){var r=n(44709),i=r();t.exports=i},63612:function(t,e,n){var r=n(56636);function i(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}t.exports=i},63897:function(t){function e(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}t.exports=e},64011:function(t,e,n){var r=n(71990),i=n(15219),o=n(85366),s=n(47744),a=n(59851),c=n(99416);function l(t,e,n){e=r(e,t);var l=-1,u=e.length,h=!1;while(++l<u){var d=c(e[l]);if(!(h=null!=t&&n(t,d)))break;t=t[d]}return h||++l!=u?h:(u=null==t?0:t.length,!!u&&a(u)&&s(d,u)&&(o(t)||i(t)))}t.exports=l},64117:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},64234:function(t){function e(t,e,n){var r=n-1,i=t.length;while(++r<i)if(t[r]===e)return r;return-1}t.exports=e},64449:function(t,e,n){"use strict";var r=n(97080),i=n(94402).has,o=n(25170),s=n(83789),a=n(38469),c=n(40507),l=n(9539);t.exports=function(t){var e=r(this),n=s(t);if(o(e)<=n.size)return!1!==a(e,(function(t){if(n.includes(t))return!1}),!0);var u=n.getIterator();return!1!==c(u,(function(t){if(i(e,t))return l(u,"normal",!1)}))}},64643:function(t,e,n){var r=n(97874),i=n(43575),o=n(85366),s=n(29299),a=1/0,c=r?r.prototype:void 0,l=c?c.toString:void 0;function u(t){if("string"==typeof t)return t;if(o(t))return i(t,u)+"";if(s(t))return l?l.call(t):"";var e=t+"";return"0"==e&&1/t==-a?"-0":e}t.exports=u},64867:function(t,e,n){var r=n(45761),i=/^\s+/;function o(t){return t?t.slice(0,r(t)+1).replace(i,""):t}t.exports=o},64979:function(t,e,n){"use strict";var r=n(46518),i=n(44576),o=n(97751),s=n(6980),a=n(24913).f,c=n(39297),l=n(90679),u=n(23167),h=n(32603),d=n(55002),f=n(38574),p=n(43724),g=n(96395),v="DOMException",y=o("Error"),m=o(v),b=function(){l(this,x);var t=arguments.length,e=h(t<1?void 0:arguments[0]),n=h(t<2?void 0:arguments[1],"Error"),r=new m(e,n),i=new y(e);return i.name=v,a(r,"stack",s(1,f(i.stack,1))),u(r,this,b),r},x=b.prototype=m.prototype,w="stack"in new y(v),E="stack"in new m(1,2),k=m&&p&&Object.getOwnPropertyDescriptor(i,v),S=!!k&&!(k.writable&&k.configurable),M=w&&!S&&!E;r({global:!0,constructor:!0,forced:g||M},{DOMException:M?b:m});var O=o(v),N=O.prototype;if(N.constructor!==O)for(var T in g||a(N,"constructor",s(1,O)),d)if(c(d,T)){var A=d[T],C=A.s;c(O,C)||a(O,C,s(6,A.c))}},65242:function(t,e,n){var r=n(78659),i=n(60710),o=n(48465),s=n(86250),a=n(3026),c="[object Map]",l="[object Set]";function u(t){if(null==t)return 0;if(o(t))return s(t)?a(t):t.length;var e=i(t);return e==c||e==l?t.size:r(t).length}t.exports=u},66119:function(t,e,n){"use strict";var r=n(25745),i=n(33392),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},66697:function(t,e,n){var r=n(43575),i=n(15686),o=n(19505),s=n(85366);function a(t,e){var n=s(t)?r:o;return n(t,i(e,3))}t.exports=a},66699:function(t,e,n){"use strict";var r=n(43724),i=n(24913),o=n(6980);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},67250:function(t,e,n){function r(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}n(44114),t.exports=r},67394:function(t,e,n){"use strict";var r=n(44576),i=n(46706),o=n(22195),s=r.ArrayBuffer,a=r.TypeError;t.exports=s&&i(s.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==o(t))throw new a("ArrayBuffer expected");return t.byteLength}},67525:function(t,e,n){var r=n(29531),i=n(68606),o=r(i,"Promise");t.exports=o},67680:function(t,e,n){"use strict";var r=n(79504);t.exports=r([].slice)},67750:function(t,e,n){"use strict";var r=n(64117),i=TypeError;t.exports=function(t){if(r(t))throw new i("Can't call method on "+t);return t}},67826:function(t,e,n){var r=n(84428);function i(t,e,n){r(t,e),e.set(t,n)}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},67979:function(t,e,n){"use strict";var r=n(28551);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},68606:function(t,e,n){var r=n(86903),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},68706:function(t,e,n){var r=n(46967),i=n(588);function o(t,e){return r(t,e,(function(e,n){return i(t,n)}))}t.exports=o},68742:function(t,e,n){"use strict";var r=n(67826)["default"],i=n(43325)["default"],o=n(59577)["default"],s=n(82887)["default"],a=n(74550)["default"],c=n(5987)["default"];n(44114),n(16573),n(78100),n(77936),n(18111),n(81148),n(37467),n(44732),n(79577);var l=n(57343),u=n(1351);const h=" ".repeat(2),d=" ".repeat(4);function f(){return p(this)}function p(t,e={}){const{maxRows:n=15,maxColumns:r=10,maxNumSize:i=8,padMinus:o="auto"}=e;return`${t.constructor.name} {\n${h}[\n${d}${g(t,n,r,i,o)}\n${h}]\n${h}rows: ${t.rows}\n${h}columns: ${t.columns}\n}`}function g(t,e,n,r,i){const{rows:o,columns:s}=t,a=Math.min(o,e),c=Math.min(s,n),l=[];if("auto"===i){i=!1;t:for(let e=0;e<a;e++)for(let n=0;n<c;n++)if(t.get(e,n)<0){i=!0;break t}}for(let u=0;u<a;u++){let e=[];for(let n=0;n<c;n++)e.push(v(t.get(u,n),r,i));l.push(`${e.join(" ")}`)}return c!==s&&(l[l.length-1]+=` ... ${s-n} more columns`),a!==o&&l.push(`... ${o-e} more rows`),l.join(`\n${d}`)}function v(t,e,n){return(t>=0&&n?` ${y(t,e-1)}`:y(t,e)).padEnd(e)}function y(t,e){let n=t.toString();if(n.length<=e)return n;let r=t.toFixed(e);if(r.length>e&&(r=t.toFixed(Math.max(0,e-(r.length-e)))),r.length<=e&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;let i=t.toExponential(e);return i.length>e&&(i=t.toExponential(Math.max(0,e-(i.length-e)))),i.slice(0)}function m(t,e){t.prototype.add=function(t){return"number"===typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},t.add=function(t,n){const r=new e(t);return r.add(n)},t.prototype.sub=function(t){return"number"===typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},t.sub=function(t,n){const r=new e(t);return r.sub(n)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"===typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},t.mul=function(t,n){const r=new e(t);return r.mul(n)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"===typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},t.div=function(t,n){const r=new e(t);return r.div(n)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"===typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},t.mod=function(t,n){const r=new e(t);return r.mod(n)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"===typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},t.and=function(t,n){const r=new e(t);return r.and(n)},t.prototype.or=function(t){return"number"===typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},t.or=function(t,n){const r=new e(t);return r.or(n)},t.prototype.xor=function(t){return"number"===typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},t.xor=function(t,n){const r=new e(t);return r.xor(n)},t.prototype.leftShift=function(t){return"number"===typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},t.leftShift=function(t,n){const r=new e(t);return r.leftShift(n)},t.prototype.signPropagatingRightShift=function(t){return"number"===typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},t.signPropagatingRightShift=function(t,n){const r=new e(t);return r.signPropagatingRightShift(n)},t.prototype.rightShift=function(t){return"number"===typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},t.rightShift=function(t,n){const r=new e(t);return r.rightShift(n)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){const n=new e(t);return n.not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){const n=new e(t);return n.abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){const n=new e(t);return n.acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){const n=new e(t);return n.acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){const n=new e(t);return n.asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){const n=new e(t);return n.asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){const n=new e(t);return n.atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){const n=new e(t);return n.atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){const n=new e(t);return n.cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){const n=new e(t);return n.ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){const n=new e(t);return n.clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){const n=new e(t);return n.cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){const n=new e(t);return n.cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){const n=new e(t);return n.exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){const n=new e(t);return n.expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){const n=new e(t);return n.floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){const n=new e(t);return n.fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){const n=new e(t);return n.log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){const n=new e(t);return n.log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){const n=new e(t);return n.log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){const n=new e(t);return n.log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){const n=new e(t);return n.round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){const n=new e(t);return n.sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){const n=new e(t);return n.sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){const n=new e(t);return n.sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){const n=new e(t);return n.sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){const n=new e(t);return n.tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){const n=new e(t);return n.tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){const n=new e(t);return n.trunc()},t.pow=function(t,n){const r=new e(t);return r.pow(n)},t.prototype.pow=function(t){return"number"===typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)**t);return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)**t.get(e,n));return this}}function b(t,e,n){let r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function x(t,e,n){let r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function w(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function E(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function k(t,e){if(!l.isAnyArray(e))throw new TypeError("row indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.rows)throw new RangeError("row indices are out of range")}function S(t,e){if(!l.isAnyArray(e))throw new TypeError("column indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.columns)throw new RangeError("column indices are out of range")}function M(t,e,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(N("startRow",e),N("endRow",n),N("startColumn",r),N("endColumn",i),e>n||r>i||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function O(t,e=0){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function N(t,e){if("number"!==typeof e)throw new TypeError(`${t} must be a number`)}function T(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function A(t){let e=O(t.rows);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}function C(t){let e=O(t.columns);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}function P(t){let e=0;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e+=t.get(n,r);return e}function R(t){let e=O(t.rows,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}function _(t){let e=O(t.columns,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}function L(t){let e=1;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e*=t.get(n,r);return e}function D(t,e,n){const r=t.rows,i=t.columns,o=[];for(let s=0;s<r;s++){let r=0,a=0,c=0;for(let e=0;e<i;e++)c=t.get(s,e)-n[s],r+=c,a+=c*c;e?o.push((a-r*r/i)/(i-1)):o.push((a-r*r/i)/i)}return o}function I(t,e,n){const r=t.rows,i=t.columns,o=[];for(let s=0;s<i;s++){let i=0,a=0,c=0;for(let e=0;e<r;e++)c=t.get(e,s)-n[s],i+=c,a+=c*c;e?o.push((a-i*i/r)/(r-1)):o.push((a-i*i/r)/r)}return o}function j(t,e,n){const r=t.rows,i=t.columns,o=r*i;let s=0,a=0,c=0;for(let l=0;l<r;l++)for(let e=0;e<i;e++)c=t.get(l,e)-n,s+=c,a+=c*c;return e?(a-s*s/o)/(o-1):(a-s*s/o)/o}function F(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}function B(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}function z(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}function G(t){const e=[];for(let n=0;n<t.rows;n++){let r=0;for(let e=0;e<t.columns;e++)r+=t.get(n,e)**2/(t.columns-1);e.push(Math.sqrt(r))}return e}function V(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}function W(t){const e=[];for(let n=0;n<t.columns;n++){let r=0;for(let e=0;e<t.rows;e++)r+=t.get(e,n)**2/(t.rows-1);e.push(Math.sqrt(r))}return e}function U(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}function H(t){const e=t.size-1;let n=0;for(let r=0;r<t.columns;r++)for(let i=0;i<t.rows;i++)n+=t.get(i,r)**2/e;return Math.sqrt(n)}function $(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}class Y{static from1DArray(t,e,n){let r=t*e;if(r!==n.length)throw new RangeError("data length does not match given dimensions");let i=new Z(t,e);for(let o=0;o<t;o++)for(let t=0;t<e;t++)i.set(o,t,n[o*e+t]);return i}static rowVector(t){let e=new Z(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new Z(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new Z(t,e)}static ones(t,e){return new Z(t,e).fill(1)}static rand(t,e,n={}){if("object"!==typeof n)throw new TypeError("options must be an object");const{random:r=Math.random}=n;let i=new Z(t,e);for(let o=0;o<t;o++)for(let t=0;t<e;t++)i.set(o,t,r());return i}static randInt(t,e,n={}){if("object"!==typeof n)throw new TypeError("options must be an object");const{min:r=0,max:i=1e3,random:o=Math.random}=n;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(r>=i)throw new RangeError("min must be smaller than max");let s=i-r,a=new Z(t,e);for(let c=0;c<t;c++)for(let t=0;t<e;t++){let e=r+Math.round(o()*s);a.set(c,t,e)}return a}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);let r=Math.min(t,e),i=this.zeros(t,e);for(let o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){let r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);let i=Math.min(r,e,n),o=this.zeros(e,n);for(let s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new Z(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.min(t.get(o,n),e.get(o,n)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new this(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.max(t.get(o,n),e.get(o,n)));return i}static checkMatrix(t){return Y.isMatrix(t)?t:new Z(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!==typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let t=0;t<this.rows;t++)if(0!==this.get(t,t))return!1;return!0}isEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;while(t<this.rows&&r){e=0,i=!1;while(e<this.columns&&!1===i)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);t++}return r}isReducedEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;while(t<this.rows&&r){e=0,i=!1;while(e<this.columns&&!1===i)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);for(let n=e+1;n<this.rows;n++)0!==this.get(t,n)&&(r=!1);t++}return r}echelonForm(){let t=this.clone(),e=0,n=0;while(e<t.rows&&n<t.columns){let r=e;for(let i=e;i<t.rows;i++)t.get(i,n)>t.get(r,n)&&(r=i);if(0===t.get(r,n))n++;else{t.swapRows(e,r);let i=t.get(e,n);for(let r=n;r<t.columns;r++)t.set(e,r,t.get(e,r)/i);for(let r=e+1;r<t.rows;r++){let i=t.get(r,n)/t.get(e,n);t.set(r,n,0);for(let o=n+1;o<t.columns;o++)t.set(r,o,t.get(r,o)-t.get(e,o)*i)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;while(r>=0)if(0===t.maxRow(r))r--;else{let i=0,o=!1;while(i<n&&!1===o)1===t.get(r,i)?o=!0:i++;for(let n=0;n<r;n++){let o=t.get(n,i);for(let s=i;s<e;s++){let e=t.get(n,s)-o*t.get(r,s);t.set(n,s,e)}}r--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!==typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let r=new Z(this.rows*e,this.columns*n);for(let i=0;i<e;i++)for(let t=0;t<n;t++)r.setSubMatrix(this,this.rows*i,this.columns*t);return r}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){b(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return Z.rowVector(this.getRow(t))}setRow(t,e){b(this,t),e=w(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){b(this,t),b(this,e);for(let n=0;n<this.columns;n++){let r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}getColumn(t){x(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return Z.columnVector(this.getColumn(t))}setColumn(t,e){x(this,t),e=E(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){x(this,t),x(this,e);for(let n=0;n<this.rows;n++){let r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}addRowVector(t){t=w(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=w(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=w(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=w(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=E(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=E(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=E(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=E(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){b(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){x(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t[e]&&(t[e]=this.get(e,n));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t[n]&&(t[n]=this.get(e,n));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){T(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t[e]&&(t[e]=this.get(e,n));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t[n]&&(t[n]=this.get(e,n));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}default:throw new Error(`invalid option: ${t}`)}}minIndex(){T(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){if(b(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){b(this,t),T(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){if(b(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){b(this,t),T(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){if(x(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){x(this,t),T(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){if(x(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){x(this,t),T(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${t}`)}}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){Y.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=Z.checkMatrix(t);let e=this.rows,n=this.columns,r=t.columns,i=new Z(e,r),o=new Float64Array(n);for(let s=0;s<r;s++){for(let e=0;e<n;e++)o[e]=t.get(e,s);for(let t=0;t<e;t++){let e=0;for(let r=0;r<n;r++)e+=this.get(t,r)*o[r];i.set(t,s,e)}}return i}mpow(t){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(t)||t<0)throw new RangeError("Exponent must be a non-negative integer");let e=Z.eye(this.rows),n=this;for(let r=t;r>=1;r/=2)0!==(1&r)&&(e=e.mmul(n)),n=n.mmul(n);return e}strassen2x2(t){t=Z.checkMatrix(t);let e=new Z(2,2);const n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),c=this.get(1,1),l=t.get(1,1),u=(n+c)*(r+l),h=(s+c)*r,d=n*(o-l),f=c*(a-r),p=(n+i)*l,g=(s-n)*(r+o),v=(i-c)*(a+l),y=u+f-p+v,m=d+p,b=h+f,x=u-h+d+g;return e.set(0,0,y),e.set(0,1,m),e.set(1,0,b),e.set(1,1,x),e}strassen3x3(t){t=Z.checkMatrix(t);let e=new Z(3,3);const n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),c=this.get(2,0),l=this.get(2,1),u=this.get(2,2),h=t.get(0,0),d=t.get(0,1),f=t.get(0,2),p=t.get(1,0),g=t.get(1,1),v=t.get(1,2),y=t.get(2,0),m=t.get(2,1),b=t.get(2,2),x=(n+r+i-o-s-l-u)*g,w=(n-o)*(-d+g),E=s*(-h+d+p-g-v-y+b),k=(-n+o+s)*(h-d+g),S=(o+s)*(-h+d),M=n*h,O=(-n+c+l)*(h-f+v),N=(-n+c)*(f-v),T=(c+l)*(-h+f),A=(n+r+i-s-a-c-l)*v,C=l*(-h+f+p-g-v-y+m),P=(-i+l+u)*(g+y-m),R=(i-u)*(g-m),_=i*y,L=(l+u)*(-y+m),D=(-i+s+a)*(v+y-b),I=(i-a)*(v-b),j=(s+a)*(-y+b),F=r*p,B=a*m,z=o*f,G=c*d,V=u*b,W=M+_+F,U=x+k+S+M+P+_+L,H=M+O+T+A+_+D+j,$=w+E+k+M+_+D+I,Y=w+k+S+M+B,q=_+D+I+j+z,X=M+O+N+C+P+R+_,K=P+R+_+L+G,J=M+O+N+T+V;return e.set(0,0,W),e.set(0,1,U),e.set(0,2,H),e.set(1,0,$),e.set(1,1,Y),e.set(1,2,q),e.set(2,0,X),e.set(2,1,K),e.set(2,2,J),e}mmulStrassen(t){t=Z.checkMatrix(t);let e=this.clone(),n=e.rows,r=e.columns,i=t.rows,o=t.columns;function s(t,e,n){let r=t.rows,i=t.columns;if(r===e&&i===n)return t;{let r=Y.zeros(e,n);return r=r.setSubMatrix(t,0,0),r}}r!==i&&console.warn(`Multiplying ${n} x ${r} and ${i} x ${o} matrix: dimensions do not match.`);let a=Math.max(n,i),c=Math.max(r,o);function l(t,e,n,r){if(n<=512||r<=512)return t.mmul(e);n%2===1&&r%2===1?(t=s(t,n+1,r+1),e=s(e,n+1,r+1)):n%2===1?(t=s(t,n+1,r),e=s(e,n+1,r)):r%2===1&&(t=s(t,n,r+1),e=s(e,n,r+1));let i=parseInt(t.rows/2,10),o=parseInt(t.columns/2,10),a=t.subMatrix(0,i-1,0,o-1),c=e.subMatrix(0,i-1,0,o-1),u=t.subMatrix(0,i-1,o,t.columns-1),h=e.subMatrix(0,i-1,o,e.columns-1),d=t.subMatrix(i,t.rows-1,0,o-1),f=e.subMatrix(i,e.rows-1,0,o-1),p=t.subMatrix(i,t.rows-1,o,t.columns-1),g=e.subMatrix(i,e.rows-1,o,e.columns-1),v=l(Y.add(a,p),Y.add(c,g),i,o),y=l(Y.add(d,p),c,i,o),m=l(a,Y.sub(h,g),i,o),b=l(p,Y.sub(f,c),i,o),x=l(Y.add(a,u),g,i,o),w=l(Y.sub(d,a),Y.add(c,h),i,o),E=l(Y.sub(u,p),Y.add(f,g),i,o),k=Y.add(v,b);k.sub(x),k.add(E);let S=Y.add(m,x),M=Y.add(y,b),O=Y.sub(v,y);O.add(m),O.add(w);let N=Y.zeros(2*k.rows,2*k.columns);return N=N.setSubMatrix(k,0,0),N=N.setSubMatrix(S,k.rows,0),N=N.setSubMatrix(M,0,k.columns),N=N.setSubMatrix(O,k.rows,k.columns),N.subMatrix(0,n-1,0,r-1)}return e=s(e,a,c),t=s(t,a,c),l(e,t,a,c)}scaleRows(t={}){if("object"!==typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new Z(this.rows,this.columns);for(let i=0;i<this.rows;i++){const t=this.getRow(i);t.length>0&&u(t,{min:e,max:n,output:t}),r.setRow(i,t)}return r}scaleColumns(t={}){if("object"!==typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new Z(this.rows,this.columns);for(let i=0;i<this.columns;i++){const t=this.getColumn(i);t.length&&u(t,{min:e,max:n,output:t}),r.setColumn(i,t)}return r}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let t=this.get(e,n),r=this.get(e,this.columns-1-n);this.set(e,n,r),this.set(e,this.columns-1-n,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let t=this.get(n,e),r=this.get(this.rows-1-n,e);this.set(n,e,r),this.set(this.rows-1-n,e,t)}return this}kroneckerProduct(t){t=Z.checkMatrix(t);let e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new Z(e*r,n*i);for(let s=0;s<e;s++)for(let e=0;e<n;e++)for(let n=0;n<r;n++)for(let a=0;a<i;a++)o.set(r*s+n,i*e+a,this.get(s,e)*t.get(n,a));return o}kroneckerSum(t){if(t=Z.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,n=t.rows,r=this.kroneckerProduct(Z.eye(n,n)),i=Z.eye(e,e).kroneckerProduct(t);return r.add(i)}transpose(){let t=new Z(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=q){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=q){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){M(this,t,e,n,r);let i=new Z(e-t+1,r-n+1);for(let o=t;o<=e;o++)for(let e=n;e<=r;e++)i.set(o-t,e-n,this.get(o,e));return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let r=new Z(t.length,n-e+1);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let r=new Z(n-e+1,t.length);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){if(t=Z.checkMatrix(t),t.isEmpty())return this;let r=e+t.rows-1,i=n+t.columns-1;M(this,e,r,n,i);for(let o=0;o<t.rows;o++)for(let r=0;r<t.columns;r++)this.set(e+o,n+r,t.get(o,r));return this}selection(t,e){k(this,t),S(this,e);let n=new Z(t.length,e.length);for(let r=0;r<t.length;r++){let i=t[r];for(let t=0;t<e.length;t++){let o=e[t];n.set(r,t,this.get(i,o))}}return n}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){return this.constructor.copy(this,new Z(this.rows,this.columns))}static copy(t,e){for(const[n,r,i]of t.entries())e.set(n,r,i);return e}sum(t){switch(t){case"row":return A(this);case"column":return C(this);case void 0:return P(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return R(this);case"column":return _(this);case void 0:return L(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"===typeof t&&(e=t,t=void 0),"object"!==typeof e)throw new TypeError("options must be an object");const{unbiased:n=!0,mean:r=this.mean(t)}=e;if("boolean"!==typeof n)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!l.isAnyArray(r))throw new TypeError("mean must be an array");return D(this,n,r);case"column":if(!l.isAnyArray(r))throw new TypeError("mean must be an array");return I(this,n,r);case void 0:if("number"!==typeof r)throw new TypeError("mean must be a number");return j(this,n,r);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"===typeof t&&(e=t,t=void 0);const n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(let r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}center(t,e={}){if("object"===typeof t&&(e=t,t=void 0),"object"!==typeof e)throw new TypeError("options must be an object");const{center:n=this.mean(t)}=e;switch(t){case"row":if(!l.isAnyArray(n))throw new TypeError("center must be an array");return F(this,n),this;case"column":if(!l.isAnyArray(n))throw new TypeError("center must be an array");return B(this,n),this;case void 0:if("number"!==typeof n)throw new TypeError("center must be a number");return z(this,n),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"===typeof t&&(e=t,t=void 0),"object"!==typeof e)throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":if(void 0===n)n=G(this);else if(!l.isAnyArray(n))throw new TypeError("scale must be an array");return V(this,n),this;case"column":if(void 0===n)n=W(this);else if(!l.isAnyArray(n))throw new TypeError("scale must be an array");return U(this,n),this;case void 0:if(void 0===n)n=H(this);else if("number"!==typeof n)throw new TypeError("scale must be a number");return $(this,n),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return p(this,t)}[Symbol.iterator](){return this.entries()}*entries(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield[t,e,this.get(t,e)]}*values(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield this.get(t,e)}}function q(t,e){return t-e}function X(t){return t.every((t=>"number"===typeof t))}Y.prototype.klass="Matrix","undefined"!==typeof Symbol&&(Y.prototype[Symbol.for("nodejs.util.inspect.custom")]=f),Y.random=Y.rand,Y.randomInt=Y.randInt,Y.diagonal=Y.diag,Y.prototype.diagonal=Y.prototype.diag,Y.identity=Y.eye,Y.prototype.negate=Y.prototype.neg,Y.prototype.tensorProduct=Y.prototype.kroneckerProduct;var K=new WeakSet;class Z extends Y{constructor(t,e){if(super(),s(this,K),a(this,"data",void 0),Z.isMatrix(t))c(K,this,J).call(this,t.rows,t.columns),Z.copy(t,this);else if(Number.isInteger(t)&&t>=0)c(K,this,J).call(this,t,e);else{if(!l.isAnyArray(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if(t=n.length,e=t?n[0].length:0,"number"!==typeof e)throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<t;r++){if(n[r].length!==e)throw new RangeError("Inconsistent array dimensions");if(!X(n[r]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[r]))}this.rows=t,this.columns=e}}}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return b(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),b(this,t,!0),e=Float64Array.from(w(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){x(this,t);for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let r=0;r<t;r++)n[r]=this.data[e][r];for(let r=t+1;r<this.columns;r++)n[r-1]=this.data[e][r];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){"undefined"===typeof e&&(e=t,t=this.columns),x(this,t,!0),e=E(this,e);for(let n=0;n<this.rows;n++){const r=new Float64Array(this.columns+1);let i=0;for(;i<t;i++)r[i]=this.data[n][i];for(r[i++]=e[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}function J(t,e){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let n=0;n<t;n++)this.data.push(new Float64Array(e));this.rows=t,this.columns=e}m(Y,Z);var Q=new WeakMap;class tt extends Y{get size(){return o(Q,this).size}get rows(){return o(Q,this).rows}get columns(){return o(Q,this).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(t){return Z.isMatrix(t)&&"SymmetricMatrix"===t.klassType}static zeros(t){return new this(t)}static ones(t){return new this(t).fill(1)}constructor(t){if(super(),r(this,Q,void 0),Z.isMatrix(t)){if(!t.isSymmetric())throw new TypeError("not symmetric data");i(Q,this,Z.copy(t,new Z(t.rows,t.rows)))}else if(Number.isInteger(t)&&t>=0)i(Q,this,new Z(t,t));else if(i(Q,this,new Z(t)),!this.isSymmetric())throw new TypeError("not symmetric data")}clone(){const t=new tt(this.diagonalSize);for(const[e,n,r]of this.upperRightEntries())t.set(e,n,r);return t}toMatrix(){return new Z(this)}get(t,e){return o(Q,this).get(t,e)}set(t,e,n){return o(Q,this).set(t,e,n),o(Q,this).set(e,t,n),this}removeCross(t){return o(Q,this).removeRow(t),o(Q,this).removeColumn(t),this}addCross(t,e){void 0===e&&(e=t,t=this.diagonalSize);const n=e.slice();return n.splice(t,1),o(Q,this).addRow(t,n),o(Q,this).addColumn(t,e),this}applyMask(t){if(t.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const e=[];for(const[n,r]of t.entries())r||e.push(n);e.reverse();for(const n of e)this.removeCross(n);return this}toCompact(){const{diagonalSize:t}=this,e=new Array(t*(t+1)/2);for(let n=0,r=0,i=0;i<e.length;i++)e[i]=this.get(r,n),++n>=t&&(n=++r);return e}static fromCompact(t){const e=t.length,n=(Math.sqrt(8*e+1)-1)/2;if(!Number.isInteger(n))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(t)}`);const r=new tt(n);for(let i=0,o=0,s=0;s<e;s++)r.set(i,o,t[s]),++i>=n&&(i=++o);return r}*upperRightEntries(){for(let t=0,e=0;t<this.diagonalSize;void 0){const n=this.get(t,e);yield[t,e,n],++e>=this.diagonalSize&&(e=++t)}}*upperRightValues(){for(let t=0,e=0;t<this.diagonalSize;void 0){const n=this.get(t,e);yield n,++e>=this.diagonalSize&&(e=++t)}}}tt.prototype.klassType="SymmetricMatrix";class et extends tt{static isDistanceMatrix(t){return tt.isSymmetricMatrix(t)&&"DistanceMatrix"===t.klassSubType}constructor(t){if(super(t),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(t,e,n){return t===e&&(n=0),super.set(t,e,n)}addCross(t,e){return void 0===e&&(e=t,t=this.diagonalSize),e=e.slice(),e[t]=0,super.addCross(t,e)}toSymmetricMatrix(){return new tt(this)}clone(){const t=new et(this.diagonalSize);for(const[e,n,r]of this.upperRightEntries())e!==n&&t.set(e,n,r);return t}toCompact(){const{diagonalSize:t}=this,e=(t-1)*t/2,n=new Array(e);for(let r=1,i=0,o=0;o<n.length;o++)n[o]=this.get(i,r),++r>=t&&(r=1+ ++i);return n}static fromCompact(t){const e=t.length;if(0===e)return new this(0);const n=(Math.sqrt(8*e+1)+1)/2;if(!Number.isInteger(n))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(t)}`);const r=new this(n);for(let i=1,o=0,s=0;s<e;s++)r.set(i,o,t[s]),++i>=n&&(i=1+ ++o);return r}}et.prototype.klassSubType="DistanceMatrix";class nt extends Y{constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}}class rt extends nt{constructor(t,e){x(t,e),super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}class it extends nt{constructor(t,e){S(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,n){return this.matrix.set(t,this.columnIndices[e],n),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class ot extends nt{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}class st extends nt{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class at extends nt{constructor(t,e){b(t,e),super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}class ct extends nt{constructor(t,e){k(t,e),super(t,e.length,t.columns),this.rowIndices=e}set(t,e,n){return this.matrix.set(this.rowIndices[t],e,n),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class lt extends nt{constructor(t,e,n){k(t,e),S(t,n),super(t,e.length,n.length),this.rowIndices=e,this.columnIndices=n}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class ut extends nt{constructor(t,e,n,r,i){M(t,e,n,r,i),super(t,n-e+1,i-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class ht extends nt{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}class dt extends Y{constructor(t,e={}){const{rows:n=1}=e;if(t.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=t.length/n,this.data=t}set(t,e,n){let r=this._calculateIndex(t,e);return this.data[r]=n,this}get(t,e){let n=this._calculateIndex(t,e);return this.data[n]}_calculateIndex(t,e){return t*this.columns+e}}class ft extends Y{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}}function pt(t,e){if(l.isAnyArray(t))return t[0]&&l.isAnyArray(t[0])?new ft(t):new dt(t,e);throw new Error("the argument is not an array")}class gt{constructor(t){t=ft.checkMatrix(t);let e,n,r,i,o,s,a,c,l,u=t.clone(),h=u.rows,d=u.columns,f=new Float64Array(h),p=1;for(e=0;e<h;e++)f[e]=e;for(c=new Float64Array(h),n=0;n<d;n++){for(e=0;e<h;e++)c[e]=u.get(e,n);for(e=0;e<h;e++){for(l=Math.min(e,n),o=0,r=0;r<l;r++)o+=u.get(e,r)*c[r];c[e]-=o,u.set(e,n,c[e])}for(i=n,e=n+1;e<h;e++)Math.abs(c[e])>Math.abs(c[i])&&(i=e);if(i!==n){for(r=0;r<d;r++)s=u.get(i,r),u.set(i,r,u.get(n,r)),u.set(n,r,s);a=f[i],f[i]=f[n],f[n]=a,p=-p}if(n<h&&0!==u.get(n,n))for(e=n+1;e<h;e++)u.set(e,n,u.get(e,n)/u.get(n,n))}this.LU=u,this.pivotVector=f,this.pivotSign=p}isSingular(){let t=this.LU,e=t.columns;for(let n=0;n<e;n++)if(0===t.get(n,n))return!0;return!1}solve(t){t=Z.checkMatrix(t);let e=this.LU,n=e.rows;if(n!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r,i,o,s=t.columns,a=t.subMatrixRow(this.pivotVector,0,s-1),c=e.columns;for(o=0;o<c;o++)for(r=o+1;r<c;r++)for(i=0;i<s;i++)a.set(r,i,a.get(r,i)-a.get(o,i)*e.get(r,o));for(o=c-1;o>=0;o--){for(i=0;i<s;i++)a.set(o,i,a.get(o,i)/e.get(o,o));for(r=0;r<o;r++)for(i=0;i<s;i++)a.set(r,i,a.get(r,i)-a.get(o,i)*e.get(r,o))}return a}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,n=t.columns;for(let r=0;r<n;r++)e*=t.get(r,r);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new Z(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i>e?r.set(i,e,t.get(i,e)):i===e?r.set(i,e,1):r.set(i,e,0);return r}get upperTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new Z(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i<=e?r.set(i,e,t.get(i,e)):r.set(i,e,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function vt(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}class yt{constructor(t){t=ft.checkMatrix(t);let e,n,r,i,o=t.clone(),s=t.rows,a=t.columns,c=new Float64Array(a);for(r=0;r<a;r++){let t=0;for(e=r;e<s;e++)t=vt(t,o.get(e,r));if(0!==t){for(o.get(r,r)<0&&(t=-t),e=r;e<s;e++)o.set(e,r,o.get(e,r)/t);for(o.set(r,r,o.get(r,r)+1),n=r+1;n<a;n++){for(i=0,e=r;e<s;e++)i+=o.get(e,r)*o.get(e,n);for(i=-i/o.get(r,r),e=r;e<s;e++)o.set(e,n,o.get(e,n)+i*o.get(e,r))}}c[r]=-t}this.QR=o,this.Rdiag=c}solve(t){t=Z.checkMatrix(t);let e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r,i,o,s,a=t.columns,c=t.clone(),l=e.columns;for(o=0;o<l;o++)for(i=0;i<a;i++){for(s=0,r=o;r<n;r++)s+=e.get(r,o)*c.get(r,i);for(s=-s/e.get(o,o),r=o;r<n;r++)c.set(r,i,c.get(r,i)+s*e.get(r,o))}for(o=l-1;o>=0;o--){for(i=0;i<a;i++)c.set(o,i,c.get(o,i)/this.Rdiag[o]);for(r=0;r<o;r++)for(i=0;i<a;i++)c.set(r,i,c.get(r,i)-c.get(o,i)*e.get(r,o))}return c.subMatrix(0,l-1,0,a-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){let t,e,n=this.QR,r=n.columns,i=new Z(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)t<e?i.set(t,e,n.get(t,e)):t===e?i.set(t,e,this.Rdiag[t]):i.set(t,e,0);return i}get orthogonalMatrix(){let t,e,n,r,i=this.QR,o=i.rows,s=i.columns,a=new Z(o,s);for(n=s-1;n>=0;n--){for(t=0;t<o;t++)a.set(t,n,0);for(a.set(n,n,1),e=n;e<s;e++)if(0!==i.get(n,n)){for(r=0,t=n;t<o;t++)r+=i.get(t,n)*a.get(t,e);for(r=-r/i.get(n,n),t=n;t<o;t++)a.set(t,e,a.get(t,e)+r*i.get(t,n))}}return a}}class mt{constructor(t,e={}){if(t=ft.checkMatrix(t),t.isEmpty())throw new Error("Matrix must be non-empty");let n=t.rows,r=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:s=!1}=e;let a,c=Boolean(i),l=Boolean(o),u=!1;if(n<r)if(s){a=t.transpose(),n=a.rows,r=a.columns,u=!0;let e=c;c=l,l=e}else a=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else a=t.clone();let h=Math.min(n,r),d=Math.min(n+1,r),f=new Float64Array(d),p=new Z(n,h),g=new Z(r,r),v=new Float64Array(r),y=new Float64Array(n),m=new Float64Array(d);for(let M=0;M<d;M++)m[M]=M;let b=Math.min(n-1,r),x=Math.max(0,Math.min(r-2,n)),w=Math.max(b,x);for(let M=0;M<w;M++){if(M<b){f[M]=0;for(let t=M;t<n;t++)f[M]=vt(f[M],a.get(t,M));if(0!==f[M]){a.get(M,M)<0&&(f[M]=-f[M]);for(let t=M;t<n;t++)a.set(t,M,a.get(t,M)/f[M]);a.set(M,M,a.get(M,M)+1)}f[M]=-f[M]}for(let t=M+1;t<r;t++){if(M<b&&0!==f[M]){let e=0;for(let r=M;r<n;r++)e+=a.get(r,M)*a.get(r,t);e=-e/a.get(M,M);for(let r=M;r<n;r++)a.set(r,t,a.get(r,t)+e*a.get(r,M))}v[t]=a.get(M,t)}if(c&&M<b)for(let t=M;t<n;t++)p.set(t,M,a.get(t,M));if(M<x){v[M]=0;for(let t=M+1;t<r;t++)v[M]=vt(v[M],v[t]);if(0!==v[M]){v[M+1]<0&&(v[M]=0-v[M]);for(let t=M+1;t<r;t++)v[t]/=v[M];v[M+1]+=1}if(v[M]=-v[M],M+1<n&&0!==v[M]){for(let t=M+1;t<n;t++)y[t]=0;for(let t=M+1;t<n;t++)for(let e=M+1;e<r;e++)y[t]+=v[e]*a.get(t,e);for(let t=M+1;t<r;t++){let e=-v[t]/v[M+1];for(let r=M+1;r<n;r++)a.set(r,t,a.get(r,t)+e*y[r])}}if(l)for(let t=M+1;t<r;t++)g.set(t,M,v[t])}}let E=Math.min(r,n+1);if(b<r&&(f[b]=a.get(b,b)),n<E&&(f[E-1]=0),x+1<E&&(v[x]=a.get(x,E-1)),v[E-1]=0,c){for(let t=b;t<h;t++){for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}for(let t=b-1;t>=0;t--)if(0!==f[t]){for(let e=t+1;e<h;e++){let r=0;for(let i=t;i<n;i++)r+=p.get(i,t)*p.get(i,e);r=-r/p.get(t,t);for(let i=t;i<n;i++)p.set(i,e,p.get(i,e)+r*p.get(i,t))}for(let e=t;e<n;e++)p.set(e,t,-p.get(e,t));p.set(t,t,1+p.get(t,t));for(let e=0;e<t-1;e++)p.set(e,t,0)}else{for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}}if(l)for(let M=r-1;M>=0;M--){if(M<x&&0!==v[M])for(let t=M+1;t<r;t++){let e=0;for(let n=M+1;n<r;n++)e+=g.get(n,M)*g.get(n,t);e=-e/g.get(M+1,M);for(let n=M+1;n<r;n++)g.set(n,t,g.get(n,t)+e*g.get(n,M))}for(let t=0;t<r;t++)g.set(t,M,0);g.set(M,M,1)}let k=E-1,S=Number.EPSILON;while(E>0){let t,e;for(t=E-2;t>=-1;t--){if(-1===t)break;const e=Number.MIN_VALUE+S*Math.abs(f[t]+Math.abs(f[t+1]));if(Math.abs(v[t])<=e||Number.isNaN(v[t])){v[t]=0;break}}if(t===E-2)e=4;else{let n;for(n=E-1;n>=t;n--){if(n===t)break;let e=(n!==E?Math.abs(v[n]):0)+(n!==t+1?Math.abs(v[n-1]):0);if(Math.abs(f[n])<=S*e){f[n]=0;break}}n===t?e=3:n===E-1?e=1:(e=2,t=n)}switch(t++,e){case 1:{let e=v[E-2];v[E-2]=0;for(let n=E-2;n>=t;n--){let i=vt(f[n],e),o=f[n]/i,s=e/i;if(f[n]=i,n!==t&&(e=-s*v[n-1],v[n-1]=o*v[n-1]),l)for(let t=0;t<r;t++)i=o*g.get(t,n)+s*g.get(t,E-1),g.set(t,E-1,-s*g.get(t,n)+o*g.get(t,E-1)),g.set(t,n,i)}break}case 2:{let e=v[t-1];v[t-1]=0;for(let r=t;r<E;r++){let i=vt(f[r],e),o=f[r]/i,s=e/i;if(f[r]=i,e=-s*v[r],v[r]=o*v[r],c)for(let e=0;e<n;e++)i=o*p.get(e,r)+s*p.get(e,t-1),p.set(e,t-1,-s*p.get(e,r)+o*p.get(e,t-1)),p.set(e,r,i)}break}case 3:{const e=Math.max(Math.abs(f[E-1]),Math.abs(f[E-2]),Math.abs(v[E-2]),Math.abs(f[t]),Math.abs(v[t])),i=f[E-1]/e,o=f[E-2]/e,s=v[E-2]/e,a=f[t]/e,u=v[t]/e,h=((o+i)*(o-i)+s*s)/2,d=i*s*(i*s);let y=0;0===h&&0===d||(y=h<0?0-Math.sqrt(h*h+d):Math.sqrt(h*h+d),y=d/(h+y));let m=(a+i)*(a-i)+y,b=a*u;for(let x=t;x<E-1;x++){let e=vt(m,b);0===e&&(e=Number.MIN_VALUE);let i=m/e,o=b/e;if(x!==t&&(v[x-1]=e),m=i*f[x]+o*v[x],v[x]=i*v[x]-o*f[x],b=o*f[x+1],f[x+1]=i*f[x+1],l)for(let t=0;t<r;t++)e=i*g.get(t,x)+o*g.get(t,x+1),g.set(t,x+1,-o*g.get(t,x)+i*g.get(t,x+1)),g.set(t,x,e);if(e=vt(m,b),0===e&&(e=Number.MIN_VALUE),i=m/e,o=b/e,f[x]=e,m=i*v[x]+o*f[x+1],f[x+1]=-o*v[x]+i*f[x+1],b=o*v[x+1],v[x+1]=i*v[x+1],c&&x<n-1)for(let t=0;t<n;t++)e=i*p.get(t,x)+o*p.get(t,x+1),p.set(t,x+1,-o*p.get(t,x)+i*p.get(t,x+1)),p.set(t,x,e)}v[E-2]=m;break}case 4:if(f[t]<=0&&(f[t]=f[t]<0?-f[t]:0,l))for(let e=0;e<=k;e++)g.set(e,t,-g.get(e,t));while(t<k){if(f[t]>=f[t+1])break;let e=f[t];if(f[t]=f[t+1],f[t+1]=e,l&&t<r-1)for(let n=0;n<r;n++)e=g.get(n,t+1),g.set(n,t+1,g.get(n,t)),g.set(n,t,e);if(c&&t<n-1)for(let r=0;r<n;r++)e=p.get(r,t+1),p.set(r,t+1,p.get(r,t)),p.set(r,t,e);t++}E--;break}}if(u){let t=g;g=p,p=t}this.m=n,this.n=r,this.s=f,this.U=p,this.V=g}solve(t){let e=t,n=this.threshold,r=this.s.length,i=Z.zeros(r,r);for(let h=0;h<r;h++)Math.abs(this.s[h])<=n?i.set(h,h,0):i.set(h,h,1/this.s[h]);let o=this.U,s=this.rightSingularVectors,a=s.mmul(i),c=s.rows,l=o.rows,u=Z.zeros(c,l);for(let h=0;h<c;h++)for(let t=0;t<l;t++){let e=0;for(let n=0;n<r;n++)e+=a.get(h,n)*o.get(t,n);u.set(h,t,e)}return u.mmul(e)}solveForDiagonal(t){return this.solve(Z.diag(t))}inverse(){let t=this.V,e=this.threshold,n=t.rows,r=t.columns,i=new Z(n,this.s.length);for(let l=0;l<n;l++)for(let n=0;n<r;n++)Math.abs(this.s[n])>e&&i.set(l,n,t.get(l,n)/this.s[n]);let o=this.U,s=o.rows,a=o.columns,c=new Z(n,s);for(let l=0;l<n;l++)for(let t=0;t<s;t++){let e=0;for(let n=0;n<a;n++)e+=i.get(l,n)*o.get(t,n);c.set(l,t,e)}return c}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Z.diag(this.s)}}function bt(t,e=!1){return t=ft.checkMatrix(t),e?new mt(t).inverse():xt(t,Z.eye(t.rows))}function xt(t,e,n=!1){return t=ft.checkMatrix(t),e=ft.checkMatrix(e),n?new mt(t).solve(e):t.isSquare()?new gt(t).solve(e):new yt(t).solve(e)}function wt(t){if(t=Z.checkMatrix(t),t.isSquare()){if(0===t.columns)return 1;let e,n,r,i;if(2===t.columns)return e=t.get(0,0),n=t.get(0,1),r=t.get(1,0),i=t.get(1,1),e*i-n*r;if(3===t.columns){let i,o,s;return i=new lt(t,[1,2],[1,2]),o=new lt(t,[1,2],[0,2]),s=new lt(t,[1,2],[0,1]),e=t.get(0,0),n=t.get(0,1),r=t.get(0,2),e*wt(i)-n*wt(o)+r*wt(s)}return new gt(t).determinant}throw Error("determinant can only be calculated for a square matrix")}function Et(t,e){let n=[];for(let r=0;r<t;r++)r!==e&&n.push(r);return n}function kt(t,e,n,r=1e-9,i=1e-9){if(t>i)return new Array(e.rows+1).fill(0);{let t=e.addRow(n,[0]);for(let e=0;e<t.rows;e++)Math.abs(t.get(e,0))<r&&t.set(e,0,0);return t.to1DArray()}}function St(t,e={}){const{thresholdValue:n=1e-9,thresholdError:r=1e-9}=e;t=Z.checkMatrix(t);let i=t.rows,o=new Z(i,i);for(let s=0;s<i;s++){let e=Z.columnVector(t.getRow(s)),a=t.subMatrixRow(Et(i,s)).transpose(),c=new mt(a),l=c.solve(e),u=Z.sub(e,a.mmul(l)).abs().max();o.setRow(s,kt(u,l,s,n,r))}return o}function Mt(t,e=Number.EPSILON){if(t=Z.checkMatrix(t),t.isEmpty())return t.transpose();let n=new mt(t,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,o=n.diagonal;for(let s=0;s<o.length;s++)Math.abs(o[s])>e?o[s]=1/o[s]:o[s]=0;return i.mmul(Z.diag(o).mmul(r.transpose()))}function Ot(t,e=t,n={}){t=new Z(t);let r=!1;if("object"!==typeof e||Z.isMatrix(e)||l.isAnyArray(e)?e=new Z(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0}=n;i&&(t=t.center("column"),r||(e=e.center("column")));const o=t.transpose().mmul(e);for(let s=0;s<o.rows;s++)for(let e=0;e<o.columns;e++)o.set(s,e,o.get(s,e)*(1/(t.rows-1)));return o}function Nt(t,e=t,n={}){t=new Z(t);let r=!1;if("object"!==typeof e||Z.isMatrix(e)||l.isAnyArray(e)?e=new Z(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0,scale:o=!0}=n;i&&(t.center("column"),r||e.center("column")),o&&(t.scale("column"),r||e.scale("column"));const s=t.standardDeviation("column",{unbiased:!0}),a=r?s:e.standardDeviation("column",{unbiased:!0}),c=t.transpose().mmul(e);for(let l=0;l<c.rows;l++)for(let e=0;e<c.columns;e++)c.set(l,e,c.get(l,e)*(1/(s[l]*a[e]))*(1/(t.rows-1)));return c}class Tt{constructor(t,e={}){const{assumeSymmetric:n=!1}=e;if(t=ft.checkMatrix(t),!t.isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let r,i,o=t.columns,s=new Z(o,o),a=new Float64Array(o),c=new Float64Array(o),l=t,u=!1;if(u=!!n||t.isSymmetric(),u){for(r=0;r<o;r++)for(i=0;i<o;i++)s.set(r,i,l.get(r,i));At(o,c,a,s),Ct(o,c,a,s)}else{let t=new Z(o,o),e=new Float64Array(o);for(i=0;i<o;i++)for(r=0;r<o;r++)t.set(r,i,l.get(r,i));Pt(o,t,e,s),Rt(o,c,a,s,t)}this.n=o,this.e=c,this.d=a,this.V=s}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,n=this.n,r=this.e,i=this.d,o=new Z(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o.set(t,e,0);o.set(t,t,i[t]),r[t]>0?o.set(t,t+1,r[t]):r[t]<0&&o.set(t,t-1,r[t])}return o}}function At(t,e,n,r){let i,o,s,a,c,l,u,h;for(c=0;c<t;c++)n[c]=r.get(t-1,c);for(a=t-1;a>0;a--){for(h=0,s=0,l=0;l<a;l++)h+=Math.abs(n[l]);if(0===h)for(e[a]=n[a-1],c=0;c<a;c++)n[c]=r.get(a-1,c),r.set(a,c,0),r.set(c,a,0);else{for(l=0;l<a;l++)n[l]/=h,s+=n[l]*n[l];for(i=n[a-1],o=Math.sqrt(s),i>0&&(o=-o),e[a]=h*o,s-=i*o,n[a-1]=i-o,c=0;c<a;c++)e[c]=0;for(c=0;c<a;c++){for(i=n[c],r.set(c,a,i),o=e[c]+r.get(c,c)*i,l=c+1;l<=a-1;l++)o+=r.get(l,c)*n[l],e[l]+=r.get(l,c)*i;e[c]=o}for(i=0,c=0;c<a;c++)e[c]/=s,i+=e[c]*n[c];for(u=i/(s+s),c=0;c<a;c++)e[c]-=u*n[c];for(c=0;c<a;c++){for(i=n[c],o=e[c],l=c;l<=a-1;l++)r.set(l,c,r.get(l,c)-(i*e[l]+o*n[l]));n[c]=r.get(a-1,c),r.set(a,c,0)}}n[a]=s}for(a=0;a<t-1;a++){if(r.set(t-1,a,r.get(a,a)),r.set(a,a,1),s=n[a+1],0!==s){for(l=0;l<=a;l++)n[l]=r.get(l,a+1)/s;for(c=0;c<=a;c++){for(o=0,l=0;l<=a;l++)o+=r.get(l,a+1)*r.get(l,c);for(l=0;l<=a;l++)r.set(l,c,r.get(l,c)-o*n[l])}}for(l=0;l<=a;l++)r.set(l,a+1,0)}for(c=0;c<t;c++)n[c]=r.get(t-1,c),r.set(t-1,c,0);r.set(t-1,t-1,1),e[0]=0}function Ct(t,e,n,r){let i,o,s,a,c,l,u,h,d,f,p,g,v,y,m,b;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;let x=0,w=0,E=Number.EPSILON;for(l=0;l<t;l++){w=Math.max(w,Math.abs(n[l])+Math.abs(e[l])),u=l;while(u<t){if(Math.abs(e[u])<=E*w)break;u++}if(u>l)do{for(i=n[l],h=(n[l+1]-i)/(2*e[l]),d=vt(h,1),h<0&&(d=-d),n[l]=e[l]/(h+d),n[l+1]=e[l]*(h+d),f=n[l+1],o=i-n[l],s=l+2;s<t;s++)n[s]-=o;for(x+=o,h=n[u],p=1,g=p,v=p,y=e[l+1],m=0,b=0,s=u-1;s>=l;s--)for(v=g,g=p,b=m,i=p*e[s],o=p*h,d=vt(h,e[s]),e[s+1]=m*d,m=e[s]/d,p=h/d,h=p*n[s]-m*i,n[s+1]=o+m*(p*i+m*n[s]),c=0;c<t;c++)o=r.get(c,s+1),r.set(c,s+1,m*r.get(c,s)+p*o),r.set(c,s,p*r.get(c,s)-m*o);h=-m*b*v*y*e[l]/f,e[l]=m*h,n[l]=p*h}while(Math.abs(e[l])>E*w);n[l]=n[l]+x,e[l]=0}for(s=0;s<t-1;s++){for(c=s,h=n[s],a=s+1;a<t;a++)n[a]<h&&(c=a,h=n[a]);if(c!==s)for(n[c]=n[s],n[s]=h,a=0;a<t;a++)h=r.get(a,s),r.set(a,s,r.get(a,c)),r.set(a,c,h)}}function Pt(t,e,n,r){let i,o,s,a,c,l,u,h=0,d=t-1;for(l=h+1;l<=d-1;l++){for(u=0,a=l;a<=d;a++)u+=Math.abs(e.get(a,l-1));if(0!==u){for(s=0,a=d;a>=l;a--)n[a]=e.get(a,l-1)/u,s+=n[a]*n[a];for(o=Math.sqrt(s),n[l]>0&&(o=-o),s-=n[l]*o,n[l]=n[l]-o,c=l;c<t;c++){for(i=0,a=d;a>=l;a--)i+=n[a]*e.get(a,c);for(i/=s,a=l;a<=d;a++)e.set(a,c,e.get(a,c)-i*n[a])}for(a=0;a<=d;a++){for(i=0,c=d;c>=l;c--)i+=n[c]*e.get(a,c);for(i/=s,c=l;c<=d;c++)e.set(a,c,e.get(a,c)-i*n[c])}n[l]=u*n[l],e.set(l,l-1,u*o)}}for(a=0;a<t;a++)for(c=0;c<t;c++)r.set(a,c,a===c?1:0);for(l=d-1;l>=h+1;l--)if(0!==e.get(l,l-1)){for(a=l+1;a<=d;a++)n[a]=e.get(a,l-1);for(c=l;c<=d;c++){for(o=0,a=l;a<=d;a++)o+=n[a]*r.get(a,c);for(o=o/n[l]/e.get(l,l-1),a=l;a<=d;a++)r.set(a,c,r.get(a,c)+o*n[a])}}}function Rt(t,e,n,r,i){let o,s,a,c,l,u,h,d,f,p,g,v,y,m,b,x=t-1,w=0,E=t-1,k=Number.EPSILON,S=0,M=0,O=0,N=0,T=0,A=0,C=0,P=0;for(o=0;o<t;o++)for((o<w||o>E)&&(n[o]=i.get(o,o),e[o]=0),s=Math.max(o-1,0);s<t;s++)M+=Math.abs(i.get(o,s));while(x>=w){c=x;while(c>w){if(A=Math.abs(i.get(c-1,c-1))+Math.abs(i.get(c,c)),0===A&&(A=M),Math.abs(i.get(c,c-1))<k*A)break;c--}if(c===x)i.set(x,x,i.get(x,x)+S),n[x]=i.get(x,x),e[x]=0,x--,P=0;else if(c===x-1){if(h=i.get(x,x-1)*i.get(x-1,x),O=(i.get(x-1,x-1)-i.get(x,x))/2,N=O*O+h,C=Math.sqrt(Math.abs(N)),i.set(x,x,i.get(x,x)+S),i.set(x-1,x-1,i.get(x-1,x-1)+S),d=i.get(x,x),N>=0){for(C=O>=0?O+C:O-C,n[x-1]=d+C,n[x]=n[x-1],0!==C&&(n[x]=d-h/C),e[x-1]=0,e[x]=0,d=i.get(x,x-1),A=Math.abs(d)+Math.abs(C),O=d/A,N=C/A,T=Math.sqrt(O*O+N*N),O/=T,N/=T,s=x-1;s<t;s++)C=i.get(x-1,s),i.set(x-1,s,N*C+O*i.get(x,s)),i.set(x,s,N*i.get(x,s)-O*C);for(o=0;o<=x;o++)C=i.get(o,x-1),i.set(o,x-1,N*C+O*i.get(o,x)),i.set(o,x,N*i.get(o,x)-O*C);for(o=w;o<=E;o++)C=r.get(o,x-1),r.set(o,x-1,N*C+O*r.get(o,x)),r.set(o,x,N*r.get(o,x)-O*C)}else n[x-1]=d+O,n[x]=d+O,e[x-1]=C,e[x]=-C;x-=2,P=0}else{if(d=i.get(x,x),f=0,h=0,c<x&&(f=i.get(x-1,x-1),h=i.get(x,x-1)*i.get(x-1,x)),10===P){for(S+=d,o=w;o<=x;o++)i.set(o,o,i.get(o,o)-d);A=Math.abs(i.get(x,x-1))+Math.abs(i.get(x-1,x-2)),d=f=.75*A,h=-.4375*A*A}if(30===P&&(A=(f-d)/2,A=A*A+h,A>0)){for(A=Math.sqrt(A),f<d&&(A=-A),A=d-h/((f-d)/2+A),o=w;o<=x;o++)i.set(o,o,i.get(o,o)-A);S+=A,d=f=h=.964}P+=1,l=x-2;while(l>=c){if(C=i.get(l,l),T=d-C,A=f-C,O=(T*A-h)/i.get(l+1,l)+i.get(l,l+1),N=i.get(l+1,l+1)-C-T-A,T=i.get(l+2,l+1),A=Math.abs(O)+Math.abs(N)+Math.abs(T),O/=A,N/=A,T/=A,l===c)break;if(Math.abs(i.get(l,l-1))*(Math.abs(N)+Math.abs(T))<k*(Math.abs(O)*(Math.abs(i.get(l-1,l-1))+Math.abs(C)+Math.abs(i.get(l+1,l+1)))))break;l--}for(o=l+2;o<=x;o++)i.set(o,o-2,0),o>l+2&&i.set(o,o-3,0);for(a=l;a<=x-1;a++){if(m=a!==x-1,a!==l&&(O=i.get(a,a-1),N=i.get(a+1,a-1),T=m?i.get(a+2,a-1):0,d=Math.abs(O)+Math.abs(N)+Math.abs(T),0!==d&&(O/=d,N/=d,T/=d)),0===d)break;if(A=Math.sqrt(O*O+N*N+T*T),O<0&&(A=-A),0!==A){for(a!==l?i.set(a,a-1,-A*d):c!==l&&i.set(a,a-1,-i.get(a,a-1)),O+=A,d=O/A,f=N/A,C=T/A,N/=O,T/=O,s=a;s<t;s++)O=i.get(a,s)+N*i.get(a+1,s),m&&(O+=T*i.get(a+2,s),i.set(a+2,s,i.get(a+2,s)-O*C)),i.set(a,s,i.get(a,s)-O*d),i.set(a+1,s,i.get(a+1,s)-O*f);for(o=0;o<=Math.min(x,a+3);o++)O=d*i.get(o,a)+f*i.get(o,a+1),m&&(O+=C*i.get(o,a+2),i.set(o,a+2,i.get(o,a+2)-O*T)),i.set(o,a,i.get(o,a)-O),i.set(o,a+1,i.get(o,a+1)-O*N);for(o=w;o<=E;o++)O=d*r.get(o,a)+f*r.get(o,a+1),m&&(O+=C*r.get(o,a+2),r.set(o,a+2,r.get(o,a+2)-O*T)),r.set(o,a,r.get(o,a)-O),r.set(o,a+1,r.get(o,a+1)-O*N)}}}}if(0!==M){for(x=t-1;x>=0;x--)if(O=n[x],N=e[x],0===N)for(c=x,i.set(x,x,1),o=x-1;o>=0;o--){for(h=i.get(o,o)-O,T=0,s=c;s<=x;s++)T+=i.get(o,s)*i.get(s,x);if(e[o]<0)C=h,A=T;else if(c=o,0===e[o]?i.set(o,x,0!==h?-T/h:-T/(k*M)):(d=i.get(o,o+1),f=i.get(o+1,o),N=(n[o]-O)*(n[o]-O)+e[o]*e[o],u=(d*A-C*T)/N,i.set(o,x,u),i.set(o+1,x,Math.abs(d)>Math.abs(C)?(-T-h*u)/d:(-A-f*u)/C)),u=Math.abs(i.get(o,x)),k*u*u>1)for(s=o;s<=x;s++)i.set(s,x,i.get(s,x)/u)}else if(N<0)for(c=x-1,Math.abs(i.get(x,x-1))>Math.abs(i.get(x-1,x))?(i.set(x-1,x-1,N/i.get(x,x-1)),i.set(x-1,x,-(i.get(x,x)-O)/i.get(x,x-1))):(b=_t(0,-i.get(x-1,x),i.get(x-1,x-1)-O,N),i.set(x-1,x-1,b[0]),i.set(x-1,x,b[1])),i.set(x,x-1,0),i.set(x,x,1),o=x-2;o>=0;o--){for(p=0,g=0,s=c;s<=x;s++)p+=i.get(o,s)*i.get(s,x-1),g+=i.get(o,s)*i.get(s,x);if(h=i.get(o,o)-O,e[o]<0)C=h,T=p,A=g;else if(c=o,0===e[o]?(b=_t(-p,-g,h,N),i.set(o,x-1,b[0]),i.set(o,x,b[1])):(d=i.get(o,o+1),f=i.get(o+1,o),v=(n[o]-O)*(n[o]-O)+e[o]*e[o]-N*N,y=2*(n[o]-O)*N,0===v&&0===y&&(v=k*M*(Math.abs(h)+Math.abs(N)+Math.abs(d)+Math.abs(f)+Math.abs(C))),b=_t(d*T-C*p+N*g,d*A-C*g-N*p,v,y),i.set(o,x-1,b[0]),i.set(o,x,b[1]),Math.abs(d)>Math.abs(C)+Math.abs(N)?(i.set(o+1,x-1,(-p-h*i.get(o,x-1)+N*i.get(o,x))/d),i.set(o+1,x,(-g-h*i.get(o,x)-N*i.get(o,x-1))/d)):(b=_t(-T-f*i.get(o,x-1),-A-f*i.get(o,x),C,N),i.set(o+1,x-1,b[0]),i.set(o+1,x,b[1]))),u=Math.max(Math.abs(i.get(o,x-1)),Math.abs(i.get(o,x))),k*u*u>1)for(s=o;s<=x;s++)i.set(s,x-1,i.get(s,x-1)/u),i.set(s,x,i.get(s,x)/u)}for(o=0;o<t;o++)if(o<w||o>E)for(s=o;s<t;s++)r.set(o,s,i.get(o,s));for(s=t-1;s>=w;s--)for(o=w;o<=E;o++){for(C=0,a=w;a<=Math.min(s,E);a++)C+=r.get(o,a)*i.get(a,s);r.set(o,s,C)}}}function _t(t,e,n,r){let i,o;return Math.abs(n)>Math.abs(r)?(i=r/n,o=n+i*r,[(t+i*e)/o,(e-i*t)/o]):(i=n/r,o=r+i*n,[(i*t+e)/o,(i*e-t)/o])}class Lt{constructor(t){if(t=ft.checkMatrix(t),!t.isSymmetric())throw new Error("Matrix is not symmetric");let e,n,r,i=t,o=i.rows,s=new Z(o,o),a=!0;for(n=0;n<o;n++){let t=0;for(r=0;r<n;r++){let o=0;for(e=0;e<r;e++)o+=s.get(r,e)*s.get(n,e);o=(i.get(n,r)-o)/s.get(r,r),s.set(n,r,o),t+=o*o}for(t=i.get(n,n)-t,a&&=t>0,s.set(n,n,Math.sqrt(Math.max(t,0))),r=n+1;r<o;r++)s.set(n,r,0)}this.L=s,this.positiveDefinite=a}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=ft.checkMatrix(t);let e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let r,i,o,s=t.columns,a=t.clone();for(o=0;o<n;o++)for(i=0;i<s;i++){for(r=0;r<o;r++)a.set(o,i,a.get(o,i)-a.get(r,i)*e.get(o,r));a.set(o,i,a.get(o,i)/e.get(o,o))}for(o=n-1;o>=0;o--)for(i=0;i<s;i++){for(r=o+1;r<n;r++)a.set(o,i,a.get(o,i)-a.get(r,i)*e.get(r,o));a.set(o,i,a.get(o,i)/e.get(o,o))}return a}get lowerTriangularMatrix(){return this.L}}class Dt{constructor(t,e={}){t=ft.checkMatrix(t);let{Y:n}=e;const{scaleScores:r=!1,maxIterations:i=1e3,terminationCriteria:o=1e-10}=e;let s;if(n){if(n=l.isAnyArray(n)&&"number"===typeof n[0]?Z.columnVector(n):ft.checkMatrix(n),n.rows!==t.rows)throw new Error("Y should have the same number of rows as X");s=n.getColumnVector(0)}else s=t.getColumnVector(0);let a,c,u,h,d=1;for(let l=0;l<i&&d>o;l++)u=t.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),u=u.div(u.norm()),a=t.mmul(u).div(u.transpose().mmul(u).get(0,0)),l>0&&(d=a.clone().sub(h).pow(2).sum()),h=a.clone(),n?(c=n.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),c=c.div(c.norm()),s=n.mmul(c).div(c.transpose().mmul(c).get(0,0))):s=a;if(n){let e=t.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0));e=e.div(e.norm());let r=t.clone().sub(a.clone().mmul(e.transpose())),i=s.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),o=n.clone().sub(a.clone().mulS(i.get(0,0)).mmul(c.transpose()));this.t=a,this.p=e.transpose(),this.w=u.transpose(),this.q=c,this.u=s,this.s=a.transpose().mmul(a),this.xResidual=r,this.yResidual=o,this.betas=i}else this.w=u.transpose(),this.s=a.transpose().mmul(a).sqrt(),this.t=r?a.clone().div(this.s.get(0,0)):a,this.xResidual=t.sub(a.mmul(u.transpose()))}}e.y3=Y,e.jy=Lt,e.oN=Lt,e.Hc=et,e.cg=Tt,e.hj=Tt,e.LU=gt,e.Tb=gt,e.uq=Z,e.Zm=it,e.Dq=rt,e.__=ot,e.q0=st,e.lh=ct,e.pI=at,e.zC=lt,e.zg=ut,e.g6=ht,e.OL=Dt,e.ks=Dt,e.QR=yt,e.jp=yt,e.mk=mt,e.W2=mt,e.l=tt,e.KY=dt,e.dv=ft,e.BR=Nt,e.Wu=Ot,e.a4=wt,e.DI=bt,e.Jo=St,e.Zi=Mt,e.kH=xt,e.LV=pt},68750:function(t,e,n){"use strict";var r=n(97080),i=n(94402),o=n(25170),s=n(83789),a=n(38469),c=n(40507),l=i.Set,u=i.add,h=i.has;t.exports=function(t){var e=r(this),n=s(t),i=new l;return o(e)>n.size?c(n.getIterator(),(function(t){h(e,t)&&u(i,t)})):a(e,(function(t){n.includes(t)&&u(i,t)})),i}},69065:function(t){function e(){this.__data__=[],this.size=0}t.exports=e},69136:function(t,e,n){n(44114);var r=n(19692),i=n(89426),o=n(67250),s=Object.prototype,a=s.hasOwnProperty;function c(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}t.exports=c},69476:function(t){function e(t){return function(e,n,r){var i=-1,o=Object(e),s=r(e),a=s.length;while(a--){var c=s[t?a:++i];if(!1===n(o[c],c,o))break}return e}}t.exports=e},69479:function(t,e,n){"use strict";var r=n(44576),i=n(43724),o=n(62106),s=n(67979),a=n(79039),c=r.RegExp,l=c.prototype,u=i&&a((function(){var t=!0;try{c(".","d")}catch(u){t=!1}var e={},n="",r=t?"dgimsy":"gimsy",i=function(t,r){Object.defineProperty(e,t,{get:function(){return n+=r,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var s in t&&(o.hasIndices="d"),o)i(s,o[s]);var a=Object.getOwnPropertyDescriptor(l,"flags").get.call(e);return a!==r||n!==r}));u&&o(l,"flags",{configurable:!0,get:s})},69565:function(t,e,n){"use strict";var r=n(40616),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},70081:function(t,e,n){"use strict";var r=n(69565),i=n(79306),o=n(28551),s=n(16823),a=n(50851),c=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(i(n))return o(r(n,t));throw new c(s(t)+" is not iterable")}},70317:function(t,e,n){t=n.nmd(t);var r=n(68606),i=n(13236),o=e&&!e.nodeType&&e,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o,c=a?r.Buffer:void 0,l=c?c.isBuffer:void 0,u=l||i;t.exports=u},70374:function(t){var e=Object.prototype,n=e.hasOwnProperty;function r(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}t.exports=r},70618:function(t,e,n){var r=n(3778),i=n(15686),o=n(46106),s=Math.max;function a(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var c=null==n?0:o(n);return c<0&&(c=s(a+c,0)),r(t,i(e,3),c)}t.exports=a},70707:function(t){function e(t){return void 0===t}t.exports=e},71072:function(t,e,n){"use strict";var r=n(61828),i=n(88727);t.exports=Object.keys||function(t){return r(t,i)}},71241:function(t,e){"use strict";e.A=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n}},71281:function(t){function e(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(e(t[n],n,t))return!0;return!1}t.exports=e},71379:function(t){function e(t,e,n){var r=-1,i=t.length,o=e.length,s={};while(++r<i){var a=r<o?e[r]:void 0;n(s,t[r],a)}return s}t.exports=e},71658:function(t,e,n){"use strict";var r=n(46518),i=n(6469),o=n(96837),s=n(26198),a=n(35610),c=n(25397),l=n(91291),u=Array,h=Math.max,d=Math.min;r({target:"Array",proto:!0},{toSpliced:function(t,e){var n,r,i,f,p=c(this),g=s(p),v=a(t,g),y=arguments.length,m=0;for(0===y?n=r=0:1===y?(n=0,r=g-v):(n=y-2,r=d(h(l(e),0),g-v)),i=o(g+n-r),f=u(i);m<v;m++)f[m]=p[m];for(;m<v+n;m++)f[m]=arguments[m-v+2];for(;m<i;m++)f[m]=p[m+r-n];return f}}),i("toSpliced")},71990:function(t,e,n){var r=n(85366),i=n(14915),o=n(8845),s=n(73355);function a(t,e){return r(t)?t:i(t,e)?[t]:o(s(t))}t.exports=a},72288:function(t,e,n){var r=n(29531),i=n(68606),o=r(i,"Set");t.exports=o},72327:function(t,e,n){"use strict";n(44114);var r=n(9485),i=Array.prototype.concat,o=Array.prototype.slice,s=t.exports=function(t){for(var e=[],n=0,s=t.length;n<s;n++){var a=t[n];r(a)?e=i.call(e,o.call(a)):e.push(a)}return e};s.wrap=function(t){return function(){return t(s(arguments))}}},72359:function(t,e,n){n(18111),n(7588);var r=n(34230);function i(t,e,n){var i,o={};r.forEach(n,(function(n){var r,s,a=t.parent(n);while(a){if(r=t.parent(a),r?(s=o[r],o[r]=a):(s=i,i=a),s&&s!==a)return void e.setEdge(s,a);a=r}}))}t.exports=i},72652:function(t,e,n){"use strict";var r=n(76080),i=n(69565),o=n(28551),s=n(16823),a=n(44209),c=n(26198),l=n(1625),u=n(70081),h=n(50851),d=n(9539),f=TypeError,p=function(t,e){this.stopped=t,this.result=e},g=p.prototype;t.exports=function(t,e,n){var v,y,m,b,x,w,E,k=n&&n.that,S=!(!n||!n.AS_ENTRIES),M=!(!n||!n.IS_RECORD),O=!(!n||!n.IS_ITERATOR),N=!(!n||!n.INTERRUPTED),T=r(e,k),A=function(t){return v&&d(v,"normal",t),new p(!0,t)},C=function(t){return S?(o(t),N?T(t[0],t[1],A):T(t[0],t[1])):N?T(t,A):T(t)};if(M)v=t.iterator;else if(O)v=t;else{if(y=h(t),!y)throw new f(s(t)+" is not iterable");if(a(y)){for(m=0,b=c(t);b>m;m++)if(x=C(t[m]),x&&l(g,x))return x;return new p(!1)}v=u(t,y)}w=M?t.next:v.next;while(!(E=i(w,v)).done){try{x=C(E.value)}catch(P){d(v,"throw",P)}if("object"==typeof x&&x&&l(g,x))return x}return new p(!1)}},72715:function(t,e,n){var r=n(52387);function i(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}t.exports=i},72777:function(t,e,n){"use strict";var r=n(69565),i=n(20034),o=n(10757),s=n(55966),a=n(84270),c=n(78227),l=TypeError,u=c("toPrimitive");t.exports=function(t,e){if(!i(t)||o(t))return t;var n,c=s(t,u);if(c){if(void 0===e&&(e="default"),n=r(c,t,e),!i(n)||o(n))return n;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},72949:function(t,e,n){n(44114);var r=n(63034);function i(t,e){var n=[];return r(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}t.exports=i},73227:function(t){function e(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}t.exports=e},73355:function(t,e,n){var r=n(64643);function i(t){return null==t?"":r(t)}t.exports=i},73506:function(t,e,n){"use strict";var r=n(13925),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw new o("Can't set "+i(t)+" as a prototype")}},73809:function(t,e,n){var r=n(97311),i=n(35064),o=n(16517);function s(t){return t&&t.length?r(t,o,i):void 0}t.exports=s},74332:function(t,e,n){var r;try{r=n(48605)}catch(i){}r||(r=window.graphlib),t.exports=r},74473:function(t,e,n){var r=n(6849);function i(){this.__data__=r?r(null):{},this.size=0}t.exports=i},74550:function(t,e,n){var r=n(20081);function i(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},74612:function(t,e,n){var r=n(47045)["default"];function i(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},74854:function(t,e,n){var r=n(43575),i=n(52387),o=n(15686),s=n(19505),a=n(62578),c=n(84276),l=n(13239),u=n(16517),h=n(85366);function d(t,e,n){e=e.length?r(e,(function(t){return h(t)?function(e){return i(e,1===t.length?t[0]:t)}:t})):[u];var d=-1;e=r(e,c(o));var f=s(t,(function(t,n,i){var o=r(e,(function(e){return e(t)}));return{criteria:o,index:++d,value:t}}));return a(f,(function(t,e){return l(t,e,n)}))}t.exports=d},74907:function(t,e,n){var r=n(1068),i=n(14794),o=n(30100),s=n(9765),a=n(19692),c=n(58664),l=n(73227);function u(t,e,n,h,d){t!==e&&o(e,(function(o,c){if(d||(d=new r),a(o))s(t,e,c,n,u,h,d);else{var f=h?h(l(t,c),o,c+"",t,e,d):void 0;void 0===f&&(f=o),i(t,c,f)}}),c)}t.exports=u},75102:function(t,e,n){n(44114);var r=n(36202),i=n(27546),o=n(63066),s=200;function a(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<s-1)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}t.exports=a},75360:function(t,e,n){var r=n(48882);function i(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}t.exports=i},75854:function(t,e,n){"use strict";var r=n(72777),i=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw new i("Can't convert number to bigint");return BigInt(e)}},76039:function(t,e,n){var r=n(36202);function i(){this.__data__=new r,this.size=0}t.exports=i},76080:function(t,e,n){"use strict";var r=n(27476),i=n(79306),o=n(40616),s=r(r.bind);t.exports=function(t,e){return i(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},76282:function(t,e,n){"use strict";n.d(e,{TS:function(){return JB}});var r={};n.r(r),n.d(r,{add:function(){return te},adjoint:function(){return bt},clone:function(){return dt},copy:function(){return ft},create:function(){return ht},determinant:function(){return xt},equals:function(){return oe},exactEquals:function(){return ie},frob:function(){return Qt},fromQuat:function(){return Gt},fromQuat2:function(){return Dt},fromRotation:function(){return Ct},fromRotationTranslation:function(){return Lt},fromRotationTranslationScale:function(){return Bt},fromRotationTranslationScaleOrigin:function(){return zt},fromScaling:function(){return At},fromTranslation:function(){return Tt},fromValues:function(){return pt},fromXRotation:function(){return Pt},fromYRotation:function(){return Rt},fromZRotation:function(){return _t},frustum:function(){return Vt},getRotation:function(){return Ft},getScaling:function(){return jt},getTranslation:function(){return It},identity:function(){return vt},invert:function(){return mt},lookAt:function(){return Kt},mul:function(){return se},multiply:function(){return wt},multiplyScalar:function(){return ne},multiplyScalarAndAdd:function(){return re},ortho:function(){return qt},orthoNO:function(){return Yt},orthoZO:function(){return Xt},perspective:function(){return Ut},perspectiveFromFieldOfView:function(){return $t},perspectiveNO:function(){return Wt},perspectiveZO:function(){return Ht},rotate:function(){return St},rotateX:function(){return Mt},rotateY:function(){return Ot},rotateZ:function(){return Nt},scale:function(){return kt},set:function(){return gt},str:function(){return Jt},sub:function(){return ae},subtract:function(){return ee},targetTo:function(){return Zt},translate:function(){return Et},transpose:function(){return yt}});var i={};n.r(i),n.d(i,{circle:function(){return dx},diamond:function(){return px},rect:function(){return vx},simple:function(){return mx},triangle:function(){return fx},triangleRect:function(){return yx},vee:function(){return gx}});n(18111),n(7588),n(44114),n(20116),n(81148),n(22489),n(61701),n(18237),n(13579),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(t){var e=s(t,"string");return"symbol"==o(e)?e:e+""}function c(t,e,n){return(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function f(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function g(t){if(Array.isArray(t))return p(t)}function v(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function y(t,e){if(t){if("string"==typeof t)return p(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(t){return g(t)||v(t)||y(t)||m()}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}function w(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(w=function(){return!!t})()}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t,e){if(e&&("object"==o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return E(t)}function S(t,e,n){return e=x(e),k(t,w()?Reflect.construct(e,n||[],x(t).constructor):e.apply(t,n))}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function O(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}function N(t){if(Array.isArray(t))return t}function T(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n["return"]&&(s=n["return"](),Object(s)!==s))return}finally{if(l)throw i}}return a}}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(t,e){return N(t)||T(t,e)||y(t,e)||A()}var P=n(21099),R=P,_=(n(16573),n(78100),n(77936),n(37467),n(44732),n(79577),1e-6),L="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function D(){var t=new L(3);return L!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function I(t){var e=new L(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function j(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function F(t,e,n){var r=new L(3);return r[0]=t,r[1]=e,r[2]=n,r}function B(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function z(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function G(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function V(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function W(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function U(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function H(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function $(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Y(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function q(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function X(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function K(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],c=n[2];return t[0]=i*c-o*a,t[1]=o*s-r*c,t[2]=r*a-i*s,t}function Z(t,e,n,r){var i=e[0],o=e[1],s=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t}function J(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t}function Q(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function tt(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],c=e[1],l=e[2],u=i*l-o*c,h=o*a-r*l,d=r*c-i*a,f=i*d-o*h,p=o*u-r*d,g=r*h-i*u,v=2*s;return u*=v,h*=v,d*=v,f*=2,p*=2,g*=2,t[0]=a+u+f,t[1]=c+h+p,t[2]=l+d+g,t}function et(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2];return Math.abs(n-o)<=_*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=_*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-a)<=_*Math.max(1,Math.abs(i),Math.abs(a))}Math.hypot||(Math.hypot=function(){var t=0,e=arguments.length;while(e--)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var nt=V,rt=Y,it=j;(function(){var t=D()})();function ot(){var t=new L(4);return L!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function st(t,e,n,r){var i=new L(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function at(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function ct(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function lt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=o*s,t}function ut(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}(function(){var t=ot()})();function ht(){var t=new L(16);return L!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function dt(t){var e=new L(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ft(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function pt(t,e,n,r,i,o,s,a,c,l,u,h,d,f,p,g){var v=new L(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=i,v[5]=o,v[6]=s,v[7]=a,v[8]=c,v[9]=l,v[10]=u,v[11]=h,v[12]=d,v[13]=f,v[14]=p,v[15]=g,v}function gt(t,e,n,r,i,o,s,a,c,l,u,h,d,f,p,g,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=c,t[8]=l,t[9]=u,t[10]=h,t[11]=d,t[12]=f,t[13]=p,t[14]=g,t[15]=v,t}function vt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yt(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function mt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],v=e[14],y=e[15],m=n*a-r*s,b=n*c-i*s,x=n*l-o*s,w=r*c-i*a,E=r*l-o*a,k=i*l-o*c,S=u*g-h*p,M=u*v-d*p,O=u*y-f*p,N=h*v-d*g,T=h*y-f*g,A=d*y-f*v,C=m*A-b*T+x*N+w*O-E*M+k*S;return C?(C=1/C,t[0]=(a*A-c*T+l*N)*C,t[1]=(i*T-r*A-o*N)*C,t[2]=(g*k-v*E+y*w)*C,t[3]=(d*E-h*k-f*w)*C,t[4]=(c*O-s*A-l*M)*C,t[5]=(n*A-i*O+o*M)*C,t[6]=(v*x-p*k-y*b)*C,t[7]=(u*k-d*x+f*b)*C,t[8]=(s*T-a*O+l*S)*C,t[9]=(r*O-n*T-o*S)*C,t[10]=(p*E-g*x+y*m)*C,t[11]=(h*x-u*E-f*m)*C,t[12]=(a*M-s*N-c*S)*C,t[13]=(n*N-r*M+i*S)*C,t[14]=(g*b-p*w-v*m)*C,t[15]=(u*w-h*b+d*m)*C,t):null}function bt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],v=e[14],y=e[15];return t[0]=a*(d*y-f*v)-h*(c*y-l*v)+g*(c*f-l*d),t[1]=-(r*(d*y-f*v)-h*(i*y-o*v)+g*(i*f-o*d)),t[2]=r*(c*y-l*v)-a*(i*y-o*v)+g*(i*l-o*c),t[3]=-(r*(c*f-l*d)-a*(i*f-o*d)+h*(i*l-o*c)),t[4]=-(s*(d*y-f*v)-u*(c*y-l*v)+p*(c*f-l*d)),t[5]=n*(d*y-f*v)-u*(i*y-o*v)+p*(i*f-o*d),t[6]=-(n*(c*y-l*v)-s*(i*y-o*v)+p*(i*l-o*c)),t[7]=n*(c*f-l*d)-s*(i*f-o*d)+u*(i*l-o*c),t[8]=s*(h*y-f*g)-u*(a*y-l*g)+p*(a*f-l*h),t[9]=-(n*(h*y-f*g)-u*(r*y-o*g)+p*(r*f-o*h)),t[10]=n*(a*y-l*g)-s*(r*y-o*g)+p*(r*l-o*a),t[11]=-(n*(a*f-l*h)-s*(r*f-o*h)+u*(r*l-o*a)),t[12]=-(s*(h*v-d*g)-u*(a*v-c*g)+p*(a*d-c*h)),t[13]=n*(h*v-d*g)-u*(r*v-i*g)+p*(r*d-i*h),t[14]=-(n*(a*v-c*g)-s*(r*v-i*g)+p*(r*c-i*a)),t[15]=n*(a*d-c*h)-s*(r*d-i*h)+u*(r*c-i*a),t}function xt(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8],u=t[9],h=t[10],d=t[11],f=t[12],p=t[13],g=t[14],v=t[15],y=e*s-n*o,m=e*a-r*o,b=e*c-i*o,x=n*a-r*s,w=n*c-i*s,E=r*c-i*a,k=l*p-u*f,S=l*g-h*f,M=l*v-d*f,O=u*g-h*p,N=u*v-d*p,T=h*v-d*g;return y*T-m*N+b*O+x*M-w*S+E*k}function wt(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],g=e[12],v=e[13],y=e[14],m=e[15],b=n[0],x=n[1],w=n[2],E=n[3];return t[0]=b*r+x*a+w*h+E*g,t[1]=b*i+x*c+w*d+E*v,t[2]=b*o+x*l+w*f+E*y,t[3]=b*s+x*u+w*p+E*m,b=n[4],x=n[5],w=n[6],E=n[7],t[4]=b*r+x*a+w*h+E*g,t[5]=b*i+x*c+w*d+E*v,t[6]=b*o+x*l+w*f+E*y,t[7]=b*s+x*u+w*p+E*m,b=n[8],x=n[9],w=n[10],E=n[11],t[8]=b*r+x*a+w*h+E*g,t[9]=b*i+x*c+w*d+E*v,t[10]=b*o+x*l+w*f+E*y,t[11]=b*s+x*u+w*p+E*m,b=n[12],x=n[13],w=n[14],E=n[15],t[12]=b*r+x*a+w*h+E*g,t[13]=b*i+x*c+w*d+E*v,t[14]=b*o+x*l+w*f+E*y,t[15]=b*s+x*u+w*p+E*m,t}function Et(t,e,n){var r,i,o,s,a,c,l,u,h,d,f,p,g=n[0],v=n[1],y=n[2];return e===t?(t[12]=e[0]*g+e[4]*v+e[8]*y+e[12],t[13]=e[1]*g+e[5]*v+e[9]*y+e[13],t[14]=e[2]*g+e[6]*v+e[10]*y+e[14],t[15]=e[3]*g+e[7]*v+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=c,t[6]=l,t[7]=u,t[8]=h,t[9]=d,t[10]=f,t[11]=p,t[12]=r*g+a*v+h*y+e[12],t[13]=i*g+c*v+d*y+e[13],t[14]=o*g+l*v+f*y+e[14],t[15]=s*g+u*v+p*y+e[15]),t}function kt(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function St(t,e,n,r){var i,o,s,a,c,l,u,h,d,f,p,g,v,y,m,b,x,w,E,k,S,M,O,N,T=r[0],A=r[1],C=r[2],P=Math.hypot(T,A,C);return P<_?null:(P=1/P,T*=P,A*=P,C*=P,i=Math.sin(n),o=Math.cos(n),s=1-o,a=e[0],c=e[1],l=e[2],u=e[3],h=e[4],d=e[5],f=e[6],p=e[7],g=e[8],v=e[9],y=e[10],m=e[11],b=T*T*s+o,x=A*T*s+C*i,w=C*T*s-A*i,E=T*A*s-C*i,k=A*A*s+o,S=C*A*s+T*i,M=T*C*s+A*i,O=A*C*s-T*i,N=C*C*s+o,t[0]=a*b+h*x+g*w,t[1]=c*b+d*x+v*w,t[2]=l*b+f*x+y*w,t[3]=u*b+p*x+m*w,t[4]=a*E+h*k+g*S,t[5]=c*E+d*k+v*S,t[6]=l*E+f*k+y*S,t[7]=u*E+p*k+m*S,t[8]=a*M+h*O+g*N,t[9]=c*M+d*O+v*N,t[10]=l*M+f*O+y*N,t[11]=u*M+p*O+m*N,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Mt(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=s*i+u*r,t[6]=a*i+h*r,t[7]=c*i+d*r,t[8]=l*i-o*r,t[9]=u*i-s*r,t[10]=h*i-a*r,t[11]=d*i-c*r,t}function Ot(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=s*i-u*r,t[2]=a*i-h*r,t[3]=c*i-d*r,t[8]=o*r+l*i,t[9]=s*r+u*i,t[10]=a*r+h*i,t[11]=c*r+d*i,t}function Nt(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=s*i+u*r,t[2]=a*i+h*r,t[3]=c*i+d*r,t[4]=l*i-o*r,t[5]=u*i-s*r,t[6]=h*i-a*r,t[7]=d*i-c*r,t}function Tt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function At(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ct(t,e,n){var r,i,o,s=n[0],a=n[1],c=n[2],l=Math.hypot(s,a,c);return l<_?null:(l=1/l,s*=l,a*=l,c*=l,r=Math.sin(e),i=Math.cos(e),o=1-i,t[0]=s*s*o+i,t[1]=a*s*o+c*r,t[2]=c*s*o-a*r,t[3]=0,t[4]=s*a*o-c*r,t[5]=a*a*o+i,t[6]=c*a*o+s*r,t[7]=0,t[8]=s*c*o+a*r,t[9]=a*c*o-s*r,t[10]=c*c*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Pt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Rt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _t(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Lt(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=r+r,c=i+i,l=o+o,u=r*a,h=r*c,d=r*l,f=i*c,p=i*l,g=o*l,v=s*a,y=s*c,m=s*l;return t[0]=1-(f+g),t[1]=h+m,t[2]=d-y,t[3]=0,t[4]=h-m,t[5]=1-(u+g),t[6]=p+v,t[7]=0,t[8]=d+y,t[9]=p-v,t[10]=1-(u+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Dt(t,e){var n=new L(3),r=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=r*r+i*i+o*o+s*s;return h>0?(n[0]=2*(a*s+u*r+c*o-l*i)/h,n[1]=2*(c*s+u*i+l*r-a*o)/h,n[2]=2*(l*s+u*o+a*i-c*r)/h):(n[0]=2*(a*s+u*r+c*o-l*i),n[1]=2*(c*s+u*i+l*r-a*o),n[2]=2*(l*s+u*o+a*i-c*r)),Lt(t,e,n),t}function It(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function jt(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],s=e[5],a=e[6],c=e[8],l=e[9],u=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(c,l,u),t}function Ft(t,e){var n=new L(3);jt(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],s=e[0]*r,a=e[1]*i,c=e[2]*o,l=e[4]*r,u=e[5]*i,h=e[6]*o,d=e[8]*r,f=e[9]*i,p=e[10]*o,g=s+u+p,v=0;return g>0?(v=2*Math.sqrt(g+1),t[3]=.25*v,t[0]=(h-f)/v,t[1]=(d-c)/v,t[2]=(a-l)/v):s>u&&s>p?(v=2*Math.sqrt(1+s-u-p),t[3]=(h-f)/v,t[0]=.25*v,t[1]=(a+l)/v,t[2]=(d+c)/v):u>p?(v=2*Math.sqrt(1+u-s-p),t[3]=(d-c)/v,t[0]=(a+l)/v,t[1]=.25*v,t[2]=(h+f)/v):(v=2*Math.sqrt(1+p-s-u),t[3]=(a-l)/v,t[0]=(d+c)/v,t[1]=(h+f)/v,t[2]=.25*v),t}function Bt(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=e[3],c=i+i,l=o+o,u=s+s,h=i*c,d=i*l,f=i*u,p=o*l,g=o*u,v=s*u,y=a*c,m=a*l,b=a*u,x=r[0],w=r[1],E=r[2];return t[0]=(1-(p+v))*x,t[1]=(d+b)*x,t[2]=(f-m)*x,t[3]=0,t[4]=(d-b)*w,t[5]=(1-(h+v))*w,t[6]=(g+y)*w,t[7]=0,t[8]=(f+m)*E,t[9]=(g-y)*E,t[10]=(1-(h+p))*E,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function zt(t,e,n,r,i){var o=e[0],s=e[1],a=e[2],c=e[3],l=o+o,u=s+s,h=a+a,d=o*l,f=o*u,p=o*h,g=s*u,v=s*h,y=a*h,m=c*l,b=c*u,x=c*h,w=r[0],E=r[1],k=r[2],S=i[0],M=i[1],O=i[2],N=(1-(g+y))*w,T=(f+x)*w,A=(p-b)*w,C=(f-x)*E,P=(1-(d+y))*E,R=(v+m)*E,_=(p+b)*k,L=(v-m)*k,D=(1-(d+g))*k;return t[0]=N,t[1]=T,t[2]=A,t[3]=0,t[4]=C,t[5]=P,t[6]=R,t[7]=0,t[8]=_,t[9]=L,t[10]=D,t[11]=0,t[12]=n[0]+S-(N*S+C*M+_*O),t[13]=n[1]+M-(T*S+P*M+L*O),t[14]=n[2]+O-(A*S+R*M+D*O),t[15]=1,t}function Gt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,c=i+i,l=n*s,u=r*s,h=r*a,d=i*s,f=i*a,p=i*c,g=o*s,v=o*a,y=o*c;return t[0]=1-h-p,t[1]=u+y,t[2]=d-v,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=f+g,t[7]=0,t[8]=d+v,t[9]=f-g,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Vt(t,e,n,r,i,o,s){var a=1/(n-e),c=1/(i-r),l=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*c,t[10]=(s+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*l,t[15]=0,t}function Wt(t,e,n,r,i){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var Ut=Wt;function Ht(t,e,n,r,i){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t}function $t(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),c=2/(s+a),l=2/(i+o);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(s-a)*c*.5,t[9]=(i-o)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Yt(t,e,n,r,i,o,s){var a=1/(e-n),c=1/(r-i),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*c,t[14]=(s+o)*l,t[15]=1,t}var qt=Yt;function Xt(t,e,n,r,i,o,s){var a=1/(e-n),c=1/(r-i),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*c,t[14]=o*l,t[15]=1,t}function Kt(t,e,n,r){var i,o,s,a,c,l,u,h,d,f,p=e[0],g=e[1],v=e[2],y=r[0],m=r[1],b=r[2],x=n[0],w=n[1],E=n[2];return Math.abs(p-x)<_&&Math.abs(g-w)<_&&Math.abs(v-E)<_?vt(t):(u=p-x,h=g-w,d=v-E,f=1/Math.hypot(u,h,d),u*=f,h*=f,d*=f,i=m*d-b*h,o=b*u-y*d,s=y*h-m*u,f=Math.hypot(i,o,s),f?(f=1/f,i*=f,o*=f,s*=f):(i=0,o=0,s=0),a=h*s-d*o,c=d*i-u*s,l=u*o-h*i,f=Math.hypot(a,c,l),f?(f=1/f,a*=f,c*=f,l*=f):(a=0,c=0,l=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=o,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=-(i*p+o*g+s*v),t[13]=-(a*p+c*g+l*v),t[14]=-(u*p+h*g+d*v),t[15]=1,t)}function Zt(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=r[0],c=r[1],l=r[2],u=i-n[0],h=o-n[1],d=s-n[2],f=u*u+h*h+d*d;f>0&&(f=1/Math.sqrt(f),u*=f,h*=f,d*=f);var p=c*d-l*h,g=l*u-a*d,v=a*h-c*u;return f=p*p+g*g+v*v,f>0&&(f=1/Math.sqrt(f),p*=f,g*=f,v*=f),t[0]=p,t[1]=g,t[2]=v,t[3]=0,t[4]=h*v-d*g,t[5]=d*p-u*v,t[6]=u*g-h*p,t[7]=0,t[8]=u,t[9]=h,t[10]=d,t[11]=0,t[12]=i,t[13]=o,t[14]=s,t[15]=1,t}function Jt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Qt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function te(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function ee(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function ne(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function re(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function ie(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function oe(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],c=t[6],l=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],g=t[13],v=t[14],y=t[15],m=e[0],b=e[1],x=e[2],w=e[3],E=e[4],k=e[5],S=e[6],M=e[7],O=e[8],N=e[9],T=e[10],A=e[11],C=e[12],P=e[13],R=e[14],L=e[15];return Math.abs(n-m)<=_*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-b)<=_*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-x)<=_*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(o-w)<=_*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-E)<=_*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(a-k)<=_*Math.max(1,Math.abs(a),Math.abs(k))&&Math.abs(c-S)<=_*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-M)<=_*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-O)<=_*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(h-N)<=_*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(d-T)<=_*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(f-A)<=_*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(p-C)<=_*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(g-P)<=_*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(v-R)<=_*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(y-L)<=_*Math.max(1,Math.abs(y),Math.abs(L))}var se=wt,ae=ee;function ce(){var t=new L(9);return L!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function le(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function ue(t,e,n,r,i,o,s,a,c){var l=new L(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=i,l[5]=o,l[6]=s,l[7]=a,l[8]=c,l}function he(){var t=new L(4);return L!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function de(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function fe(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],c=n[1],l=n[2],u=n[3];return t[0]=r*u+s*a+i*l-o*c,t[1]=i*u+s*c+o*a-r*l,t[2]=o*u+s*l+r*c-i*a,t[3]=s*u-r*a-i*c-o*l,t}function pe(t,e,n,r){var i,o,s,a,c,l=e[0],u=e[1],h=e[2],d=e[3],f=n[0],p=n[1],g=n[2],v=n[3];return o=l*f+u*p+h*g+d*v,o<0&&(o=-o,f=-f,p=-p,g=-g,v=-v),1-o>_?(i=Math.acos(o),s=Math.sin(i),a=Math.sin((1-r)*i)/s,c=Math.sin(r*i)/s):(a=1-r,c=r),t[0]=a*l+c*f,t[1]=a*u+c*p,t[2]=a*h+c*g,t[3]=a*d+c*v,t}function ge(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o,a=s?1/s:0;return t[0]=-n*a,t[1]=-r*a,t[2]=-i*a,t[3]=o*a,t}function ve(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*s+s]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+s]-e[3*s+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[s]=(e[3*s+i]+e[3*i+s])*n}return t}function ye(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),s=Math.cos(e),a=Math.sin(n),c=Math.cos(n),l=Math.sin(r),u=Math.cos(r);return t[0]=o*c*u-s*a*l,t[1]=s*a*u+o*c*l,t[2]=s*c*l-o*a*u,t[3]=s*c*u+o*a*l,t}var me=st,be=at,xe=ct,we=fe,Ee=lt;(function(){var t=D(),e=F(1,0,0),n=F(0,1,0)})(),function(){var t=he(),e=he()}(),function(){var t=ce()}();function ke(){var t=new L(2);return L!=Float32Array&&(t[0]=0,t[1]=0),t}function Se(t,e){return t[0]=e[0],t[1]=e[1],t}function Me(t,e,n){return t[0]=e,t[1]=n,t}function Oe(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function Ne(t,e){return t[0]*e[0]+t[1]*e[1]}function Te(t,e){return t[0]===e[0]&&t[1]===e[1]}(function(){var t=ke()})();function Ae(t){return"number"===typeof t}function Ce(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function Pe(t){return null===t||void 0===t}function Re(t){return"string"===typeof t}var _e=function(t,e,n){return t<e?e:t>n?n:t},Le=_e,De=function(t,e){return De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},De(t,e)};function Ie(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}De(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var je=function(){return je=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},je.apply(this,arguments)};function Fe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Be(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))}Object.create;function ze(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ge(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(NP){i={error:NP}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function Ve(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function We(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;function Ue(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}"function"===typeof SuppressedError&&SuppressedError;var He={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function $e(t){return Array.isArray(t)&&t.every((function(t){var e=t[0].toLowerCase();return He[e]===t.length-1&&"achlmqstvz".includes(e)}))}function Ye(t){return $e(t)&&t.every((function(t){var e=t[0];return e===e.toUpperCase()}))}function qe(t){return Ye(t)&&t.every((function(t){var e=t[0];return"ACLMQZ".includes(e)}))}var Xe={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Ke(t){var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;while(r.length>=He[n])if("m"===n&&r.length>2?(t.segments.push([e].concat(r.splice(0,2))),n="l",e="m"===e?"l":"L"):t.segments.push([e].concat(r.splice(0,He[n]))),!He[n])break}function Ze(t){var e=t.index,n=t.pathValue,r=n.charCodeAt(e);return 48===r?(t.param=0,void(t.index+=1)):49===r?(t.param=1,void(t.index+=1)):void(t.err='[path-util]: invalid Arc flag "'.concat(n[e],'", expecting 0 or 1 at index ').concat(e))}function Je(t){return t>=48&&t<=57||43===t||45===t||46===t}function Qe(t){return t>=48&&t<=57}function tn(t){var e,n=t.max,r=t.pathValue,i=t.index,o=i,s=!1,a=!1,c=!1,l=!1;if(o>=n)t.err="[path-util]: Invalid path value at index ".concat(o,', "pathValue" is missing param');else if(e=r.charCodeAt(o),43!==e&&45!==e||(o+=1,e=r.charCodeAt(o)),Qe(e)||46===e){if(46!==e){if(s=48===e,o+=1,e=r.charCodeAt(o),s&&o<n&&e&&Qe(e))return void(t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(r[i],'" illegal number'));while(o<n&&Qe(r.charCodeAt(o)))o+=1,a=!0;e=r.charCodeAt(o)}if(46===e){l=!0,o+=1;while(Qe(r.charCodeAt(o)))o+=1,c=!0;e=r.charCodeAt(o)}if(101===e||69===e){if(l&&!a&&!c)return void(t.err="[path-util]: Invalid path value at index ".concat(o,', "').concat(r[o],'" invalid float exponent'));if(o+=1,e=r.charCodeAt(o),43!==e&&45!==e||(o+=1),!(o<n&&Qe(r.charCodeAt(o))))return void(t.err="[path-util]: Invalid path value at index ".concat(o,', "').concat(r[o],'" invalid integer exponent'));while(o<n&&Qe(r.charCodeAt(o)))o+=1}t.index=o,t.param=+t.pathValue.slice(i,o)}else t.err="[path-util]: Invalid path value at index ".concat(o,', "').concat(r[o],'" is not a number')}function en(t){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return 10===t||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&e.includes(t)}function nn(t){var e=t.pathValue,n=t.max;while(t.index<n&&en(e.charCodeAt(t.index)))t.index+=1}function rn(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function on(t){return 97===(32|t)}function sn(t){var e=t.max,n=t.pathValue,r=t.index,i=n.charCodeAt(r),o=He[n[r].toLowerCase()];if(t.segmentStart=r,rn(i))if(t.index+=1,nn(t),t.data=[],o){for(;;){for(var s=o;s>0;s-=1){if(!on(i)||3!==s&&4!==s?tn(t):Ze(t),t.err.length)return;t.data.push(t.param),nn(t),t.index<e&&44===n.charCodeAt(t.index)&&(t.index+=1,nn(t))}if(t.index>=t.max)break;if(!Je(n.charCodeAt(t.index)))break}Ke(t)}else Ke(t);else t.err='[path-util]: Invalid path value "'.concat(n[r],'" is not a path command')}var an=function(){function t(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return t}();function cn(t){if($e(t))return[].concat(t);var e=new an(t);nn(e);while(e.index<e.max&&!e.err.length)sn(e);return e.err?e.err:e.segments}function ln(t){if(Ye(t))return[].concat(t);var e=cn(t),n=0,r=0,i=0,o=0;return e.map((function(t){var e,s=t.slice(1).map(Number),a=t[0],c=a.toUpperCase();if("M"===a)return n=s[0],r=s[1],i=n,o=r,["M",n,r];if(a!==c)switch(c){case"A":e=[c,s[0],s[1],s[2],s[3],s[4],s[5]+n,s[6]+r];break;case"V":e=[c,s[0]+r];break;case"H":e=[c,s[0]+n];break;default:var l=s.map((function(t,e){return t+(e%2?r:n)}));e=[c].concat(l)}else e=[c].concat(s);var u=e.length;switch(c){case"Z":n=i,r=o;break;case"H":n=e[1];break;case"V":r=e[1];break;default:n=e[u-2],r=e[u-1],"M"===c&&(i=n,o=r)}return e}))}function un(t,e){var n=t[0],r=e.x1,i=e.y1,o=e.x2,s=e.y2,a=t.slice(1).map(Number),c=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),"H"===n)c=["L",t[1],i];else if("V"===n)c=["L",r,t[1]];else if("S"===n){var l=2*r-o,u=2*i-s;e.x1=l,e.y1=u,c=["C",l,u].concat(a)}else if("T"===n){var h=2*r-e.qx,d=2*i-e.qy;e.qx=h,e.qy=d,c=["Q",h,d].concat(a)}else if("Q"===n){var f=a[0],p=a[1];e.qx=f,e.qy=p}return c}function hn(t){if(qe(t))return[].concat(t);for(var e=ln(t),n=je({},Xe),r=0;r<e.length;r+=1){e[r]=un(e[r],n);var i=e[r],o=i.length;n.x1=+i[o-2],n.y1=+i[o-1],n.x2=+i[o-4]||n.x1,n.y2=+i[o-3]||n.y1}return e}function dn(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return[r+(o-r)*n,i+(s-i)*n]}function fn(t,e,n,r,i){var o=Ce([t,e],[n,r]),s={x:0,y:0};if("number"===typeof i)if(i<=0)s={x:t,y:e};else if(i>=o)s={x:n,y:r};else{var a=dn([t,e],[n,r],i/o),c=a[0],l=a[1];s={x:c,y:l}}return{length:o,point:s,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function pn(t,e){var n=t.x,r=t.y,i=e.x,o=e.y,s=n*i+r*o,a=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(o,2))),c=n*o-r*i<0?-1:1,l=c*Math.acos(s/a);return l}function gn(t,e,n,r,i,o,s,a,c,l){var u=Math.abs,h=Math.sin,d=Math.cos,f=Math.sqrt,p=Math.PI,g=u(n),v=u(r),y=(i%360+360)%360,m=y*(p/180);if(t===a&&e===c)return{x:t,y:e};if(0===g||0===v)return fn(t,e,a,c,l).point;var b=(t-a)/2,x=(e-c)/2,w={x:d(m)*b+h(m)*x,y:-h(m)*b+d(m)*x},E=Math.pow(w.x,2)/Math.pow(g,2)+Math.pow(w.y,2)/Math.pow(v,2);E>1&&(g*=f(E),v*=f(E));var k=Math.pow(g,2)*Math.pow(v,2)-Math.pow(g,2)*Math.pow(w.y,2)-Math.pow(v,2)*Math.pow(w.x,2),S=Math.pow(g,2)*Math.pow(w.y,2)+Math.pow(v,2)*Math.pow(w.x,2),M=k/S;M=M<0?0:M;var O=(o!==s?1:-1)*f(M),N={x:O*(g*w.y/v),y:O*(-v*w.x/g)},T={x:d(m)*N.x-h(m)*N.y+(t+a)/2,y:h(m)*N.x+d(m)*N.y+(e+c)/2},A={x:(w.x-N.x)/g,y:(w.y-N.y)/v},C=pn({x:1,y:0},A),P={x:(-w.x-N.x)/g,y:(-w.y-N.y)/v},R=pn(A,P);!s&&R>0?R-=2*p:s&&R<0&&(R+=2*p),R%=2*p;var _=C+R*l,L=g*d(_),D=v*h(_),I={x:d(m)*L-h(m)*D+T.x,y:h(m)*L+d(m)*D+T.y};return I}function vn(t,e,n,r,i,o,s,a,c,l,u){var h,d=u.bbox,f=void 0===d||d,p=u.length,g=void 0===p||p,v=u.sampleSize,y=void 0===v?30:v,m="number"===typeof l,b=t,x=e,w=0,E=[b,x,w],k=[b,x],S=0,M={x:0,y:0},O=[{x:b,y:x}];m&&l<=0&&(M={x:b,y:x});for(var N=0;N<=y;N+=1){if(S=N/y,h=gn(t,e,n,r,i,o,s,a,c,S),b=h.x,x=h.y,f&&O.push({x:b,y:x}),g&&(w+=Ce(k,[b,x])),k=[b,x],m&&w>=l&&l>E[2]){var T=(w-l)/(w-E[2]);M={x:k[0]*(1-T)+E[0]*T,y:k[1]*(1-T)+E[1]*T}}E=[b,x,w]}return m&&l>=w&&(M={x:a,y:c}),{length:w,point:M,min:{x:Math.min.apply(null,O.map((function(t){return t.x}))),y:Math.min.apply(null,O.map((function(t){return t.y})))},max:{x:Math.max.apply(null,O.map((function(t){return t.x}))),y:Math.max.apply(null,O.map((function(t){return t.y})))}}}function yn(t,e,n,r,i,o,s,a,c){var l=1-c;return{x:Math.pow(l,3)*t+3*Math.pow(l,2)*c*n+3*l*Math.pow(c,2)*i+Math.pow(c,3)*s,y:Math.pow(l,3)*e+3*Math.pow(l,2)*c*r+3*l*Math.pow(c,2)*o+Math.pow(c,3)*a}}function mn(t,e,n,r,i,o,s,a,c,l){var u,h=l.bbox,d=void 0===h||h,f=l.length,p=void 0===f||f,g=l.sampleSize,v=void 0===g?10:g,y="number"===typeof c,m=t,b=e,x=0,w=[m,b,x],E=[m,b],k=0,S={x:0,y:0},M=[{x:m,y:b}];y&&c<=0&&(S={x:m,y:b});for(var O=0;O<=v;O+=1){if(k=O/v,u=yn(t,e,n,r,i,o,s,a,k),m=u.x,b=u.y,d&&M.push({x:m,y:b}),p&&(x+=Ce(E,[m,b])),E=[m,b],y&&x>=c&&c>w[2]){var N=(x-c)/(x-w[2]);S={x:E[0]*(1-N)+w[0]*N,y:E[1]*(1-N)+w[1]*N}}w=[m,b,x]}return y&&c>=x&&(S={x:s,y:a}),{length:x,point:S,min:{x:Math.min.apply(null,M.map((function(t){return t.x}))),y:Math.min.apply(null,M.map((function(t){return t.y})))},max:{x:Math.max.apply(null,M.map((function(t){return t.x}))),y:Math.max.apply(null,M.map((function(t){return t.y})))}}}function bn(t,e,n,r,i,o,s){var a=1-s;return{x:Math.pow(a,2)*t+2*a*s*n+Math.pow(s,2)*i,y:Math.pow(a,2)*e+2*a*s*r+Math.pow(s,2)*o}}function xn(t,e,n,r,i,o,s,a){var c,l=a.bbox,u=void 0===l||l,h=a.length,d=void 0===h||h,f=a.sampleSize,p=void 0===f?10:f,g="number"===typeof s,v=t,y=e,m=0,b=[v,y,m],x=[v,y],w=0,E={x:0,y:0},k=[{x:v,y:y}];g&&s<=0&&(E={x:v,y:y});for(var S=0;S<=p;S+=1){if(w=S/p,c=bn(t,e,n,r,i,o,w),v=c.x,y=c.y,u&&k.push({x:v,y:y}),d&&(m+=Ce(x,[v,y])),x=[v,y],g&&m>=s&&s>b[2]){var M=(m-s)/(m-b[2]);E={x:x[0]*(1-M)+b[0]*M,y:x[1]*(1-M)+b[1]*M}}b=[v,y,m]}return g&&s>=m&&(E={x:i,y:o}),{length:m,point:E,min:{x:Math.min.apply(null,k.map((function(t){return t.x}))),y:Math.min.apply(null,k.map((function(t){return t.y})))},max:{x:Math.max.apply(null,k.map((function(t){return t.x}))),y:Math.max.apply(null,k.map((function(t){return t.y})))}}}function wn(t,e,n){for(var r,i,o,s,a,c,l,u,h,d=hn(t),f="number"===typeof e,p=[],g=0,v=0,y=0,m=0,b=[],x=[],w=0,E={x:0,y:0},k=E,S=E,M=E,O=0,N=0,T=d.length;N<T;N+=1)h=d[N],u=h[0],l="M"===u,p=l?p:[g,v].concat(h.slice(1)),l?(y=h[1],m=h[2],E={x:y,y:m},k=E,w=0,f&&e<.001&&(M=E)):"L"===u?(r=fn(p[0],p[1],p[2],p[3],(e||0)-O),w=r.length,E=r.min,k=r.max,S=r.point):"A"===u?(i=vn(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],(e||0)-O,n||{}),w=i.length,E=i.min,k=i.max,S=i.point):"C"===u?(o=mn(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],(e||0)-O,n||{}),w=o.length,E=o.min,k=o.max,S=o.point):"Q"===u?(s=xn(p[0],p[1],p[2],p[3],p[4],p[5],(e||0)-O,n||{}),w=s.length,E=s.min,k=s.max,S=s.point):"Z"===u&&(p=[g,v,y,m],a=fn(p[0],p[1],p[2],p[3],(e||0)-O),w=a.length,E=a.min,k=a.max,S=a.point),f&&O<e&&O+w>=e&&(M=S),x.push(k),b.push(E),O+=w,c="Z"!==u?h.slice(-2):[y,m],g=c[0],v=c[1];return f&&e>=O&&(M={x:g,y:v}),{length:O,point:M,min:{x:Math.min.apply(null,b.map((function(t){return t.x}))),y:Math.min.apply(null,b.map((function(t){return t.y})))},max:{x:Math.max.apply(null,x.map((function(t){return t.x}))),y:Math.max.apply(null,x.map((function(t){return t.y})))}}}function En(t,e){return wn(t,void 0,je(je({},e),{bbox:!1,length:!0})).length}function kn(t){return Array.isArray(t)}var Sn=function(t){if(kn(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])};function Mn(t){if(!Array.isArray(t))return-1/0;var e=t.length;if(!e)return-1/0;for(var n=t[0],r=1;r<e;r++)n=Math.max(n,t[r]);return n}var On=1e-5;function Nn(t,e,n){return void 0===n&&(n=On),t===e||Math.abs(t-e)<n}var Tn=function(t,e){return(t%e+e)%e},An=Tn;function Cn(t,e,n){if(t[n].length>7){t[n].shift();var r=t[n],i=n;while(r.length)e[n]="A",t.splice(i+=1,0,["C"].concat(r.splice(0,6)));t.splice(n,1)}}function Pn(t){return qe(t)&&t.every((function(t){var e=t[0];return"MC".includes(e)}))}function Rn(t,e,n){var r=t*Math.cos(n)-e*Math.sin(n),i=t*Math.sin(n)+e*Math.cos(n);return{x:r,y:i}}function _n(t,e,n,r,i,o,s,a,c,l){var u,h,d,f,p,g=t,v=e,y=n,m=r,b=a,x=c,w=120*Math.PI/180,E=Math.PI/180*(+i||0),k=[];if(l)h=l[0],d=l[1],f=l[2],p=l[3];else{u=Rn(g,v,-E),g=u.x,v=u.y,u=Rn(b,x,-E),b=u.x,x=u.y;var S=(g-b)/2,M=(v-x)/2,O=S*S/(y*y)+M*M/(m*m);O>1&&(O=Math.sqrt(O),y*=O,m*=O);var N=y*y,T=m*m,A=(o===s?-1:1)*Math.sqrt(Math.abs((N*T-N*M*M-T*S*S)/(N*M*M+T*S*S)));f=A*y*M/m+(g+b)/2,p=A*-m*S/y+(v+x)/2,h=Math.asin(((v-p)/m*Math.pow(10,9)|0)/Math.pow(10,9)),d=Math.asin(((x-p)/m*Math.pow(10,9)|0)/Math.pow(10,9)),h=g<f?Math.PI-h:h,d=b<f?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),s&&h>d&&(h-=2*Math.PI),!s&&d>h&&(d-=2*Math.PI)}var C=d-h;if(Math.abs(C)>w){var P=d,R=b,_=x;d=h+w*(s&&d>h?1:-1),b=f+y*Math.cos(d),x=p+m*Math.sin(d),k=_n(b,x,y,m,i,0,s,R,_,[d,P,f,p])}C=d-h;var L=Math.cos(h),D=Math.sin(h),I=Math.cos(d),j=Math.sin(d),F=Math.tan(C/4),B=4/3*y*F,z=4/3*m*F,G=[g,v],V=[g+B*D,v-z*L],W=[b+B*j,x-z*I],U=[b,x];if(V[0]=2*G[0]-V[0],V[1]=2*G[1]-V[1],l)return V.concat(W,U,k);k=V.concat(W,U,k);for(var H=[],$=0,Y=k.length;$<Y;$+=1)H[$]=$%2?Rn(k[$-1],k[$],E).y:Rn(k[$],k[$+1],E).x;return H}function Ln(t,e,n,r,i,o){var s=1/3,a=2/3;return[s*t+a*n,s*e+a*r,s*i+a*n,s*o+a*r,i,o]}var Dn=function(t,e,n,r){var i=.5,o=dn([t,e],[n,r],i);return We(We([],o,!0),[n,r,n,r],!1)};function In(t,e){var n,r=t[0],i=t.slice(1).map(Number),o=i[0],s=i[1],a=e.x1,c=e.y1,l=e.x,u=e.y;switch("TQ".includes(r)||(e.qx=null,e.qy=null),r){case"M":return e.x=o,e.y=s,t;case"A":return n=[a,c].concat(i),["C"].concat(_n(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]));case"Q":return e.qx=o,e.qy=s,n=[a,c].concat(i),["C"].concat(Ln(n[0],n[1],n[2],n[3],n[4],n[5]));case"L":return["C"].concat(Dn(a,c,o,s));case"Z":return a===l&&c===u?["C",a,c,l,u,l,u]:["C"].concat(Dn(a,c,l,u));default:}return t}function jn(t,e){if(void 0===e&&(e=!1),Pn(t)){var n=[].concat(t);return e?[n,[]]:n}for(var r,i,o=hn(t),s=je({},Xe),a=[],c="",l=o.length,u=[],h=0;h<l;h+=1){o[h]&&(c=o[h][0]),a[h]=c;var d=In(o[h],s);o[h]=d,Cn(o,a,h),l=o.length,"Z"===c&&u.push(h),r=o[h],i=r.length,s.x1=+r[i-2],s.y1=+r[i-1],s.x2=+r[i-4]||s.x1,s.y2=+r[i-3]||s.y1}return e?[o,u]:o}var Fn=50;function Bn(t,e){void 0===e&&(e=.5);var n=t.slice(0,2),r=t.slice(2,4),i=t.slice(4,6),o=t.slice(6,8),s=dn(n,r,e),a=dn(r,i,e),c=dn(i,o,e),l=dn(s,a,e),u=dn(a,c,e),h=dn(l,u,e);return[["C"].concat(s,l,h),["C"].concat(u,c,o)]}function zn(t){return t.map((function(t,e,n){var r,i=e&&n[e-1].slice(-2).concat(t.slice(1)),o=e?mn(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0;return r=e?o?Bn(i):[t,t]:[t],{s:t,ss:r,l:o}}))}function Gn(t,e,n,r){if(void 0===r&&(r=0),r>Fn)return console.warn("Maximum recursion depth reached in equalizeSegments"),[t,e];var i=zn(t),o=zn(e),s=i.length,a=o.length,c=i.filter((function(t){return t.l})).length,l=o.filter((function(t){return t.l})).length,u=i.filter((function(t){return t.l})).reduce((function(t,e){var n=e.l;return t+n}),0)/c||0,h=o.filter((function(t){return t.l})).reduce((function(t,e){var n=e.l;return t+n}),0)/l||0,d=n||Math.max(s,a),f=[u,h],p=[d-s,d-a],g=0,v=[i,o].map((function(t,e){return t.l===d?t.map((function(t){return t.s})):t.map((function(t,n){return g=n&&p[e]&&t.l>=f[e],p[e]-=g?1:0,g?t.ss:[t.s]})).flat()}));return v[0].length===v[1].length?v:Gn(v[0],v[1],d,r+1)}function Vn(t,e,n,r,i,o,s,a){return 3*((a-e)*(n+i)-(s-t)*(r+o)+r*(t-i)-n*(e-o)+a*(i+t/3)-s*(o+e/3))/20}function Wn(t){var e=0,n=0,r=0;return jn(t).map((function(t){var i;switch(t[0]){case"M":return e=t[1],n=t[2],0;default:var o=t.slice(1),s=o[0],a=o[1],c=o[2],l=o[3],u=o[4],h=o[5];return r=Vn(e,n,s,a,c,l,u,h),i=t.slice(-2),e=i[0],n=i[1],r}})).reduce((function(t,e){return t+e}),0)}function Un(t){return Wn(t)>=0}function Hn(t){var e=t.slice(1).map((function(e,n,r){return n?r[n-1].slice(-2).concat(e.slice(1)):t[0].slice(1).concat(e.slice(1))})).map((function(t){return t.map((function(e,n){return t[t.length-n-2*(1-n%2)]}))})).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map((function(t){return["C"].concat(t.slice(2))})))}function $n(t){return t.map((function(t){return Array.isArray(t)?[].concat(t):t}))}function Yn(t){var e=t.length,n=e-1;return t.map((function(r,i){return t.map((function(r,o){var s,a=i+o;return 0===o||t[a]&&"M"===t[a][0]?(s=t[a],["M"].concat(s.slice(-2))):(a>=e&&(a-=n),t[a])}))}))}function qn(t,e){var n=t.length-1,r=[],i=0,o=0,s=Yn(t);return s.forEach((function(i,s){t.slice(1).forEach((function(r,i){o+=Ce(t[(s+i)%n].slice(-2),e[i%n].slice(-2))})),r[s]=o,o=0})),i=r.indexOf(Math.min.apply(null,r)),s[i]}var Xn=function(t){return void 0===t},Kn=Xn,Zn={}.toString,Jn=function(t,e){return Zn.call(t)==="[object "+e+"]"},Qn=Jn,tr=function(t){return Qn(t,"Boolean")},er=tr;function nr(t){return"function"===typeof t}var rr=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function ir(t,e,n){return wn(t,e,je(je({},n),{bbox:!1,length:!0})).point}function or(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}function sr(){return sr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=or(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},sr.apply(null,arguments)}function ar(t,e,n,r){var i=sr(x(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof i?function(t){return i.apply(n,t)}:i}
/*!
 * @antv/g-math
 * @description Geometry util
 * @version 3.0.1
 * @date 5/9/2025, 8:18:51 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */
function cr(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function lr(t,e){var n=Math.min.apply(Math,b(t)),r=Math.min.apply(Math,b(e)),i=Math.max.apply(Math,b(t)),o=Math.max.apply(Math,b(e));return{x:n,y:r,width:i-n,height:o-r}}function ur(t,e,n){return Math.atan(-e/t*Math.tan(n))}function hr(t,e,n){return Math.atan(e/(t*Math.tan(n)))}function dr(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function fr(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}function pr(t,e,n,r,i,o,s){for(var a=ur(n,r,i),c=1/0,l=-1/0,u=[o,s],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var d=a+h;o<s?o<d&&d<s&&u.push(d):s<d&&d<o&&u.push(d)}for(var f=0;f<u.length;f++){var p=dr(t,e,n,r,i,u[f]);p<c&&(c=p),p>l&&(l=p)}for(var g=hr(n,r,i),v=1/0,y=-1/0,m=[o,s],b=2*-Math.PI;b<=2*Math.PI;b+=Math.PI){var x=g+b;o<s?o<x&&x<s&&m.push(x):s<x&&x<o&&m.push(x)}for(var w=0;w<m.length;w++){var E=fr(t,e,n,r,i,m[w]);E<v&&(v=E),E>y&&(y=E)}return{x:c,y:v,width:l-c,height:y-v}}var gr=1e-4;function vr(t,e,n,r,i,o){var s=-1,a=1/0,c=[n,r],l=20;o&&o>200&&(l=o/10);for(var u=1/l,h=u/10,d=0;d<=l;d++){var f=d*u,p=[i.apply(void 0,b(t.concat([f]))),i.apply(void 0,b(e.concat([f])))],g=cr(c[0],c[1],p[0],p[1]);g<a&&(s=f,a=g)}if(0===s)return{x:t[0],y:e[0]};if(1===s){var v=t.length;return{x:t[v-1],y:e[v-1]}}a=1/0;for(var y=0;y<32;y++){if(h<gr)break;var m=s-h,x=s+h,w=[i.apply(void 0,b(t.concat([m]))),i.apply(void 0,b(e.concat([m])))],E=cr(c[0],c[1],w[0],w[1]);if(m>=0&&E<a)s=m,a=E;else{var k=[i.apply(void 0,b(t.concat([x]))),i.apply(void 0,b(e.concat([x])))],S=cr(c[0],c[1],k[0],k[1]);x<=1&&S<a?(s=x,a=S):h*=.5}}return{x:i.apply(void 0,b(t.concat([s]))),y:i.apply(void 0,b(e.concat([s])))}}function yr(t,e,n,r){return cr(t,e,n,r)}function mr(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}}function br(t,e,n,r,i,o){var s=[n-t,r-e];if(Te(s,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var a=[-s[1],s[0]];Oe(a,a);var c=[i-t,o-e];return Math.abs(Ne(c,a))}function xr(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function wr(t,e,n,r){var i,o,s,a=-3*t+9*e-9*n+3*r,c=6*t-12*e+6*n,l=3*e-3*t,u=[];if(Nn(a,0))Nn(c,0)||(i=-l/c,i>=0&&i<=1&&u.push(i));else{var h=c*c-4*a*l;Nn(h,0)?u.push(-c/(2*a)):h>0&&(s=Math.sqrt(h),i=(-c+s)/(2*a),o=(-c-s)/(2*a),i>=0&&i<=1&&u.push(i),o>=0&&o<=1&&u.push(o))}return u}function Er(t,e,n,r,i,o,s,a){for(var c=[t,s],l=[e,a],u=wr(t,n,i,s),h=wr(e,r,o,a),d=0;d<u.length;d++)c.push(xr(t,n,i,s,u[d]));for(var f=0;f<h.length;f++)l.push(xr(e,r,o,a,h[f]));return lr(c,l)}function kr(t,e,n,r,i,o,s,a,c,l,u){return vr([t,n,i,s],[e,r,o,a],c,l,xr,u)}function Sr(t,e,n,r,i,o,s,a,c,l,u){var h=kr(t,e,n,r,i,o,s,a,c,l,u);return cr(h.x,h.y,c,l)}function Mr(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=cr(r[0],r[1],i[0],i[1])}return e}function Or(t){return Mr(t)}function Nr(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function Tr(t,e,n){var r=t+n-2*e;if(Nn(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function Ar(t,e,n,r,i,o){var s=Tr(t,n,i)[0],a=Tr(e,r,o)[0],c=[t,i],l=[e,o];return void 0!==s&&c.push(Nr(t,n,i,s)),void 0!==a&&l.push(Nr(e,r,o,a)),lr(c,l)}function Cr(t,e,n,r,i,o,s,a){return vr([t,n,i],[e,r,o],s,a,Nr)}function Pr(t,e,n,r,i,o,s,a){var c=Cr(t,e,n,r,i,o,s,a);return cr(c.x,c.y,s,a)}function Rr(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
Rr=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,s=Object.create(o.prototype),a=new P(r||[]);return i(s,"_invoke",{value:N(t,n,a)}),s}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var f="suspendedStart",p="suspendedYield",g="executing",v="completed",y={};function m(){}function b(){}function x(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,k=E&&E(E(R([])));k&&k!==n&&r.call(k,a)&&(w=k);var S=x.prototype=m.prototype=Object.create(w);function M(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(i,s,a,c){var l=d(t[i],t,s);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==o(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var s;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return s=s?s.then(i,i):i()}})}function N(e,n,r){var i=f;return function(o,s){if(i===g)throw Error("Generator is already running");if(i===v){if("throw"===o)throw s;return{value:t,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var c=T(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var l=d(e,n,r);if("normal"===l.type){if(i=r.done?v:p,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=v,r.method="throw",r.arg=l.arg)}}}function T(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator["return"]&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var s=o.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(o(e)+" is not iterable")}return b.prototype=x,i(S,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=u(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},M(O.prototype),u(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new O(h(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},M(S),u(S,l,"Generator"),u(S,a,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function _r(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function Lr(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){_r(o,r,i,s,a,"next",t)}function a(t){_r(o,r,i,s,a,"throw",t)}s(void 0)}))}}function Dr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=y(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function Ir(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}function jr(t,e){if(null==t)return{};var n,r,i=Ir(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}
/*!
 * @antv/g-lite
 * @description A core module for rendering engine implements DOM API.
 * @version 2.3.2
 * @date 7/30/2025, 1:34:19 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self&&self;var Fr={exports:{}};(function(t){(function(e,n){t.exports=n()})(0,(function(){function t(t,n,i,o,s){e(t,n,i||0,o||t.length-1,s||r)}function e(t,r,i,o,s){while(o>i){if(o-i>600){var a=o-i+1,c=r-i+1,l=Math.log(a),u=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*u*(a-u)/a)*(c-a/2<0?-1:1),d=Math.max(i,Math.floor(r-c*u/a+h)),f=Math.min(o,Math.floor(r+(a-c)*u/a+h));e(t,r,d,f,s)}var p=t[r],g=i,v=o;n(t,i,r),s(t[o],p)>0&&n(t,i,o);while(g<v){n(t,g,v),g++,v--;while(s(t[g],p)<0)g++;while(s(t[v],p)>0)v--}0===s(t[i],p)?n(t,i,v):(v++,n(t,v,o)),v<=r&&(i=v+1),r<=v&&(o=v-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=y(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];c(i,t.leaf?r(s):s)}return i}function c(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function p(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function g(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function v(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,n,r,i,o){var s=[n,r];while(s.length)if(r=s.pop(),n=s.pop(),!(r-n<=i)){var a=n+Math.ceil((r-n)/i/2)*i;t(e,a,n,r,o),s.push(n,a,a,r)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!v(t,e))return n;var r=this.toBBox,i=[];while(e){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;v(t,a)&&(e.leaf?n.push(s):g(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!v(t,e))return!1;var n=[];while(e){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(v(t,o)){if(e.leaf||g(t,o))return!0;n.push(i)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=y([]),this},i.prototype.remove=function(t,e){if(!t)return this;var n,r,i,s=this.data,a=this.toBBox(t),c=[],l=[];while(s||c.length){if(s||(s=c.pop(),r=c[c.length-1],n=l.pop(),i=!0),s.leaf){var u=o(t,s.children,e);if(-1!==u)return s.children.splice(u,1),c.push(s),this._condense(c),this}i||s.leaf||!g(s,a)?r?(n++,s=r.children[n],i=!1):s=null:(c.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){var n=[];while(t)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return i=y(t.slice(e,n+1)),s(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),i=y([]),i.leaf=!1,i.height=r;var c=Math.ceil(o/a),l=c*Math.ceil(Math.sqrt(a));m(t,e,n,l,this.compareMinX);for(var u=e;u<=n;u+=l){var h=Math.min(u+l-1,n);m(t,u,h,c,this.compareMinY);for(var d=u;d<=h;d+=c){var f=Math.min(d+c-1,h);i.children.push(this._build(t,d,f,r-1))}}return s(i,this.toBBox),i},i.prototype._chooseSubtree=function(t,e,n,r){while(1){if(r.push(e),e.leaf||r.length-1===n)break;for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var c=e.children[a],l=h(c),u=f(t,c)-l;u<o?(o=u,i=l<i?l:i,s=c):u===o&&l<i&&(i=l,s=c)}e=s||e.children[0]}return e},i.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);o.children.push(t),c(o,r);while(e>=0){if(!(i[e].children.length>this._maxEntries))break;this._split(i,e),e--}this._adjustParentBBoxes(r,i,e)},i.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=y(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},i.prototype._splitRoot=function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var r,i=1/0,o=1/0,s=e;s<=n-e;s++){var c=a(t,0,s,this.toBBox),l=a(t,s,n,this.toBBox),u=p(c,l),d=h(c)+h(l);u<i?(i=u,r=s,o=d<o?d:o):u===i&&d<o&&(o=d,r=s)}return r||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u,o=this._allDistMargin(t,e,n,r),s=this._allDistMargin(t,e,n,i);o<s&&t.children.sort(r)},i.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),s=a(t,n-e,n,i),l=d(o)+d(s),u=e;u<n-e;u++){var h=t.children[u];c(o,t.leaf?i(h):h),l+=d(o)}for(var f=n-e-1;f>=e;f--){var p=t.children[f];c(s,t.leaf?i(p):p),l+=d(s)}return l},i.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)c(e[r],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children,n.splice(n.indexOf(t[e]),1)):this.clear():s(t[e],this.toBBox)},i}))})(Fr);var Br=Fr.exports,zr=function(t){return t["GROUP"]="g",t["FRAGMENT"]="fragment",t["CIRCLE"]="circle",t["ELLIPSE"]="ellipse",t["IMAGE"]="image",t["RECT"]="rect",t["LINE"]="line",t["POLYLINE"]="polyline",t["POLYGON"]="polygon",t["TEXT"]="text",t["PATH"]="path",t["HTML"]="html",t["MESH"]="mesh",t}({}),Gr=function(t){return t[t["ZERO"]=0]="ZERO",t[t["NEGATIVE_ONE"]=1]="NEGATIVE_ONE",t}({}),Vr=function(){function t(){h(this,t),this.plugins=[]}return f(t,[{key:"addRenderingPlugin",value:function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)}},{key:"removeAllRenderingPlugins",value:function(){var t=this;this.plugins.forEach((function(e){var n=t.context.renderingPlugins.indexOf(e);n>=0&&t.context.renderingPlugins.splice(n,1)}))}}])}(),Wr=function(){function t(e){h(this,t),this.clipSpaceNearZ=Gr.NEGATIVE_ONE,this.plugins=[],this.config=u({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},e)}return f(t,[{key:"registerPlugin",value:function(t){var e=this.plugins.findIndex((function(e){return e===t}));-1===e&&this.plugins.push(t)}},{key:"unregisterPlugin",value:function(t){var e=this.plugins.findIndex((function(e){return e===t}));e>-1&&this.plugins.splice(e,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(t){return this.plugins.find((function(e){return e.name===t}))}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(t){Object.assign(this.config,t)}}])}(),Ur=G,Hr=B,$r=H,Yr=U,qr=$,Xr=nt,Kr=function(){function t(){h(this,t),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return f(t,[{key:"update",value:function(t,e){Hr(this.center,t),Hr(this.halfExtents,e),Xr(this.min,this.center,this.halfExtents),Ur(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){Ur(this.center,e,t),qr(this.center,this.center,.5),Xr(this.halfExtents,e,t),qr(this.halfExtents,this.halfExtents,.5),Hr(this.min,t),Hr(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(e){if(!t.isEmpty(e))if(t.isEmpty(this))this.setMinMax(e.getMin(),e.getMax());else{var n=this.center,r=n[0],i=n[1],o=n[2],s=this.halfExtents,a=s[0],c=s[1],l=s[2],u=r-a,h=r+a,d=i-c,f=i+c,p=o-l,g=o+l,v=e.center,y=v[0],m=v[1],b=v[2],x=e.halfExtents,w=x[0],E=x[1],k=x[2],S=y-w,M=y+w,O=m-E,N=m+E,T=b-k,A=b+k;S<u&&(u=S),M>h&&(h=M),O<d&&(d=O),N>f&&(f=N),T<p&&(p=T),A>g&&(g=A),n[0]=.5*(u+h),n[1]=.5*(d+f),n[2]=.5*(p+g),s[0]=.5*(h-u),s[1]=.5*(f-d),s[2]=.5*(g-p),this.min[0]=u,this.min[1]=d,this.min[2]=p,this.max[0]=h,this.max[1]=f,this.max[2]=g}}},{key:"setFromTransformedAABB",value:function(t,e){var n=this.center,r=this.halfExtents,i=t.center,o=t.halfExtents,s=e[0],a=e[4],c=e[8],l=e[1],u=e[5],h=e[9],d=e[2],f=e[6],p=e[10],g=Math.abs(s),v=Math.abs(a),y=Math.abs(c),m=Math.abs(l),b=Math.abs(u),x=Math.abs(h),w=Math.abs(d),E=Math.abs(f),k=Math.abs(p);n[0]=e[12]+s*i[0]+a*i[1]+c*i[2],n[1]=e[13]+l*i[0]+u*i[1]+h*i[2],n[2]=e[14]+d*i[0]+f*i[1]+p*i[2],r[0]=g*o[0]+v*o[1]+y*o[2],r[1]=m*o[0]+b*o[1]+x*o[2],r[2]=w*o[0]+E*o[1]+k*o[2],Xr(this.min,n,r),Ur(this.max,n,r)}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),i=t.getMin();return n[0]<=r[0]&&e[0]>=i[0]&&n[1]<=r[1]&&e[1]>=i[1]&&n[2]<=r[2]&&e[2]>=i[2]}},{key:"intersection",value:function(e){if(!this.intersects(e))return null;var n=new t,r=$r([0,0,0],this.getMin(),e.getMin()),i=Yr([0,0,0],this.getMax(),e.getMax());return n.setMinMax(r,i),n}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?Hr([0,0,0],this.min):272===t.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:257===t.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:256===t.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:17===t.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:16===t.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:1===t.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?Hr([0,0,0],this.max):272===t.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:257===t.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:256===t.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:17===t.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:16===t.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:1===t.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(t){return!t||0===t.halfExtents[0]&&0===t.halfExtents[1]&&0===t.halfExtents[2]}}])}(),Zr=function(){function t(e,n){h(this,t),this.distance=e||0,this.normal=n||F(0,1,0),this.updatePNVertexFlag()}return f(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return X(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/it(this.normal);$(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var r=this.distanceToPoint(t),i=this.distanceToPoint(e),o=r/(r-i),s=o>=0&&o<=1;return s&&n&&Z(n,t,e,o),s}}])}(),Jr=function(t){return t[t["OUTSIDE"]=4294967295]="OUTSIDE",t[t["INSIDE"]=0]="INSIDE",t[t["INDETERMINATE"]=2147483647]="INDETERMINATE",t}({}),Qr=function(){function t(e){if(h(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new Zr)}return f(t,[{key:"extractFromVPMatrix",value:function(t){var e=C(t,16),n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],v=e[14],y=e[15];z(this.planes[0].normal,o-n,l-s,f-u),this.planes[0].distance=y-p,z(this.planes[1].normal,o+n,l+s,f+u),this.planes[1].distance=y+p,z(this.planes[2].normal,o+r,l+a,f+h),this.planes[2].distance=y+g,z(this.planes[3].normal,o-r,l-a,f-h),this.planes[3].distance=y-g,z(this.planes[4].normal,o-i,l-c,f-d),this.planes[4].distance=y-v,z(this.planes[5].normal,o+i,l+c,f+d),this.planes[5].distance=y+v,this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))}}])}(),ti=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(this,t),this.x=0,this.y=0,this.x=e,this.y=n}return f(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}}])}(),ei=function(){function t(e,n,r,i){h(this,t),this.x=e,this.y=n,this.width=r,this.height=i,this.left=e,this.right=e+r,this.top=n,this.bottom=n+i}return f(t,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(e){return new t(e.x,e.y,e.width,e.height)}},{key:"applyTransform",value:function(e,n){var r=st(e.x,e.y,0,1),i=st(e.x+e.width,e.y,0,1),o=st(e.x,e.y+e.height,0,1),s=st(e.x+e.width,e.y+e.height,0,1),a=ot(),c=ot(),l=ot(),u=ot();ut(a,r,n),ut(c,i,n),ut(l,o,n),ut(u,s,n);var h=Math.min(a[0],c[0],l[0],u[0]),d=Math.min(a[1],c[1],l[1],u[1]),f=Math.max(a[0],c[0],l[0],u[0]),p=Math.max(a[1],c[1],l[1],u[1]);return t.fromRect({x:h,y:d,width:f-h,height:p-d})}}])}(),ni="Method not implemented.",ri="Use document.documentElement instead.",ii="Cannot append a destroyed element.";function oi(t){return void 0===t?0:t>360||t<-360?t%360:t}var si=D();function ai(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Array.isArray(t)&&3===t.length?r?I(t):B(si,t):Ae(t)?r?F(t,e,n):z(si,t,e,n):r?F(t[0],t[1]||e,t[2]||n):z(si,t[0],t[1]||e,t[2]||n)}var ci=Math.PI/180;function li(t){return t*ci}var ui=180/Math.PI;function hi(t){return t*ui}function di(t){return 360*t}var fi=Math.PI/2;function pi(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n,a=r*r,c=i*i,l=o*o,u=s+a+c+l,h=n*o-r*i;return h>.499995*u?(t[0]=fi,t[1]=2*Math.atan2(r,n),t[2]=0):h<-.499995*u?(t[0]=-fi,t[1]=2*Math.atan2(r,n),t[2]=0):(t[0]=Math.asin(2*(n*i-o*r)),t[1]=Math.atan2(2*(n*o+r*i),1-2*(c+l)),t[2]=Math.atan2(2*(n*r+i*o),1-2*(a+c))),t}function gi(t,e){var n,r,i=jt(D(),e),o=C(i,3),s=o[0],a=o[1],c=o[2],l=Math.asin(-e[2]/s);return l<fi?l>-fi?(n=Math.atan2(e[6]/a,e[10]/c),r=Math.atan2(e[1]/s,e[0]/s)):(r=0,n=-Math.atan2(e[4]/a,e[5]/a)):(r=0,n=Math.atan2(e[4]/a,e[5]/a)),t[0]=n,t[1]=l,t[2]=r,t}function vi(t,e){return 16===e.length?gi(t,e):pi(t,e)}function yi(t,e,n,r,i){var o=Math.cos(t),s=Math.sin(t);return ue(r*o,i*s,0,-r*s,i*o,0,e,n,1)}function mi(t,e,n,r,i,o,s){var a,c,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=2*o,h=n-e,d=r-i,f=u/h,p=u/d,g=(n+e)/h,v=(r+i)/d,y=s-o,m=s*o;return l?(a=-s/y,c=-m/y):(a=-(s+o)/y,c=-2*m/y),t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=p,t[6]=0,t[7]=0,t[8]=g,t[9]=v,t[10]=a,t[11]=-1,t[12]=0,t[13]=0,t[14]=c,t[15]=0,t}function bi(t){var e=t[0],n=t[1],r=t[3],i=t[4],o=Math.sqrt(e*e+n*n),s=Math.sqrt(r*r+i*i),a=e*i-n*r;if(a<0&&(e<i?o=-o:s=-s),o){var c=1/o;e*=c,n*=c}if(s){var l=1/s;r*=l,i*=l}var u=Math.atan2(n,e),h=hi(u);return[t[6],t[7],o,s,h]}var xi=ht(),wi=ht(),Ei=ot(),ki=[D(),D(),D()],Si=D();function Mi(t,e,n,r,i,o){if(!Oi(xi,t))return!1;if(ft(wi,xi),wi[3]=0,wi[7]=0,wi[11]=0,wi[15]=1,Math.abs(xt(wi))<1e-8)return!1;var s=xi[3],a=xi[7],c=xi[11],l=xi[12],u=xi[13],h=xi[14],d=xi[15];if(0!==s||0!==a||0!==c){Ei[0]=s,Ei[1]=a,Ei[2]=c,Ei[3]=d;var f=mt(wi,wi);if(!f)return!1;yt(wi,wi),ut(i,Ei,wi)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=l,e[1]=u,e[2]=h,Ni(ki,xi),n[0]=j(ki[0]),q(ki[0],ki[0]),r[0]=X(ki[0],ki[1]),Ti(ki[1],ki[1],ki[0],1,-r[0]),n[1]=j(ki[1]),q(ki[1],ki[1]),r[0]/=n[1],r[1]=X(ki[0],ki[2]),Ti(ki[2],ki[2],ki[0],1,-r[1]),r[2]=X(ki[1],ki[2]),Ti(ki[2],ki[2],ki[1],1,-r[2]),n[2]=j(ki[2]),q(ki[2],ki[2]),r[1]/=n[2],r[2]/=n[2],K(Si,ki[1],ki[2]),X(ki[0],Si)<0)for(var p=0;p<3;p++)n[p]*=-1,ki[p][0]*=-1,ki[p][1]*=-1,ki[p][2]*=-1;return o[0]=.5*Math.sqrt(Math.max(1+ki[0][0]-ki[1][1]-ki[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-ki[0][0]+ki[1][1]-ki[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-ki[0][0]-ki[1][1]+ki[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+ki[0][0]+ki[1][1]+ki[2][2],0)),ki[2][1]>ki[1][2]&&(o[0]=-o[0]),ki[0][2]>ki[2][0]&&(o[1]=-o[1]),ki[1][0]>ki[0][1]&&(o[2]=-o[2]),!0}function Oi(t,e){var n=e[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}function Ni(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}function Ti(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}var Ai=function(t){return t[t["ORBITING"]=0]="ORBITING",t[t["EXPLORING"]=1]="EXPLORING",t[t["TRACKING"]=2]="TRACKING",t}({}),Ci=function(t){return t[t["DEFAULT"]=0]="DEFAULT",t[t["ROTATIONAL"]=1]="ROTATIONAL",t[t["TRANSLATIONAL"]=2]="TRANSLATIONAL",t[t["CINEMATIC"]=3]="CINEMATIC",t}({}),Pi=function(t){return t[t["ORTHOGRAPHIC"]=0]="ORTHOGRAPHIC",t[t["PERSPECTIVE"]=1]="PERSPECTIVE",t}({}),Ri={UPDATED:"updated"},_i=2e-4,Li=function(){function t(){h(this,t),this.clipSpaceNearZ=Gr.NEGATIVE_ONE,this.eventEmitter=new R,this.matrix=ht(),this.right=F(1,0,0),this.up=F(0,1,0),this.forward=F(0,0,1),this.position=F(0,0,1),this.focalPoint=F(0,0,0),this.distanceVector=F(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=ht(),this.projectionMatrixInverse=ht(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Ai.EXPLORING,this.trackingMode=Ci.DEFAULT,this.projectionMode=Pi.PERSPECTIVE,this.frustum=new Qr,this.orthoMatrix=ht()}return f(t,[{key:"isOrtho",value:function(){return this.projectionMode===Pi.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(t){this.enableUpdate=t}},{key:"setType",value:function(t,e){return this.type=t,this.type===Ai.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Ai.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==Ai.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){return this.rotateWorld=t,this._getAngles(),this}},{key:"getViewTransform",value:function(){return mt(ht(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(t,e){var n=Tt(ht(),[t,e,0]);this.jitteredProjectionMatrix=wt(ht(),n,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setProjectionMatrix",value:function(t){this.projectionMatrix=t}},{key:"setFov",value:function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setNear",value:function(t){return this.projectionMode===Pi.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this}},{key:"setFar",value:function(t){return this.projectionMode===Pi.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this}},{key:"setViewOffset",value:function(t,e,n,r,i,o){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.projectionMode===Pi.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Pi.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(t){return this.zoom=t,this.projectionMode===Pi.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Pi.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(t,e){var n=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),r=n.x,i=n.y,o=this.roll;this.rotate(0,0,-o),this.setPosition(r,i),this.setFocalPoint(r,i),this.setZoom(t),this.rotate(0,0,o);var s=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),a=s.x,c=s.y,l=F(a-r,c-i,0),u=X(l,this.right)/j(this.right),h=X(l,this.up)/j(this.up),d=this.getPosition(),f=C(d,2),p=f[0],g=f[1],v=this.getFocalPoint(),y=C(v,2),m=y[0],b=y[1];return this.setPosition(p-u,g-h),this.setFocalPoint(m-u,b-h),this}},{key:"setPerspective",value:function(t,e,n,r){var i;this.projectionMode=Pi.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r;var o=this.near*Math.tan(li(.5*this.fov))/this.zoom,s=2*o,a=this.aspect*s,c=-.5*a;if(null!==(i=this.view)&&void 0!==i&&i.enabled){var l=this.view.fullWidth,u=this.view.fullHeight;c+=this.view.offsetX*a/l,o-=this.view.offsetY*s/u,a*=this.view.width/l,s*=this.view.height/u}return mi(this.projectionMatrix,c,c+a,o-s,o,t,this.far,this.clipSpaceNearZ===Gr.ZERO),mt(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(t,e,n,r,i,o){var s;this.projectionMode=Pi.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=o;var a=(this.rright-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),l=(this.rright+this.left)/2,u=(this.top+this.bottom)/2,h=l-a,d=l+a,f=u+c,p=u-c;if(null!==(s=this.view)&&void 0!==s&&s.enabled){var g=(this.rright-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=g*this.view.offsetX,d=h+g*this.view.width,f-=v*this.view.offsetY,p=f-v*this.view.height}return this.clipSpaceNearZ===Gr.NEGATIVE_ONE?qt(this.projectionMatrix,h,d,f,p,i,o):Xt(this.projectionMatrix,h,d,f,p,i,o),mt(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.position[2],r=ai(t,e,n);return this._setPosition(r),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focalPoint[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.focalPoint[2],r=F(0,1,0);if(this.focalPoint=ai(t,e,n),this.trackingMode===Ci.CINEMATIC){var i=V(D(),this.focalPoint,this.position);t=i[0],e=i[1],n=i[2];var o=j(i),s=hi(Math.asin(e/o)),a=90+hi(Math.atan2(n,t)),c=ht();Ot(c,c,li(a)),Mt(c,c,li(s)),r=J(D(),[0,1,0],c)}return mt(this.matrix,Kt(ht(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<_i&&(this.distance=_i),this.dollyingStep=this.distance/100;var e=D();t=this.distance;var n=this.forward,r=this.focalPoint;return e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"setAzimuth",value:function(t){return this.azimuth=oi(t),this.computeMatrix(),this._getAxes(),this.type===Ai.ORBITING||this.type===Ai.EXPLORING?this._getPosition():this.type===Ai.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=oi(t),this.computeMatrix(),this._getAxes(),this.type===Ai.ORBITING||this.type===Ai.EXPLORING?this._getPosition():this.type===Ai.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(t){return this.roll=oi(t),this.computeMatrix(),this._getAxes(),this.type===Ai.ORBITING||this.type===Ai.EXPLORING?this._getPosition():this.type===Ai.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var t=de(he(),[0,0,1],li(this.roll));vt(this.matrix);var e=de(he(),[1,0,0],li((this.rotateWorld&&this.type!==Ai.TRACKING||this.type===Ai.TRACKING?1:-1)*this.elevation)),n=de(he(),[0,1,0],li((this.rotateWorld&&this.type!==Ai.TRACKING||this.type===Ai.TRACKING?1:-1)*this.azimuth)),r=fe(he(),n,e);r=fe(he(),r,t);var i=Gt(ht(),r);this.type===Ai.ORBITING||this.type===Ai.EXPLORING?(Et(this.matrix,this.matrix,this.focalPoint),wt(this.matrix,this.matrix,i),Et(this.matrix,this.matrix,[0,0,this.distance])):this.type===Ai.TRACKING&&(Et(this.matrix,this.matrix,this.position),wt(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(t,e,n){this.position=ai(t,e,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){B(this.right,ai(ut(ot(),[1,0,0,0],this.matrix))),B(this.up,ai(ut(ot(),[0,1,0,0],this.matrix))),B(this.forward,ai(ut(ot(),[0,0,1,0],this.matrix))),q(this.right,this.right),q(this.up,this.up),q(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=j(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===Ai.TRACKING||this.rotateWorld?(this.elevation=hi(Math.asin(e/r)),this.azimuth=hi(Math.atan2(-t,-n))):(this.elevation=-hi(Math.asin(e/r)),this.azimuth=-hi(Math.atan2(-t,-n)))}},{key:"_getPosition",value:function(){B(this.position,ai(ut(ot(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Q(this.distanceVector,[0,0,-this.distance],le(ce(),this.matrix)),G(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=V(D(),this.focalPoint,this.position),this.distance=j(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===Pi.ORTHOGRAPHIC){var t=this.position,e=de(he(),[0,0,1],-this.roll*Math.PI/180);zt(this.orthoMatrix,e,F((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),F(this.zoom,this.zoom,1),t)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var t=this.getViewTransform(),e=wt(ht(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(e),this.eventEmitter.emit(Ri.UPDATED)}}},{key:"rotate",value:function(t,e,n){throw new Error(ni)}},{key:"pan",value:function(t,e){throw new Error(ni)}},{key:"dolly",value:function(t){throw new Error(ni)}},{key:"createLandmark",value:function(t,e){throw new Error(ni)}},{key:"gotoLandmark",value:function(t,e){throw new Error(ni)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(ni)}}])}(),Di=function(t){return t[t["Standard"]=0]="Standard",t}({}),Ii=function(t){return t[t["ADDED"]=0]="ADDED",t[t["REMOVED"]=1]="REMOVED",t[t["Z_INDEX_CHANGED"]=2]="Z_INDEX_CHANGED",t}({}),ji=D(),Fi=ht(),Bi=he();function zi(t){if(t.localDirtyFlag){var e=0!==t.localSkew[0]||0!==t.localSkew[1];if(e){zt(t.localTransform,t.localRotation,t.localPosition,F(1,1,1),t.origin),0===t.localSkew[0]&&0===t.localSkew[1]||(vt(Fi),Fi[4]=Math.tan(t.localSkew[0]),Fi[1]=Math.tan(t.localSkew[1]),wt(t.localTransform,t.localTransform,Fi));var n=zt(Fi,xe(Bi,0,0,0,1),z(ji,1,1,1),t.localScale,t.origin);wt(t.localTransform,t.localTransform,n)}else{var r=t.localTransform,i=t.localPosition,o=t.localRotation,s=t.localScale,a=t.origin,c=0!==i[0]||0!==i[1]||0!==i[2],l=1!==o[3]||0!==o[0]||0!==o[1]||0!==o[2],u=1!==s[0]||1!==s[1]||1!==s[2],h=0!==a[0]||0!==a[1]||0!==a[2];l||u||h?zt(r,o,i,s,a):c?Tt(r,i):vt(r)}t.localDirtyFlag=!1}}function Gi(t,e){t.dirtyFlag&&(e?wt(t.worldTransform,e.worldTransform,t.localTransform):ft(t.worldTransform,t.localTransform),t.dirtyFlag=!1)}var Vi={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new ei(0,0,0,0)},Wi=function(t){return t["COORDINATE"]="<coordinate>",t["COLOR"]="<color>",t["PAINT"]="<paint>",t["NUMBER"]="<number>",t["ANGLE"]="<angle>",t["OPACITY_VALUE"]="<opacity-value>",t["SHADOW_BLUR"]="<shadow-blur>",t["LENGTH"]="<length>",t["PERCENTAGE"]="<percentage>",t["LENGTH_PERCENTAGE"]="<length> | <percentage>",t["LENGTH_PERCENTAGE_12"]="[<length> | <percentage>]{1,2}",t["LENGTH_PERCENTAGE_14"]="[<length> | <percentage>]{1,4}",t["LIST_OF_POINTS"]="<list-of-points>",t["PATH"]="<path>",t["FILTER"]="<filter>",t["Z_INDEX"]="<z-index>",t["OFFSET_DISTANCE"]="<offset-distance>",t["DEFINED_PATH"]="<defined-path>",t["MARKER"]="<marker>",t["TRANSFORM"]="<transform>",t["TRANSFORM_ORIGIN"]="<transform-origin>",t["TEXT"]="<text>",t["TEXT_TRANSFORM"]="<text-transform>",t}({});function Ui(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Hi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function $i(){}var Yi=.7,qi=1/Yi,Xi="\\s*([+-]?\\d+)\\s*",Ki="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ji=/^#([0-9a-f]{3,8})$/,Qi=new RegExp(`^rgb\\(${Xi},${Xi},${Xi}\\)$`),to=new RegExp(`^rgb\\(${Zi},${Zi},${Zi}\\)$`),eo=new RegExp(`^rgba\\(${Xi},${Xi},${Xi},${Ki}\\)$`),no=new RegExp(`^rgba\\(${Zi},${Zi},${Zi},${Ki}\\)$`),ro=new RegExp(`^hsl\\(${Ki},${Zi},${Zi}\\)$`),io=new RegExp(`^hsla\\(${Ki},${Zi},${Zi},${Ki}\\)$`),oo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function so(){return this.rgb().formatHex()}function ao(){return this.rgb().formatHex8()}function co(){return So(this).formatHsl()}function lo(){return this.rgb().formatRgb()}function uo(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ji.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ho(e):3===n?new vo(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?fo(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?fo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Qi.exec(t))?new vo(e[1],e[2],e[3],1):(e=to.exec(t))?new vo(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=eo.exec(t))?fo(e[1],e[2],e[3],e[4]):(e=no.exec(t))?fo(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ro.exec(t))?ko(e[1],e[2]/100,e[3]/100,1):(e=io.exec(t))?ko(e[1],e[2]/100,e[3]/100,e[4]):oo.hasOwnProperty(t)?ho(oo[t]):"transparent"===t?new vo(NaN,NaN,NaN,0):null}function ho(t){return new vo(t>>16&255,t>>8&255,255&t,1)}function fo(t,e,n,r){return r<=0&&(t=e=n=NaN),new vo(t,e,n,r)}function po(t){return t instanceof $i||(t=uo(t)),t?(t=t.rgb(),new vo(t.r,t.g,t.b,t.opacity)):new vo}function go(t,e,n,r){return 1===arguments.length?po(t):new vo(t,e,n,null==r?1:r)}function vo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function yo(){return`#${Eo(this.r)}${Eo(this.g)}${Eo(this.b)}`}function mo(){return`#${Eo(this.r)}${Eo(this.g)}${Eo(this.b)}${Eo(255*(isNaN(this.opacity)?1:this.opacity))}`}function bo(){const t=xo(this.opacity);return`${1===t?"rgb(":"rgba("}${wo(this.r)}, ${wo(this.g)}, ${wo(this.b)}${1===t?")":`, ${t})`}`}function xo(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function wo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Eo(t){return t=wo(t),(t<16?"0":"")+t.toString(16)}function ko(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Oo(t,e,n,r)}function So(t){if(t instanceof Oo)return new Oo(t.h,t.s,t.l,t.opacity);if(t instanceof $i||(t=uo(t)),!t)return new Oo;if(t instanceof Oo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new Oo(s,a,c,t.opacity)}function Mo(t,e,n,r){return 1===arguments.length?So(t):new Oo(t,e,n,null==r?1:r)}function Oo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function No(t){return t=(t||0)%360,t<0?t+360:t}function To(t){return Math.max(0,Math.min(1,t||0))}function Ao(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Co(t,e){if("function"!==typeof t||null!=e&&"function"!==typeof e)throw new TypeError("Expected a function");var n=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=e?e.apply(this,i):i[0],a=n.cache;if(a.has(s))return a.get(s);var c=t.apply(this,i);return n.cache=a.set(s,c)||a,c};return n.cache=new(Co.Cache||Map),Co.cacheList.push(n.cache),n}Ui($i,uo,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:so,formatHex:so,formatHex8:ao,formatHsl:co,formatRgb:lo,toString:lo}),Ui(vo,go,Hi($i,{brighter(t){return t=null==t?qi:Math.pow(qi,t),new vo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Yi:Math.pow(Yi,t),new vo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new vo(wo(this.r),wo(this.g),wo(this.b),xo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yo,formatHex:yo,formatHex8:mo,formatRgb:bo,toString:bo})),Ui(Oo,Mo,Hi($i,{brighter(t){return t=null==t?qi:Math.pow(qi,t),new Oo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Yi:Math.pow(Yi,t),new Oo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new vo(Ao(t>=240?t-240:t+120,i,r),Ao(t,i,r),Ao(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Oo(No(this.h),To(this.s),To(this.l),xo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xo(this.opacity);return`${1===t?"hsl(":"hsla("}${No(this.h)}, ${100*To(this.s)}%, ${100*To(this.l)}%${1===t?")":`, ${t})`}`}})),Co.Cache=Map,Co.cacheList=[],Co.clearCache=function(){Co.cacheList.forEach((function(t){return t.clear()}))};var Po=function(t){return t[t["kUnknown"]=0]="kUnknown",t[t["kNumber"]=1]="kNumber",t[t["kPercentage"]=2]="kPercentage",t[t["kEms"]=3]="kEms",t[t["kPixels"]=4]="kPixels",t[t["kRems"]=5]="kRems",t[t["kDegrees"]=6]="kDegrees",t[t["kRadians"]=7]="kRadians",t[t["kGradians"]=8]="kGradians",t[t["kTurns"]=9]="kTurns",t[t["kMilliseconds"]=10]="kMilliseconds",t[t["kSeconds"]=11]="kSeconds",t[t["kInteger"]=12]="kInteger",t}({}),Ro=function(t){return t[t["kUNumber"]=0]="kUNumber",t[t["kUPercent"]=1]="kUPercent",t[t["kULength"]=2]="kULength",t[t["kUAngle"]=3]="kUAngle",t[t["kUTime"]=4]="kUTime",t[t["kUOther"]=5]="kUOther",t}({}),_o=function(t){return t[t["kYes"]=0]="kYes",t[t["kNo"]=1]="kNo",t}({}),Lo=function(t){return t[t["kYes"]=0]="kYes",t[t["kNo"]=1]="kNo",t}({}),Do=[{name:"em",unit_type:Po.kEms},{name:"px",unit_type:Po.kPixels},{name:"deg",unit_type:Po.kDegrees},{name:"rad",unit_type:Po.kRadians},{name:"grad",unit_type:Po.kGradians},{name:"ms",unit_type:Po.kMilliseconds},{name:"s",unit_type:Po.kSeconds},{name:"rem",unit_type:Po.kRems},{name:"turn",unit_type:Po.kTurns}],Io=function(t){return t[t["kUnknownType"]=0]="kUnknownType",t[t["kUnparsedType"]=1]="kUnparsedType",t[t["kKeywordType"]=2]="kKeywordType",t[t["kUnitType"]=3]="kUnitType",t[t["kSumType"]=4]="kSumType",t[t["kProductType"]=5]="kProductType",t[t["kNegateType"]=6]="kNegateType",t[t["kInvertType"]=7]="kInvertType",t[t["kMinType"]=8]="kMinType",t[t["kMaxType"]=9]="kMaxType",t[t["kClampType"]=10]="kClampType",t[t["kTransformType"]=11]="kTransformType",t[t["kPositionType"]=12]="kPositionType",t[t["kURLImageType"]=13]="kURLImageType",t[t["kColorType"]=14]="kColorType",t[t["kUnsupportedColorType"]=15]="kUnsupportedColorType",t}({}),jo=function(t){return Do.find((function(e){return e.name===t})).unit_type},Fo=function(t){return t?"number"===t?Po.kNumber:"percent"===t||"%"===t?Po.kPercentage:jo(t):Po.kUnknown},Bo=function(t){switch(t){case Po.kNumber:case Po.kInteger:return Ro.kUNumber;case Po.kPercentage:return Ro.kUPercent;case Po.kPixels:return Ro.kULength;case Po.kMilliseconds:case Po.kSeconds:return Ro.kUTime;case Po.kDegrees:case Po.kRadians:case Po.kGradians:case Po.kTurns:return Ro.kUAngle;default:return Ro.kUOther}},zo=function(t){switch(t){case Ro.kUNumber:return Po.kNumber;case Ro.kULength:return Po.kPixels;case Ro.kUPercent:return Po.kPercentage;case Ro.kUTime:return Po.kSeconds;case Ro.kUAngle:return Po.kDegrees;default:return Po.kUnknown}},Go=function(t){var e=1;switch(t){case Po.kPixels:case Po.kDegrees:case Po.kSeconds:break;case Po.kMilliseconds:e=.001;break;case Po.kRadians:e=180/Math.PI;break;case Po.kGradians:e=.9;break;case Po.kTurns:e=360;break}return e},Vo=function(t){switch(t){case Po.kNumber:case Po.kInteger:return"";case Po.kPercentage:return"%";case Po.kEms:return"em";case Po.kRems:return"rem";case Po.kPixels:return"px";case Po.kDegrees:return"deg";case Po.kRadians:return"rad";case Po.kGradians:return"grad";case Po.kMilliseconds:return"ms";case Po.kSeconds:return"s";case Po.kTurns:return"turn"}return""},Wo=function(){function t(){h(this,t)}return f(t,[{key:"toString",value:function(){return this.buildCSSText(_o.kNo,Lo.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=Io.kUnitType&&this.getType()<=Io.kClampType}}],[{key:"isAngle",value:function(t){return t===Po.kDegrees||t===Po.kRadians||t===Po.kGradians||t===Po.kTurns}},{key:"isLength",value:function(t){return t>=Po.kEms&&t<Po.kDegrees}},{key:"isRelativeUnit",value:function(t){return t===Po.kPercentage||t===Po.kEms||t===Po.kRems}},{key:"isTime",value:function(t){return t===Po.kSeconds||t===Po.kMilliseconds}}])}(),Uo=function(t){function e(t){var n;return h(this,e),n=S(this,e),n.colorSpace=t,n}return O(e,t),f(e,[{key:"getType",value:function(){return Io.kColorType}},{key:"to",value:function(t){return this}}])}(Wo),Ho=function(t){return t[t["Constant"]=0]="Constant",t[t["LinearGradient"]=1]="LinearGradient",t[t["RadialGradient"]=2]="RadialGradient",t}({}),$o=function(t){function e(t,n){var r;return h(this,e),r=S(this,e),r.type=t,r.value=n,r}return O(e,t),f(e,[{key:"clone",value:function(){return new e(this.type,this.value)}},{key:"buildCSSText",value:function(t,e,n){return n}},{key:"getType",value:function(){return Io.kColorType}}])}(Wo),Yo=function(t){function e(t){var n;return h(this,e),n=S(this,e),n.value=t,n}return O(e,t),f(e,[{key:"clone",value:function(){return new e(this.value)}},{key:"getType",value:function(){return Io.kKeywordType}},{key:"buildCSSText",value:function(t,e,n){return n+this.value}}])}(Wo),qo=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";return n=Number.isFinite(t)?"NaN":t>0?"infinity":"-infinity",n+e},Xo=function(t){return zo(Bo(t))},Ko=function(t){function e(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Po.kNumber;return h(this,e),n=S(this,e),r="string"===typeof i?Fo(i):i,n.unit=r,n.value=t,n}return O(e,t),f(e,[{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"equals",value:function(t){var e=t;return this.value===e.value&&this.unit===e.unit}},{key:"getType",value:function(){return Io.kUnitType}},{key:"convertTo",value:function(t){if(this.unit===t)return new e(this.value,this.unit);var n=Xo(this.unit);if(n!==Xo(t)||n===Po.kUnknown)return null;var r=Go(this.unit)/Go(t);return new e(this.value*r,t)}},{key:"buildCSSText",value:function(t,e,n){var r;switch(this.unit){case Po.kUnknown:break;case Po.kInteger:r=Number(this.value).toFixed(0);break;case Po.kNumber:case Po.kPercentage:case Po.kEms:case Po.kRems:case Po.kPixels:case Po.kDegrees:case Po.kRadians:case Po.kGradians:case Po.kMilliseconds:case Po.kSeconds:case Po.kTurns:var i=-999999,o=999999,s=this.value,a=Vo(this.unit);if(s<i||s>o){var c=Vo(this.unit);r=!Number.isFinite(s)||Number.isNaN(s)?qo(s,c):s+(c||"")}else r="".concat(s).concat(a)}return n+=r,n}}])}(Wo),Zo=new Ko(0,"px");new Ko(1,"px");var Jo=new Ko(0,"deg"),Qo=function(t){function e(t,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return h(this,e),i=S(this,e,["rgb"]),i.r=t,i.g=n,i.b=r,i.alpha=o,i.isNone=s,i}return O(e,t),f(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(t,e,n){return"".concat(n,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(Uo),ts=new Yo("unset"),es=new Yo("initial"),ns=new Yo("inherit"),rs={"":ts,unset:ts,initial:es,inherit:ns},is=function(t){return rs[t]||(rs[t]=new Yo(t)),rs[t]},os=new Qo(0,0,0,0,!0),ss=new Qo(0,0,0,0),as=Co((function(t,e,n,r){return new Qo(t,e,n,r)}),(function(t,e,n,r){return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(r,")")})),cs=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Po.kNumber;return new Ko(t,e)};function ls(t){var e=t.type,n=t.value;return"hex"===e?"#".concat(n):"literal"===e?n:"rgb"===e?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}new Ko(50,"%");var us=function(){var t={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function n(t){throw new Error("".concat(e,": ").concat(t))}function r(){var t=i();return e.length>0&&n("Invalid input not EOF"),t}function i(){return b(o)}function o(){return s("linear-gradient",t.linearGradient,c)||s("repeating-linear-gradient",t.repeatingLinearGradient,c)||s("radial-gradient",t.radialGradient,h)||s("repeating-radial-gradient",t.repeatingRadialGradient,h)||s("conic-gradient",t.conicGradient,h)}function s(e,r,i){return a(r,(function(r){var o=i();return o&&(P(t.comma)||n("Missing comma before color stops")),{type:e,orientation:o,colorStops:b(x)}}))}function a(e,r){var i=P(e);if(i){P(t.startCall)||n("Missing (");var o=r(i);return P(t.endCall)||n("Missing )"),o}}function c(){return l()||u()}function l(){return C("directional",t.sideOrCorner,1)}function u(){return C("angular",t.angleValue,1)}function h(){var n,r,i=d();return i&&(n=[],n.push(i),r=e,P(t.comma)&&(i=d(),i?n.push(i):e=r)),n}function d(){var t=f()||p();if(t)t.at=v();else{var e=g();if(e){t=e;var n=v();n&&(t.at=n)}else{var r=y();r&&(t={type:"default-radial",at:r})}}return t}function f(){var t=C("shape",/^(circle)/i,0);return t&&(t.style=A()||g()),t}function p(){var t=C("shape",/^(ellipse)/i,0);return t&&(t.style=N()||g()),t}function g(){return C("extent-keyword",t.extentKeywords,1)}function v(){if(C("position",/^at/,0)){var t=y();return t||n("Missing positioning value"),t}}function y(){var t=m();if(t.x||t.y)return{type:"position",value:t}}function m(){return{x:N(),y:N()}}function b(e){var r=e(),i=[];if(r){i.push(r);while(P(t.comma))r=e(),r?i.push(r):n("One extra comma")}return i}function x(){var t=w();return t||n("Expected color definition"),t.length=N(),t}function w(){return k()||M()||S()||E()}function E(){return C("literal",t.literalColor,0)}function k(){return C("hex",t.hexColor,1)}function S(){return a(t.rgbColor,(function(){return{type:"rgb",value:b(O)}}))}function M(){return a(t.rgbaColor,(function(){return{type:"rgba",value:b(O)}}))}function O(){return P(t.number)[1]}function N(){return C("%",t.percentageValue,1)||T()||A()}function T(){return C("position-keyword",t.positionKeywords,1)}function A(){return C("px",t.pixelValue,1)||C("em",t.emValue,1)}function C(t,e,n){var r=P(e);if(r)return{type:t,value:r[n]}}function P(t){var n=/^[\n\r\t\s]+/.exec(e);n&&R(n[0].length);var r=t.exec(e);return r&&R(r[0].length),r}function R(t){e=e.substring(t)}return function(t){return e=t,r()}}();function hs(t,e,n,r){var i=li(r.value),o=0,s=0,a=o+e/2,c=s+n/2,l=Math.abs(e*Math.cos(i))+Math.abs(n*Math.sin(i)),u=t[0]+a-Math.cos(i)*l/2,h=t[1]+c-Math.sin(i)*l/2,d=t[0]+a+Math.cos(i)*l/2,f=t[1]+c+Math.sin(i)*l/2;return{x1:u,y1:h,x2:d,y2:f}}function ds(t,e,n,r,i,o){var s=r.value,a=i.value;r.unit===Po.kPercentage&&(s=r.value/100*e),i.unit===Po.kPercentage&&(a=i.value/100*n);var c=Math.max(Ce([0,0],[s,a]),Ce([0,n],[s,a]),Ce([e,n],[s,a]),Ce([e,0],[s,a]));return o&&(o instanceof Ko?c=o.value:o instanceof Yo&&("closest-side"===o.value?c=Math.min(s,e-s,a,n-a):"farthest-side"===o.value?c=Math.max(s,e-s,a,n-a):"closest-corner"===o.value&&(c=Math.min(Ce([0,0],[s,a]),Ce([0,n],[s,a]),Ce([e,n],[s,a]),Ce([e,0],[s,a]))))),{x:s+t[0],y:a+t[1],r:c}}var fs=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,ps=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,gs=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,vs=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function ys(t){var e,n,r=t.length;(t[r-1].length=null!==(e=t[r-1].length)&&void 0!==e?e:{type:"%",value:"100"},r>1)&&(t[0].length=null!==(n=t[0].length)&&void 0!==n?n:{type:"%",value:"0"});for(var i=0,o=Number(t[0].length.value),s=1;s<r;s++){var a,c=null===(a=t[s].length)||void 0===a?void 0:a.value;if(!Pe(c)&&!Pe(o)){for(var l=1;l<s-i;l++)t[i+l].length={type:"%",value:"".concat(o+(Number(c)-o)*l/(s-i))};i=s,o=Number(c)}}}var ms={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},bs=Co((function(t){var e;return e="angular"===t.type?Number(t.value):ms[t.value]||0,cs(e,"deg")})),xs=Co((function(t){var e=50,n=50,r="%",i="%";if("position"===(null===t||void 0===t?void 0:t.type)){var o=t.value,s=o.x,a=o.y;"position-keyword"===(null===s||void 0===s?void 0:s.type)&&("left"===s.value?e=0:"center"===s.value?e=50:"right"===s.value?e=100:"top"===s.value?n=0:"bottom"===s.value&&(n=100)),"position-keyword"===(null===a||void 0===a?void 0:a.type)&&("left"===a.value?e=0:"center"===a.value?n=50:"right"===a.value?e=100:"top"===a.value?n=0:"bottom"===a.value&&(n=100)),"px"!==(null===s||void 0===s?void 0:s.type)&&"%"!==(null===s||void 0===s?void 0:s.type)&&"em"!==(null===s||void 0===s?void 0:s.type)||(r=null===s||void 0===s?void 0:s.type,e=Number(s.value)),"px"!==(null===a||void 0===a?void 0:a.type)&&"%"!==(null===a||void 0===a?void 0:a.type)&&"em"!==(null===a||void 0===a?void 0:a.type)||(i=null===a||void 0===a?void 0:a.type,n=Number(a.value))}return{cx:cs(e,r),cy:cs(n,i)}})),ws=Co((function(t){if(t.indexOf("linear")>-1||t.indexOf("radial")>-1){var e=us(t);return e.map((function(t){var e=t.type,n=t.orientation,r=t.colorStops;ys(r);var i=r.map((function(t){return{offset:cs(Number(t.length.value),"%"),color:ls(t)}}));if("linear-gradient"===e)return new $o(Ho.LinearGradient,{angle:n?bs(n):Jo,steps:i});if("radial-gradient"===e&&(n||(n=[{type:"shape",value:"circle"}]),"shape"===n[0].type&&"circle"===n[0].value)){var o,s=xs(n[0].at),a=s.cx,c=s.cy;if(n[0].style){var l=n[0].style,u=l.type,h=l.value;o="extent-keyword"===u?is(h):cs(h,u)}return new $o(Ho.RadialGradient,{cx:a,cy:c,size:o,steps:i})}}))}var n=t[0];if("("===t[1]||"("===t[2])if("l"===n){var r=fs.exec(t);if(r){var i,o=(null===(i=r[2].match(vs))||void 0===i?void 0:i.map((function(t){return t.split(":")})))||[];return[new $o(Ho.LinearGradient,{angle:cs(parseFloat(r[1]),"deg"),steps:o.map((function(t){var e=C(t,2),n=e[0],r=e[1];return{offset:cs(100*Number(n),"%"),color:r}}))})]}}else if("r"===n){var s=Es(t);if(s){if(!Re(s))return[new $o(Ho.RadialGradient,s)];t=s}}else if("p"===n)return ks(t)}));function Es(t){var e=ps.exec(t);if(e){var n,r=(null===(n=e[4].match(vs))||void 0===n?void 0:n.map((function(t){return t.split(":")})))||[];return{cx:cs(50,"%"),cy:cs(50,"%"),steps:r.map((function(t){var e=C(t,2),n=e[0],r=e[1];return{offset:cs(100*Number(n),"%"),color:r}}))}}return null}function ks(t){var e=gs.exec(t);if(e){var n=e[1],r=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function Ss(t){return t&&!!t.image}function Ms(t){return t&&!Pe(t.r)&&!Pe(t.g)&&!Pe(t.b)}var Os=Co((function(t){if(Ss(t))return u({repetition:"repeat"},t);if(Pe(t)&&(t=""),"transparent"===t)return ss;if("currentColor"===t)t="black";else if("none"===t)return os;var e=ws(t);if(e)return e;var n=uo(t),r=[0,0,0,0];return null!==n&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),as.apply(void 0,r)}));function Ns(t,e){if(Ms(t)&&Ms(e))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var e=t.slice();if(e[3])for(var n=0;n<3;n++)e[n]=Math.round(Le(e[n],0,255));return e[3]=Le(e[3],0,1),"rgba(".concat(e.join(","),")")}]}function Ts(t,e){if(Pe(e))return cs(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(t)>=0)return cs(Number(e),"px");if("deg".search(t)>=0)return cs(Number(e),"deg")}var n=[];e=e.replace(t,(function(t){return n.push(t),"U".concat(t)}));var r="U(".concat(t.source,")");return n.map((function(t){return cs(Number(e.replace(new RegExp("U".concat(t),"g"),"").replace(new RegExp(r,"g"),"*0")),t)}))[0]}var As=function(t){return Ts(new RegExp("px","g"),t)},Cs=Co(As),Ps=function(t){return Ts(new RegExp("%","g"),t)};Co(Ps);var Rs=function(t){return Ae(t)||isFinite(Number(t))?cs(Number(t)||0,"px"):Ts(new RegExp("px|%|em|rem","g"),t)},_s=Co(Rs),Ls=function(t){return Ts(new RegExp("deg|rad|grad|turn","g"),t)},Ds=Co(Ls);function Is(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o="",s=t.value||0,a=e.value||0,c=Xo(t.unit),l=t.convertTo(c),u=e.convertTo(c);return l&&u?(s=l.value,a=u.value,o=Vo(t.unit)):(Ko.isLength(t.unit)||Ko.isLength(e.unit))&&(s=Bs(t,i,n),a=Bs(e,i,n),o="px"),[s,a,function(t){return r&&(t=Math.max(t,0)),t+o}]}function js(t){var e=0;return t.unit===Po.kDegrees?e=t.value:t.unit===Po.kRadians?e=hi(Number(t.value)):t.unit===Po.kTurns?e=di(Number(t.value)):t.value&&(e=t.value),e}function Fs(t,e){var n;return Array.isArray(t)?n=t.map((function(t){return Number(t)})):Re(t)?n=t.split(" ").map((function(t){return Number(t)})):Ae(t)&&(n=[t]),2===e?1===n.length?[n[0],n[0]]:[n[0],n[1]]:4===e?1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:"even"===e&&n.length%2===1?[].concat(b(n),b(n)):n}function Bs(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.unit===Po.kPixels)return Number(t.value);if(t.unit===Po.kPercentage&&n){var i=n.nodeName===zr.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[e]:0)+t.value/100*i.halfExtents[e]*2}return 0}var zs=function(t){return Ts(/deg|rad|grad|turn|px|%/g,t)},Gs=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function Vs(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t=t.toLowerCase().trim(),"none"===t)return[];var e,n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;while(e=n.exec(t)){if(e.index!==i)return[];if(i=e.index+e[0].length,Gs.indexOf(e[1])>-1&&r.push({name:e[1],params:e[2].split(" ").map((function(t){return zs(t)||Os(t)}))}),n.lastIndex===t.length)return r}return[]}function Ws(t){return t.toString()}var Us=function(t){return"number"===typeof t?cs(t):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?cs(Number(t)):cs(0)},Hs=Co(Us);function $s(t,e){return[t,e,Ws]}function Ys(t,e){return function(n,r){return[n,r,function(n){return Ws(Le(n,t,e))}]}}function qs(t,e){if(t.length===e.length)return[t,e,function(t){return t}]}function Xs(t){return 0===t.parsedStyle.d.totalLength&&(t.parsedStyle.d.totalLength=En(t.parsedStyle.d.absolutePath)),t.parsedStyle.d.totalLength}function Ks(t){return 0===t.parsedStyle.points.totalLength&&(t.parsedStyle.points.totalLength=Or(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength}function Zs(t){for(var e=0;e<t.length;e++){var n=t[e-1],r=t[e],i=r[0];if("M"===i&&n){var o=n[0],s=[r[1],r[2]],a=void 0;"L"===o||"M"===o?a=[n[1],n[2]]:"C"!==o&&"A"!==o&&"Q"!==o||(a=[n[n.length-2],n[n.length-1]]),a&&ta(s,a)&&(t.splice(e,1),e--)}}}function Js(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r],o=i[0];if("C"===o||"A"===o||"Q"===o){e=!0;break}}return e}function Qs(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var o=t[i],s=o[0];"M"===s?(r.length&&(n.push(r),r=[]),r.push([o[1],o[2]])):"Z"===s?r.length&&(e.push(r),r=[]):r.push([o[1],o[2]])}return r.length>0&&n.push(r),{polygons:e,polylines:n}}function ta(t,e){return t[0]===e[0]&&t[1]===e[1]}function ea(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var s=t[o],a=s.currentPoint,c=s.params,l=s.prePoint,u=void 0;switch(s.command){case"Q":u=Ar(l[0],l[1],c[1],c[2],c[3],c[4]);break;case"C":u=Er(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6]);break;case"A":var h=s.arcParams;u=pr(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:n.push(a[0]),r.push(a[1]);break}u&&(s.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),e&&("L"===s.command||"M"===s.command)&&s.prePoint&&s.nextPoint&&i.push(s)}n=n.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0})),r=r.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}));var d=Sn(n),f=Sn(r),p=Mn(n),g=Mn(r);if(0===i.length)return{x:d,y:f,width:p-d,height:g-f};for(var v=0;v<i.length;v++){var y=i[v],m=y.currentPoint,b=void 0;m[0]===d?(b=na(y,e),d-=b.xExtra):m[0]===p&&(b=na(y,e),p+=b.xExtra),m[1]===f?(b=na(y,e),f-=b.yExtra):m[1]===g&&(b=na(y,e),g+=b.yExtra)}return{x:d,y:f,width:p-d,height:g-f}}function na(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),a=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),c=Math.acos((o+s-a)/(2*Math.sqrt(o)*Math.sqrt(s)));if(!c||0===Math.sin(c)||Nn(c,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));l=l>Math.PI/2?Math.PI-l:l,u=u>Math.PI/2?Math.PI-u:u;var h={xExtra:Math.cos(c/2-l)*(e/2*(1/Math.sin(c/2)))-e/2||0,yExtra:Math.cos(u-c/2)*(e/2*(1/Math.sin(c/2)))-e/2||0};return h}function ra(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}Co((function(t){return Re(t)?t.split(" ").map(Hs):t.map(Hs)}));var ia=function(t,e){var n=t.x*e.x+t.y*e.y,r=Math.sqrt((Math.pow(t.x,2)+Math.pow(t.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2))),i=t.x*e.y-t.y*e.x<0?-1:1,o=i*Math.acos(n/r);return o},oa=function(t,e,n,r,i,o,s,a){e=Math.abs(e),n=Math.abs(n),r=An(r,360);var c=li(r);if(t.x===s.x&&t.y===s.y)return{x:t.x,y:t.y,ellipticalArcAngle:0};if(0===e||0===n)return{x:0,y:0,ellipticalArcAngle:0};var l=(t.x-s.x)/2,u=(t.y-s.y)/2,h={x:Math.cos(c)*l+Math.sin(c)*u,y:-Math.sin(c)*l+Math.cos(c)*u},d=Math.pow(h.x,2)/Math.pow(e,2)+Math.pow(h.y,2)/Math.pow(n,2);d>1&&(e*=Math.sqrt(d),n*=Math.sqrt(d));var f=Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(h.y,2)-Math.pow(n,2)*Math.pow(h.x,2),p=Math.pow(e,2)*Math.pow(h.y,2)+Math.pow(n,2)*Math.pow(h.x,2),g=f/p;g=g<0?0:g;var v=(i!==o?1:-1)*Math.sqrt(g),y={x:v*(e*h.y/n),y:v*(-n*h.x/e)},m={x:Math.cos(c)*y.x-Math.sin(c)*y.y+(t.x+s.x)/2,y:Math.sin(c)*y.x+Math.cos(c)*y.y+(t.y+s.y)/2},b={x:(h.x-y.x)/e,y:(h.y-y.y)/n},x=ia({x:1,y:0},b),w={x:(-h.x-y.x)/e,y:(-h.y-y.y)/n},E=ia(b,w);!o&&E>0?E-=2*Math.PI:o&&E<0&&(E+=2*Math.PI),E%=2*Math.PI;var k=x+E*a,S=e*Math.cos(k),M=n*Math.sin(k),O={x:Math.cos(c)*S-Math.sin(c)*M+m.x,y:Math.sin(c)*S+Math.cos(c)*M+m.y,ellipticalArcStartAngle:x,ellipticalArcEndAngle:x+E,ellipticalArcAngle:k,ellipticalArcCenter:m,resultantRx:e,resultantRy:n};return O};function sa(t){for(var e=[],n=null,r=null,i=null,o=0,s=t.length,a=0;a<s;a++){var c=t[a];r=t[a+1];var l=c[0],u={command:l,prePoint:n,params:c,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case"M":i=[c[1],c[2]],o=a;break;case"A":var h=ha(n,c);u.arcParams=h;break}if("Z"===l)n=i,r=t[o+1];else{var d=c.length;n=[c[d-2],c[d-1]]}r&&"Z"===r[0]&&(r=t[o],e[o]&&(e[o].prePoint=n)),u.currentPoint=n,e[o]&&ta(n,e[o].currentPoint)&&(e[o].prePoint=u.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=f;var p=u.prePoint;if(["L","H","V"].includes(l))u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===l){var g=[c[1],c[2]];u.startTangent=[p[0]-g[0],p[1]-g[1]],u.endTangent=[n[0]-g[0],n[1]-g[1]]}else if("T"===l){var v=e[a-1],y=ra(v.currentPoint,p);"Q"===v.command?(u.command="Q",u.startTangent=[p[0]-y[0],p[1]-y[1]],u.endTangent=[n[0]-y[0],n[1]-y[1]]):(u.command="TL",u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]])}else if("C"===l){var m=[c[1],c[2]],b=[c[3],c[4]];u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]],0===u.startTangent[0]&&0===u.startTangent[1]&&(u.startTangent=[m[0]-b[0],m[1]-b[1]]),0===u.endTangent[0]&&0===u.endTangent[1]&&(u.endTangent=[b[0]-m[0],b[1]-m[1]])}else if("S"===l){var x=e[a-1],w=ra(x.currentPoint,p),E=[c[1],c[2]];"C"===x.command?(u.command="C",u.startTangent=[p[0]-w[0],p[1]-w[1]],u.endTangent=[n[0]-E[0],n[1]-E[1]]):(u.command="SQ",u.startTangent=[p[0]-E[0],p[1]-E[1]],u.endTangent=[n[0]-E[0],n[1]-E[1]])}else if("A"===l){var k=aa(u,0),S=k.x,M=k.y,O=aa(u,1,!1),N=O.x,T=O.y;u.startTangent=[S,M],u.endTangent=[N,T]}e.push(u)}return e}function aa(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.arcParams,i=r.rx,o=void 0===i?0:i,s=r.ry,a=void 0===s?0:s,c=r.xRotation,l=r.arcFlag,u=r.sweepFlag,h=oa({x:t.prePoint[0],y:t.prePoint[1]},o,a,c,!!l,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},e),d=oa({x:t.prePoint[0],y:t.prePoint[1]},o,a,c,!!l,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},n?e+.005:e-.005),f=d.x-h.x,p=d.y-h.y,g=Math.sqrt(f*f+p*p);return{x:-f/g,y:-p/g}}function ca(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function la(t,e){return ca(t)*ca(e)?(t[0]*e[0]+t[1]*e[1])/(ca(t)*ca(e)):1}function ua(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(la(t,e))}function ha(t,e){var n=e[1],r=e[2],i=An(li(e[3]),2*Math.PI),o=e[4],s=e[5],a=t[0],c=t[1],l=e[6],u=e[7],h=Math.cos(i)*(a-l)/2+Math.sin(i)*(c-u)/2,d=-1*Math.sin(i)*(a-l)/2+Math.cos(i)*(c-u)/2,f=h*h/(n*n)+d*d/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(d*d)+r*r*(h*h),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===s&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*n*d/r:0,y=n?g*-r*h/n:0,m=(a+l)/2+Math.cos(i)*v-Math.sin(i)*y,b=(c+u)/2+Math.sin(i)*v+Math.cos(i)*y,x=[(h-v)/n,(d-y)/r],w=[(-1*h-v)/n,(-1*d-y)/r],E=ua([1,0],x),k=ua(x,w);return la(x,w)<=-1&&(k=Math.PI),la(x,w)>=1&&(k=0),0===s&&k>0&&(k-=2*Math.PI),1===s&&k<0&&(k+=2*Math.PI),{cx:m,cy:b,rx:ta(t,[l,u])?0:n,ry:ta(t,[l,u])?0:r,startAngle:E,endAngle:E+k,xRotation:i,arcFlag:o,sweepFlag:s}}var da=function(t){if(""===t||Array.isArray(t)&&0===t.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=hn(t)}catch(d){e=hn(""),console.error("[g]: Invalid SVG Path definition: ".concat(t))}Zs(e);var n=Js(e),r=Qs(e),i=r.polygons,o=r.polylines,s=sa(e),a=ea(s,0),c=a.x,l=a.y,u=a.width,h=a.height;return{absolutePath:e,hasArc:n,segments:s,polygons:i,polylines:o,totalLength:0,rect:{x:Number.isFinite(c)?c:0,y:Number.isFinite(l)?l:0,width:Number.isFinite(u)?u:0,height:Number.isFinite(h)?h:0}}},fa=Co(da);function pa(t){return Re(t)?fa(t):da(t)}function ga(t,e,n){var r=t.curve,i=e.curve;r&&0!==r.length||(r=jn(t.absolutePath,!1),t.curve=r),i&&0!==i.length||(i=jn(e.absolutePath,!1),e.curve=i);var o=[r,i];r.length!==i.length&&(o=Gn(r,i));var s=Un(o[0])!==Un(o[1])?Hn(o[0]):$n(o[0]);return[s,qn(o[1],s),function(t){return t}]}function va(t,e){var n;return n=Re(t)?t.split(" ").map((function(t){var e=t.split(","),n=C(e,2),r=n[0],i=n[1];return[Number(r),Number(i)]})):t,{points:n,totalLength:0,segments:[]}}function ya(t,e){return[t.points,e.points,function(t){return t}]}var ma=null,ba=/\s*(\w+)\(([^)]*)\)/g;function xa(t){return function(e){var n=0;return t.map((function(t){return t===ma?e[n++]:t}))}}function wa(t){return t}var Ea={matrix:["NNNNNN",[ma,ma,0,0,ma,ma,0,0,0,0,1,0,ma,ma,0,1],wa],matrix3d:["NNNNNNNNNNNNNNNN",wa],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",xa([ma,ma,new Ko(1)]),wa],scaleX:["N",xa([ma,new Ko(1),new Ko(1)]),xa([ma,new Ko(1)])],scaleY:["N",xa([new Ko(1),ma,new Ko(1)]),xa([new Ko(1),ma])],scaleZ:["N",xa([new Ko(1),new Ko(1),ma])],scale3d:["NNN",wa],skew:["Aa",null,wa],skewX:["A",null,xa([ma,Jo])],skewY:["A",null,xa([Jo,ma])],translate:["Tt",xa([ma,ma,Zo]),wa],translateX:["T",xa([ma,Zo,Zo]),xa([ma,Zo])],translateY:["T",xa([Zo,ma,Zo]),xa([Zo,ma])],translateZ:["L",xa([Zo,Zo,ma])],translate3d:["TTL",wa]};function ka(t){for(var e=[],n=t.length,r=0;r<n;r++){var i=t[r],o=i[0],s=i.slice(1);"translate"===o||"skew"===o?1===s.length&&s.push(0):"scale"===o&&1===s.length&&s.push(s[0]);var a=Ea[o];if(!a)return[];var c=s.map((function(t){return cs(t)}));e.push({t:o,d:c})}return e}function Sa(t){if(Array.isArray(t))return ka(t);if(t=(t||"none").trim(),"none"===t)return[];var e,n=[],r=0;ba.lastIndex=0;while(e=ba.exec(t)){if(e.index!==r)return[];r=e.index+e[0].length;var i=e[1],o=Ea[i];if(!o)return[];var s=e[2].split(","),a=o[0];if(a.length<s.length)return[];for(var c=[],l=0;l<a.length;l++){var u=s[l],h=a[l],d=void 0;if(d=u?{A:function(t){return"0"===t.trim()?Jo:Ds(t)},N:Hs,T:_s,L:Cs}[h.toUpperCase()](u):{a:Jo,n:c[0],t:Zo}[h],void 0===d)return[];c.push(d)}if(n.push({t:i,d:c}),ba.lastIndex===t.length)return n}return[]}function Ma(t){if(Array.isArray(t))return ka(t);if(t=(t||"none").trim(),"none"===t)return[];var e,n=[],r=0;ba.lastIndex=0;while(e=ba.exec(t)){if(e.index!==r)return[];r=e.index+e[0].length;var i=e[1],o=Ea[i];if(!o)return[];var s=e[2].split(","),a=o[0];if(a.length<s.length)return[];for(var c=[],l=0;l<a.length;l++){var u=s[l],h=a[l],d=void 0;if(d=u?{A:function(t){return"0"===t.trim()?Jo:Ls(t)},N:Us,T:Rs,L:As}[h.toUpperCase()](u):{a:Jo,n:c[0],t:Zo}[h],void 0===d)return[];c.push(d)}if(n.push({t:i,d:c}),ba.lastIndex===t.length)return n}return[]}function Oa(t){var e,n,r,i;switch(t.t){case"rotateX":return i=li(js(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=li(js(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=li(js(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=li(js(t.d[3]));var o=e*e+n*n+r*r;if(0===o)e=1,n=0,r=0;else if(1!==o){var s=Math.sqrt(o);e/=s,n/=s,r/=s}var a=Math.sin(i/2),c=a*Math.cos(i/2),l=a*a;return[1-2*(n*n+r*r)*l,2*(e*n*l+r*c),2*(e*r*l-n*c),0,2*(e*n*l-r*c),1-2*(e*e+r*r)*l,2*(n*r*l+e*c),0,2*(e*r*l+n*c),2*(n*r*l-e*c),1-2*(e*e+n*n)*l,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var u=li(js(t.d[0])),h=li(js(t.d[1]));return[1,Math.tan(h),0,0,Math.tan(u),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=li(js(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=li(js(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=Bs(t.d[0],0,null)||0,n=Bs(t.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,0,1];case"translateX":return e=Bs(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translateY":return n=Bs(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translateZ":return r=Bs(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return e=Bs(t.d[0],0,null)||0,n=Bs(t.d[1],0,null)||0,r=Bs(t.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,r,1];case"perspective":var d=Bs(t.d[0],0,null)||0,f=d?-1/d:0;return[1,0,0,0,0,1,0,0,0,0,1,f,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map((function(t){return t.value}))}}function Na(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function Ta(t){return 0===t.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(Oa).reduce(Na)}function Aa(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],o=[0,0,0,1];return Mi(Ta(t),e,n,r,i,o),[[e,n,r,o,i]]}var Ca=function(){function t(t,e){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var o=0;o<4;o++)n[r][i]+=e[r][o]*t[o][i];return n}function e(t){return 0===t[0][2]&&0===t[0][3]&&0===t[1][2]&&0===t[1][3]&&0===t[2][0]&&0===t[2][1]&&1===t[2][2]&&0===t[2][3]&&0===t[3][2]&&1===t[3][3]}function n(n,r,i,o,s){for(var a=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],c=0;c<4;c++)a[c][3]=s[c];for(var l=0;l<3;l++)for(var u=0;u<3;u++)a[3][l]+=n[u]*a[u][l];var h=o[0],d=o[1],f=o[2],p=o[3],g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];g[0][0]=1-2*(d*d+f*f),g[0][1]=2*(h*d-f*p),g[0][2]=2*(h*f+d*p),g[1][0]=2*(h*d+f*p),g[1][1]=1-2*(h*h+f*f),g[1][2]=2*(d*f-h*p),g[2][0]=2*(h*f-d*p),g[2][1]=2*(d*f+h*p),g[2][2]=1-2*(h*h+d*d),a=t(a,g);var v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];i[2]&&(v[2][1]=i[2],a=t(a,v)),i[1]&&(v[2][1]=0,v[2][0]=i[0],a=t(a,v)),i[0]&&(v[2][0]=0,v[1][0]=i[0],a=t(a,v));for(var y=0;y<3;y++)for(var m=0;m<3;m++)a[y][m]*=r[y];return e(a)?[a[0][0],a[0][1],a[1][0],a[1][1],a[3][0],a[3][1]]:a[0].concat(a[1],a[2],a[3])}return n}();function Pa(t){return t.toFixed(6).replace(".000000","")}function Ra(t,e){var n,r;return t.decompositionPair!==e&&(t.decompositionPair=e,n=Aa(t)),e.decompositionPair!==t&&(e.decompositionPair=t,r=Aa(e)),null===n[0]||null===r[0]?[[!1],[!0],function(n){return n?e[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(t){var e=La(n[0][3],r[0][3],t[5]),i=Ca(t[0],t[1],t[2],e,t[4]),o=i.map(Pa).join(",");return o}])}function _a(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}function La(t,e,n){var r=_a(t,e);r=Le(r,-1,1);var i=[];if(1===r)i=t;else for(var o=Math.acos(r),s=1*Math.sin(n*o)/Math.sqrt(1-r*r),a=0;a<4;a++)i.push(t[a]*(Math.cos(n*o)-r*s)+e[a]*s);return i}function Da(t){return t.replace(/[XY]/,"")}function Ia(t){return t.replace(/(X|Y|Z|3d)?$/,"3d")}var ja=function(t,e){return"perspective"===t&&"perspective"===e||("matrix"===t||"matrix3d"===t)&&("matrix"===e||"matrix3d"===e)};function Fa(t,e,n){var r=!1;if(!t.length||!e.length){t.length||(r=!0,t=e,e=[]);for(var i=function(){var n=t[o],r=n.t,i=n.d,s="scale"===r.substring(0,5)?1:0;e.push({t:r,d:i.map((function(t){return"number"===typeof t?cs(s):cs(s,t.unit)}))})},o=0;o<t.length;o++)i()}var s=[],a=[],c=[];if(t.length!==e.length){var l=Ra(t,e);s=[l[0]],a=[l[1]],c=[["matrix",[l[2]]]]}else for(var u=0;u<t.length;u++){var h=t[u].t,d=e[u].t,f=t[u].d,p=e[u].d,g=Ea[h],v=Ea[d],y=void 0;if(ja(h,d)){var m=Ra([t[u]],[e[u]]);s.push(m[0]),a.push(m[1]),c.push(["matrix",[m[2]]])}else{if(h===d)y=h;else if(g[2]&&v[2]&&Da(h)===Da(d))y=Da(h),f=g[2](f),p=v[2](p);else{if(!g[1]||!v[1]||Ia(h)!==Ia(d)){var b=Ra(t,e);s=[b[0]],a=[b[1]],c=[["matrix",[b[2]]]];break}y=Ia(h),f=g[1](f),p=v[1](p)}for(var x=[],w=[],E=[],k=0;k<f.length;k++){var S=Is(f[k],p[k],n,!1,k);x[k]=S[0],w[k]=S[1],E.push(S[2])}s.push(x),a.push(w),c.push([y,E])}}if(r){var M=s;s=a,a=M}return[s,a,function(t){return t.map((function(t,e){var n=t.map((function(t,n){return c[e][1][n](t)})).join(",");return"matrix"===c[e][0]&&16===n.split(",").length&&(c[e][0]="matrix3d"),"matrix3d"===c[e][0]&&6===n.split(",").length&&(c[e][0]="matrix"),"".concat(c[e][0],"(").concat(n,")")})).join(" ")}]}var Ba=Co((function(t){if(Re(t)){if("text-anchor"===t)return[cs(0,"px"),cs(0,"px")];var e=t.split(" ");return 1===e.length&&("top"===e[0]||"bottom"===e[0]?(e[1]=e[0],e[0]="center"):e[1]="center"),2!==e.length?null:[_s(za(e[0])),_s(za(e[1]))]}return[cs(t[0]||0,"px"),cs(t[1]||0,"px")]}));function za(t){return"center"===t?"50%":"left"===t||"top"===t?"0%":"right"===t||"bottom"===t?"100%":t}var Ga=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:Wi.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:Wi.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:Wi.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:Wi.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:Wi.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:Wi.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:Wi.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:Wi.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:Wi.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:Wi.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:Wi.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:Wi.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:Wi.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:Wi.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:Wi.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:Wi.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:Wi.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:Wi.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:Wi.FILTER},{n:"clipPath",syntax:Wi.DEFINED_PATH},{n:"textPath",syntax:Wi.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:Wi.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:Wi.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:Wi.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:Wi.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:Wi.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:Wi.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:Wi.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:Wi.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:Wi.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:Wi.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:Wi.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:Wi.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Wi.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Wi.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:Wi.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:Wi.COORDINATE},{n:"y1",int:!0,l:!0,syntax:Wi.COORDINATE},{n:"z1",int:!0,l:!0,syntax:Wi.COORDINATE},{n:"x2",int:!0,l:!0,syntax:Wi.COORDINATE},{n:"y2",int:!0,l:!0,syntax:Wi.COORDINATE},{n:"z2",int:!0,l:!0,syntax:Wi.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:Wi.PATH,p:50},{n:"points",int:!0,l:!0,syntax:Wi.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:Wi.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:Wi.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:Wi.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:Wi.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:Wi.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:Wi.NUMBER,d:function(t){return t===zr.PATH||t===zr.POLYGON||t===zr.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:Wi.MARKER},{n:"markerEnd",syntax:Wi.MARKER},{n:"markerMid",syntax:Wi.MARKER},{n:"markerStartOffset",syntax:Wi.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:Wi.LENGTH,l:!0,int:!0,d:"0"}],Va=new Set(Ga.filter((function(t){return!!t.l})).map((function(t){return t.n}))),Wa={},Ua=function(){function t(e){var n=this;h(this,t),this.runtime=e,Ga.forEach((function(t){n.registerMetadata(t)}))}return f(t,[{key:"registerMetadata",value:function(t){[t.n].concat(b(t.a||[])).forEach((function(e){Wa[e]=t}))}},{key:"getPropertySyntax",value:function(t){return this.runtime.CSSPropertySyntaxFactory[t]}},{key:"processProperties",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(t.attributes,e);var r=t.parsedStyle.clipPath,i=t.parsedStyle.offsetPath;Ha(t,e);var o=!!n.forceUpdateGeometry;if(!o)for(var s in e)if(Va.has(s)){o=!0;break}var a=$a(t);a.has("fill")&&e.fill&&(t.parsedStyle.fill=Os(e.fill)),a.has("stroke")&&e.stroke&&(t.parsedStyle.stroke=Os(e.stroke)),a.has("shadowColor")&&e.shadowColor&&(t.parsedStyle.shadowColor=Os(e.shadowColor)),a.has("filter")&&e.filter&&(t.parsedStyle.filter=Vs(e.filter)),a.has("radius")&&!Pe(e.radius)&&(t.parsedStyle.radius=Fs(e.radius,4)),a.has("lineDash")&&!Pe(e.lineDash)&&(t.parsedStyle.lineDash=Fs(e.lineDash,"even")),a.has("points")&&e.points&&(t.parsedStyle.points=va(e.points)),a.has("d")&&""===e.d&&(t.parsedStyle.d=u({},Vi)),a.has("d")&&e.d&&(t.parsedStyle.d=pa(e.d)),a.has("textTransform")&&e.textTransform&&this.runtime.CSSPropertySyntaxFactory[Wi.TEXT_TRANSFORM].calculator(null,null,{value:e.textTransform},t,null),a.has("clipPath")&&!Kn(e.clipPath)&&this.runtime.CSSPropertySyntaxFactory[Wi.DEFINED_PATH].calculator("clipPath",r,e.clipPath,t,this.runtime),a.has("offsetPath")&&e.offsetPath&&this.runtime.CSSPropertySyntaxFactory[Wi.DEFINED_PATH].calculator("offsetPath",i,e.offsetPath,t,this.runtime),a.has("transform")&&e.transform&&(t.parsedStyle.transform=Sa(e.transform)),a.has("transformOrigin")&&e.transformOrigin&&(t.parsedStyle.transformOrigin=Ba(e.transformOrigin)),a.has("markerStart")&&e.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[Wi.MARKER].calculator(null,e.markerStart,e.markerStart,null,null)),a.has("markerEnd")&&e.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[Wi.MARKER].calculator(null,e.markerEnd,e.markerEnd,null,null)),a.has("markerMid")&&e.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[Wi.MARKER].calculator("",e.markerMid,e.markerMid,null,null)),a.has("zIndex")&&!Pe(e.zIndex)&&this.runtime.CSSPropertySyntaxFactory[Wi.Z_INDEX].postProcessor(t),a.has("offsetDistance")&&!Pe(e.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[Wi.OFFSET_DISTANCE].postProcessor(t),a.has("transform")&&e.transform&&this.runtime.CSSPropertySyntaxFactory[Wi.TRANSFORM].postProcessor(t),a.has("transformOrigin")&&e.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[Wi.TRANSFORM_ORIGIN].postProcessor(t),o&&(t.geometry.dirty=!0,t.dirty(!0,!0),n.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(t))}},{key:"updateGeometry",value:function(t){var e=t.nodeName,n=this.runtime.geometryUpdaterFactory[e];if(n){var r=t.geometry;r.contentBounds||(r.contentBounds=new Kr),r.renderBounds||(r.renderBounds=new Kr);var i=t.parsedStyle,o=n.update(i,t),s=o.cx,a=void 0===s?0:s,c=o.cy,l=void 0===c?0:c,u=o.cz,h=void 0===u?0:u,d=o.hwidth,f=void 0===d?0:d,p=o.hheight,g=void 0===p?0:p,v=o.hdepth,y=void 0===v?0:v,m=[Math.abs(f),Math.abs(g),y],b=i.stroke,x=i.lineWidth,w=void 0===x?1:x,E=i.increasedLineWidthForHitTesting,k=void 0===E?0:E,S=i.shadowType,M=void 0===S?"outer":S,O=i.shadowColor,N=i.filter,T=void 0===N?[]:N,A=i.transformOrigin,C=[a,l,h];r.contentBounds.update(C,m);var P=e===zr.POLYLINE||e===zr.POLYGON||e===zr.PATH?Math.SQRT2:.5,R=b&&!b.isNone;if(R){var _=((w||0)+(k||0))*P;m[0]+=_,m[1]+=_}if(r.renderBounds.update(C,m),O&&M&&"inner"!==M){var L=r.renderBounds,D=L.min,I=L.max,j=i.shadowBlur,F=i.shadowOffsetX,B=i.shadowOffsetY,z=j||0,V=F||0,W=B||0,U=D[0]-z+V,H=I[0]+z+V,$=D[1]-z+W,Y=I[1]+z+W;D[0]=Math.min(D[0],U),I[0]=Math.max(I[0],H),D[1]=Math.min(D[1],$),I[1]=Math.max(I[1],Y),r.renderBounds.setMinMax(D,I)}T.forEach((function(t){var e=t.name,n=t.params;if("blur"===e){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,G(r.renderBounds.halfExtents,r.renderBounds.halfExtents,[i,i,0]))}else if("drop-shadow"===e){var o=n[0].value,s=n[1].value,a=n[2].value,c=r.renderBounds,l=c.min,u=c.max,h=l[0]-a+o,d=u[0]+a+o,f=l[1]-a+s,p=u[1]+a+s;l[0]=Math.min(l[0],h),u[0]=Math.max(u[0],d),l[1]=Math.min(l[1],f),u[1]=Math.max(u[1],p),r.renderBounds.setMinMax(l,u)}})),t.geometry.dirty=!1;var q=f<0,X=g<0,K=(q?-1:1)*(A?Bs(A[0],0,t,!0):0),Z=(X?-1:1)*(A?Bs(A[1],1,t,!0):0);(K||Z)&&t.setOrigin(K,Z)}}},{key:"updateSizeAttenuation",value:function(t,e){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/e,t.nodeName===zr.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/e)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===zr.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))}}])}();function Ha(t,e){var n=$a(t);for(var r in e)n.has(r)&&(t.parsedStyle[r]=e[r])}function $a(t){return t.constructor.PARSED_STYLE_LIST}var Ya=function(){function t(){h(this,t),this.mixer=$s}return f(t,[{key:"calculator",value:function(t,e,n,r){return js(n)}}])}(),qa=function(){function t(){h(this,t)}return f(t,[{key:"calculator",value:function(t,e,n,r,i){return n instanceof Yo&&(n=null),i.sceneGraphService.updateDisplayObjectDependency(t,e,n,r),"clipPath"===t&&r.forEach((function(t){0===t.childNodes.length&&i.sceneGraphService.dirtyToRoot(t)})),n}}])}(),Xa=function(){function t(){h(this,t),this.parser=Os,this.mixer=Ns}return f(t,[{key:"calculator",value:function(t,e,n,r){return n instanceof Yo?"none"===n.value?os:ss:n}}])}(),Ka=function(){function t(){h(this,t)}return f(t,[{key:"calculator",value:function(t,e,n){return n instanceof Yo?[]:n}}])}();function Za(t){var e=t.parsedStyle,n=e.fontSize;return Pe(n)?null:n}var Ja=function(){function t(){h(this,t),this.mixer=$s}return f(t,[{key:"calculator",value:function(t,e,n,r,i){if(Ae(n))return n;if(!Ko.isRelativeUnit(n.unit))return n.value;if(n.unit===Po.kPercentage)return 0;if(n.unit===Po.kEms){if(r.parentNode){var o=Za(r.parentNode);if(o)return o*=n.value,o}return 0}if(n.unit===Po.kRems){var s;if(null!==r&&void 0!==r&&null!==(s=r.ownerDocument)&&void 0!==s&&s.documentElement){var a=Za(r.ownerDocument.documentElement);if(a)return a*=n.value,a}return 0}}}])}(),Qa=function(){function t(){h(this,t),this.mixer=qs}return f(t,[{key:"calculator",value:function(t,e,n){return n.map((function(t){return t.value}))}}])}(),tc=function(){function t(){h(this,t),this.mixer=qs}return f(t,[{key:"calculator",value:function(t,e,n){return n.map((function(t){return t.value}))}}])}(),ec=function(){function t(){h(this,t)}return f(t,[{key:"calculator",value:function(t,e,n,r){var i;n instanceof Yo&&(n=null);var o=null===(i=n)||void 0===i?void 0:i.cloneNode(!0);return o&&(o.style.isMarker=!0),o}}])}(),nc=function(){function t(){h(this,t),this.mixer=$s}return f(t,[{key:"calculator",value:function(t,e,n){return n.value}}])}(),rc=function(){function t(){h(this,t),this.mixer=Ys(0,1)}return f(t,[{key:"calculator",value:function(t,e,n){return n.value}},{key:"postProcessor",value:function(t){var e=t.parsedStyle,n=e.offsetPath,r=e.offsetDistance;if(n){var i=n.nodeName;if(i===zr.LINE||i===zr.PATH||i===zr.POLYLINE){var o=n.getPoint(r);o&&t.setLocalPosition(o.x,o.y)}}}}])}(),ic=function(){function t(){h(this,t),this.mixer=Ys(0,1)}return f(t,[{key:"calculator",value:function(t,e,n){return n.value}}])}(),oc=function(){function t(){h(this,t),this.parser=pa,this.mixer=ga}return f(t,[{key:"calculator",value:function(t,e,n){return n instanceof Yo&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new ei(0,0,0,0)}:n}}])}(),sc=f((function t(){h(this,t),this.mixer=ya})),ac=function(t){function e(){var t;h(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=S(this,e,[].concat(r)),t.mixer=Ys(0,1/0),t}return O(e,t),f(e)}(Ja),cc=function(){function t(){h(this,t)}return f(t,[{key:"calculator",value:function(t,e,n,r){return n instanceof Yo?"unset"===n.value?"":n.value:"".concat(n)}},{key:"postProcessor",value:function(t){t.nodeValue="".concat(t.parsedStyle.text)||""}}])}(),lc=function(){function t(){h(this,t)}return f(t,[{key:"calculator",value:function(t,e,n,r){var i=r.getAttribute("text");if(i){var o=i;"capitalize"===n.value?o=i.charAt(0).toUpperCase()+i.slice(1):"lowercase"===n.value?o=i.toLowerCase():"uppercase"===n.value&&(o=i.toUpperCase()),r.parsedStyle.text=o}return n.value}}])}(),uc=new WeakMap;function hc(t,e,n){if(t){var r="string"===typeof t?document.getElementById(t):t;uc.has(r)&&uc.get(r).destroy(n),uc.set(r,e)}}var dc="undefined"!==typeof window&&"undefined"!==typeof window.document;function fc(t){return!!t.getAttribute}function pc(t,e){var n=0,r=t.length;while(n<r){var i=n+r>>>1;gc(t[i],e)<0?n=i+1:r=i}return n}function gc(t,e){var n=Number(t.parsedStyle.zIndex||0),r=Number(e.parsedStyle.zIndex||0);if(n===r){var i=t.parentNode;if(i){var o=i.childNodes||[];return o.indexOf(t)-o.indexOf(e)}}return n-r}function vc(t){var e=t;do{var n,r=null===(n=e.parsedStyle)||void 0===n?void 0:n.clipPath;if(r)return e;e=e.parentElement}while(null!==e);return null}var yc="px";function mc(t,e,n){dc&&t.style&&(t.style.width=e+yc,t.style.height=n+yc)}function bc(t,e){if(dc)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function xc(t){var e=bc(t,"width");return"auto"===e?t.offsetWidth:parseFloat(e)}function wc(t){var e=bc(t,"height");return"auto"===e?t.offsetHeight:parseFloat(e)}var Ec=1,kc={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Sc="object"===typeof performance&&performance.now?performance:Date;function Mc(t){return t.nodeName===zr.FRAGMENT||t.getRootNode().nodeName===zr.FRAGMENT}function Oc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!1,i=!1,o=!!e&&!e.isNone,s=!!n&&!n.isNone;return"visiblepainted"===t||"painted"===t||"auto"===t?(r=o,i=s):"visiblefill"===t||"fill"===t?r=!0:"visiblestroke"===t||"stroke"===t?i=!0:"visible"!==t&&"all"!==t||(r=!0,i=!0),[r,i]}var Nc=1,Tc=function(){return Nc++},Ac="object"===typeof self&&self.self===self?self:"object"===typeof n.g&&n.g.global===n.g?n.g:{},Cc=Date.now(),Pc=function(){return Ac.performance&&"function"===typeof Ac.performance.now?Ac.performance.now():Date.now()-Cc},Rc={},_c=Date.now(),Lc=function(t){if("function"!==typeof t)throw new TypeError("".concat(t," is not a function"));var e=Date.now(),n=e-_c,r=n>16?0:16-n,i=Tc();return Rc[i]=t,Object.keys(Rc).length>1||setTimeout((function(){_c=e;var t=Rc;Rc={},Object.keys(t).forEach((function(e){return t[e](Pc())}))}),r),i},Dc=function(t){delete Rc[t]},Ic=["","webkit","moz","ms","o"],jc=function(t){return"string"!==typeof t?Lc:""===t?Ac.requestAnimationFrame:Ac["".concat(t,"RequestAnimationFrame")]},Fc=function(t){return"string"!==typeof t?Dc:""===t?Ac.cancelAnimationFrame:Ac["".concat(t,"CancelAnimationFrame")]||Ac["".concat(t,"CancelRequestAnimationFrame")]},Bc=function(t,e){var n=0;while(void 0!==t[n]){if(e(t[n]))return t[n];n+=1}},zc=Bc(Ic,(function(t){return!!jc(t)})),Gc=jc(zc),Vc=Fc(zc);Ac.requestAnimationFrame=Gc,Ac.cancelAnimationFrame=Vc;var Wc=function(){function t(){h(this,t),this.callbacks=[]}return f(t,[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(t,e){this.callbacks.push(e)}},{key:"promise",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Promise.all(this.callbacks.map((function(t){return t.apply(void 0,e)})))}}])}(),Uc=function(){function t(){h(this,t),this.callbacks=[]}return f(t,[{key:"tapPromise",value:function(t,e){this.callbacks.push(e)}},{key:"promise",value:function(){var t=Lr(Rr().mark((function t(){var e,n,r,i,o=arguments;return Rr().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.callbacks.length){t.next=6;break}return t.next=1,(e=this.callbacks)[0].apply(e,o);case 1:n=t.sent,r=0;case 2:if(!(r<this.callbacks.length-1)){t.next=5;break}return i=this.callbacks[r],t.next=3,i(n);case 3:n=t.sent;case 4:r++,t.next=2;break;case 5:return t.abrupt("return",n);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}])}(),Hc=function(){function t(){h(this,t),this.callbacks=[]}return f(t,[{key:"tap",value:function(t,e){this.callbacks.push(e)}},{key:"call",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=arguments;this.callbacks.forEach((function(t){t.apply(void 0,r)}))}}])}(),$c=function(){function t(){h(this,t),this.callbacks=[]}return f(t,[{key:"tap",value:function(t,e){this.callbacks.push(e)}},{key:"call",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this.callbacks.length){for(var r=arguments,i=this.callbacks[0].apply(void 0,r),o=0;o<this.callbacks.length-1;o++){var s=this.callbacks[o];i=s(i)}return i}return null}}])}(),Yc=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],qc=/([\"\'])[^\'\"]+\1/;function Xc(t){var e=t.fontSize,n=void 0===e?16:e,r=t.fontFamily,i=void 0===r?"sans-serif":r,o=t.fontStyle,s=void 0===o?"normal":o,a=t.fontVariant,c=void 0===a?"normal":a,l=t.fontWeight,u=void 0===l?"normal":l;return{fontSize:n,fontFamily:i,fontStyle:s,fontVariant:c,fontWeight:u}}var Kc=Co((function(t){for(var e=Xc(t),n=e.fontSize,r=e.fontFamily,i=e.fontStyle,o=e.fontVariant,s=e.fontWeight,a=Ae(n)&&"".concat(n,"px")||"16px",c=r.split(","),l=c.length-1;l>=0;l--){var u=c[l].trim();!qc.test(u)&&Yc.indexOf(u)<0&&(u='"'.concat(u,'"')),c[l]=u}return"".concat(i," ").concat(o," ").concat(s," ").concat(a," ").concat(c.join(","))}),(function(t){var e=Xc(t),n=e.fontSize,r=e.fontFamily,i=e.fontStyle,o=e.fontVariant,s=e.fontWeight;return"".concat(i,"_").concat(o,"_").concat(s,"_").concat(n,"_").concat(r)})),Zc=1e-6,Jc=function(t){return Math.max(t,Zc)};function Qc(t,e,n){return vt(t),t[4]=Math.tan(e),t[1]=Math.tan(n),t}var tl=ht(),el=ht(),nl={scale:function(t){At(tl,[t[0].value,t[1].value,1].map((function(t){return Jc(t)})))},scaleX:function(t){At(tl,[t[0].value,1,1].map((function(t){return Jc(t)})))},scaleY:function(t){At(tl,[1,t[0].value,1].map((function(t){return Jc(t)})))},scaleZ:function(t){At(tl,[1,1,t[0].value].map((function(t){return Jc(t)})))},scale3d:function(t){At(tl,[t[0].value,t[1].value,t[2].value].map((function(t){return Jc(t)})))},translate:function(t){Tt(tl,[t[0].value,t[1].value,0])},translateX:function(t){Tt(tl,[t[0].value,0,0])},translateY:function(t){Tt(tl,[0,t[0].value,0])},translateZ:function(t){Tt(tl,[0,0,t[0].value])},translate3d:function(t){Tt(tl,[t[0].value,t[1].value,t[2].value])},rotate:function(t){_t(tl,li(js(t[0])))},rotateX:function(t){Pt(tl,li(js(t[0])))},rotateY:function(t){Rt(tl,li(js(t[0])))},rotateZ:function(t){_t(tl,li(js(t[0])))},rotate3d:function(t){Ct(tl,li(js(t[3])),[t[0].value,t[1].value,t[2].value])},skew:function(t){Qc(tl,li(t[0].value),li(t[1].value))},skewX:function(t){Qc(tl,li(t[0].value),0)},skewY:function(t){Qc(tl,0,li(t[0].value))},matrix:function(t){gt(tl,t[0].value,t[1].value,0,0,t[2].value,t[3].value,0,0,0,0,1,0,t[4].value,t[5].value,0,1)},matrix3d:function(t){gt.apply(r,[tl].concat(b(t.map((function(t){return t.value})))))}},rl=F(1,1,1),il=D(),ol={translate:function(t,e){gu.sceneGraphService.setLocalScale(t,rl,!1),gu.sceneGraphService.setLocalEulerAngles(t,il,void 0,void 0,!1),gu.sceneGraphService.setLocalPosition(t,[e[0].value,e[1].value,0],!1),gu.sceneGraphService.dirtyLocalTransform(t,t.transformable)}};function sl(t,e){if(t.length){if(1===t.length&&ol[t[0].t])return void ol[t[0].t](e,t[0].d);for(var n=vt(el),r=0;r<t.length;r++){var i=t[r],o=i.t,s=i.d,a=nl[o];a&&(a(s),se(n,n,tl))}e.setLocalTransform(n)}else e.resetLocalTransform();return e.getLocalTransform()}var al=function(){function t(){h(this,t),this.parser=Ma,this.mixer=Fa}return f(t,[{key:"calculator",value:function(t,e,n,r){return n instanceof Yo?[]:n}},{key:"postProcessor",value:function(t){sl(t.parsedStyle.transform,t)}}])}(),cl=function(){function t(){h(this,t)}return f(t,[{key:"postProcessor",value:function(t){var e=t.parsedStyle.transformOrigin;e[0].unit===Po.kPixels&&e[1].unit===Po.kPixels?t.setOrigin(e[0].value,e[1].value):t.getGeometryBounds()}}])}(),ll=function(){function t(){h(this,t)}return f(t,[{key:"calculator",value:function(t,e,n,r){return n.value}},{key:"postProcessor",value:function(t){if(t.parentNode){var e=t.parentNode,n=e.renderable,r=e.sortable;n&&e.dirty(),r&&(r.dirty=!0,r.dirtyReason=Ii.Z_INDEX_CHANGED)}}}])}(),ul=function(){function t(){h(this,t)}return f(t,[{key:"update",value:function(t,e){var n=t.cx,r=void 0===n?0:n,i=t.cy,o=void 0===i?0:i,s=t.r,a=void 0===s?0:s;return{cx:r,cy:o,hwidth:a,hheight:a}}}])}(),hl=function(){function t(){h(this,t)}return f(t,[{key:"update",value:function(t,e){var n=t.cx,r=void 0===n?0:n,i=t.cy,o=void 0===i?0:i,s=t.rx,a=void 0===s?0:s,c=t.ry,l=void 0===c?0:c;return{cx:r,cy:o,hwidth:a,hheight:l}}}])}(),dl=function(){function t(){h(this,t)}return f(t,[{key:"update",value:function(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=Math.min(e,r),s=Math.max(e,r),a=Math.min(n,i),c=Math.max(n,i),l=s-o,u=c-a,h=l/2,d=u/2;return{cx:o+h,cy:a+d,hwidth:h,hheight:d}}}])}(),fl=function(){function t(){h(this,t)}return f(t,[{key:"update",value:function(t){var e=t.d,n=e.rect,r=n.x,i=n.y,o=n.width,s=n.height,a=o/2,c=s/2;return{cx:r+a,cy:i+c,hwidth:a,hheight:c}}}])}(),pl=function(){function t(){h(this,t)}return f(t,[{key:"update",value:function(t){if(t.points&&kn(t.points.points)){var e=t.points.points,n=Math.min.apply(Math,b(e.map((function(t){return t[0]})))),r=Math.max.apply(Math,b(e.map((function(t){return t[0]})))),i=Math.min.apply(Math,b(e.map((function(t){return t[1]})))),o=Math.max.apply(Math,b(e.map((function(t){return t[1]})))),s=r-n,a=o-i,c=s/2,l=a/2;return{cx:n+c,cy:i+l,hwidth:c,hheight:l}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),gl=function(){function t(){h(this,t)}return f(t,[{key:"update",value:function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,s=t.src,a=t.width,c=void 0===a?0:a,l=t.height,u=void 0===l?0:l,h=c,d=u;return s&&!Re(s)&&(h||(h=s.width,t.width=h),d||(d=s.height,t.height=d)),{cx:r+h/2,cy:o+d/2,hwidth:h/2,hheight:d/2}}}])}(),vl=function(){function t(e){h(this,t),this.globalRuntime=e}return f(t,[{key:"isReadyToMeasure",value:function(t,e){var n=t.text;return n}},{key:"update",value:function(t,e){var n,r=t.text,i=t.textAlign,o=void 0===i?"start":i,s=t.lineWidth,a=void 0===s?1:s,c=t.textBaseline,l=void 0===c?"alphabetic":c,u=t.dx,h=void 0===u?0:u,d=t.dy,f=void 0===d?0:d,p=t.x,g=void 0===p?0:p,v=t.y,y=void 0===v?0:v;if(!this.isReadyToMeasure(t,e))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var m=(null===e||void 0===e||null===(n=e.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n?void 0:n.getConfig())||{},b=m.offscreenCanvas,x=this.globalRuntime.textService.measureText(r,t,b);t.metrics=x;var w=x.width,E=x.height,k=w/2,S=E/2,M=g+k;"center"===o||"middle"===o?M+=a/2-k:"right"!==o&&"end"!==o||(M+=a-2*k);var O=y-S;return"middle"===l?O+=S:"top"===l||"hanging"===l?O+=2*S:"alphabetic"===l||"bottom"!==l&&"ideographic"!==l||(O+=0),h&&(M+=h),f&&(O+=f),{cx:M,cy:O,hwidth:k,hheight:S}}}])}(),yl=function(){function t(){h(this,t)}return f(t,[{key:"update",value:function(t,e){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),ml=function(){function t(){h(this,t)}return f(t,[{key:"update",value:function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,s=t.width,a=void 0===s?0:s,c=t.height,l=void 0===c?0:c;return{cx:r+a/2,cy:o+l/2,hwidth:a/2,hheight:l/2}}}])}();var bl=function(){function t(e){h(this,t),this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ti,this.page=new ti,this.canvas=new ti,this.viewport=new ti,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return f(t,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return!this.manager||this.path&&this.path[0]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(ni)}}])}(),xl=function(t){function e(){var t;h(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=S(this,e,[].concat(r)),t.client=new ti,t.movement=new ti,t.offset=new ti,t.global=new ti,t.screen=new ti,t}return O(e,t),f(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}},{key:"initMouseEvent",value:function(){throw new Error(ni)}}])}(bl),wl=function(t){function e(){var t;h(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=S(this,e,[].concat(r)),t.width=0,t.height=0,t.isPrimary=!1,t}return O(e,t),f(e,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(xl),El=function(t){function e(){return h(this,e),S(this,e,arguments)}return O(e,t),f(e,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(xl),kl=function(t){function e(t,n){var r;return h(this,e),r=S(this,e,[null]),r.type=t,r.detail=n,Object.assign(r,n),r}return O(e,t),f(e)}(bl),Sl=function(){function t(){h(this,t),this.emitter=new R}return f(t,[{key:"on",value:function(t,e,n){return this.addEventListener(t,e,n),this}},{key:"addEventListener",value:function(t,e,n){var r=!1,i=!1;if(er(n))r=n;else if(n){var o=n.capture;r=void 0!==o&&o;var s=n.once;i=void 0!==s&&s}r&&(t+="capture"),e=nr(e)?e:e.handleEvent;var a=nr(e)?void 0:e;return i?this.emitter.once(t,e,a):this.emitter.on(t,e,a),this}},{key:"off",value:function(t,e,n){return t?this.removeEventListener(t,e,n):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var t;null===(t=this.emitter)||void 0===t||t.removeAllListeners()}},{key:"removeEventListener",value:function(t,e,n){var r;if(!this.emitter)return this;var i=er(n)?n:null===n||void 0===n?void 0:n.capture;i&&(t+="capture"),e=nr(e)?e:null===(r=e)||void 0===r?void 0:r.handleEvent;var o=nr(e)?void 0:e;return this.emitter.off(t,e,o),this}},{key:"emit",value:function(t,e){this.dispatchEvent(new kl(t,e))}},{key:"dispatchEventToSelf",value:function(t){t.target||(t.target=this),t.currentTarget=this,this.emitter.emit(t.type,t)}},{key:"dispatchEvent",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;if(r)return this.dispatchEventToSelf(t),!0;if(this.document)e=this;else if(this.defaultView)e=this.defaultView;else{var i;e=null===(i=this.ownerDocument)||void 0===i?void 0:i.defaultView}if(e){if(t.manager=e.getEventService(),!t.manager)return!1;t.defaultPrevented=!1,t.path?t.path.length=0:t.page=[],n||(t.target=this),t.manager.dispatchEvent(t,t.type,n)}else this.dispatchEventToSelf(t);return!t.defaultPrevented}}])}(),Ml=function(t){function e(){var t;h(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=S(this,e,[].concat(r)),t.shadow=!1,t.ownerDocument=null,t.isConnected=!1,t.baseURI="",t.childNodes=[],t.nodeType=0,t.nodeName="",t.nodeValue=null,t.parentNode=null,t.destroyed=!1,t}return O(e,t),f(e,[{key:"textContent",get:function(){var t="";this.nodeName===zr.TEXT&&(t+=this.style.text);var e,n=Dr(this.childNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.nodeName===zr.TEXT?t+=r.nodeValue:t+=r.textContent}}catch(i){n.e(i)}finally{n.f()}return t},set:function(t){var e=this;this.childNodes.slice().forEach((function(t){e.removeChild(t)})),this.nodeName===zr.TEXT&&(this.style.text="".concat(t))}},{key:"getRootNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(t):t.composed&&this.host?this.host.getRootNode(t):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(t){throw new Error(ni)}},{key:"lookupNamespaceURI",value:function(t){throw new Error(ni)}},{key:"lookupPrefix",value:function(t){throw new Error(ni)}},{key:"normalize",value:function(){throw new Error(ni)}},{key:"isEqualNode",value:function(t){return this===t}},{key:"isSameNode",value:function(t){return this.isEqualNode(t)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(t){if(t===this)return 0;var n=t,r=this,i=[n],o=[r];while(null!==(s=n.parentNode)&&void 0!==s?s:r.parentNode){var s;n=n.parentNode?(i.push(n.parentNode),n.parentNode):n,r=r.parentNode?(o.push(r.parentNode),r.parentNode):r}if(n!==r)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var a=i.length>o.length?i:o,c=a===i?o:i;if(a[a.length-c.length]===c[0])return a===i?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var l=a.length-c.length,u=c.length-1;u>=0;u--){var h=c[u],d=a[l+u];if(d!==h){var f=h.parentNode.childNodes;return f.indexOf(h)<f.indexOf(d)?c===i?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:a===i?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(t){return this.contains(t)}},{key:"contains",value:function(t){var e=t;while(e&&this!==e)e=e.parentNode;return!!e}},{key:"getAncestor",value:function(t){var e=this;while(t>0&&e)e=e.parentNode,t--;return e}},{key:"forEach",value:function(t){var e=[this];while(e.length>0){var n=e.pop(),r=t(n);if(!1===r)break;for(var i=n.childNodes.length-1;i>=0;i--)e.push(n.childNodes[i])}}}],[{key:"isNode",value:function(t){return!!t.childNodes}}])}(Sl);Ml.DOCUMENT_POSITION_DISCONNECTED=1,Ml.DOCUMENT_POSITION_PRECEDING=2,Ml.DOCUMENT_POSITION_FOLLOWING=4,Ml.DOCUMENT_POSITION_CONTAINS=8,Ml.DOCUMENT_POSITION_CONTAINED_BY=16,Ml.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var Ol=2048,Nl=function(){function t(e,n){var r=this;h(this,t),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=ht(),this.tmpVec3=D(),this.onPointerDown=function(t){var e=r.createPointerEvent(t);if(r.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType)r.dispatchEvent(e,"touchstart");else if("mouse"===e.pointerType||"pen"===e.pointerType){var n=2===e.button;r.dispatchEvent(e,n?"rightdown":"mousedown")}var i=r.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),r.freeEvent(e)},this.onPointerUp=function(t){var e=Sc.now(),n=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)r.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){var i=2===n.button;r.dispatchEvent(n,i?"rightup":"mouseup")}var o=r.trackingData(t.pointerId),s=r.findMountedTarget(o.pressTargetsByButton[t.button]),a=s;if(s&&!n.composedPath().includes(s)){var c=s;while(c&&!n.composedPath().includes(c)){if(n.currentTarget=c,r.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)r.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){var l=2===n.button;r.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}Ml.isNode(c)&&(c=c.parentNode)}delete o.pressTargetsByButton[t.button],a=c}if(a){var u,h=r.clonePointerEvent(n,"click");h.target=a,h.path=[],o.clicksByButton[t.button]||(o.clicksByButton[t.button]={clickCount:0,target:h.target,timeStamp:e});var d=r.context.renderingContext.root.ownerDocument.defaultView,f=o.clicksByButton[t.button];f.target===h.target&&e-f.timeStamp<d.getConfig().dblClickSpeed?++f.clickCount:f.clickCount=1,f.target=h.target,f.timeStamp=e,h.detail=f.clickCount,null!==(u=n.detail)&&void 0!==u&&u.preventClick||(r.context.config.useNativeClickEvent||"mouse"!==h.pointerType&&"touch"!==h.pointerType||r.dispatchEvent(h,"click"),r.dispatchEvent(h,"pointertap")),r.freeEvent(h)}r.freeEvent(n)},this.onPointerMove=function(t){var e=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),n="mouse"===e.pointerType||"pen"===e.pointerType,i=r.trackingData(t.pointerId),o=r.findMountedTarget(i.overTargets);if(i.overTargets&&o!==e.target){var s="mousemove"===t.type?"mouseout":"pointerout",a=r.createPointerEvent(t,s,o||void 0);if(r.dispatchEvent(a,"pointerout"),n&&r.dispatchEvent(a,"mouseout"),!e.composedPath().includes(o)){var c=r.createPointerEvent(t,"pointerleave",o||void 0);c.eventPhase=c.AT_TARGET;while(c.target&&!e.composedPath().includes(c.target))c.currentTarget=c.target,r.notifyTarget(c),n&&r.notifyTarget(c,"mouseleave"),Ml.isNode(c.target)&&(c.target=c.target.parentNode);r.freeEvent(c)}r.freeEvent(a)}if(o!==e.target){var l="mousemove"===t.type?"mouseover":"pointerover",u=r.clonePointerEvent(e,l);r.dispatchEvent(u,"pointerover"),n&&r.dispatchEvent(u,"mouseover");var h=o&&Ml.isNode(o)&&o.parentNode;while(h&&h!==(Ml.isNode(r.rootTarget)&&r.rootTarget.parentNode)){if(h===e.target)break;h=h.parentNode}var d=!h||h===(Ml.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(d){var f=r.clonePointerEvent(e,"pointerenter");f.eventPhase=f.AT_TARGET;while(f.target&&f.target!==o&&f.target!==(Ml.isNode(r.rootTarget)&&r.rootTarget.parentNode))f.currentTarget=f.target,r.notifyTarget(f),n&&r.notifyTarget(f,"mouseenter"),Ml.isNode(f.target)&&(f.target=f.target.parentNode);r.freeEvent(f)}r.freeEvent(u)}r.dispatchEvent(e,"pointermove"),"touch"===e.pointerType&&r.dispatchEvent(e,"touchmove"),n&&(r.dispatchEvent(e,"mousemove"),r.cursor=r.getCursor(e.target)),i.overTargets=e.composedPath(),r.freeEvent(e)},this.onPointerOut=function(t){var e=r.trackingData(t.pointerId);if(e.overTargets){var n="mouse"===t.pointerType||"pen"===t.pointerType,i=r.findMountedTarget(e.overTargets),o=r.createPointerEvent(t,"pointerout",i||void 0);r.dispatchEvent(o),n&&r.dispatchEvent(o,"mouseout");var s=r.createPointerEvent(t,"pointerleave",i||void 0);s.eventPhase=s.AT_TARGET;while(s.target&&s.target!==(Ml.isNode(r.rootTarget)&&r.rootTarget.parentNode))s.currentTarget=s.target,r.notifyTarget(s),n&&r.notifyTarget(s,"mouseleave"),Ml.isNode(s.target)&&(s.target=s.target.parentNode);e.overTargets=null,r.freeEvent(o),r.freeEvent(s)}r.cursor=null},this.onPointerOver=function(t){var e=r.trackingData(t.pointerId),n=r.createPointerEvent(t),i="mouse"===n.pointerType||"pen"===n.pointerType;r.dispatchEvent(n,"pointerover"),i&&r.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(r.cursor=r.getCursor(n.target));var o=r.clonePointerEvent(n,"pointerenter");o.eventPhase=o.AT_TARGET;while(o.target&&o.target!==(Ml.isNode(r.rootTarget)&&r.rootTarget.parentNode))o.currentTarget=o.target,r.notifyTarget(o),i&&r.notifyTarget(o,"mouseenter"),Ml.isNode(o.target)&&(o.target=o.target.parentNode);e.overTargets=n.composedPath(),r.freeEvent(n),r.freeEvent(o)},this.onPointerUpOutside=function(t){var e=r.trackingData(t.pointerId),n=r.findMountedTarget(e.pressTargetsByButton[t.button]),i=r.createPointerEvent(t);if(n){var o=n;while(o)i.currentTarget=o,r.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||"mouse"!==i.pointerType&&"pen"!==i.pointerType||r.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),Ml.isNode(o)&&(o=o.parentNode);delete e.pressTargetsByButton[t.button]}r.freeEvent(i)},this.onWheel=function(t){var e=r.createWheelEvent(t);r.dispatchEvent(e),r.freeEvent(e)},this.onClick=function(t){if(r.context.config.useNativeClickEvent){var e=r.createPointerEvent(t);r.dispatchEvent(e),r.freeEvent(e)}},this.onPointerCancel=function(t){var e=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(e),r.freeEvent(e)},this.globalRuntime=e,this.context=n}return f(t,[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var t=this.context.contextService.getBoundingClientRect(),e=1,n=1,r=this.context.contextService.getDomElement();if(r&&t){var i=r.offsetWidth,o=r.offsetHeight;i&&o&&(e=t.width/i,n=t.height/o)}return{scaleX:e,scaleY:n,bbox:t}}},{key:"client2Viewport",value:function(t){var e=this.getScale(),n=e.scaleX,r=e.scaleY,i=e.bbox;return new ti((t.x-((null===i||void 0===i?void 0:i.left)||0))/n,(t.y-((null===i||void 0===i?void 0:i.top)||0))/r)}},{key:"viewport2Client",value:function(t){var e=this.getScale(),n=e.scaleX,r=e.scaleY,i=e.bbox;return new ti((t.x+((null===i||void 0===i?void 0:i.left)||0))*n,(t.y+((null===i||void 0===i?void 0:i.top)||0))*r)}},{key:"viewport2Canvas",value:function(t){var e=t.x,n=t.y,r=this.rootTarget.defaultView,i=r.getCamera(),o=this.context.config,s=o.width,a=o.height,c=i.getPerspectiveInverse(),l=i.getWorldTransform(),u=wt(this.tmpMatrix,l,c),h=z(this.tmpVec3,e/s*2-1,2*(1-n/a)-1,0);return J(h,h,u),new ti(h[0],h[1])}},{key:"canvas2Viewport",value:function(t){var e=this.rootTarget.defaultView,n=e.getCamera(),r=n.getPerspective(),i=n.getViewTransform(),o=wt(this.tmpMatrix,r,i),s=z(this.tmpVec3,t.x,t.y,0);J(this.tmpVec3,this.tmpVec3,o);var a=this.context.config,c=a.width,l=a.height;return new ti((s[0]+1)/2*c,(1-(s[1]+1)/2)*l)}},{key:"setPickHandler",value:function(t){this.pickHandler=t}},{key:"addEventMapping",value:function(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((function(t,e){return t.priority-e.priority}))}},{key:"mapEvent",value:function(t){if(this.rootTarget){var e=this.mappingTable[t.type];if(e)for(var n=0,r=e.length;n<r;n++)e[n].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}}},{key:"dispatchEvent",value:function(t,e,n){if(n){t.eventPhase=t.AT_TARGET;var r=this.rootTarget.defaultView||null;t.currentTarget=r,this.notifyListeners(t,e)}else t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e)}},{key:"propagate",value:function(t,e){if(t.target){var n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var r=n.length-1;r>=1;r--)if(t.currentTarget=n[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){var i=n.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var o=i+1;o<n.length;o++)if(t.currentTarget=n[o],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(t){var e=[t],n=this.rootTarget.defaultView||null;if(n&&n===t)return e.unshift(n.document),e;for(var r=0;r<Ol&&t!==this.rootTarget;r++)Ml.isNode(t)&&t.parentNode&&(e.push(t.parentNode),t=t.parentNode);return n&&e.push(n),e}},{key:"hitTest",value:function(t){var e=t.viewportX,n=t.viewportY,r=this.context.config,i=r.width,o=r.height,s=r.disableHitTesting;return e<0||n<0||e>i||n>o?null:!s&&this.pickHandler(t)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(t,e){var n,r=null===e||void 0===e?void 0:e.target;if(null!==(n=r)&&void 0!==n&&n.shadowRoot&&(r=e.composedPath()[0]),r){if(r===t)return!0;if(t&&t.contains)return t.contains(r)}return!(null===e||void 0===e||!e.composedPath)&&e.composedPath().indexOf(t)>-1}},{key:"getExistedHTML",value:function(t){if(t.nativeEvent.composedPath)for(var e=0,n=t.nativeEvent.composedPath();e<n.length;e++){var r=n[e],i=this.nativeHTMLMap.get(r);if(i)return i}return null}},{key:"pickTarget",value:function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})}},{key:"createPointerEvent",value:function(t,e,n,r){var i=this.allocateEvent(wl);this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t;var o=this.getExistedHTML(i),s=this.context.contextService.getDomElement();return i.target=null!==n&&void 0!==n?n:o||this.isNativeEventFromCanvas(s,i.nativeEvent)&&this.pickTarget(i)||r,"string"===typeof e&&(i.type=e),i}},{key:"createWheelEvent",value:function(t){var e=this.allocateEvent(El);this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t;var n=this.getExistedHTML(e),r=this.context.contextService.getDomElement();return e.target=n||this.isNativeEventFromCanvas(r,e.nativeEvent)&&this.pickTarget(e),e}},{key:"trackingData",value:function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}},{key:"cloneWheelEvent",value:function(t){var e=this.allocateEvent(El);return e.nativeEvent=t.nativeEvent,e.originalEvent=t.originalEvent,this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.target=t.target,e.path=t.composedPath().slice(),e.type=t.type,e}},{key:"clonePointerEvent",value:function(t,e){var n=this.allocateEvent(wl);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=null!==e&&void 0!==e?e:n.type,n}},{key:"copyPointerData",value:function(t,e){e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist}},{key:"copyMouseData",value:function(t,e){e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.client.copyFrom(t.client),e.movement.copyFrom(t.movement),e.canvas.copyFrom(t.canvas),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global),e.offset.copyFrom(t.offset)}},{key:"copyWheelData",value:function(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}},{key:"copyData",value:function(t,e){e.isTrusted=t.isTrusted,e.timeStamp=Sc.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.page.copyFrom(t.page),e.viewport.copyFrom(t.viewport)}},{key:"allocateEvent",value:function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=[],e.target=null,e}},{key:"freeEvent",value:function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}},{key:"notifyTarget",value:function(t,e){e=null!==e&&void 0!==e?e:t.type;var n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(e,"capture"):e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}},{key:"notifyListeners",value:function(t,e){var n=t.currentTarget.emitter,r=n._events[e];if(r)if("fn"in r)r.once&&n.removeListener(e,r.fn,void 0,!0),r.fn.call(t.currentTarget||r.context,t);else for(var i=0;i<r.length&&!t.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(e,r[i].fn,void 0,!0),r[i].fn.call(t.currentTarget||r[i].context,t)}},{key:"findMountedTarget",value:function(t){if(!t)return null;for(var e=t[t.length-1],n=t.length-2;n>=0;n--){var r=t[n];if(!(r===this.rootTarget||Ml.isNode(r)&&r.parentNode===e))break;e=t[n]}return e}},{key:"getCursor",value:function(t){var e=t;while(e){var n=fc(e)&&e.getAttribute("cursor");if(n)return n;e=Ml.isNode(e)&&e.parentNode}}}])}(),Tl=function(){function t(){h(this,t)}return f(t,[{key:"getOrCreateCanvas",value:function(t,e){if(this.canvas)return this.canvas;if(t||gu.offscreenCanvas)this.canvas=t||gu.offscreenCanvas,this.context=this.canvas.getContext("2d",u({willReadFrequently:!0},e));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",u({willReadFrequently:!0},e)),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",u({willReadFrequently:!0},e))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(t,e){return this.context||this.getOrCreateCanvas(t,e),this.context}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch(t){}try{return document.createElement("canvas")}catch(e){}return null}}])}(),Al=function(t){return t[t["CAMERA_CHANGED"]=0]="CAMERA_CHANGED",t[t["DISPLAY_OBJECT_CHANGED"]=1]="DISPLAY_OBJECT_CHANGED",t[t["NONE"]=2]="NONE",t}({}),Cl=function(){function t(e,n){h(this,t),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new Hc,initAsync:new Wc,dirtycheck:new $c,cull:new $c,beginFrame:new Hc,beforeRender:new Hc,render:new Hc,afterRender:new Hc,endFrame:new Hc,destroy:new Hc,pick:new Uc,pickSync:new $c,pointerDown:new Hc,pointerUp:new Hc,pointerMove:new Hc,pointerOut:new Hc,pointerOver:new Hc,pointerWheel:new Hc,pointerCancel:new Hc,click:new Hc},this.globalRuntime=e,this.context=n}return f(t,[{key:"init",value:function(t){var e=this,n=u(u({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach((function(t){t.apply(n,e.globalRuntime)})),this.hooks.init.call(),0===this.hooks.initAsync.getCallbacksNum()?(this.inited=!0,t()):this.hooks.initAsync.promise().then((function(){e.inited=!0,t()}))["catch"]((function(t){}))}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){var t=this.context.config.renderer,e=t.getConfig(),n=e.enableDirtyRectangleRendering;return!n||this.context.renderingContext.renderReasons.has(Al.CAMERA_CHANGED)}},{key:"render",value:function(t,e,n){var r=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var i=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(i.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),i.renderReasons.size&&this.inited){i.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var o=1===i.renderReasons.size&&i.renderReasons.has(Al.CAMERA_CHANGED),s=!t.disableRenderHooks||!o;s&&this.renderDisplayObject(i.root,t,i),this.hooks.beginFrame.call(e),s&&i.renderListCurrentFrame.forEach((function(t){r.hooks.beforeRender.call(t),r.hooks.render.call(t),r.hooks.afterRender.call(t)})),this.hooks.endFrame.call(e),i.renderListCurrentFrame=[],i.renderReasons.clear(),n()}}},{key:"renderDisplayObject",value:function(t,e,n){var r=this,i=e.renderer.getConfig(),o=i.enableDirtyCheck,s=i.enableCulling;function a(t){var e=t.renderable,i=t.sortable,a=o?e.dirty||n.dirtyRectangleRenderingDisabled?t:null:t,c=null;a&&(c=s?r.hooks.cull.call(a,r.context.camera):a,c&&(r.stats.rendered+=1,n.renderListCurrentFrame.push(c))),t.dirty(!1),i.renderOrder=r.zIndexCounter,r.zIndexCounter+=1,r.stats.total+=1,i.dirty&&(r.sort(t,i),i.dirty=!1,i.dirtyChildren=[],i.dirtyReason=void 0)}var c=[t];while(c.length>0){var l,u=c.pop();a(u);for(var h=(null===(l=u.sortable)||void 0===l||null===(l=l.sorted)||void 0===l?void 0:l.length)>0?u.sortable.sorted:u.childNodes,d=h.length-1;d>=0;d--)c.push(h[d])}}},{key:"sort",value:function(t,e){var n,r;(null===e||void 0===e||null===(n=e.sorted)||void 0===n?void 0:n.length)>0&&e.dirtyReason!==Ii.Z_INDEX_CHANGED?e.dirtyChildren.forEach((function(n){var r=e.sorted.indexOf(n);r>-1&&e.sorted.splice(r,1);var i=t.childNodes.indexOf(n);if(i>-1)if(0===e.sorted.length)e.sorted.push(n);else{var o=pc(e.sorted,n);e.sorted.splice(o,0,n)}})):e.sorted=t.childNodes.slice().sort(gc),(null===(r=e.sorted)||void 0===r?void 0:r.length)>0&&0===t.childNodes.filter((function(t){return t.parsedStyle.zIndex})).length&&(e.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(Al.DISPLAY_OBJECT_CHANGED)}}])}(),Pl=/\[\s*(.*)=(.*)\s*\]/,Rl=function(){function t(){h(this,t)}return f(t,[{key:"selectOne",value:function(t,e){var n=this;if(t.startsWith("."))return e.find((function(e){return((null===e||void 0===e?void 0:e.classList)||[]).indexOf(n.getIdOrClassname(t))>-1}));if(t.startsWith("#"))return e.find((function(e){return e.id===n.getIdOrClassname(t)}));if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,o=r.value;return i?e.find((function(t){return e!==t&&("name"===i?t.name===o:n.attributeToString(t,i)===o)})):null}return e.find((function(n){return e!==n&&n.nodeName===t}))}},{key:"selectAll",value:function(t,e){var n=this;if(t.startsWith("."))return e.findAll((function(r){return e!==r&&((null===r||void 0===r?void 0:r.classList)||[]).indexOf(n.getIdOrClassname(t))>-1}));if(t.startsWith("#"))return e.findAll((function(r){return e!==r&&r.id===n.getIdOrClassname(t)}));if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,o=r.value;return i?e.findAll((function(t){return e!==t&&("name"===i?t.name===o:n.attributeToString(t,i)===o)})):[]}return e.findAll((function(n){return e!==n&&n.nodeName===t}))}},{key:"is",value:function(t,e){if(t.startsWith("."))return e.className===this.getIdOrClassname(t);if(t.startsWith("#"))return e.id===this.getIdOrClassname(t);if(t.startsWith("[")){var n=this.getAttribute(t),r=n.name,i=n.value;return"name"===r?e.name===i:this.attributeToString(e,r)===i}return e.nodeName===t}},{key:"getIdOrClassname",value:function(t){return t.substring(1)}},{key:"getAttribute",value:function(t){var e=t.match(Pl),n="",r="";return e&&e.length>2&&(n=e[1].replace(/"/g,""),r=e[2].replace(/"/g,"")),{name:n,value:r}}},{key:"attributeToString",value:function(t,e){if(!t.getAttribute)return"";var n=t.getAttribute(e);return Pe(n)?"":n.toString?n.toString():""}}])}(),_l=function(t){return t["ATTR_MODIFIED"]="DOMAttrModified",t["INSERTED"]="DOMNodeInserted",t["MOUNTED"]="DOMNodeInsertedIntoDocument",t["REMOVED"]="removed",t["UNMOUNTED"]="DOMNodeRemovedFromDocument",t["REPARENT"]="reparent",t["DESTROY"]="destroy",t["BOUNDS_CHANGED"]="bounds-changed",t["CULLED"]="culled",t}({}),Ll=function(t){function e(t,n,r,i,o,s,a,c){var l;return h(this,e),l=S(this,e,[null]),l.relatedNode=n,l.prevValue=r,l.newValue=i,l.attrName=o,l.attrChange=s,l.prevParsedValue=a,l.newParsedValue=c,l.type=t,l}return O(e,t),f(e)}(bl);Ll.ADDITION=2,Ll.MODIFICATION=1,Ll.REMOVAL=3;var Dl=new Ll(_l.REPARENT,null,"","","",0,"",""),Il=ke(),jl=D(),Fl=F(1,1,1),Bl=ht(),zl=ke(),Gl=D(),Vl=ht(),Wl=he(),Ul=D(),Hl=he(),$l=D(),Yl=D(),ql=D(),Xl=ht(),Kl=he(),Zl=he(),Jl=he(),Ql={affectChildren:!0},tu=function(){function t(e){h(this,t),this.pendingEvents=new Map,this.boundsChangedEvent=new kl(_l.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=e}return f(t,[{key:"matches",value:function(t,e){return this.runtime.sceneGraphSelector.is(t,e)}},{key:"querySelector",value:function(t,e){return this.runtime.sceneGraphSelector.selectOne(t,e)}},{key:"querySelectorAll",value:function(t,e){return this.runtime.sceneGraphSelector.selectAll(t,e)}},{key:"attach",value:function(t,e,n){var r,i=!1;t.parentNode&&(i=t.parentNode!==e,this.detach(t));var o=t.nodeName===zr.FRAGMENT,s=Mc(e);t.parentNode=e;var a=o?t.childNodes:[t];Ae(n)?a.forEach((function(t){e.childNodes.splice(n,0,t),t.parentNode=e})):a.forEach((function(t){e.childNodes.push(t),t.parentNode=e}));var c=e,l=c.sortable;if((null!==l&&void 0!==l&&null!==(r=l.sorted)&&void 0!==r&&r.length||l.dirty||t.parsedStyle.zIndex)&&(-1===l.dirtyChildren.indexOf(t)&&l.dirtyChildren.push(t),l.dirty=!0,l.dirtyReason=Ii.ADDED),!s){if(o)this.dirtifyFragment(t);else{var u=t.transformable;u&&this.dirtyWorldTransform(t,u)}if(i){var h,d=!0===(null===(h=e.ownerDocument)||void 0===h||null===(h=h.defaultView)||void 0===h||null===(h=h.getConfig())||void 0===h||null===(h=h.future)||void 0===h?void 0:h.experimentalCancelEventPropagation);t.dispatchEvent(Dl,d,d)}}}},{key:"detach",value:function(t){var e,n;if(t.parentNode){var r=t.transformable,i=t.parentNode,o=i.sortable;(null!==o&&void 0!==o&&null!==(e=o.sorted)&&void 0!==e&&e.length||null!==(n=t.style)&&void 0!==n&&n.zIndex)&&(-1===o.dirtyChildren.indexOf(t)&&o.dirtyChildren.push(t),o.dirty=!0,o.dirtyReason=Ii.REMOVED);var s=t.parentNode.childNodes.indexOf(t);s>-1&&t.parentNode.childNodes.splice(s,1),r&&this.dirtyWorldTransform(t,r),t.parentNode=null}}},{key:"getLocalPosition",value:function(t){return t.transformable.localPosition}},{key:"getLocalRotation",value:function(t){return t.transformable.localRotation}},{key:"getLocalScale",value:function(t){return t.transformable.localScale}},{key:"getLocalSkew",value:function(t){return t.transformable.localSkew}},{key:"getLocalTransform",value:function(t){var e=t.transformable;return zi(e),e.localTransform}},{key:"setLocalPosition",value:function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.transformable;Yl[0]=e[0],Yl[1]=e[1],Yl[2]=null!==(n=e[2])&&void 0!==n?n:0,et(i.localPosition,Yl)||(B(i.localPosition,Yl),r&&this.dirtyLocalTransform(t,i))}},{key:"translateLocal",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"===typeof e&&(e=F(e,n,r));var i=t.transformable;et(e,jl)||(tt(e,e,i.localRotation),G(i.localPosition,i.localPosition,e),this.dirtyLocalTransform(t,i))}},{key:"setLocalRotation",value:function(t,e,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];"number"===typeof e&&(e=xe(Wl,e,n,r,i));var s=t.transformable;be(s.localRotation,e),o&&this.dirtyLocalTransform(t,s)}},{key:"rotateLocal",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"===typeof e&&(e=F(e,n,r));var i=t.transformable;ye(Zl,e[0],e[1],e[2]),we(i.localRotation,i.localRotation,Zl),this.dirtyLocalTransform(t,i)}},{key:"setLocalScale",value:function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.transformable;z(Gl,e[0],e[1],null!==(n=e[2])&&void 0!==n?n:i.localScale[2]),et(Gl,i.localScale)||(B(i.localScale,Gl),r&&this.dirtyLocalTransform(t,i))}},{key:"scaleLocal",value:function(t,e){var n,r=t.transformable;W(r.localScale,r.localScale,z(Gl,e[0],e[1],null!==(n=e[2])&&void 0!==n?n:1)),this.dirtyLocalTransform(t,r)}},{key:"setLocalSkew",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];"number"===typeof e&&(e=Me(zl,e,n));var i=t.transformable;Se(i.localSkew,e),r&&this.dirtyLocalTransform(t,i)}},{key:"setLocalEulerAngles",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];"number"===typeof e&&(e=F(e,n,r));var o=t.transformable;ye(o.localRotation,e[0],e[1],e[2]),i&&this.dirtyLocalTransform(t,o)}},{key:"setLocalTransform",value:function(t,e){var n=It(Ul,e),r=Ft(Hl,e),i=jt($l,e);this.setLocalScale(t,i,!1),this.setLocalPosition(t,n,!1),this.setLocalRotation(t,r,void 0,void 0,void 0,!1),this.dirtyLocalTransform(t,t.transformable)}},{key:"resetLocalTransform",value:function(t){this.setLocalScale(t,Fl,!1),this.setLocalPosition(t,jl,!1),this.setLocalEulerAngles(t,jl,void 0,void 0,!1),this.setLocalSkew(t,Il,void 0,!1),this.dirtyLocalTransform(t,t.transformable)}},{key:"getPosition",value:function(t){var e=t.transformable;return It(e.position,this.getWorldTransform(t,e))}},{key:"getRotation",value:function(t){var e=t.transformable;return Ft(e.rotation,this.getWorldTransform(t,e))}},{key:"getScale",value:function(t){var e=t.transformable;return jt(e.scaling,this.getWorldTransform(t,e))}},{key:"getOrigin",value:function(t){return t.getGeometryBounds(),t.transformable.origin}},{key:"getWorldTransform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.transformable;return e.localDirtyFlag||e.dirtyFlag?(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.internalUpdateTransform(t),e.worldTransform):e.worldTransform}},{key:"setPosition",value:function(t,e){var n,r=t.transformable;if(ql[0]=e[0],ql[1]=e[1],ql[2]=null!==(n=e[2])&&void 0!==n?n:0,!et(this.getPosition(t),ql)){if(B(r.position,ql),null!==t.parentNode&&t.parentNode.transformable){var i=t.parentNode.transformable;ft(Xl,i.worldTransform),mt(Xl,Xl),J(r.localPosition,ql,Xl)}else B(r.localPosition,ql);this.dirtyLocalTransform(t,r)}}},{key:"translate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"===typeof e&&(e=z(Gl,e,n,r)),et(e,jl)||(G(Gl,this.getPosition(t),e),this.setPosition(t,Gl))}},{key:"setRotation",value:function(t,e,n,r,i){var o=t.transformable;if("number"===typeof e&&(e=me(e,n,r,i)),null!==t.parentNode&&t.parentNode.transformable){var s=this.getRotation(t.parentNode);be(Wl,s),ge(Wl,Wl),fe(o.localRotation,Wl,e),Ee(o.localRotation,o.localRotation),this.dirtyLocalTransform(t,o)}else this.setLocalRotation(t,e)}},{key:"rotate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"===typeof e&&(e=F(e,n,r));var i=t.transformable;if(null!==t.parentNode&&t.parentNode.transformable){var o=Wl;ye(o,e[0],e[1],e[2]);var s=this.getRotation(t),a=this.getRotation(t.parentNode);be(Jl,a),ge(Jl,Jl),fe(o,Jl,o),fe(i.localRotation,o,s),Ee(i.localRotation,i.localRotation),this.dirtyLocalTransform(t,i)}else this.rotateLocal(t,e)}},{key:"setOrigin",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"===typeof e&&(e=[e,n,r]);var i=t.transformable;if(e[0]!==i.origin[0]||e[1]!==i.origin[1]||e[2]!==i.origin[2]){var o=i.origin;o[0]=e[0],o[1]=e[1],o[2]=e[2]||0,this.dirtyLocalTransform(t,i)}}},{key:"setEulerAngles",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"===typeof e&&(e=F(e,n,r));var i=t.transformable;if(null!==t.parentNode&&t.parentNode.transformable){ye(i.localRotation,e[0],e[1],e[2]);var o=this.getRotation(t.parentNode);be(Kl,ge(Wl,o)),we(i.localRotation,i.localRotation,Kl),this.dirtyLocalTransform(t,i)}else this.setLocalEulerAngles(t,e)}},{key:"getTransformedGeometryBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.getGeometryBounds(t,e);if(!Kr.isEmpty(r)){var i=n||new Kr;return i.setFromTransformedAABB(r,this.getWorldTransform(t)),i}return null}},{key:"getGeometryBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t,r=n.geometry;r.dirty&&gu.styleValueRegistry.updateGeometry(t);var i=e?r.renderBounds:r.contentBounds||null;return i||new Kr}},{key:"getBounds",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t,i=r.renderable;if(!i.boundsDirty&&!n&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&n&&i.renderBounds)return i.renderBounds;var o=n?i.renderBounds:i.bounds,s=this.getTransformedGeometryBounds(t,n,o),a=t.childNodes;if(a.forEach((function(t){var r=e.getBounds(t,n);r&&(s?s.add(r):(s=o||new Kr,s.update(r.center,r.halfExtents)))})),s||(s=new Kr),n){var c=vc(t);if(c){var l=c.parsedStyle.clipPath.getBounds(n);s?l&&(s=l.intersection(s)):s.update(l.center,l.halfExtents)}}return n?(i.renderBounds=s,i.renderBoundsDirty=!1):(i.bounds=s,i.boundsDirty=!1),s}},{key:"getLocalBounds",value:function(t){if(t.parentNode){var e=Bl;t.parentNode.transformable&&(e=mt(Vl,this.getWorldTransform(t.parentNode)));var n=this.getBounds(t);if(!Kr.isEmpty(n)){var r=new Kr;return r.setFromTransformedAABB(n,e),r}}return this.getBounds(t)}},{key:"getBoundingClientRect",value:function(t){var e,n,r=this.getGeometryBounds(t);Kr.isEmpty(r)||(n=new Kr,n.setFromTransformedAABB(r,this.getWorldTransform(t)));var i=null===(e=t.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e?void 0:e.getContextService().getBoundingClientRect();if(n){var o=n.getMin(),s=C(o,2),a=s[0],c=s[1],l=n.getMax(),u=C(l,2),h=u[0],d=u[1];return new ei(a+((null===i||void 0===i?void 0:i.left)||0),c+((null===i||void 0===i?void 0:i.top)||0),h-a,d-c)}return new ei((null===i||void 0===i?void 0:i.left)||0,(null===i||void 0===i?void 0:i.top)||0,0,0)}},{key:"internalUpdateTransform",value:function(t){var e,n=null===(e=t.parentNode)||void 0===e?void 0:e.transformable;zi(t.transformable),Gi(t.transformable,n)}},{key:"internalUpdateElement",value:function(t,e){var n,r,i,o,s,a,c=!0===(null===(n=t.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n||null===(n=n.getConfig())||void 0===n||null===(n=n.future)||void 0===n?void 0:n.experimentalAttributeUpdateOptimization),l=e[e.length-1],u=(null===l||void 0===l?void 0:l.transformDirty)||(null===(r=t.transformable)||void 0===r?void 0:r.localDirtyFlag);t.transformable&&((s=t.transformable).dirtyFlag||(s.dirtyFlag=u));(this.internalUpdateTransform(t),u)&&(null===(a=t.dirty)||void 0===a||a.call(t,!0,!0));var h=(null===(i=t.renderable)||void 0===i?void 0:i.boundsDirty)||(null===(o=t.renderable)||void 0===o?void 0:o.renderBoundsDirty);if((u||h)&&!1===(null===l||void 0===l?void 0:l.shapeUpdated)&&c){var d=e.length-1;while(d>=0){var f,p,g=e[d];if(g.shapeUpdated)break;null===(f=(p=g.node).dirty)||void 0===f||f.call(p,!0,!0),g.shapeUpdated=!0,d-=1}}return u}},{key:"syncHierarchy",value:function(t){var e,n,r=[t],i=t.parentNode?[{node:t.parentNode,transformDirty:(null===(e=t.parentNode.transformable)||void 0===e?void 0:e.localDirtyFlag)||(null===(n=t.parentNode.transformable)||void 0===n?void 0:n.dirtyFlag),shapeUpdated:!1}]:[];while(r.length>0){var o=r.pop(),s=i[i.length-1];while(i.length>0&&o.parentNode!==s.node)s=i.pop();var a=this.internalUpdateElement(o,i);if(o.childNodes.length>0){for(var c=o.childNodes.length-1;c>=0;c--)r.push(o.childNodes[c]);i.push({node:o,transformDirty:a,shapeUpdated:!1})}}}},{key:"dirtyLocalTransform",value:function(t,e){Mc(t)||e.localDirtyFlag||(e.localDirtyFlag=!0,e.dirtyFlag||this.dirtyWorldTransform(t,e))}},{key:"dirtyWorldTransform",value:function(t,e){this.dirtifyWorldInternal(t,e),this.dirtyToRoot(t,!0)}},{key:"dirtifyWorldInternal",value:function(t,e){var n,r=this,i=!0===(null===(n=t.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n||null===(n=n.getConfig())||void 0===n||null===(n=n.future)||void 0===n?void 0:n.experimentalAttributeUpdateOptimization);e.dirtyFlag||(e.dirtyFlag=!0,t.dirty(!0,!0),i||t.childNodes.forEach((function(t){var e=t.transformable;r.dirtifyWorldInternal(t,e)})))}},{key:"dirtyToRoot",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t,i=!0===(null===(e=t.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e||null===(e=e.getConfig())||void 0===e||null===(e=e.future)||void 0===e?void 0:e.experimentalAttributeUpdateOptimization);while(r){var o,s;if(null===(o=(s=r).dirty)||void 0===o||o.call(s,!0,!0),i)break;r=r.parentNode}n&&t.forEach((function(t){var e;null===(e=t.dirty)||void 0===e||e.call(t,!0,!0)})),this.informDependentDisplayObjects(t),this.pendingEvents.set(t,n)}},{key:"dirtifyFragment",value:function(t){var e,n,r=t.transformable;r&&(r.dirtyFlag=!0,r.localDirtyFlag=!0),null===(e=(n=t).dirty)||void 0===e||e.call(n,!0,!0);for(var i=t.childNodes.length,o=0;o<i;o++)this.dirtifyFragment(t.childNodes[o]);t.nodeName===zr.FRAGMENT&&this.pendingEvents.set(t,!1)}},{key:"triggerPendingEvents",value:function(){var t,e,n=this,r=new Set,i=function(e,i){if(e.isConnected&&!r.has(e)&&e.nodeName!==zr.FRAGMENT){if(n.boundsChangedEvent.detail=i,n.boundsChangedEvent.target=e,e.isMutationObserved)e.dispatchEvent(n.boundsChangedEvent);else{var o;if(void 0===t)t=!0===(null===(o=e.ownerDocument.defaultView)||void 0===o||null===(o=o.getConfig())||void 0===o||null===(o=o.future)||void 0===o?void 0:o.experimentalCancelEventPropagation);e.ownerDocument.defaultView.dispatchEvent(n.boundsChangedEvent,!0,t)}r.add(e)}};this.pendingEvents.forEach((function(t,n){if(n.nodeName!==zr.FRAGMENT){var r;if(void 0===e)e=!0===(null===(r=n.ownerDocument)||void 0===r||null===(r=r.defaultView)||void 0===r||null===(r=r.getConfig())||void 0===r||null===(r=r.future)||void 0===r?void 0:r.experimentalAttributeUpdateOptimization);Ql.affectChildren=t,e?i(n,Ql):t?n.forEach((function(t){i(t,Ql)})):i(n,Ql)}})),r.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"updateDisplayObjectDependency",value:function(t,e,n,r){if(e&&e!==n){var i=this.displayObjectDependencyMap.get(e);if(i&&i[t]){var o=i[t].indexOf(r);i[t].splice(o,1)}}if(n){var s=this.displayObjectDependencyMap.get(n);s||(this.displayObjectDependencyMap.set(n,{}),s=this.displayObjectDependencyMap.get(n)),s[t]||(s[t]=[]),s[t].push(r)}}},{key:"informDependentDisplayObjects",value:function(t){var e,n=this,r=this.displayObjectDependencyMap.get(t);if(r){var i=null===(e=t.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e||null===(e=e.getConfig())||void 0===e||null===(e=e.future)||void 0===e?void 0:e.experimentalCancelEventPropagation;Object.keys(r).forEach((function(t){r[t].forEach((function(e){n.dirtyToRoot(e,!0),e.dispatchEvent(new Ll(_l.ATTR_MODIFIED,e,n,n,t,Ll.MODIFICATION,n,n),i,i),e.isCustomElement&&e.isConnected&&e.attributeChangedCallback&&e.attributeChangedCallback(t,n,n)}))}))}}}])}(),eu=function(){function t(e){if(h(this,t),e<=0)throw new Error("LRU capacity must be a positive number.");this.capacity=e,this.cache=new Map}return f(t,[{key:"get",value:function(t){if(this.cache.has(t)){var e=this.cache.get(t);return this.cache["delete"](t),this.cache.set(t,e),e}}},{key:"put",value:function(t,e){if(this.cache.has(t)&&this.cache["delete"](t),this.cache.set(t,e),this.cache.size>this.capacity){var n=this.cache.keys().next().value;this.cache["delete"](n)}}},{key:"len",value:function(){return this.cache.size}},{key:"clear",value:function(){this.cache.clear()}}])}(),nu={MetricsString:"|ÉqÅ",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},ru=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,iu=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,ou=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,su=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,au=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,cu=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,lu=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,uu=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,hu=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,du=new RegExp("".concat(iu.source,"|").concat(su.source,"|").concat(cu.source,"|").concat(uu.source)),fu=new RegExp("".concat(ou.source,"|").concat(au.source,"|").concat(lu.source,"|").concat(hu.source)),pu=function(){function t(e){var n=this;h(this,t),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(t,e){return!n.isBreakingSpace(e)&&!(!t||!fu.exec(e)&&!du.exec(t))},this.trimByKinsokuShorui=function(t){var e=b(t),n=e[e.length-2];if(!n)return t;var r=n[n.length-1];return e[e.length-2]=n.slice(0,-1),e[e.length-1]=r+e[e.length-1],e},this.runtime=e,this.charWidthCache=new eu(100)}return f(t,[{key:"measureFont",value:function(t,e){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var n={ascent:0,descent:0,fontSize:0},r=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(e),i=this.runtime.offscreenCanvasCreator.getOrCreateContext(e,{willReadFrequently:!0});i.font=t;var o=nu.MetricsString+nu.BaselineSymbol,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(nu.BaselineSymbol).width),c=nu.HeightMultiplier*a;a=a*nu.BaselineMultiplier|0,r.width=s,r.height=c,i.fillStyle="#f00",i.fillRect(0,0,s,c),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);var l=i.getImageData(0,0,s||1,c||1).data,u=l.length,h=4*s,d=0,f=0,p=!1;for(d=0;d<a;++d){for(var g=0;g<h;g+=4)if(255!==l[f+g]){p=!0;break}if(p)break;f+=h}for(n.ascent=a-d,f=u-h,p=!1,d=c;d>a;--d){for(var v=0;v<h;v+=4)if(255!==l[f+v]){p=!0;break}if(p)break;f-=h}return n.descent=d-a,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[t]=n,n}},{key:"measureText",value:function(t,e,n){var r=e.fontSize,i=void 0===r?16:r,o=e.wordWrap,s=void 0!==o&&o,a=e.lineHeight,c=e.lineWidth,l=void 0===c?1:c,u=e.textBaseline,h=void 0===u?"alphabetic":u,d=e.textAlign,f=void 0===d?"start":d,p=e.letterSpacing,g=void 0===p?0:p,v=e.textPath;e.textPathSide,e.textPathStartOffset;var y=e.leading,m=void 0===y?0:y,b=Kc(e),x=this.measureFont(b,n);0===x.fontSize&&(x.fontSize=i,x.ascent=i);var w=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);w.font=b,e.isOverflowing=!1;var E=s?this.wordWrap(t,e,n):t,k=E.split(/(?:\r\n|\r|\n)/),S=new Array(k.length),M=0;if(!v){for(var O=0;O<k.length;O++){var N=w.measureText(k[O]).width+(k[O].length-1)*g;S[O]=N,M=Math.max(M,N)}var T=M+l,A=a||x.fontSize+l,C=Math.max(A,x.fontSize+l)+(k.length-1)*(A+m);A+=m;var P=0;return"middle"===h?P=-C/2:"bottom"===h||"alphabetic"===h||"ideographic"===h?P=-C:"top"!==h&&"hanging"!==h||(P=0),{font:b,width:T,height:C,lines:k,lineWidths:S,lineHeight:A,maxLineWidth:M,fontProperties:x,lineMetrics:S.map((function(t,e){var n=0;return"center"===f||"middle"===f?n-=t/2:"right"!==f&&"end"!==f||(n-=t),new ei(n-l/2,P+e*A,t+l,A)}))}}v.getTotalLength();for(var R=0;R<k.length;R++)w.measureText(k[R]).width,k[R].length}},{key:"wordWrap",value:function(t,e,n){var r=this,i=Array.from(t);if(0===i.length)return"";var o=this,s=e.wordWrapWidth,a=void 0===s?0:s,c=e.letterSpacing,l=void 0===c?0:c,u=e.maxLines,h=void 0===u?1/0:u,d=e.textOverflow,f=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),p=a+l,g="";"ellipsis"===d?g="...":d&&"clip"!==d&&(g=d);var v=[""],y=0,m=0,b=-1,x=Kc(e),w=this.charWidthCache.get(x);w||(w=new eu(500),this.charWidthCache.put(x,w));var E=function(t){return r.getFromCache(t,l,w,f)},k=E(g);function S(t,e,n,r){while(E(t)<r&&e<i.length-1){if(o.isNewline(i[e+1]))break;e+=1,t+=i[e]}while(E(t)>r&&e>=n)e-=1,t=t.slice(0,-1);return{lineTxt:t,txtLastCharIndex:e}}function M(t,e){if(!(k<=0||k>p))if(v[t]){var n=S(v[t],e,b+1,p-k);v[t]=n.lineTxt+g}else v[t]=g}for(var O=0;O<i.length;O++){var N=i[O],T=i[O-1],A=i[O+1],C=E(N);if(this.isNewline(N)){if(y+1>=h){O<i.length-1&&M(y,O-1),e.isOverflowing=!0;break}b=O-1,y+=1,m=0,v[y]=""}else{if(C>p){M(y,O-1),e.isOverflowing=!0;break}if(m>0&&m+C>p){var P=S(v[y],O-1,b+1,p);if(P.txtLastCharIndex!==O-1){if(v[y]=P.lineTxt,P.txtLastCharIndex===i.length-1)break;O=P.txtLastCharIndex+1,N=i[O],T=i[O-1],A=i[O+1],C=E(N)}if(y+1>=h){M(y,O-1),e.isOverflowing=!0;break}if(b=O-1,y+=1,m=0,v[y]="",this.isBreakingSpace(N))continue;this.canBreakInLastChar(N)||(v=this.trimToBreakable(v),m=this.sumTextWidthByCache(v[y]||"",E)),this.shouldBreakByKinsokuShorui(N,A)&&(v=this.trimByKinsokuShorui(v),m+=E(T||""))}m+=C,v[y]+=N}}return v.join("\n")}},{key:"isBreakingSpace",value:function(t){return"string"===typeof t&&nu.BreakingSpaces.indexOf(t.charCodeAt(0))>=0}},{key:"isNewline",value:function(t){return"string"===typeof t&&nu.Newlines.indexOf(t.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(t){var e=b(t),n=e[e.length-2],r=this.findBreakableIndex(n);if(-1===r||!n)return e;var i=n.slice(r,r+1),o=this.isBreakingSpace(i),s=r+1,a=r+(o?0:1);return e[e.length-1]+=n.slice(s,n.length),e[e.length-2]=n.slice(0,a),e}},{key:"canBreakInLastChar",value:function(t){return!t||!ru.test(t)}},{key:"sumTextWidthByCache",value:function(t,e){return t.split("").reduce((function(t,n){return t+e(n)}),0)}},{key:"findBreakableIndex",value:function(t){for(var e=t.length-1;e>=0;e--)if(!ru.test(t[e]))return e;return-1}},{key:"getFromCache",value:function(t,e,n,r){var i=n.get(t);if("number"!==typeof i){var o=t.length*e,s=r.measureText(t);i=s.width+o,n.put(t,i)}return i}},{key:"clearCache",value:function(){this.fontMetricsCache={},this.charWidthCache.clear()}}])}(),gu={},vu=function(t){var e=new gl,n=new pl;return t={},c(c(c(c(c(c(c(c(c(c(t,zr.FRAGMENT,null),zr.CIRCLE,new ul),zr.ELLIPSE,new hl),zr.RECT,e),zr.IMAGE,e),zr.GROUP,new yl),zr.LINE,new dl),zr.TEXT,new vl(gu)),zr.POLYLINE,n),zr.POLYGON,n),c(c(c(t,zr.PATH,new fl),zr.HTML,new ml),zr.MESH,null)}(),yu=function(t){var e=new Xa,n=new Ja;return t={},c(c(c(c(c(c(c(c(c(c(t,Wi.PERCENTAGE,null),Wi.NUMBER,new nc),Wi.ANGLE,new Ya),Wi.DEFINED_PATH,new qa),Wi.PAINT,e),Wi.COLOR,e),Wi.FILTER,new Ka),Wi.LENGTH,n),Wi.LENGTH_PERCENTAGE,n),Wi.LENGTH_PERCENTAGE_12,new Qa),c(c(c(c(c(c(c(c(c(c(t,Wi.LENGTH_PERCENTAGE_14,new tc),Wi.COORDINATE,new Ja),Wi.OFFSET_DISTANCE,new rc),Wi.OPACITY_VALUE,new ic),Wi.PATH,new oc),Wi.LIST_OF_POINTS,new sc),Wi.SHADOW_BLUR,new ac),Wi.TEXT,new cc),Wi.TEXT_TRANSFORM,new lc),Wi.TRANSFORM,new al),c(c(c(t,Wi.TRANSFORM_ORIGIN,new cl),Wi.Z_INDEX,new ll),Wi.MARKER,new ec)}(),mu=function(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}};gu.CameraContribution=Li,gu.AnimationTimeline=null,gu.EasingFunction=null,gu.offscreenCanvasCreator=new Tl,gu.sceneGraphSelector=new Rl,gu.sceneGraphService=new tu(gu),gu.textService=new pu(gu),gu.geometryUpdaterFactory=vu,gu.CSSPropertySyntaxFactory=yu,gu.styleValueRegistry=new Ua(gu),gu.layoutRegistry=null,gu.globalThis=mu(),gu.enableStyleSyntax=!0,gu.enableSizeAttenuation=!1;var bu=0;var xu=new Ll(_l.INSERTED,null,"","","",0,"",""),wu=new Ll(_l.REMOVED,null,"","","",0,"",""),Eu=new kl(_l.DESTROY),ku=function(t){function e(){var t;h(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=S(this,e,[].concat(r)),t.entity=bu++,t.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},t.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},t.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},t.cullable={strategy:Di.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},t.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},t.rBushNode={aabb:void 0},t.namespaceURI="g",t.scrollLeft=0,t.scrollTop=0,t.clientTop=0,t.clientLeft=0,t.style={},t.computedStyle={},t.parsedStyle={},t.attributes={},t}return O(e,t),f(e,[{key:"dirty",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.renderable.dirty=t,e&&(this.renderable.boundsDirty=t,this.renderable.renderBoundsDirty=t)}},{key:"className",get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)}},{key:"classList",get:function(){return this.className.split(" ").filter((function(t){return""!==t}))}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t-1]||null}return null}},{key:"cloneNode",value:function(t){throw new Error(ni)}},{key:"appendChild",value:function(t,e){var n;if(t.destroyed)throw new Error(ii);return gu.sceneGraphService.attach(t,this,e),null!==(n=this.ownerDocument)&&void 0!==n&&n.defaultView&&(Mc(this)||t.nodeName!==zr.FRAGMENT?this.ownerDocument.defaultView.mountChildren(t):this.ownerDocument.defaultView.mountFragment(t)),this.isMutationObserved&&(xu.relatedNode=this,t.dispatchEvent(xu)),t}},{key:"insertBefore",value:function(t,e){if(e){t.parentElement&&t.parentElement.removeChild(t);var n=this.childNodes.indexOf(e);-1===n?this.appendChild(t):this.appendChild(t,n)}else this.appendChild(t);return t}},{key:"replaceChild",value:function(t,e){var n=this.childNodes.indexOf(e);return this.removeChild(e),this.appendChild(t,n),e}},{key:"removeChild",value:function(t){var e,n,r=!0===(null===(e=this.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e||null===(e=e.getConfig().future)||void 0===e?void 0:e.experimentalCancelEventPropagation);return wu.relatedNode=this,t.dispatchEvent(wu,r,r),null!==(n=t.ownerDocument)&&void 0!==n&&n.defaultView&&t.ownerDocument.defaultView.unmountChildren(t),gu.sceneGraphService.detach(t),t}},{key:"removeChildren",value:function(){for(var t=this.childNodes.length-1;t>=0;t--){var e=this.childNodes[t];this.removeChild(e)}}},{key:"destroyChildren",value:function(){for(var t=this.childNodes.length-1;t>=0;t--){var e=this.childNodes[t];e.childNodes.length>0&&e.destroyChildren(),e.destroy()}}},{key:"matches",value:function(t){return gu.sceneGraphService.matches(t,this)}},{key:"getElementById",value:function(t){return gu.sceneGraphService.querySelector("#".concat(t),this)}},{key:"getElementsByName",value:function(t){return gu.sceneGraphService.querySelectorAll('[name="'.concat(t,'"]'),this)}},{key:"getElementsByClassName",value:function(t){return gu.sceneGraphService.querySelectorAll(".".concat(t),this)}},{key:"getElementsByTagName",value:function(t){return gu.sceneGraphService.querySelectorAll(t,this)}},{key:"querySelector",value:function(t){return gu.sceneGraphService.querySelector(t,this)}},{key:"querySelectorAll",value:function(t){return gu.sceneGraphService.querySelectorAll(t,this)}},{key:"closest",value:function(t){var e=this;do{if(gu.sceneGraphService.matches(t,e))return e;e=e.parentElement}while(null!==e);return null}},{key:"find",value:function(t){var e=this,n=null;return this.forEach((function(r){return r===e||!t(r)||(n=r,!1)})),n}},{key:"findAll",value:function(t){var e=this,n=[];return this.forEach((function(r){r!==e&&t(r)&&n.push(r)})),n}},{key:"after",value:function(){var t=this;if(this.parentNode){for(var e=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(n,r){var i;return null===(i=t.parentNode)||void 0===i?void 0:i.appendChild(n,e+r+1)}))}}},{key:"before",value:function(){if(this.parentNode){for(var t,e=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r[0],s=r.slice(1);this.parentNode.appendChild(o,e),(t=o).after.apply(t,b(s))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){return t.appendChild(e)}))}},{key:"prepend",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e,n){return t.appendChild(e,n)}))}},{key:"replaceChildren",value:function(){while(this.childNodes.length&&this.firstChild)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){var t,e=!0===(null===(t=this.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig().future)||void 0===t?void 0:t.experimentalCancelEventPropagation);this.destroyChildren(),this.dispatchEvent(Eu,e,e),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return gu.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return gu.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return gu.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return gu.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return gu.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(t){if("symbol"!==typeof t){var e=this.attributes[t];return e}}},{key:"hasAttribute",value:function(t){return this.getAttributeNames().includes(t)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(t){this.setAttribute(t,null),delete this.attributes[t]}},{key:"setAttribute",value:function(t,e,n,r){this.attributes[t]=e}},{key:"getAttributeNS",value:function(t,e){throw new Error(ni)}},{key:"getAttributeNode",value:function(t){throw new Error(ni)}},{key:"getAttributeNodeNS",value:function(t,e){throw new Error(ni)}},{key:"hasAttributeNS",value:function(t,e){throw new Error(ni)}},{key:"removeAttributeNS",value:function(t,e){throw new Error(ni)}},{key:"removeAttributeNode",value:function(t){throw new Error(ni)}},{key:"setAttributeNS",value:function(t,e,n){throw new Error(ni)}},{key:"setAttributeNode",value:function(t){throw new Error(ni)}},{key:"setAttributeNodeNS",value:function(t){throw new Error(ni)}},{key:"toggleAttribute",value:function(t,e){throw new Error(ni)}}])}(Ml);function Su(t){return!(null===t||void 0===t||!t.nodeName)}var Mu=gu.globalThis.Proxy?gu.globalThis.Proxy:function(){},Ou=new Ll(_l.ATTR_MODIFIED,null,null,null,null,Ll.MODIFICATION,null,null),Nu=D(),Tu=he(),Au=function(t){function e(t){var n;return h(this,e),n=S(this,e),n.isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=t,n.id=t.id||"",n.name=t.name||"",(t.className||t["class"])&&(n.className=t.className||t["class"]),n.nodeName=t.type||zr.GROUP,t.initialParsedStyle&&Object.assign(n.parsedStyle,t.initialParsedStyle),n.initAttributes(t.style),gu.enableStyleSyntax&&(n.style=new Mu({setProperty:function(t,e){n.setAttribute(t,e)},getPropertyValue:function(t){return n.getAttribute(t)},removeProperty:function(t){n.removeAttribute(t)},item:function(){return""}},{get:function(t,e){return void 0!==t[e]?t[e]:n.getAttribute(e)},set:function(t,e,r){return n.setAttribute(e,r),!0}})),n}return O(e,t),f(e,[{key:"destroy",value:function(){ar(e,"destroy",this,3)([]),this.getAnimations().forEach((function(t){t.cancel()}))}},{key:"cloneNode",value:function(t,e){var n=u({},this.attributes);for(var r in n){var i=n[r];Su(i)&&"clipPath"!==r&&"offsetPath"!==r&&"textPath"!==r&&(n[r]=i.cloneNode(t)),e&&(n[r]=e(r,i))}var o=new this.constructor(u(u({},this.config),{},{style:n}));return o.setLocalTransform(this.getLocalTransform()),t&&this.children.forEach((function(e){if(!e.style.isMarker){var n=e.cloneNode(t);o.appendChild(n)}})),o}},{key:"initAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={forceUpdateGeometry:!0};gu.styleValueRegistry.processProperties(this,t,e),this.dirty()}},{key:"setAttribute",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Kn(n)||(r||n!==this.attributes[t])&&(this.internalSetAttribute(t,n,{memoize:i}),ar(e,"setAttribute",this,3)([t,n]))}},{key:"internalSetAttribute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.attributes[t],i=this.parsedStyle[t];gu.styleValueRegistry.processProperties(this,c({},t,e),n),this.dirty();var o,s,a=this.parsedStyle[t];if(this.isConnected)if(Ou.relatedNode=this,Ou.prevValue=r,Ou.newValue=e,Ou.attrName=t,Ou.prevParsedValue=i,Ou.newParsedValue=a,this.isMutationObserved)this.dispatchEvent(Ou);else{var l,u=!0===(null===(l=this.ownerDocument.defaultView.getConfig().future)||void 0===l?void 0:l.experimentalCancelEventPropagation);Ou.target=this,this.ownerDocument.defaultView.dispatchEvent(Ou,!0,u)}(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&(null===(o=(s=this).attributeChangedCallback)||void 0===o||o.call(s,t,r,e,i,a))}},{key:"getBBox",value:function(){var t=this.getBounds(),e=t.getMin(),n=C(e,2),r=n[0],i=n[1],o=t.getMax(),s=C(o,2),a=s[0],c=s[1];return new ei(r,i,a-r,c-i)}},{key:"setOrigin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return gu.sceneGraphService.setOrigin(this,ai(t,e,n,!1)),this}},{key:"getOrigin",value:function(){return gu.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return gu.sceneGraphService.setPosition(this,ai(t,e,n,!1)),this}},{key:"setLocalPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return gu.sceneGraphService.setLocalPosition(this,ai(t,e,n,!1)),this}},{key:"translate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return gu.sceneGraphService.translate(this,ai(t,e,n,!1)),this}},{key:"translateLocal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return gu.sceneGraphService.translateLocal(this,ai(t,e,n,!1)),this}},{key:"getPosition",value:function(){return gu.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return gu.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(t,e,n){return this.scaleLocal(t,e,n)}},{key:"scaleLocal",value:function(t,e,n){return"number"===typeof t&&(e=e||t,n=n||t,t=ai(t,e,n,!1)),gu.sceneGraphService.scaleLocal(this,t),this}},{key:"setLocalScale",value:function(t,e,n){return"number"===typeof t&&(e=e||t,n=n||t,t=ai(t,e,n,!1)),gu.sceneGraphService.setLocalScale(this,t),this}},{key:"getLocalScale",value:function(){return gu.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return gu.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var t=vi(Nu,gu.sceneGraphService.getWorldTransform(this)),e=C(t,3),n=e[2];return hi(n)}},{key:"getLocalEulerAngles",value:function(){var t=vi(Nu,gu.sceneGraphService.getLocalRotation(this)),e=C(t,3),n=e[2];return hi(n)}},{key:"setEulerAngles",value:function(t){return gu.sceneGraphService.setEulerAngles(this,0,0,t),this}},{key:"setLocalEulerAngles",value:function(t){return gu.sceneGraphService.setLocalEulerAngles(this,0,0,t),this}},{key:"rotateLocal",value:function(t,e,n){return Pe(e)&&Pe(n)?gu.sceneGraphService.rotateLocal(this,0,0,t):gu.sceneGraphService.rotateLocal(this,t,e,n),this}},{key:"rotate",value:function(t,e,n){return Pe(e)&&Pe(n)?gu.sceneGraphService.rotate(this,0,0,t):gu.sceneGraphService.rotate(this,t,e,n),this}},{key:"setRotation",value:function(t,e,n,r){return gu.sceneGraphService.setRotation(this,t,e,n,r),this}},{key:"setLocalRotation",value:function(t,e,n,r){return gu.sceneGraphService.setLocalRotation(this,t,e,n,r),this}},{key:"setLocalSkew",value:function(t,e){return gu.sceneGraphService.setLocalSkew(this,t,e),this}},{key:"getRotation",value:function(){return gu.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return gu.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return gu.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return gu.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return gu.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(t){return gu.sceneGraphService.setLocalTransform(this,t),this}},{key:"resetLocalTransform",value:function(){gu.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(t,e){var n,r=null===(n=this.ownerDocument)||void 0===n?void 0:n.timeline;return r?r.play(this,t,e):null}},{key:"isVisible",value:function(){var t;return"hidden"!==(null===(t=this.parsedStyle)||void 0===t?void 0:t.visibility)}},{key:"interactive",get:function(){return this.isInteractive()},set:function(t){this.style.pointerEvents=t?"auto":"none"}},{key:"isInteractive",value:function(){var t;return"none"!==(null===(t=this.parsedStyle)||void 0===t?void 0:t.pointerEvents)}},{key:"isCulled",value:function(){return!(!this.cullable||!this.cullable.enable||this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,b(this.parentNode.children.map((function(t){return Number(t.style.zIndex)}))))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,b(this.parentNode.children.map((function(t){return Number(t.style.zIndex)}))))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1];return i?rr(i)?(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),this):2===n.length?(this.setAttribute(i,o),this):this.attributes[i]:this.attributes}},{key:"getMatrix",value:function(t){var e=t||this.getWorldTransform(),n=It(Nu,e),r=C(n,2),i=r[0],o=r[1],s=jt(Nu,e),a=C(s,2),c=a[0],l=a[1],u=Ft(Tu,e),h=vi(Nu,u),d=C(h,3),f=d[0],p=d[2];return yi(f||p,i,o,c,l)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(t){var e=bi(t),n=C(e,5),r=n[0],i=n[1],o=n[2],s=n[3],a=n[4];this.setEulerAngles(a).setPosition(r,i).setLocalScale(o,s)}},{key:"setLocalMatrix",value:function(t){var e=bi(t),n=C(e,5),r=n[0],i=n[1],o=n[2],s=n[3],a=n[4];this.setLocalEulerAngles(a).setLocalPosition(r,i).setLocalScale(o,s)}},{key:"show",value:function(){this.forEach((function(t){t.style.visibility="visible"}))}},{key:"hide",value:function(){this.forEach((function(t){t.style.visibility="hidden"}))}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(t){return this.children[t]||null}},{key:"add",value:function(t,e){return this.appendChild(t,e)}},{key:"set",value:function(t,e){this.config[t]=e}},{key:"get",value:function(t){return this.config[t]}},{key:"moveTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(t,e,n),this}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(t,e,n),this}},{key:"setZIndex",value:function(t){return this.style.zIndex=t,this}}])}(ku);Au.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var Cu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,e),S(this,e,[u({type:zr.CIRCLE},t)])}return O(e,t),f(e)}(Au);Cu.PARSED_STYLE_LIST=new Set([].concat(b(Au.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var Pu=["style"],Ru=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=jr(n,Pu);return h(this,e),t=S(this,e,[u({style:r},i)]),t.isCustomElement=!0,t}return O(e,t),f(e)}(Au);Ru.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var _u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,e),S(this,e,[u({type:zr.ELLIPSE},t)])}return O(e,t),f(e)}(Au);_u.PARSED_STYLE_LIST=new Set([].concat(b(Au.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"]));var Lu=function(t){function e(){return h(this,e),S(this,e,[{type:zr.FRAGMENT}])}return O(e,t),f(e)}(Au);Lu.PARSED_STYLE_LIST=new Set(["class","className"]);var Du=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,e),S(this,e,[u({type:zr.GROUP},t)])}return O(e,t),f(e)}(Au);Du.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var Iu=["style"],ju=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=jr(n,Iu);return h(this,e),t=S(this,e,[u({type:zr.HTML,style:r},i)]),t.cullable.enable=!1,t}return O(e,t),f(e,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var t=mt(ht(),this.parentNode.getWorldTransform()),e=this.getBounds();if(!Kr.isEmpty(e)){var n=new Kr;return n.setFromTransformedAABB(e,t),n}}return this.getBounds()}}])}(Au);ju.PARSED_STYLE_LIST=new Set([].concat(b(Au.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var Fu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,e),S(this,e,[u({type:zr.IMAGE},t)])}return O(e,t),f(e)}(Au);Fu.PARSED_STYLE_LIST=new Set([].concat(b(Au.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var Bu=["style"],zu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=jr(n,Bu);h(this,e),t=S(this,e,[u({type:zr.LINE,style:u({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},r)},i)]),t.markerStartAngle=0,t.markerEndAngle=0;var o=t.parsedStyle,s=o.markerStart,a=o.markerEnd;return s&&Su(s)&&(t.markerStartAngle=s.getLocalEulerAngles(),t.appendChild(s)),a&&Su(a)&&(t.markerEndAngle=a.getLocalEulerAngles(),t.appendChild(a)),t.transformMarker(!0),t.transformMarker(!1),t}return O(e,t),f(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"x1"===t||"y1"===t||"x2"===t||"y2"===t||"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&Su(r)&&(this.markerStartAngle=0,r.remove()),i&&Su(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t&&(r&&Su(r)&&(this.markerEndAngle=0,r.remove()),i&&Su(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)))}},{key:"transformMarker",value:function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,o=e.markerEndOffset,s=e.x1,a=e.x2,c=e.y1,l=e.y2,u=t?n:r;if(u&&Su(u)){var h,d,f,p,g,v,y=0;t?(f=s,p=c,h=a-s,d=l-c,g=i||0,v=this.markerStartAngle):(f=a,p=l,h=s-a,d=c-l,g=o||0,v=this.markerEndAngle),y=Math.atan2(d,h),u.setLocalEulerAngles(180*y/Math.PI+v),u.setLocalPosition(f+Math.cos(y)*g,p+Math.sin(y)*g)}}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle,r=n.x1,i=n.y1,o=n.x2,s=n.y2,a=mr(r,i,o,s,t),c=a.x,l=a.y,u=J(D(),F(c,l,0),e?this.getWorldTransform():this.getLocalTransform());return new ti(u[0],u[1])}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(t/this.getTotalLength(),e)}},{key:"getTotalLength",value:function(){var t=this.parsedStyle,e=t.x1,n=t.y1,r=t.x2,i=t.y2;return yr(e,n,r,i)}}])}(Au);zu.PARSED_STYLE_LIST=new Set([].concat(b(Au.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var Gu=["style"],Vu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=jr(n,Gu);h(this,e),t=S(this,e,[u({type:zr.PATH,style:r,initialParsedStyle:{miterLimit:4,d:u({},Vi)}},i)]),t.markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var o=t.parsedStyle,s=o.markerStart,a=o.markerEnd,c=o.markerMid;return s&&Su(s)&&(t.markerStartAngle=s.getLocalEulerAngles(),t.appendChild(s)),c&&Su(c)&&t.placeMarkerMid(c),a&&Su(a)&&(t.markerEndAngle=a.getLocalEulerAngles(),t.appendChild(a)),t.transformMarker(!0),t.transformMarker(!1),t}return O(e,t),f(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"d"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&Su(r)&&(this.markerStartAngle=0,r.remove()),i&&Su(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&Su(r)&&(this.markerEndAngle=0,r.remove()),i&&Su(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)}},{key:"transformMarker",value:function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,o=e.markerEndOffset,s=t?n:r;if(s&&Su(s)){var a,c,l,u,h,d,f=0;if(t){var p=this.getStartTangent(),g=C(p,2),v=g[0],y=g[1];l=y[0],u=y[1],a=v[0]-y[0],c=v[1]-y[1],h=i||0,d=this.markerStartAngle}else{var m=this.getEndTangent(),b=C(m,2),x=b[0],w=b[1];l=w[0],u=w[1],a=x[0]-w[0],c=x[1]-w[1],h=o||0,d=this.markerEndAngle}f=Math.atan2(c,a),s.setLocalEulerAngles(180*f/Math.PI+d),s.setLocalPosition(l+Math.cos(f)*h,u+Math.sin(f)*h)}}},{key:"placeMarkerMid",value:function(t){var e=this.parsedStyle.d.segments;if(this.markerMidList.forEach((function(t){t.remove()})),t&&Su(t))for(var n=1;n<e.length-1;n++){var r=C(e[n].currentPoint,2),i=r[0],o=r[1],s=1===n?t:t.cloneNode(!0);this.markerMidList.push(s),this.appendChild(s),s.setLocalPosition(i,o)}}},{key:"getTotalLength",value:function(){return Xs(this)}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.d.absolutePath,r=ir(n,t),i=r.x,o=r.y,s=J(D(),F(i,o,0),e?this.getWorldTransform():this.getLocalTransform());return new ti(s[0],s[1])}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPointAtLength(t*Xs(this),e)}},{key:"getStartTangent",value:function(){var t=this.parsedStyle.d.segments,e=[];if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e}},{key:"getEndTangent",value:function(){var t=this.parsedStyle.d.segments,e=t.length,n=[];if(e>1){var r=t[e-2].currentPoint,i=t[e-1].currentPoint,o=t[e-1].endTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([r[0],r[1]]),n.push([i[0],i[1]]))}return n}}])}(Au);Vu.PARSED_STYLE_LIST=new Set([].concat(b(Au.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var Wu=["style"],Uu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=jr(n,Wu);h(this,e),t=S(this,e,[u({type:zr.POLYGON,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},i)]),t.markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var o=t.parsedStyle,s=o.markerStart,a=o.markerEnd,c=o.markerMid;return s&&Su(s)&&(t.markerStartAngle=s.getLocalEulerAngles(),t.appendChild(s)),c&&Su(c)&&t.placeMarkerMid(c),a&&Su(a)&&(t.markerEndAngle=a.getLocalEulerAngles(),t.appendChild(a)),t.transformMarker(!0),t.transformMarker(!1),t}return O(e,t),f(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"points"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&Su(r)&&(this.markerStartAngle=0,r.remove()),i&&Su(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&Su(r)&&(this.markerEndAngle=0,r.remove()),i&&Su(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)}},{key:"transformMarker",value:function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,o=e.markerEndOffset,s=e.points,a=s||{},c=a.points,l=t?n:r;if(l&&Su(l)&&c){var u,h,d,f,p,g,v=0;if(d=c[0][0],f=c[0][1],t)u=c[1][0]-c[0][0],h=c[1][1]-c[0][1],p=i||0,g=this.markerStartAngle;else{var y=c.length;this.parsedStyle.isClosed?(u=c[y-1][0]-c[0][0],h=c[y-1][1]-c[0][1]):(d=c[y-1][0],f=c[y-1][1],u=c[y-2][0]-c[y-1][0],h=c[y-2][1]-c[y-1][1]),p=o||0,g=this.markerEndAngle}v=Math.atan2(h,u),l.setLocalEulerAngles(180*v/Math.PI+g),l.setLocalPosition(d+Math.cos(v)*p,f+Math.sin(v)*p)}}},{key:"placeMarkerMid",value:function(t){var e=this.parsedStyle.points,n=e||{},r=n.points;if(this.markerMidList.forEach((function(t){t.remove()})),this.markerMidList=[],t&&Su(t)&&r)for(var i=1;i<(this.parsedStyle.isClosed?r.length:r.length-1);i++){var o=r[i][0],s=r[i][1],a=1===i?t:t.cloneNode(!0);this.markerMidList.push(a),this.appendChild(a),a.setLocalPosition(o,s)}}}])}(Au);Uu.PARSED_STYLE_LIST=new Set([].concat(b(Au.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var Hu=["style"],$u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.style,r=jr(t,Hu);return h(this,e),S(this,e,[u({type:zr.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},r)])}return O(e,t),f(e,[{key:"getTotalLength",value:function(){return Ks(this)}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(t/this.getTotalLength(),e)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.points.points;if(0===this.parsedStyle.points.segments.length){var r,i,o=[],s=0,a=this.getTotalLength();n.forEach((function(t,e){n[e+1]&&(r=[0,0],r[0]=s/a,i=yr(t[0],t[1],n[e+1][0],n[e+1][1]),s+=i,r[1]=s/a,o.push(r))})),this.parsedStyle.points.segments=o}var c=0,l=0;this.parsedStyle.points.segments.forEach((function(e,n){t>=e[0]&&t<=e[1]&&(c=(t-e[0])/(e[1]-e[0]),l=n)}));var u=mr(n[l][0],n[l][1],n[l+1][0],n[l+1][1],c),h=u.x,d=u.y,f=J(D(),F(h,d,0),e?this.getWorldTransform():this.getLocalTransform());return new ti(f[0],f[1])}},{key:"getStartTangent",value:function(){var t=this.parsedStyle.points.points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e}},{key:"getEndTangent",value:function(){var t=this.parsedStyle.points.points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n}}])}(Uu);$u.PARSED_STYLE_LIST=new Set([].concat(b(Uu.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var Yu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,e),S(this,e,[u({type:zr.RECT},t)])}return O(e,t),f(e)}(Au);Yu.PARSED_STYLE_LIST=new Set([].concat(b(Au.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var qu=["style"],Xu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.style,r=jr(t,qu);return h(this,e),S(this,e,[u({type:zr.TEXT,style:u({fill:"black"},n)},r)])}return O(e,t),f(e,[{key:"getComputedTextLength",value:function(){var t;return this.getGeometryBounds(),(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var t;return this.getGeometryBounds(),(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(Au);Xu.PARSED_STYLE_LIST=new Set([].concat(b(Au.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var Ku=function(){function t(){h(this,t),this.registry={},this.define(zr.CIRCLE,Cu),this.define(zr.ELLIPSE,_u),this.define(zr.RECT,Yu),this.define(zr.IMAGE,Fu),this.define(zr.LINE,zu),this.define(zr.GROUP,Du),this.define(zr.PATH,Vu),this.define(zr.POLYGON,Uu),this.define(zr.POLYLINE,$u),this.define(zr.TEXT,Xu),this.define(zr.HTML,ju)}return f(t,[{key:"define",value:function(t,e){this.registry[t]=e}},{key:"get",value:function(t){return this.registry[t]}}])}(),Zu=function(t){function e(){var t;h(this,e),t=S(this,e),t.defaultView=null,t.ownerDocument=null,t.nodeName="document";try{t.timeline=new gu.AnimationTimeline(t)}catch(r){}var n={};return Ga.forEach((function(t){var e=t.n,r=t.inh,i=t.d;r&&i&&(n[e]=nr(i)?i(zr.GROUP):i)})),t.documentElement=new Du({id:"g-root",style:n}),t.documentElement.ownerDocument=t,t.documentElement.parentNode=t,t.childNodes=[t.documentElement],t}return O(e,t),f(e,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(t,e){if("svg"===t)return this.documentElement;var n=this.defaultView.customElements.get(t);n||(console.warn("Unsupported tagName: ",t),n="tspan"===t?Xu:Du);var r=new n(e);return r.ownerDocument=this,r}},{key:"createElementNS",value:function(t,e,n){return this.createElement(e,n)}},{key:"cloneNode",value:function(t){throw new Error(ni)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(t){}}},{key:"elementsFromBBox",value:function(t,e,n,r){var i=this.defaultView.context.rBushRoot,o=i.search({minX:t,minY:e,maxX:n,maxY:r}),s=[];return o.forEach((function(t){var e=t.displayObject,n=e.parsedStyle.pointerEvents,r=void 0===n?"auto":n,i=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(r);(!i||i&&e.isVisible())&&!e.isCulled()&&e.isInteractive()&&s.push(e)})),s.sort((function(t,e){return e.sortable.renderOrder-t.sortable.renderOrder})),s}},{key:"elementFromPointSync",value:function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,o=this.defaultView.getConfig(),s=o.width,a=o.height;if(r<0||i<0||r>s||i>a)return null;var c=this.defaultView.viewport2Client({x:r,y:i}),l=c.x,u=c.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:l,clientY:u},picked:[]}),d=h.picked;return d&&d[0]||this.documentElement}},{key:"elementFromPoint",value:function(){var t=Lr(Rr().mark((function t(e,n){var r,i,o,s,a,c,l,u,h,d,f;return Rr().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=this.defaultView.canvas2Viewport({x:e,y:n}),i=r.x,o=r.y,s=this.defaultView.getConfig(),a=s.width,c=s.height,!(i<0||o<0||i>a||o>c)){t.next=1;break}return t.abrupt("return",null);case 1:return l=this.defaultView.viewport2Client({x:i,y:o}),u=l.x,h=l.y,t.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:e,y:n,viewportX:i,viewportY:o,clientX:u,clientY:h},picked:[]});case 2:return d=t.sent,f=d.picked,t.abrupt("return",f&&f[0]||this.documentElement);case 3:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"elementsFromPointSync",value:function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,o=this.defaultView.getConfig(),s=o.width,a=o.height;if(r<0||i<0||r>s||i>a)return[];var c=this.defaultView.viewport2Client({x:r,y:i}),l=c.x,u=c.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:l,clientY:u},picked:[]}),d=h.picked;return d[d.length-1]!==this.documentElement&&d.push(this.documentElement),d}},{key:"elementsFromPoint",value:function(){var t=Lr(Rr().mark((function t(e,n){var r,i,o,s,a,c,l,u,h,d,f;return Rr().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=this.defaultView.canvas2Viewport({x:e,y:n}),i=r.x,o=r.y,s=this.defaultView.getConfig(),a=s.width,c=s.height,!(i<0||o<0||i>a||o>c)){t.next=1;break}return t.abrupt("return",[]);case 1:return l=this.defaultView.viewport2Client({x:i,y:o}),u=l.x,h=l.y,t.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:e,y:n,viewportX:i,viewportY:o,clientX:u,clientY:h},picked:[]});case 2:return d=t.sent,f=d.picked,f[f.length-1]!==this.documentElement&&f.push(this.documentElement),t.abrupt("return",f);case 3:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"appendChild",value:function(t,e){throw new Error(ri)}},{key:"insertBefore",value:function(t,e){throw new Error(ri)}},{key:"removeChild",value:function(t,e){throw new Error(ri)}},{key:"replaceChild",value:function(t,e,n){throw new Error(ri)}},{key:"append",value:function(){throw new Error(ri)}},{key:"prepend",value:function(){throw new Error(ri)}},{key:"getElementById",value:function(t){return this.documentElement.getElementById(t)}},{key:"getElementsByName",value:function(t){return this.documentElement.getElementsByName(t)}},{key:"getElementsByTagName",value:function(t){return this.documentElement.getElementsByTagName(t)}},{key:"getElementsByClassName",value:function(t){return this.documentElement.getElementsByClassName(t)}},{key:"querySelector",value:function(t){return this.documentElement.querySelector(t)}},{key:"querySelectorAll",value:function(t){return this.documentElement.querySelectorAll(t)}},{key:"find",value:function(t){return this.documentElement.find(t)}},{key:"findAll",value:function(t){return this.documentElement.findAll(t)}}])}(Ml),Ju=function(){function t(e){h(this,t),this.strategies=e}return f(t,[{key:"apply",value:function(e){var n=e.config,r=e.camera,i=e.renderingService,o=e.renderingContext,s=this.strategies;i.hooks.cull.tap(t.tag,(function(t){if(t){var e,i=t.cullable;if(0===s.length?i.visible=o.unculledEntities.indexOf(t.entity)>-1:i.visible=s.every((function(e){return e.isVisible(r,t)})),!t.isCulled()&&t.isVisible())return t;var a=!0===(null===(e=n.future)||void 0===e?void 0:e.experimentalCancelEventPropagation);return t.dispatchEvent(new kl(_l.CULLED),a,a),null}return t})),i.hooks.afterRender.tap(t.tag,(function(t){t.cullable.visibilityPlaneMask=-1}))}}])}();Ju.tag="Culling";var Qu=function(){function t(){var e=this;h(this,t),this.autoPreventDefault=!1,this.rootPointerEvent=new wl(null),this.rootWheelEvent=new El(null),this.onPointerMove=function(t){var n,r=null===(n=e.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView;if(!r.supportsTouchEvents||"touch"!==t.pointerType){var i,o=e.normalizeToPointerEvent(t,r),s=Dr(o);try{for(s.s();!(i=s.n()).done;){var a=i.value,c=e.bootstrapEvent(e.rootPointerEvent,a,r,t);e.context.eventService.mapEvent(c)}}catch(l){s.e(l)}finally{s.f()}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(t){var n,r,i=null===(n=e.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView,o=e.normalizeToPointerEvent(t,i),s=Dr(o);try{for(s.s();!(r=s.n()).done;){var a=r.value,c=e.bootstrapEvent(e.rootPointerEvent,a,i,t);e.context.eventService.mapEvent(c)}}catch(l){s.e(l)}finally{s.f()}e.setCursor(e.context.eventService.cursor)}}return f(t,[{key:"apply",value:function(e){var n=this;this.context=e;var r=e.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler((function(t){var e=n.context.renderingService.hooks.pickSync.call({position:t,picked:[],topmost:!0}),r=e.picked;return r[0]||null})),r.hooks.pointerWheel.tap(t.tag,(function(t){var e=n.normalizeWheelEvent(t);n.context.eventService.mapEvent(e)})),r.hooks.pointerDown.tap(t.tag,(function(t){if(!i.supportsTouchEvents||"touch"!==t.pointerType){var e=n.normalizeToPointerEvent(t,i);if(n.autoPreventDefault&&e[0].isNormalized){var r=t.cancelable||!("cancelable"in t);r&&t.preventDefault()}var o,s=Dr(e);try{for(s.s();!(o=s.n()).done;){var a=o.value,c=n.bootstrapEvent(n.rootPointerEvent,a,i,t);n.context.eventService.mapEvent(c)}}catch(l){s.e(l)}finally{s.f()}n.setCursor(n.context.eventService.cursor)}})),r.hooks.pointerUp.tap(t.tag,(function(t){if(!i.supportsTouchEvents||"touch"!==t.pointerType){var e,r=n.context.contextService.getDomElement(),o=n.context.eventService.isNativeEventFromCanvas(r,t),s=o?"":"outside",a=n.normalizeToPointerEvent(t,i),c=Dr(a);try{for(c.s();!(e=c.n()).done;){var l=e.value,u=n.bootstrapEvent(n.rootPointerEvent,l,i,t);u.type+=s,n.context.eventService.mapEvent(u)}}catch(h){c.e(h)}finally{c.f()}n.setCursor(n.context.eventService.cursor)}})),r.hooks.pointerMove.tap(t.tag,this.onPointerMove),r.hooks.pointerOver.tap(t.tag,this.onPointerMove),r.hooks.pointerOut.tap(t.tag,this.onPointerMove),r.hooks.click.tap(t.tag,this.onClick),r.hooks.pointerCancel.tap(t.tag,(function(t){var e,r=n.normalizeToPointerEvent(t,i),o=Dr(r);try{for(o.s();!(e=o.n()).done;){var s=e.value,a=n.bootstrapEvent(n.rootPointerEvent,s,i,t);n.context.eventService.mapEvent(a)}}catch(c){o.e(c)}finally{o.f()}n.setCursor(n.context.eventService.cursor)}))}},{key:"bootstrapEvent",value:function(t,e,n,r){t.view=n,t.originalEvent=null,t.nativeEvent=r,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);var i=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),o=i.x,s=i.y;t.viewport.x=o,t.viewport.y=s;var a=this.context.eventService.viewport2Canvas(t.viewport),c=a.x,l=a.y;return t.canvas.x=c,t.canvas.y=l,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=r.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=kc[t.type]||t.type),t}},{key:"normalizeWheelEvent",value:function(t){var e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;var n=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),r=n.x,i=n.y;e.viewport.x=r,e.viewport.y=i;var o=this.context.eventService.viewport2Canvas(e.viewport),s=o.x,a=o.y;return e.canvas.x=s,e.canvas.y=a,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.nativeEvent=t,e.type=t.type,e}},{key:"transferMouseData",value:function(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=Sc.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null}},{key:"setCursor",value:function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(t,e){var n=[];if(e.isTouchEvent(t))for(var r=0;r<t.changedTouches.length;r++){var i=t.changedTouches[r];Kn(i.button)&&(i.button=0),Kn(i.buttons)&&(i.buttons=1),Kn(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),Kn(i.width)&&(i.width=i.radiusX||1),Kn(i.height)&&(i.height=i.radiusY||1),Kn(i.tiltX)&&(i.tiltX=0),Kn(i.tiltY)&&(i.tiltY=0),Kn(i.pointerType)&&(i.pointerType="touch"),Kn(i.pointerId)&&(i.pointerId=i.identifier||0),Kn(i.pressure)&&(i.pressure=i.force||.5),Kn(i.twist)&&(i.twist=0),Kn(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,n.push(i)}else if(e.isMouseEvent(t)){var o=t;Kn(o.isPrimary)&&(o.isPrimary=!0),Kn(o.width)&&(o.width=1),Kn(o.height)&&(o.height=1),Kn(o.tiltX)&&(o.tiltX=0),Kn(o.tiltY)&&(o.tiltY=0),Kn(o.pointerType)&&(o.pointerType="mouse"),Kn(o.pointerId)&&(o.pointerId=Ec),Kn(o.pressure)&&(o.pressure=.5),Kn(o.twist)&&(o.twist=0),Kn(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,n.push(o)}else n.push(t);return n}}])}();Qu.tag="Event";var th=[zr.CIRCLE,zr.ELLIPSE,zr.IMAGE,zr.RECT,zr.LINE,zr.POLYLINE,zr.POLYGON,zr.TEXT,zr.PATH,zr.HTML],eh=function(){function t(){h(this,t)}return f(t,[{key:"isVisible",value:function(t,e){var n,r=e.cullable;if(!r.enable)return!0;var i=e.getRenderBounds();if(Kr.isEmpty(i))return!1;var o=t.getFrustum(),s=null===(n=e.parentNode)||void 0===n||null===(n=n.cullable)||void 0===n?void 0:n.visibilityPlaneMask;return r.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(e,i,s||Jr.INDETERMINATE,o.planes),r.visible=r.visibilityPlaneMask!==Jr.OUTSIDE,r.visible}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n,r){if(n===Jr.OUTSIDE||n===Jr.INSIDE)return n;for(var i=Jr.INSIDE,o=th.indexOf(t.nodeName)>-1,s=0,a=r.length;s<a;++s){var c=1<<s;if(0!==(n&c)&&(!o||4!==s&&5!==s)){var l=r[s],u=l.normal,h=l.distance;if(X(u,e.getPositiveFarPoint(r[s]))+h<0)return Jr.OUTSIDE;X(u,e.getNegativeFarPoint(r[s]))+h<0&&(i|=c)}}return i}}])}(),nh=function(){function t(){h(this,t),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return f(t,[{key:"apply",value:function(e){var n,r,i=this,o=e.config,s=e.renderingService,a=e.renderingContext,c=e.rBushRoot,l=a.root.ownerDocument.defaultView;this.rBush=c;var u=function(t){s.dirtify()},h=function(t){i.syncTasks.set(t.target,t.detail.affectChildren),s.dirtify()},d=function(t){var e=t.target;gu.enableSizeAttenuation&&gu.styleValueRegistry.updateSizeAttenuation(e,l.getCamera().getZoom())},f=function(t){var e=t.target,n=e.rBushNode;null!==n&&void 0!==n&&n.aabb&&i.rBush.remove(n.aabb),i.syncTasks["delete"](e),gu.sceneGraphService.dirtyToRoot(e),s.dirtify()};s.hooks.init.tap(t.tag,(function(){l.addEventListener(_l.MOUNTED,d),l.addEventListener(_l.UNMOUNTED,f),l.addEventListener(_l.ATTR_MODIFIED,u),l.addEventListener(_l.BOUNDS_CHANGED,h)})),s.hooks.destroy.tap(t.tag,(function(){l.removeEventListener(_l.MOUNTED,d),l.removeEventListener(_l.UNMOUNTED,f),l.removeEventListener(_l.ATTR_MODIFIED,u),l.removeEventListener(_l.BOUNDS_CHANGED,h),i.syncTasks.clear()}));var p=null!==(n=gu.globalThis.requestIdleCallback)&&void 0!==n?n:Gc.bind(gu.globalThis),g=!0===(null===(r=o.future)||void 0===r?void 0:r.experimentalRICSyncRTree);s.hooks.endFrame.tap(t.tag,(function(){i.isFirstTimeRendering?(i.isFirstTimeRendering=!1,i.syncing=!0,p((function(){i.syncRTree(!0),i.isFirstTimeRenderingFinished=!0}))):g&&gu.globalThis.requestIdleCallback&&gu.globalThis.cancelIdleCallback?(gu.globalThis.cancelIdleCallback(i.ricSyncRTreeId),i.ricSyncRTreeId=gu.globalThis.requestIdleCallback((function(){return i.syncRTree()}))):i.syncRTree()}))}},{key:"syncNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.isConnected){var n=t.rBushNode;n.aabb&&this.rBush.remove(n.aabb);var r=t.getRenderBounds();if(r){var i=t.renderable;e&&(i.dirtyRenderBounds||(i.dirtyRenderBounds=new Kr),i.dirtyRenderBounds.update(r.center,r.halfExtents));var o=r.getMin(),s=C(o,2),a=s[0],c=s[1],l=r.getMax(),u=C(l,2),h=u[0],d=u[1];n.aabb||(n.aabb={}),n.aabb.displayObject=t,n.aabb.minX=a,n.aabb.minY=c,n.aabb.maxX=h,n.aabb.maxY=d}return!n.aabb||isNaN(n.aabb.maxX)||isNaN(n.aabb.maxX)||isNaN(n.aabb.minX)||isNaN(n.aabb.minY)?void 0:n.aabb}}},{key:"syncRTree",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||!this.syncing&&0!==this.syncTasks.size){this.syncing=!0;var n=[],r=new Set,i=function(i){if(!r.has(i)&&i.renderable){var o=t.syncNode(i,e);o&&(n.push(o),r.add(i))}};this.syncTasks.forEach((function(t,e){t&&e.forEach(i);var n=e;while(n)i(n),n=n.parentElement})),this.rBush.load(n),n.length=0,this.syncing=!1}}}])}();nh.tag="Prepare";var rh=function(t){return t["READY"]="ready",t["BEFORE_RENDER"]="beforerender",t["RERENDER"]="rerender",t["AFTER_RENDER"]="afterrender",t["BEFORE_DESTROY"]="beforedestroy",t["AFTER_DESTROY"]="afterdestroy",t["RESIZE"]="resize",t["DIRTY_RECTANGLE"]="dirtyrectangle",t["RENDERER_CHANGED"]="rendererchanged",t}({}),ih=500,oh=.1,sh=1e3,ah=new kl(_l.MOUNTED),ch=new kl(_l.UNMOUNTED),lh=new kl(rh.BEFORE_RENDER),uh=new kl(rh.RERENDER),hh=new kl(rh.AFTER_RENDER),dh=function(t){function e(t){var n;h(this,e),n=S(this,e),n.Element=Au,n.inited=!1,n.context={};var r=t.container,i=t.canvas,o=t.renderer,s=t.width,a=t.height,c=t.background,l=t.cursor,d=t.supportsMutipleCanvasesInOneContainer,f=t.cleanUpOnDestroy,p=void 0===f||f,g=t.offscreenCanvas,v=t.devicePixelRatio,y=t.requestAnimationFrame,m=t.cancelAnimationFrame,b=t.createImage,x=t.supportsTouchEvents,w=t.supportsPointerEvents,E=t.isTouchEvent,k=t.isMouseEvent,M=t.dblClickSpeed,O=s,N=a,T=v||dc&&window.devicePixelRatio||1;return T=T>=1?Math.ceil(T):1,i&&(O=s||xc(i)||i.width/T,N=a||wc(i)||i.height/T),n.customElements=new Ku,n.devicePixelRatio=T,n.requestAnimationFrame=null!==y&&void 0!==y?y:Gc.bind(gu.globalThis),n.cancelAnimationFrame=null!==m&&void 0!==m?m:Vc.bind(gu.globalThis),n.createImage=null!==b&&void 0!==b?b:function(){return new window.Image},n.supportsTouchEvents=null!==x&&void 0!==x?x:"ontouchstart"in gu.globalThis,n.supportsPointerEvents=null!==w&&void 0!==w?w:!!gu.globalThis.PointerEvent,n.isTouchEvent=null!==E&&void 0!==E?E:function(t){return n.supportsTouchEvents&&t instanceof gu.globalThis.TouchEvent},n.isMouseEvent=null!==k&&void 0!==k?k:function(t){return!gu.globalThis.MouseEvent||t instanceof gu.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(t instanceof gu.globalThis.PointerEvent))},g&&(gu.offscreenCanvas=g),n.document=new Zu,n.document.defaultView=n,d||hc(r,n,p),n.initRenderingContext(u(u({},t),{},{width:O,height:N,background:null!==c&&void 0!==c?c:"transparent",cursor:null!==l&&void 0!==l?l:"default",cleanUpOnDestroy:p,devicePixelRatio:T,requestAnimationFrame:n.requestAnimationFrame,cancelAnimationFrame:n.cancelAnimationFrame,createImage:n.createImage,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,isTouchEvent:n.isTouchEvent,isMouseEvent:n.isMouseEvent,dblClickSpeed:null!==M&&void 0!==M?M:200})),n.initDefaultCamera(O,N,o.clipSpaceNearZ),n.initRenderer(o,!0),n}return O(e,t),f(e,[{key:"initRenderingContext",value:function(t){this.context.config=t,this.context.renderingContext={root:this.document.documentElement,unculledEntities:[],renderListCurrentFrame:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(t,e,n){var r=this,i=new gu.CameraContribution;i.clipSpaceNearZ=n,i.setType(Ai.EXPLORING,Ci.DEFAULT).setPosition(t/2,e/2,ih).setFocalPoint(t/2,e/2,0).setOrthographic(t/-2,t/2,e/2,e/-2,oh,sh),i.canvas=this,i.eventEmitter.on(Ri.UPDATED,(function(){r.context.renderingContext.renderReasons.add(Al.CAMERA_CHANGED),gu.enableSizeAttenuation&&r.getConfig().renderer.getConfig().enableSizeAttenuation&&r.updateSizeAttenuation()})),this.context.camera=i}},{key:"updateSizeAttenuation",value:function(){var t=this.getCamera().getZoom();this.document.documentElement.forEach((function(e){gu.styleValueRegistry.updateSizeAttenuation(e,t)}))}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var t=this;return this.readyPromise||(this.readyPromise=new Promise((function(e){t.resolveReadyPromise=function(){e(t)}})),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0;Co.clearCache();var r=!0===(null===(t=this.getConfig().future)||void 0===t?void 0:t.experimentalCancelEventPropagation);n||this.dispatchEvent(new kl(rh.BEFORE_DESTROY),r,r),this.frameId&&this.cancelAnimationFrame(this.frameId);var i=this.getRoot();e&&(this.unmountChildren(i),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),n||this.dispatchEvent(new kl(rh.AFTER_DESTROY),r,r);var o=function(t){t.currentTarget=null,t.manager=null,t.target=null,t.relatedNode=null};o(ah),o(ch),o(lh),o(uh),o(hh),o(Ou),o(xu),o(wu),o(Eu),gu.textService.clearCache()}},{key:"changeSize",value:function(t,e){this.resize(t,e)}},{key:"resize",value:function(t,e){var n,r=this.context.config;r.width=t,r.height=e,this.getContextService().resize(t,e);var i=this.context.camera,o=i.getProjectionMode();i.setPosition(t/2,e/2,ih).setFocalPoint(t/2,e/2,0),o===Pi.ORTHOGRAPHIC?i.setOrthographic(t/-2,t/2,e/2,e/-2,i.getNear(),i.getFar()):i.setAspect(t/e);var s=!0===(null===(n=r.future)||void 0===n?void 0:n.experimentalCancelEventPropagation);this.dispatchEvent(new kl(rh.RESIZE,{width:t,height:e}),s,s)}},{key:"appendChild",value:function(t,e){return this.document.documentElement.appendChild(t,e)}},{key:"insertBefore",value:function(t,e){return this.document.documentElement.insertBefore(t,e)}},{key:"removeChild",value:function(t){return this.document.documentElement.removeChild(t)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(t){var e,n=this;t&&(lh.detail=t,hh.detail=t);var r=!0===(null===(e=this.getConfig().future)||void 0===e?void 0:e.experimentalCancelEventPropagation);this.dispatchEvent(lh,r,r);var i=this.getRenderingService();i.render(this.getConfig(),t,(function(){n.dispatchEvent(uh,r,r)})),this.dispatchEvent(hh,r,r)}},{key:"run",value:function(){var t=this,e=function(n,r){t.render(r),t.frameId=t.requestAnimationFrame(e)};e()}},{key:"initRenderer",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new Br,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new Qu,new nh,new Ju([new eh])),this.loadRendererContainerModule(t),this.context.contextService=new this.context.ContextService(u(u({},gu),this.context)),this.context.renderingService=new Cl(gu,this.context),this.context.eventService=new Nl(gu,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(t,n,!0)):this.context.contextService.initAsync().then((function(){e.initRenderingService(t,n)}))["catch"]((function(t){console.error(t)}))}},{key:"initRenderingService",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context.renderingService.init((function(){var i;e.inited=!0;var o=!0===(null===(i=e.getConfig().future)||void 0===i?void 0:i.experimentalCancelEventPropagation);n?r?e.requestAnimationFrame((function(){e.dispatchEvent(new kl(rh.READY),o,o)})):e.dispatchEvent(new kl(rh.READY),o,o):e.dispatchEvent(new kl(rh.RENDERER_CHANGED),o,o),e.readyPromise&&e.resolveReadyPromise(),n||e.getRoot().forEach((function(t){var e,n;null===(e=(n=t).dirty)||void 0===e||e.call(n,!0,!0)})),e.mountChildren(e.getRoot()),t.getConfig().enableAutoRendering&&e.run()}))}},{key:"loadRendererContainerModule",value:function(t){var e=this,n=t.getPlugins();n.forEach((function(t){t.context=e.context,t.init(gu)}))}},{key:"setRenderer",value:function(t){var e=this.getConfig();if(e.renderer!==t){var n=e.renderer;e.renderer=t,this.destroy(!1,!0),b((null===n||void 0===n?void 0:n.getPlugins())||[]).reverse().forEach((function(t){t.destroy(gu)})),this.initRenderer(t)}}},{key:"setCursor",value:function(t){var e=this.getConfig();e.cursor=t,this.getContextService().applyCursorStyle(t)}},{key:"unmountChildren",value:function(t){var e=this;if(t.childNodes.forEach((function(t){e.unmountChildren(t)})),this.inited){if(t.isMutationObserved)t.dispatchEvent(ch);else{var n,r=!0===(null===(n=this.getConfig().future)||void 0===n?void 0:n.experimentalCancelEventPropagation);ch.target=t,this.dispatchEvent(ch,!0,r)}t!==this.document.documentElement&&(t.ownerDocument=null),t.isConnected=!1}t.isCustomElement&&t.disconnectedCallback&&t.disconnectedCallback()}},{key:"mountChildren",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mc(t);if(this.inited){if(!t.isConnected&&(t.ownerDocument=this.document,t.isConnected=!0,!n))if(t.isMutationObserved)t.dispatchEvent(ah);else{var r,i=!0===(null===(r=this.getConfig().future)||void 0===r?void 0:r.experimentalCancelEventPropagation);ah.target=t,this.dispatchEvent(ah,!0,i)}}else console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",t.nodeName);t.childNodes.forEach((function(t){e.mountChildren(t,n)})),t.isCustomElement&&t.connectedCallback&&t.connectedCallback()}},{key:"mountFragment",value:function(t){this.mountChildren(t,!1)}},{key:"client2Viewport",value:function(t){return this.getEventService().client2Viewport(t)}},{key:"viewport2Client",value:function(t){return this.getEventService().viewport2Client(t)}},{key:"viewport2Canvas",value:function(t){return this.getEventService().viewport2Canvas(t)}},{key:"canvas2Viewport",value:function(t){return this.getEventService().canvas2Viewport(t)}},{key:"getPointByClient",value:function(t,e){return this.client2Viewport({x:t,y:e})}},{key:"getClientByPoint",value:function(t,e){return this.viewport2Client({x:t,y:e})}}])}(Sl),fh=function(t){function e(){var t;h(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=S(this,e,[].concat(r)),t.landmarks=[],t}return O(e,t),f(e,[{key:"rotate",value:function(t,e,n){if(this.relElevation=oi(e),this.relAzimuth=oi(t),this.relRoll=oi(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Ai.EXPLORING){var r=de(he(),[1,0,0],li((this.rotateWorld?1:-1)*this.relElevation)),i=de(he(),[0,1,0],li((this.rotateWorld?1:-1)*this.relAzimuth)),o=de(he(),[0,0,1],li(this.relRoll)),s=fe(he(),i,r);s=fe(he(),s,o);var a=Gt(ht(),s);Et(this.matrix,this.matrix,[0,0,-this.distance]),wt(this.matrix,this.matrix,a),Et(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===Ai.ORBITING||this.type===Ai.EXPLORING?this._getPosition():this.type===Ai.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var n=ai(t,e,0),r=I(this.position);return G(r,r,$(D(),this.right,n[0])),G(r,r,$(D(),this.up,n[1])),this._setPosition(r),this.triggerUpdate(),this}},{key:"dolly",value:function(t){var e=this.forward,n=I(this.position),r=t*this.dollyingStep,i=this.distance+t*this.dollyingStep;return r=Math.max(Math.min(i,this.maxDistance),this.minDistance)-this.distance,n[0]+=r*e[0],n[1]+=r*e[1],n[2]+=r*e[2],this._setPosition(n),this.type===Ai.ORBITING||this.type===Ai.EXPLORING?this._getDistance():this.type===Ai.TRACKING&&G(this.focalPoint,n,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){void 0!==this.landmarkAnimationID&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(t){var e,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.position,a=void 0===s?this.position:s,c=o.focalPoint,l=void 0===c?this.focalPoint:c,u=o.roll,h=o.zoom,d=new gu.CameraContribution;d.setType(this.type,void 0),d.setPosition(a[0],null!==(e=a[1])&&void 0!==e?e:this.position[1],null!==(n=a[2])&&void 0!==n?n:this.position[2]),d.setFocalPoint(l[0],null!==(r=l[1])&&void 0!==r?r:this.focalPoint[1],null!==(i=l[2])&&void 0!==i?i:this.focalPoint[2]),d.setRoll(null!==u&&void 0!==u?u:this.roll),d.setZoom(null!==h&&void 0!==h?h:this.zoom);var f={name:t,matrix:dt(d.getWorldTransform()),right:I(d.right),up:I(d.up),forward:I(d.forward),position:I(d.getPosition()),focalPoint:I(d.getFocalPoint()),distanceVector:I(d.getDistanceVector()),distance:d.getDistance(),dollyingStep:d.getDollyingStep(),azimuth:d.getAzimuth(),elevation:d.getElevation(),roll:d.getRoll(),relAzimuth:d.relAzimuth,relElevation:d.relElevation,relRoll:d.relRoll,zoom:d.getZoom()};return this.landmarks.push(f),f}},{key:"gotoLandmark",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Re(t)?this.landmarks.find((function(e){return e.name===t})):t;if(r){var i=Ae(n)?{duration:n}:n,o=i.easing,s=void 0===o?"linear":o,a=i.duration,c=void 0===a?100:a,l=i.easingFunction,u=void 0===l?void 0:l,h=i.onfinish,d=void 0===h?void 0:h,f=i.onframe,p=void 0===f?void 0:f,g=.01;this.cancelLandmarkAnimation();var v,y=r.position,m=r.focalPoint,b=r.zoom,x=r.roll,w=u||gu.EasingFunction(s),E=function(){e.setFocalPoint(m),e.setPosition(y),e.setRoll(x),e.setZoom(b),e.computeMatrix(),e.triggerUpdate(),null===d||void 0===d||d()};if(0===c)return E();var k=function(t){void 0===v&&(v=t);var n=t-v;if(n>=c)E();else{var r=w(n/c),i=D(),o=D(),s=1,a=0;Z(i,e.focalPoint,m,r),Z(o,e.position,y,r),a=e.roll*(1-r)+x*r,s=e.zoom*(1-r)+b*r,e.setFocalPoint(i),e.setPosition(o),e.setRoll(a),e.setZoom(s);var l=rt(i,m)+rt(o,y);if(l<=g&&void 0===b&&void 0===x)return E();e.computeMatrix(),e.triggerUpdate(),n<c&&(null===p||void 0===p||p(r),e.landmarkAnimationID=e.canvas.requestAnimationFrame(k))}};this.canvas.requestAnimationFrame(k)}}}])}(Li);gu.CameraContribution=fh;
/*!
 * @antv/g-dom-mutation-observer-api
 * @description A simple implementation of DOM MutationObserver API.
 * @version 2.0.38
 * @date 7/30/2025, 1:34:51 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */
new WeakMap;
/*!
 * @antv/g-web-animations-api
 * @description A simple implementation of Web Animations API.
 * @version 2.1.28
 * @date 7/30/2025, 1:36:24 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */
var ph=function(t){function e(t,n,r,i){var o;return h(this,e),o=S(this,e,[t]),o.currentTime=r,o.timelineTime=i,o.target=n,o.type="finish",o.bubbles=!1,o.currentTarget=n,o.defaultPrevented=!1,o.eventPhase=o.AT_TARGET,o.timeStamp=Date.now(),o.currentTime=r,o.timelineTime=i,o}return O(e,t),f(e)}(bl),gh=0,vh=function(){function t(e,n){var r;h(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=n,this.id="".concat(gh++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number(null===(r=this.effect)||void 0===r?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return f(t,[{key:"pending",get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var t=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise((function(e,n){t.resolveReadyPromise=function(){e(t)},t.rejectReadyPromise=function(){n(new Error)}})),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var t=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise((function(e,n){t.resolveFinishedPromise=function(){e(t)},t.rejectFinishedPromise=function(){n(new Error)}})),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){if(t=Number(t),!isNaN(t)){var e;if(this.timeline.restart(),!this._paused&&null!==this._startTime)this._startTime=Number(null===(e=this.timeline)||void 0===e?void 0:e.currentTime)-t/this.playbackRate;this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(t){if(null!==t){if(this.updatePromises(),t=Number(t),isNaN(t))return;if(this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var e=this.currentTime;this._playbackRate=t,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==e&&(this.currentTime=e),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||"running"===this.playState||!this._finishedFlag}},{key:"updatePromises",value:function(){var t;if(null!==(t=this.effect.target)&&void 0!==t&&t.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var e=this.oldPlayState,n=this.pending?"pending":this.playState;return this.readyPromise&&n!==e&&("idle"===n?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===e?this.resolveReadyPromise():"pending"===n&&(this.readyPromise=void 0)),this.finishedPromise&&n!==e&&("idle"===n?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===n?this.resolveFinishedPromise():"finished"===e&&(this.finishedPromise=void 0)),this.oldPlayState=n,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var t=this;if(this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var e=new ph(null,this,this.currentTime,null);setTimeout((function(){t.oncancel(e)}))}}},{key:"reverse",value:function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),null!==t&&(this.currentTime=t),this.updatePromises()}},{key:"updatePlaybackRate",value:function(t){this.playbackRate=t}},{key:"targetAnimations",value:function(){var t,e=null===(t=this.effect)||void 0===t?void 0:t.target;return e.getAnimations()}},{key:"markTarget",value:function(){var t=this.targetAnimations();-1===t.indexOf(this)&&t.push(this)}},{key:"unmarkTarget",value:function(){var t=this.targetAnimations(),e=t.indexOf(this);-1!==e&&t.splice(e,1)}},{key:"tick",value:function(t,e){this._idle||this._paused||(null===this._startTime?e&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),e&&(this.currentTimePending=!1,this.fireEvents(t))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else{if(!(this._totalDuration<1/0))throw new Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this._totalDuration}}},{key:"persist",value:function(){throw new Error(ni)}},{key:"addEventListener",value:function(t,e,n){throw new Error(ni)}},{key:"removeEventListener",value:function(t,e,n){throw new Error(ni)}},{key:"dispatchEvent",value:function(t){throw new Error(ni)}},{key:"commitStyles",value:function(){throw new Error(ni)}},{key:"ensureAlive",value:function(){var t,e;this.playbackRate<0&&0===this.currentTime?this._inEffect=!(null===(t=this.effect)||void 0===t||!t.update(-1)):this._inEffect=!(null===(e=this.effect)||void 0===e||!e.update(this.currentTime));this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(t,e){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!e&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(t){var e=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var n=new ph(null,this,this.currentTime,t);setTimeout((function(){e.onfinish&&e.onfinish(n)}))}this._finishedFlag=!0}}else{if(this.onframe&&"running"===this.playState){var r=new ph(null,this,this.currentTime,t);this.onframe(r)}this._finishedFlag=!1}}}])}(),yh=4,mh=.001,bh=1e-7,xh=10,wh=11,Eh=1/(wh-1),kh="function"===typeof Float32Array,Sh=function(t,e){return 1-3*e+3*t},Mh=function(t,e){return 3*e-6*t},Oh=function(t){return 3*t},Nh=function(t,e,n){return((Sh(e,n)*t+Mh(e,n))*t+Oh(e))*t},Th=function(t,e,n){return 3*Sh(e,n)*t*t+2*Mh(e,n)*t+Oh(e)},Ah=function(t,e,n,r,i){var o,s,a=0;do{s=e+(n-e)/2,o=Nh(s,r,i)-t,o>0?n=s:e=s}while(Math.abs(o)>bh&&++a<xh);return s},Ch=function(t,e,n,r){for(var i=0;i<yh;++i){var o=Th(e,n,r);if(0===o)return e;var s=Nh(e,n,r)-t;e-=s/o}return e},Ph=function(t,e,n,r){if(!(t>=0&&t<=1&&n>=0&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===r)return function(t){return t};for(var i=kh?new Float32Array(wh):new Array(wh),o=0;o<wh;++o)i[o]=Nh(o*Eh,t,n);var s=function(e){for(var r=0,o=1,s=wh-1;o!==s&&i[o]<=e;++o)r+=Eh;--o;var a=(e-i[o])/(i[o+1]-i[o]),c=r+a*Eh,l=Th(c,t,n);return l>=mh?Ch(e,c,t,n):0===l?c:Ah(e,r,r+Eh,t,n)};return function(t){return 0===t||1===t?t:Nh(s(t),e,r)}},Rh=function(t){return t=t.replace(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())})),"-"===t.charAt(0)?t.substring(1):t},_h=function(t){return Math.pow(t,2)},Lh=function(t){return Math.pow(t,3)},Dh=function(t){return Math.pow(t,4)},Ih=function(t){return Math.pow(t,5)},jh=function(t){return Math.pow(t,6)},Fh=function(t){return 1-Math.cos(t*Math.PI/2)},Bh=function(t){return 1-Math.sqrt(1-t*t)},zh=function(t){return t*t*(3*t-2)},Gh=function(t){var e,n=4;while(t<((e=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)},Vh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=C(e,2),r=n[0],i=void 0===r?1:r,o=n[1],s=void 0===o?.5:o,a=Le(Number(i),1,10),c=Le(Number(s),.1,2);return 0===t||1===t?t:-a*Math.pow(2,10*(t-1))*Math.sin((t-1-c/(2*Math.PI)*Math.asin(1/a))*(2*Math.PI)/c)},Wh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=C(e,4),i=r[0],o=void 0===i?1:i,s=r[1],a=void 0===s?100:s,c=r[2],l=void 0===c?10:c,u=r[3],h=void 0===u?0:u;o=Le(o,.1,1e3),a=Le(a,.1,1e3),l=Le(l,.1,1e3),h=Le(h,.1,1e3);var d=Math.sqrt(a/o),f=l/(2*Math.sqrt(a*o)),p=f<1?d*Math.sqrt(1-f*f):0,g=1,v=f<1?(f*d-h)/p:-h+d,y=n?n*t/1e3:t;return y=f<1?Math.exp(-y*f*d)*(g*Math.cos(p*y)+v*Math.sin(p*y)):(g+v*y)*Math.exp(-y*d),0===t||1===t?t:1-y},Uh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e,r=C(n,2),i=r[0],o=void 0===i?10:i,s=r[1],a="start"===s?Math.ceil:Math.floor;return a(Le(t,0,1)*o)/o},Hh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=C(e,4),r=n[0],i=n[1],o=n[2],s=n[3];return Ph(r,i,o,s)(t)},$h=Ph(.42,0,1,1),Yh=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return 1-t(1-e,n,r)}},qh=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return e<.5?t(2*e,n,r)/2:1-t(-2*e+2,n,r)/2}},Xh=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return e<.5?(1-t(1-2*e,n,r))/2:(t(2*e-1,n,r)+1)/2}},Kh={steps:Uh,"step-start":function(t){return Uh(t,[1,"start"])},"step-end":function(t){return Uh(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":Hh,ease:function(t){return Hh(t,[.25,.1,.25,1])},in:$h,out:Yh($h),"in-out":qh($h),"out-in":Xh($h),"in-quad":_h,"out-quad":Yh(_h),"in-out-quad":qh(_h),"out-in-quad":Xh(_h),"in-cubic":Lh,"out-cubic":Yh(Lh),"in-out-cubic":qh(Lh),"out-in-cubic":Xh(Lh),"in-quart":Dh,"out-quart":Yh(Dh),"in-out-quart":qh(Dh),"out-in-quart":Xh(Dh),"in-quint":Ih,"out-quint":Yh(Ih),"in-out-quint":qh(Ih),"out-in-quint":Xh(Ih),"in-expo":jh,"out-expo":Yh(jh),"in-out-expo":qh(jh),"out-in-expo":Xh(jh),"in-sine":Fh,"out-sine":Yh(Fh),"in-out-sine":qh(Fh),"out-in-sine":Xh(Fh),"in-circ":Bh,"out-circ":Yh(Bh),"in-out-circ":qh(Bh),"out-in-circ":Xh(Bh),"in-back":zh,"out-back":Yh(zh),"in-out-back":qh(zh),"out-in-back":Xh(zh),"in-bounce":Gh,"out-bounce":Yh(Gh),"in-out-bounce":qh(Gh),"out-in-bounce":Xh(Gh),"in-elastic":Vh,"out-elastic":Yh(Vh),"in-out-elastic":qh(Vh),"out-in-elastic":Xh(Vh),spring:Wh,"spring-in":Wh,"spring-out":Yh(Wh),"spring-in-out":qh(Wh),"spring-out-in":Xh(Wh)},Zh=function(t){return Rh(t).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},Jh=function(t){return Kh[Zh(t)]||Kh.linear},Qh=function(t){return t},td=1,ed=.5,nd=0;function rd(t,e){return function(n){if(n>=1)return 1;var r=1/t;return n+=e*r,n-n%r}}var id="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",od=new RegExp("cubic-bezier\\(".concat(id,",").concat(id,",").concat(id,",").concat(id,"\\)")),sd=/steps\(\s*(\d+)\s*\)/,ad=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function cd(t){var e=od.exec(t);if(e)return Ph.apply(void 0,b(e.slice(1).map(Number)));var n=sd.exec(t);if(n)return rd(Number(n[1]),nd);var r=ad.exec(t);return r?rd(Number(r[1]),{start:td,middle:ed,end:nd}[r[2]]):Jh(t)}function ld(t){return Math.abs(ud(t)/(t.playbackRate||1))}function ud(t){var e;return 0===t.duration||0===t.iterations?0:("auto"===t.duration?0:Number(t.duration))*(null!==(e=t.iterations)&&void 0!==e?e:1)}var hd=0,dd=1,fd=2,pd=3;function gd(t,e,n){if(null===e)return hd;var r=n.endTime;return e<Math.min(n.delay,r)?dd:e>=Math.min(n.delay+t+n.endDelay,r)?fd:pd}function vd(t,e,n,r,i){switch(r){case dd:return"backwards"===e||"both"===e?0:null;case pd:return n-i;case fd:return"forwards"===e||"both"===e?t:null;case hd:return null}}function yd(t,e,n,r,i){var o=i;return 0===t?e!==dd&&(o+=n):o+=r/t,o}function md(t,e,n,r,i,o){var s=t===1/0?e%1:t%1;return 0!==s||n!==fd||0===r||0===i&&0!==o||(s=1),s}function bd(t,e,n,r){return t===fd&&e===1/0?1/0:1===n?Math.floor(r)-1:Math.floor(r)}function xd(t,e,n){var r=t;if("normal"!==t&&"reverse"!==t){var i=e;"alternate-reverse"===t&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return"normal"===r?n:1-n}function wd(t,e,n){var r=gd(t,e,n),i=vd(t,n.fill,e,r,n.delay);if(null===i)return null;var o="auto"===n.duration?0:n.duration,s=yd(o,r,n.iterations,i,n.iterationStart),a=md(s,n.iterationStart,r,n.iterations,i,o),c=bd(r,n.iterations,a,s),l=xd(n.direction,c,a);return n.currentIteration=c,n.progress=l,n.easingFunction(l)}function Ed(t,e,n){var r=Sd(t,e),i=Md(r,n);return function(t,e){if(null!==e)i.filter((function(t){return e>=t.applyFrom&&e<t.applyTo})).forEach((function(n){var r=e-n.startOffset,i=n.endOffset-n.startOffset,o=0===i?0:r/i;t.setAttribute(n.property,n.interpolation(o),!1,!1)}));else for(var n in r)kd(n)&&t.setAttribute(n,null)}}function kd(t){return"offset"!==t&&"easing"!==t&&"composite"!==t&&"computedOffset"!==t}function Sd(t,e){for(var n={},r=0;r<t.length;r++)for(var i in t[r])if(kd(i)){var o={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:cd(t[r].easing)||e.easingFunction,value:t[r][i]};n[i]=n[i]||[],n[i].push(o)}return n}function Md(t,e){var n=[];for(var r in t)for(var i=t[r],o=0;o<i.length-1;o++){var s=o,a=o+1,c=i[s].computedOffset,l=i[a].computedOffset,u=c,h=l;0===o&&(u=-1/0,0===l&&(a=s)),o===i.length-2&&(h=1/0,1===c&&(s=a)),n.push({applyFrom:u,applyTo:h,startOffset:i[s].computedOffset,endOffset:i[a].computedOffset,easingFunction:i[s].easingFunction,property:r,interpolation:Nd(r,i[s].value,i[a].value,e)})}return n.sort((function(t,e){return t.startOffset-e.startOffset})),n}var Od=function(t,e,n){return function(r){var i=Td(t,e,r);return Ae(i)?i:n(i)}};function Nd(t,e,n,r){var i=Wa[t];if(i&&i.syntax&&i["int"]){var o=gu.styleValueRegistry.getPropertySyntax(i.syntax);if(o){var s=o.parser,a=s?s(e,r):e,c=s?s(n,r):n,l=o.mixer(a,c,r);if(l){var u=Od.apply(void 0,b(l));return function(t){return 0===t?e:1===t?n:u(t)}}}}return Od(!1,!0,(function(t){return t?n:e}))}function Td(t,e,n){if("number"===typeof t&&"number"===typeof e)return t*(1-n)+e*n;if("boolean"===typeof t&&"boolean"===typeof e||"string"===typeof t&&"string"===typeof e)return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)){for(var r=t.length,i=e.length,o=Math.max(r,i),s=[],a=0;a<o;a++)s.push(Td(t[a<r?a:r-1],e[a<i?a:i-1],n));return s}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(e))}var Ad=function(){function t(){h(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=Qh,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return f(t,[{key:"easing",get:function(){return this._easing},set:function(t){this.easingFunction=cd(t),this._easing=t}}])}();function Cd(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var r=t[n];Array.isArray(r)||(r=[r]);for(var i=r.length,o=0;o<i;o++){if(!e[o]){var s={};"offset"in t&&(s.offset=Number(t.offset)),"easing"in t&&(s.easing=t.easing),"composite"in t&&(s.composite=t.composite),e[o]=s}void 0!==r[o]&&null!==r[o]&&(e[o][n]=r[o])}}return e.sort((function(t,e){return(t.computedOffset||0)-(e.computedOffset||0)})),e}function Pd(t,e){if(null===t)return[];Array.isArray(t)||(t=Cd(t));for(var n=t.map((function(t){var n={};for(var r in null!==e&&void 0!==e&&e.composite&&(n.composite="auto"),t){var i=t[r];if("offset"===r){if(null!==i){if(i=Number(i),!isFinite(i))throw new Error("Keyframe offsets must be numbers.");if(i<0||i>1)throw new Error("Keyframe offsets must be between 0 and 1.");n.computedOffset=i}}else if("composite"===r&&-1===["replace","add","accumulate","auto"].indexOf(i))throw new Error("".concat(i," compositing is not supported"));n[r]=i}return void 0===n.offset&&(n.offset=null),void 0===n.easing&&(n.easing=(null===e||void 0===e?void 0:e.easing)||"linear"),void 0===n.composite&&(n.composite="auto"),n})),r=!0,i=-1/0,o=0;o<n.length;o++){var s=n[o].offset;if(Pe(s))r=!1;else{if(s<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=s}}function a(){var t,e,r=n,i=r.length;(n[i-1].computedOffset=Number(null!==(t=n[i-1].offset)&&void 0!==t?t:1),i>1)&&(n[0].computedOffset=Number(null!==(e=n[0].offset)&&void 0!==e?e:0));for(var o=0,s=Number(n[0].computedOffset),a=1;a<i;a++){var c=n[a].computedOffset;if(!Pe(c)&&!Pe(s)){for(var l=1;l<a-o;l++)n[o+l].computedOffset=s+(Number(c)-s)*l/(a-o);o=a,s=Number(c)}}}return n=n.filter((function(t){return Number(t.offset)>=0&&Number(t.offset)<=1})),r||a(),n}var Rd="backwards|forwards|both|none".split("|"),_d="reverse|alternate|alternate-reverse".split("|");function Ld(t,e){var n=new Ad;return e&&(n.fill="both",n.duration="auto"),"number"!==typeof t||isNaN(t)?void 0!==t&&Object.keys(t).forEach((function(e){if(void 0!==t[e]&&null!==t[e]&&"auto"!==t[e]){if(("number"===typeof n[e]||"duration"===e)&&("number"!==typeof t[e]||isNaN(t[e])))return;if("fill"===e&&-1===Rd.indexOf(t[e]))return;if("direction"===e&&-1===_d.indexOf(t[e]))return;n[e]=t[e]}})):n.duration=t,n}function Dd(t,e){return t=Id(null!==t&&void 0!==t?t:{duration:"auto"}),Ld(t,e)}function Id(t){return"number"===typeof t&&(t=isNaN(t)?{duration:"auto"}:{duration:t}),t}var jd=function(){function t(e,n,r){var i=this;h(this,t),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=Dd(r,!1),this.timing.effect=this,this.timing.activeDuration=ld(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=Pd(n,this.timing),this.interpolations=Ed(this.normalizedKeyframes,this.timing,this.target);var o=gu.globalThis.Proxy;this.computedTiming=o?new o(this.timing,{get:function(t,e){return"duration"===e?"auto"===t.duration?0:t.duration:"fill"===e?"auto"===t.fill?"none":t.fill:"localTime"===e?i.animation&&i.animation.currentTime||null:"currentIteration"===e?i.animation&&"running"===i.animation.playState?t.currentIteration||0:null:"progress"===e?i.animation&&"running"===i.animation.playState?t.progress||0:null:t[e]},set:function(){return!0}}):this.timing}return f(t,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(t){return null!==t&&(this.timeFraction=wd(this.timing.activeDuration,t,this.timing),null!==this.timeFraction)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(t){this.normalizedKeyframes=Pd(t)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(t){var e=this;Object.keys(t||{}).forEach((function(n){e.timing[n]=t[n]}))}}])}();function Fd(t,e){return Number(t.id)-Number(e.id)}var Bd=function(){function t(e){var n=this;h(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(t){n.currentTime=t,n.discardAnimations(),0===n.animations.length?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(t){var e=n.rafCallbacks;n.rafCallbacks=[],t<Number(n.currentTime)&&(t=Number(n.currentTime)),n.animations.sort(Fd),n.animations=n.tick(t,!0,n.animations)[0],e.forEach((function(e){e[1](t)})),n.applyPendingEffects()},this.document=e}return f(t,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(t,e,n){var r=new jd(t,e,n),i=new vh(r,this);return this.animations.push(i),this.restartWebAnimationsNextTick(),i.updatePromises(),i.play(),i.updatePromises(),i}},{key:"applyDirtiedAnimation",value:function(t){var e=this;if(!this.inTick){t.markTarget();var n=t.targetAnimations();n.sort(Fd);var r=this.tick(Number(this.currentTime),!1,n.slice())[1];r.forEach((function(t){var n=e.animations.indexOf(t);-1!==n&&e.animations.splice(n,1)})),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame((function(){})),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach((function(t){null===t||void 0===t||t.applyInterpolations()})),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter((function(t){return t.updatePromises()}))}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter((function(t){return"finished"!==t.playState&&"idle"!==t.playState}))}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(t){var e=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([e,t]),e}},{key:"requestAnimationFrame",value:function(t){var e=this;return this.rAF((function(n){e.updateAnimationsPromises(),t(n),e.updateAnimationsPromises()}))}},{key:"tick",value:function(t,e,n){var r,i,o=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var s=[],a=[],c=[],l=[];return n.forEach((function(n){n.tick(t,e),n._inEffect?(a.push(n.effect),n.markTarget()):(s.push(n.effect),n.unmarkTarget()),n._needsTick&&(o.ticking=!0);var r=n._inEffect||n._needsTick;n._inTimeline=r,r?c.push(n):l.push(n)})),(r=this.pendingEffects).push.apply(r,s),(i=this.pendingEffects).push.apply(i,a),this.ticking&&this.requestAnimationFrame((function(){})),this.inTick=!1,[c,l]}}])}();gu.EasingFunction=cd,gu.AnimationTimeline=Bd;var zd=function(t){return Pe(t)?"":t.toString()},Gd=function(t){var e=zd(t);return e.charAt(0).toUpperCase()+e.substring(1)},Vd=Gd,Wd=function(t){return"object"===typeof t&&null!==t},Ud=Wd,Hd=function(t){return null!==t&&"function"!==typeof t&&isFinite(t.length)},$d=Hd,Yd=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Re(t)||Re(e))return!1;if($d(t)||$d(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length;r++)if(n=Yd(t[r],e[r]),!n)break;return n}if(Ud(t)||Ud(e)){var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(n=!0,r=0;r<i.length;r++)if(n=Yd(t[i[r]],e[i[r]]),!n)break;return n}return!1},qd=Yd;const Xd={duration:500},Kd={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};var Zd,Jd,Qd,tf,ef,nf,rf,of,sf,af;(function(t){t["NodeAdded"]="NodeAdded",t["NodeUpdated"]="NodeUpdated",t["NodeRemoved"]="NodeRemoved",t["EdgeAdded"]="EdgeAdded",t["EdgeUpdated"]="EdgeUpdated",t["EdgeRemoved"]="EdgeRemoved",t["ComboAdded"]="ComboAdded",t["ComboUpdated"]="ComboUpdated",t["ComboRemoved"]="ComboRemoved"})(Zd||(Zd={})),function(t){t["DRAW"]="draw",t["COLLAPSE"]="collapse",t["EXPAND"]="expand",t["TRANSFORM"]="transform"}(Jd||(Jd={})),function(t){t["CLICK"]="canvas:click",t["DBLCLICK"]="canvas:dblclick",t["POINTER_OVER"]="canvas:pointerover",t["POINTER_LEAVE"]="canvas:pointerleave",t["POINTER_ENTER"]="canvas:pointerenter",t["POINTER_MOVE"]="canvas:pointermove",t["POINTER_OUT"]="canvas:pointerout",t["POINTER_DOWN"]="canvas:pointerdown",t["POINTER_UP"]="canvas:pointerup",t["CONTEXT_MENU"]="canvas:contextmenu",t["DRAG_START"]="canvas:dragstart",t["DRAG"]="canvas:drag",t["DRAG_END"]="canvas:dragend",t["DRAG_ENTER"]="canvas:dragenter",t["DRAG_OVER"]="canvas:dragover",t["DRAG_LEAVE"]="canvas:dragleave",t["DROP"]="canvas:drop",t["WHEEL"]="canvas:wheel"}(Qd||(Qd={})),function(t){t["CLICK"]="combo:click",t["DBLCLICK"]="combo:dblclick",t["POINTER_OVER"]="combo:pointerover",t["POINTER_LEAVE"]="combo:pointerleave",t["POINTER_ENTER"]="combo:pointerenter",t["POINTER_MOVE"]="combo:pointermove",t["POINTER_OUT"]="combo:pointerout",t["POINTER_DOWN"]="combo:pointerdown",t["POINTER_UP"]="combo:pointerup",t["CONTEXT_MENU"]="combo:contextmenu",t["DRAG_START"]="combo:dragstart",t["DRAG"]="combo:drag",t["DRAG_END"]="combo:dragend",t["DRAG_ENTER"]="combo:dragenter",t["DRAG_OVER"]="combo:dragover",t["DRAG_LEAVE"]="combo:dragleave",t["DROP"]="combo:drop"}(tf||(tf={})),function(t){t["CLICK"]="click",t["DBLCLICK"]="dblclick",t["POINTER_OVER"]="pointerover",t["POINTER_LEAVE"]="pointerleave",t["POINTER_ENTER"]="pointerenter",t["POINTER_MOVE"]="pointermove",t["POINTER_OUT"]="pointerout",t["POINTER_DOWN"]="pointerdown",t["POINTER_UP"]="pointerup",t["CONTEXT_MENU"]="contextmenu",t["DRAG_START"]="dragstart",t["DRAG"]="drag",t["DRAG_END"]="dragend",t["DRAG_ENTER"]="dragenter",t["DRAG_OVER"]="dragover",t["DRAG_LEAVE"]="dragleave",t["DROP"]="drop",t["KEY_DOWN"]="keydown",t["KEY_UP"]="keyup",t["WHEEL"]="wheel",t["PINCH"]="pinch"}(ef||(ef={})),function(t){t["KEY_DOWN"]="keydown",t["KEY_UP"]="keyup"}(nf||(nf={})),function(t){t["CLICK"]="edge:click",t["DBLCLICK"]="edge:dblclick",t["POINTER_OVER"]="edge:pointerover",t["POINTER_LEAVE"]="edge:pointerleave",t["POINTER_ENTER"]="edge:pointerenter",t["POINTER_MOVE"]="edge:pointermove",t["POINTER_OUT"]="edge:pointerout",t["POINTER_DOWN"]="edge:pointerdown",t["POINTER_UP"]="edge:pointerup",t["CONTEXT_MENU"]="edge:contextmenu",t["DRAG_ENTER"]="edge:dragenter",t["DRAG_OVER"]="edge:dragover",t["DRAG_LEAVE"]="edge:dragleave",t["DROP"]="edge:drop"}(rf||(rf={})),function(t){t["BEFORE_CANVAS_INIT"]="beforecanvasinit",t["AFTER_CANVAS_INIT"]="aftercanvasinit",t["BEFORE_SIZE_CHANGE"]="beforesizechange",t["AFTER_SIZE_CHANGE"]="aftersizechange",t["BEFORE_ELEMENT_CREATE"]="beforeelementcreate",t["AFTER_ELEMENT_CREATE"]="afterelementcreate",t["BEFORE_ELEMENT_UPDATE"]="beforeelementupdate",t["AFTER_ELEMENT_UPDATE"]="afterelementupdate",t["BEFORE_ELEMENT_DESTROY"]="beforeelementdestroy",t["AFTER_ELEMENT_DESTROY"]="afterelementdestroy",t["BEFORE_ELEMENT_TRANSLATE"]="beforeelementtranslate",t["AFTER_ELEMENT_TRANSLATE"]="afterelementtranslate",t["BEFORE_DRAW"]="beforedraw",t["AFTER_DRAW"]="afterdraw",t["BEFORE_RENDER"]="beforerender",t["AFTER_RENDER"]="afterrender",t["BEFORE_ANIMATE"]="beforeanimate",t["AFTER_ANIMATE"]="afteranimate",t["BEFORE_LAYOUT"]="beforelayout",t["AFTER_LAYOUT"]="afterlayout",t["BEFORE_STAGE_LAYOUT"]="beforestagelayout",t["AFTER_STAGE_LAYOUT"]="afterstagelayout",t["BEFORE_TRANSFORM"]="beforetransform",t["AFTER_TRANSFORM"]="aftertransform",t["BATCH_START"]="batchstart",t["BATCH_END"]="batchend",t["BEFORE_DESTROY"]="beforedestroy",t["AFTER_DESTROY"]="afterdestroy",t["BEFORE_RENDERER_CHANGE"]="beforerendererchange",t["AFTER_RENDERER_CHANGE"]="afterrendererchange"}(of||(of={})),function(t){t["UNDO"]="undo",t["REDO"]="redo",t["CANCEL"]="cancel",t["ADD"]="add",t["CLEAR"]="clear",t["CHANGE"]="change"}(sf||(sf={})),function(t){t["CLICK"]="node:click",t["DBLCLICK"]="node:dblclick",t["POINTER_OVER"]="node:pointerover",t["POINTER_LEAVE"]="node:pointerleave",t["POINTER_ENTER"]="node:pointerenter",t["POINTER_MOVE"]="node:pointermove",t["POINTER_OUT"]="node:pointerout",t["POINTER_DOWN"]="node:pointerdown",t["POINTER_UP"]="node:pointerup",t["CONTEXT_MENU"]="node:contextmenu",t["DRAG_START"]="node:dragstart",t["DRAG"]="node:drag",t["DRAG_END"]="node:dragend",t["DRAG_ENTER"]="node:dragenter",t["DRAG_OVER"]="node:dragover",t["DRAG_LEAVE"]="node:dragleave",t["DROP"]="node:drop"}(af||(af={}));const cf="combo",lf="tree";var uf;(function(t){t["NODE"]="node",t["EDGE"]="edge",t["COMBO"]="combo",t["THEME"]="theme",t["PALETTE"]="palette",t["LAYOUT"]="layout",t["BEHAVIOR"]="behavior",t["PLUGIN"]="plugin",t["ANIMATION"]="animation",t["TRANSFORM"]="transform",t["SHAPE"]="shape"})(uf||(uf={}));const hf={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function df(t,e){var n;const r=null===(n=hf[t])||void 0===n?void 0:n[e];if(r)return r}const ff="5.0.49",pf="G6";function gf(t){return`[${pf} v${ff}] ${t}`}const vf={mute:!1,debug:t=>{!vf.mute&&console.debug(gf(t))},info:t=>{!vf.mute&&console.info(gf(t))},warn:t=>{!vf.mute&&console.warn(gf(t))},error:t=>{!vf.mute&&console.error(gf(t))}};function yf(t){const{theme:e}=t;if(!e)return{};const n=df(uf.THEME,e);return n||(vf.warn(`The theme of ${e} is not registered.`),{})}function mf(t,e){if(Array.isArray(t)&&0===t.length)return null;const n=Array.isArray(t)?t[0]:t,r=Array.isArray(t)?t.slice(1):e||[];return new Proxy(n,{get(t,e){return"function"!==typeof t[e]||["onframe","onfinish"].includes(e)?"finished"===e?Promise.all([n.finished,...r.map((t=>t.finished))]):Reflect.get(t,e):(...n)=>{t[e](...n),r.forEach((t=>{var r;return null===(r=t[e])||void 0===r?void 0:r.call(t,...n)}))}},set(t,e,n){return["onframe","onfinish"].includes(e)||r.forEach((t=>{t[e]=n})),Reflect.set(t,e,n)}})}function bf(t){const e=t.reduce(((t,e)=>(Object.entries(e).forEach((([e,n])=>{void 0===t[e]?t[e]=[n]:t[e].push(n)})),t)),{});Object.entries(e).forEach((([n,r])=>{(r.length!==t.length||r.some((t=>Pe(t)))||r.every((t=>!["sourceNode","targetNode","childrenNode"].includes(n)&&qd(t,r[0]))))&&delete e[n]}));const n=Object.entries(e).reduce(((t,[e,n])=>(n.forEach(((n,r)=>{t[r]?t[r][e]=n:t[r]={[e]:n}})),t)),[]);return 0!==t.length&&0===n.length&&n.push({_:0},{_:0}),n}function xf(t){switch(t){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return}}function wf(t,e){const{animation:n}=t;if(!1===n||!1===e)return!1;const r=Object.assign({},Xd);return rr(n)&&Object.assign(r,n),rr(e)&&Object.assign(r,e),r}function Ef(t){if("string"===typeof t){const e=df(uf.ANIMATION,t);return e||(vf.warn(`The animation of ${t} is not registered.`),[])}return t}function kf(t,e,n,r){var i,o;const{animation:s}=t;if(!1===s||!1===r)return[];const a=null===(i=null===t||void 0===t?void 0:t[e])||void 0===i?void 0:i.animation;if(!1===a)return[];const c=null===a||void 0===a?void 0:a[n];if(!1===c)return[];const l=null===(o=yf(t)[e])||void 0===o?void 0:o.animation,u=(t=[])=>Ef(t).map((t=>Object.assign(Object.assign(Object.assign(Object.assign({},Kd),rr(s)&&s),t),rr(r)&&r)));if(c)return u(c);if(!l)return[];const h=l[n];return!1===h?[]:u(h)}function Sf(t,e,n,r=[]){if(!r&&0===t&&0===e&&0===n)return null;if(Array.isArray(r)){let i=-1;const o=[];for(let s=0;s<r.length;s++){const a=r[s];if("translate"===a[0]){if(a[1]===t&&a[2]===e)return null;i=s,o.push(["translate",t,e])}else if("translate3d"===a[0]){if(a[1]===t&&a[2]===e&&a[3]===n)return null;i=s,o.push(["translate3d",t,e,null!==n&&void 0!==n?n:0])}else o.push(a)}return-1===i&&o.splice(0,0,Ae(n)?["translate3d",t,e,null!==n&&void 0!==n?n:0]:["translate",t,e]),0===o.length?null:o}const i=r?r.replace(/translate(3d)?\([^)]*\)/g,""):"";return 0===n?`translate(${t}, ${e})${i}`:`translate3d(${t}, ${e}, ${n})${i}`}var Mf=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Of=(t,e,n)=>{if(!n.length)return null;const[r,i]=e,o=e=>{var n;if(e){const o=t.getShape(e);if(!o)return null;const s=`get${Vd(e)}Style`,a=(null===(n=null===t||void 0===t?void 0:t[s])||void 0===n?void 0:n.bind(t))||(t=>t),c=(null===a||void 0===a?void 0:a(r))||{},l=(null===a||void 0===a?void 0:a(i))||{};return{shape:o,fromStyle:c,toStyle:l}}{const e=t;return{shape:e,fromStyle:r,toStyle:i}}};let s;const a=n.map((t=>{var{fields:e,shape:n,states:r}=t,i=Mf(t,["fields","shape","states"]);const a=o(n);if(!a)return null;const{shape:c,fromStyle:l,toStyle:u}=a,h=[{},{}];if(e.forEach((t=>{var e,n;Object.assign(h[0],{[t]:null!==(e=l[t])&&void 0!==e?e:xf(t)}),Object.assign(h[1],{[t]:null!==(n=u[t])&&void 0!==n?n:xf(t)})})),h.some((t=>Object.keys(t).some((t=>["x","y","z"].includes(t)))))){const{x:t=0,y:e=0,z:n,transform:r=""}=c.attributes||{};h.forEach((i=>{var o,s,a;i.transform=Sf(null!==(o=i.x)&&void 0!==o?o:t,null!==(s=i.y)&&void 0!==s?s:e,null!==(a=i.z)&&void 0!==a?a:n,r)}))}const d=c.animate(bf(h),i);return void 0===n&&(s=d),d})).filter(Boolean),c=s||(null===a||void 0===a?void 0:a[0]);return c?mf(c,a.filter((t=>t!==t))):null},Nf=[{fields:["opacity"]}],Tf=[{fields:["x","y"]}],Af=[{fields:["x","y"]}],Cf=Af,Pf=[{fields:["sourceNode","targetNode"]}],Rf=Pf,_f=[{fields:["childrenNode","x","y"]}],Lf=_f;var Df=Object.prototype.hasOwnProperty;function If(t,e){if(!e||!kn(t))return{};for(var n,r={},i=nr(e)?e:function(t){return t[e]},o=0;o<t.length;o++){var s=t[o];n=i(s),Df.call(r,n)?r[n].push(s):r[n]=[s]}return r}var jf=If,Ff=function(t,e,n){var r,i,o,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:Date.now(),r=null,s=t.apply(i,o),r||(i=o=null)},l=function(){var l=Date.now();a||!1!==n.leading||(a=l);var u=e-(l-a);return i=this,o=arguments,u<=0||u>e?(r&&(clearTimeout(r),r=null),a=l,s=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(c,u)),s};return l.cancel=function(){clearTimeout(r),a=0,r=i=o=null},l},Bf=function(t){if("object"!==typeof t||null===t)return t;var e;if(kn(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"===typeof t[n]&&null!=t[n]?e[n]=Bf(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"===typeof t[i]&&null!=t[i]?e[i]=Bf(t[i]):e[i]=t[i];return e},zf=Bf;function Gf(t){return"source"in t&&"target"in t}function Vf(t){return 2===t.length}function Wf(t){return t instanceof Float32Array||!(!Array.isArray(t)||2!==t.length&&3!==t.length)&&t.every((t=>"number"===typeof t))}function Uf(t,e,n){return t>=e&&t<=n}function Hf(t=0){if(Array.isArray(t)){const[e=0,n=e,r=e,i=n]=t;return[e,n,r,i]}return[t,t,t,t]}function $f(t=0){const e=Hf(t);return e[0]+e[2]}function Yf(t){return t.max[0]-t.min[0]}function qf(t){return t.max[1]-t.min[1]}function Xf(t){return[Yf(t),qf(t)]}function Kf(t,e){const n=Wf(t)?Zf(t):t.getShape("key").getBounds();return e?Jf(n,e):n}function Zf(t){const[e,n,r=0]=t,i=new Kr;return i.setMinMax([e,n,r],[e,n,r]),i}function Jf(t,e){const[n,r,i,o]=Hf(e),[s,a,c]=t.min,[l,u,h]=t.max,d=new Kr;return d.setMinMax([s-o,a-n,c],[l+r,u+i,h]),d}function Qf(t){if(0===t.length)return new Kr;if(1===t.length)return t[0];const e=new Kr;e.setMinMax(t[0].min,t[0].max);for(let n=1;n<t.length;n++){const r=t[n];e.setMinMax([Math.min(e.min[0],r.min[0]),Math.min(e.min[1],r.min[1]),Math.min(e.min[2],r.min[2])],[Math.max(e.max[0],r.max[0]),Math.max(e.max[1],r.max[1]),Math.max(e.max[2],r.max[2])])}return e}function tp(t,e){const[n,r]=t.min,[i,o]=t.max,[s,a]=e.min,[c,l]=e.max;return n>=s&&i<=c&&r>=a&&o<=l}function ep(t,e){return Uf(t[0],e.min[0],e.max[0])&&Uf(t[1],e.min[1],e.max[1])}function np(t,e,n=!1){const{min:[r,i],max:[o,s]}=e,a=(t[1]===i||t[1]===s)&&(n||Uf(t[0],r,o)),c=(t[0]===r||t[0]===o)&&(n||Uf(t[1],i,s));return a||c}function rp(t,e){return!ep(t,e)}function ip(t,e){const{center:n}=e;return t[0]===n[0]&&t[1]===n[1]}function op(t,e){const[n,r]=t,[i,o]=e.min,[s,a]=e.max,c=n-i,l=s-n,u=r-o,h=a-r,d=Math.min(c,l,u,h);return d===c?"left":d===l?"right":d===u?"top":d===h?"bottom":"left"}function sp(t,e){const n=zf(t);if(ep(t,e)){const r=op(t,e);switch(r){case"left":n[0]=e.min[0];break;case"right":n[0]=e.max[0];break;case"top":n[1]=e.min[1];break;case"bottom":n[1]=e.max[1];break}}else{const[r,i]=t,[o,s]=e.min,[a,c]=e.max;n[0]=Uf(r,o,a)?r:r<o?o:a,n[1]=Uf(i,s,c)?i:i<s?s:c}return n}function ap(t,e){const{center:n}=t,[r,i]=Xf(t),o="up"===e||"down"===e?n[0]:"right"===e?n[0]-r/6:n[0]+r/6,s="left"===e||"right"===e?n[1]:"down"===e?n[1]-i/6:n[1]+i/6;return[o,s]}function cp(t,e){let[n,r]=Xf(t);return[n,r]="up"===e||"down"===e?[n,r]:[r,n],(Math.pow(r,2)-Math.pow(Math.sqrt(Math.pow(n/2,2)+Math.pow(r,2))-n/2,2))/(2*r)}function lp(t){const{min:[e,n],max:[r,i]}=t,o=[e,i],s=[r,i],a=[r,n],c=[e,n],l=[o,s],u=[s,a],h=[a,c],d=[c,o];return[l,u,h,d]}n(61806);var up=function(t,e){return t===e},hp=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},t}(),dp=function(){function t(t){void 0===t&&(t=up),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new hp(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new hp(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;var e=null;while(this.head&&this.compare(this.head.value,t))e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)while(n.next)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=t.callback,i=void 0===r?void 0:r;if(!this.head)return null;var o=this.head;while(o){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;var e=this.head;while(e.next)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){var t=[],e=this.head;while(e)t.push(e),e=e.next;return t},t.prototype.reverse=function(){var t=this.head,e=null,n=null;while(t)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}(),fp=dp,pp=(function(){function t(){this.linkedList=new fp}t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)}}(),function(t,e,n){void 0===e&&(e=[]);var r=e.filter((function(e){return e.source===t||e.target===t}));if("target"===n){var i=function(e){return e.source===t};return r.filter(i).map((function(t){return t.target}))}if("source"===n){var o=function(e){return e.target===t};return r.filter(o).map((function(t){return t.source}))}var s=function(e){return e.source===t?e.target:e.source};return r.map(s)}),gp=function(t,e){return e.filter((function(e){return e.source===t}))},vp=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))};var yp=function(t){var e={},n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i;return r.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e},mp=yp;var bp={}.toString,xp=function(t,e){return bp.call(t)==="[object "+e+"]"},wp=xp,Ep=function(t){return wp(t,"Function")},kp=function(t){return Array.isArray?Array.isArray(t):wp(t,"Array")},Sp=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function Mp(t,e){var n;if(t)if(kp(t)){for(var r=0,i=t.length;r<i;r++)if(n=e(t[r],r),!1===n)break}else if(Sp(t))for(var o in t)if(t.hasOwnProperty(o)&&(n=e(t[o],o),!1===n))break}var Op=Mp;Object.keys;var Np=Array.prototype,Tp=(Np.splice,Np.indexOf,Array.prototype.splice,function(t){return wp(t,"String")});Object.prototype.hasOwnProperty;var Ap=function(t){return wp(t,"Number")},Cp=Ap,Pp=(Number.isInteger&&Number.isInteger,Math.PI,Math.PI,Object.values?function(t){return Object.values(t)}:function(t){var e=[];return Op(t,(function(n,r){Ep(t)&&"prototype"===r||e.push(n)})),e}),Rp=Pp;Object.prototype;var _p=function(t){if("object"!==typeof t||null===t)return t;var e;if(kp(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"===typeof t[n]&&null!=t[n]?e[n]=_p(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"===typeof t[i]&&null!=t[i]?e[i]=_p(t[i]):e[i]=t[i];return e},Lp=_p,Dp=function(t,e){if(!Ep(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],s=n.cache;if(s.has(o))return s.get(o);var a=t.apply(this,r);return s.set(o,a),a};return n.cache=new Map,n};Object.prototype.hasOwnProperty;Object.prototype.hasOwnProperty,Dp((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,s=e.fontVariant;return Ip||(Ip=document.createElement("canvas").getContext("2d")),Ip.font=[o,s,i,n+"px",r].join(" "),Ip.measureText(Tp(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),Ve([t],Rp(e)).join("")})),function(){function t(){this.map={}}t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length}}();var Ip,jp=function(t,e,n){for(var r,i=1/0,o=0;o<e.length;o++){var s=e[o].id;!n[s]&&t[s]<=i&&(i=t[s],r=e[o])}return r},Fp=function(t,e,n,r){var i=t.nodes,o=void 0===i?[]:i,s=t.edges,a=void 0===s?[]:s,c=[],l={},u={},h={};o.forEach((function(t,n){var r=t.id;c.push(r),u[r]=1/0,r===e&&(u[r]=0)}));for(var d=o.length,f=function(t){var e=jp(u,o,l),i=e.id;if(l[i]=!0,u[i]===1/0)return"continue";var s=[];s=n?gp(i,a):vp(i,a),s.forEach((function(t){var n=t.target,o=t.source,s=n===i?o:n,a=r&&t[r]?t[r]:1;u[s]>u[e.id]+a?(u[s]=u[e.id]+a,h[s]=[e.id]):u[s]===u[e.id]+a&&h[s].push(e.id)}))},p=0;p<d;p++)f(p);h[e]=[e];var g={};for(var v in u)u[v]!==1/0&&zp(e,v,h,g);var y={};for(var v in g)y[v]=g[v][0];return{length:u,path:y,allPath:g}},Bp=Fp;function zp(t,e,n,r){if(t===e)return[t];if(r[e])return r[e];for(var i=[],o=0,s=n[e];o<s.length;o++){var a=s[o],c=zp(t,a,n,r);if(!c)return;for(var l=0,u=c;l<u.length;l++){var h=u[l];kp(h)?i.push(We(We([],h,!0),[e],!1)):i.push([h,e])}}return r[e]=i,r[e]}var Gp,Vp=function(t,e,n,r,i){var o=Bp(t,e,r,i),s=o.length,a=o.path,c=o.allPath;return{length:s[n],path:a[n],allPath:c[n]}};(function(){function t(t){this.arr=t}t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null===r||void 0===r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+r[o];return new t(i)}},t.prototype.subtract=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null===r||void 0===r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-r[o];return new t(i)}},t.prototype.avg=function(e){var n=[];if(0!==e)for(var r in this.arr)n[r]=this.arr[r]/e;return new t(n)},t.prototype.negate=function(){var e=[];for(var n in this.arr)e[n]=-this.arr[n];return new t(e)},t.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===n||void 0===n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return r}},t.prototype.euclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===n||void 0===n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return Math.sqrt(r)}console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],n=Lp(this.arr);n.sort((function(t,e){return t-e}));var r=n[n.length-1],i=n[0];for(var o in this.arr)e[o]=(this.arr[o]-i)/(r-i);return new t(e)},t.prototype.norm2=function(){var t;if(!(null===(t=this.arr)||void 0===t?void 0:t.length))return 0;var e=0;for(var n in this.arr)e+=Math.pow(this.arr[n],2);return Math.sqrt(e)},t.prototype.dot=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===n||void 0===n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=this.arr[i]*t.arr[i];return r}console.error("The two vectors are unequal in length.")},t.prototype.equal=function(t){var e,n=t.arr;if((null===(e=this.arr)||void 0===e?void 0:e.length)!==(null===n||void 0===n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0}})();(function(t){t["EuclideanDistance"]="euclideanDistance"})(Gp||(Gp={}));(function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}t.prototype.find=function(t){while(this.parent[t]!==t)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)}})();var Wp=function(t,e){return t-e},Up=(function(){function t(t){void 0===t&&(t=Wp),this.compareFn=t,this.list=[]}t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){var e=this.getParent(t);while(t&&t>0&&this.compareFn(this.list[e],this.list[t])>0){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,r=this.getLeft(t),i=this.getRight(t),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))}}(),function(t,e,n){"number"!==typeof e&&(e=1e-6),"number"!==typeof n&&(n=.85);for(var r,i=1,o=0,s=1e3,a=t.nodes,c=void 0===a?[]:a,l=t.edges,u=void 0===l?[]:l,h=c.length,d={},f={},p=0;p<h;++p){var g=c[p],v=g.id;d[v]=1/h,f[v]=1/h}var y=mp(t);while(s>0&&i>e){o=0;for(p=0;p<h;++p){g=c[p],v=g.id;if(r=0,0===y[g.id].inDegree)d[v]=0;else{for(var m=pp(v,u,"source"),b=0;b<m.length;++b){var x=m[b],w=y[x].outDegree;w>0&&(r+=f[x]/w)}d[v]=n*r,o+=d[v]}}o=(1-o)/h,i=0;for(p=0;p<h;++p){g=c[p],v=g.id;r=d[v]+o,i+=Math.abs(r-f[v]),f[v]=r}s-=1}return f}),Hp=Up,$p=-1,Yp=-1,qp="-1",Xp="-1",Kp=-1,Zp=function(){function t(t,e,n,r){void 0===t&&(t=$p),void 0===e&&(e=Yp),void 0===n&&(n=Yp),void 0===r&&(r=qp),this.id=t,this.from=e,this.to=n,this.label=r}return t}(),Jp=function(){function t(t,e){void 0===t&&(t=Yp),void 0===e&&(e=Xp),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}(),Qp=function(){function t(t,e,n){void 0===t&&(t=Yp),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new Jp(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,n,r){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var i=new Zp(t,e,n,r);if(this.edges.push(i),this.edgeMap[t]=i,this.nodeMap[e].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var o=new Zp(t,n,e,r);this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o)}}},t}(),tg=function(){function t(t,e,n,r,i){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||Xp,edgeLabel:r||qp,nodeLabel2:i||Xp}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),eg=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length,n=t.length;if(e!==n)return!1;for(var r=0;r<e;r++)if(this.dfsEdgeList[r]!==t[r])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,r,i){return this.dfsEdgeList.push(new tg(t,e,n,r,i)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=Kp),void 0===e&&(e=!1);var n=new Qp(t,!0,e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,r=t.toNode,i=t.nodeEdgeNodeLabel,o=i.nodeLabel1,s=i.edgeLabel,a=i.nodeLabel2;o!==Xp&&n.addNode(e,o),a!==Xp&&n.addNode(r,a),o!==Xp&&a!==o&&n.addEdge(void 0,e,r,s)})),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length,n=e-1;n>=0;n--){var r=this.dfsEdgeList[n],i=r.fromNode,o=r.toNode;i<o&&(void 0===t||o===t)&&(this.rmpath.push(n),t=i)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length},t}(),ng=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){while(t){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}();(function(){function t(t){var e=t.graphs,n=t.minSupport,r=void 0===n?2:n,i=t.minNodeNum,o=void 0===i?1:i,s=t.maxNodeNum,a=void 0===s?4:s,c=t.top,l=void 0===c?10:c,u=t.directed,h=void 0!==u&&u,d=t.verbose,f=void 0!==d&&d;this.graphs=e,this.dfsCode=new eg,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=l,this.directed=h,this.counter=0,this.maxNodeNum=a,this.minNodeNum=o,this.verbose=f,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}t.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)})),r},t.prototype.findBackwardEdge=function(t,e,n,r){if(!this.directed&&e===n)return null;for(var i=t.nodeMap,o=i[n.to],s=o.edges,a=s.length,c=0;c<a;c++){var l=s[c];if(!r.hasEdge(l)&&l.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=l.label)return l}else if(e.label<l.label||e.label===l.label&&i[e.to].label<=i[n.to].label)return l}return null},t.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],o=e.to,s=t.nodeMap[o].edges,a=s.length,c=0;c<a;c++){var l=s[c],u=t.nodeMap[l.to];n<=u.label&&!r.hasNode(u)&&i.push(l)}return i},t.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],o=t.nodeMap,s=o[e.to].label,a=o[e.from],c=a.edges,l=c.length,u=0;u<l;u++){var h=c[u],d=o[h.to].label;e.to===h.to||n>d||r.hasNode(o[h.to])||(e.label<h.label||e.label===h.label&&s<=d)&&i.push(h)}return i},t.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){var r=t[n],i=r.nodeLabel1,o=r.edgeLabel,s=r.nodeLabel2;e?(i<e.nodeLabel1||i===e.nodeLabel1&&o<e.edgeLabel||i===e.nodeLabel1&&o===e.edgeLabel&&s<e.nodeLabel2)&&(e={nodeLabel1:i,edgeLabel:o,nodeLabel2:s}):e={nodeLabel1:i,edgeLabel:o,nodeLabel2:s}})),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,r=e.toGraph(Kp,n),i=r.nodeMap,o=new eg,s={};r.nodes.forEach((function(e){var n=t.findForwardRootEdges(r,e);n.forEach((function(t){var n=i[t.to],o="".concat(e.label,"-").concat(t.label,"-").concat(n.label);s[o]||(s[o]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var a={graphId:r.id,edge:t,preNode:null};s[o].projected.push(a)}))}));var a=this.findMinLabel(s);if(a){o.dfsEdgeList.push(new tg(0,1,a.nodeLabel1,a.edgeLabel,a.nodeLabel2));var c=function s(a){for(var c=o.buildRmpath(),l=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u=o.dfsEdgeList[c[0]].toNode,h={},d=!1,f=0,p=n?-1:0,g=function(e){if(d)return"break";a.forEach((function(n){var i=new ng(n),s=t.findBackwardEdge(r,i.edges[c[e]],i.edges[c[0]],i);s&&(h[s.label]||(h[s.label]={projected:[],edgeLabel:s.label}),h[s.label].projected.push({graphId:r.id,edge:h,preNode:n}),f=o.dfsEdgeList[c[e]].fromNode,d=!0)}))},v=c.length-1;v>p;v--){var y=g(v);if("break"===y)break}if(d){var m=t.findMinLabel(h);o.dfsEdgeList.push(new tg(u,f,Xp,m.edgeLabel,Xp));var b=o.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[b]===o.dfsEdgeList[b]&&s(h[m.edgeLabel].projected)}var x={};d=!1;var w=0;a.forEach((function(e){var n=new ng(e),o=t.findForwardPureEdges(r,n.edges[c[0]],l,n);o.length>0&&(d=!0,w=u,o.forEach((function(t){var n="".concat(t.label,"-").concat(i[t.to].label);x[n]||(x[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),x[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}));var E=c.length,k=function(e){if(d)return"break";var n=c[e];a.forEach((function(e){var s=new ng(e),a=t.findForwardRmpathEdges(r,s.edges[n],l,s);a.length>0&&(d=!0,w=o.dfsEdgeList[n].fromNode,a.forEach((function(t){var n="".concat(t.label,"-").concat(i[t.to].label);x[n]||(x[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),x[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}))};for(v=0;v<E;v++){var S=k(v);if("break"===S)break}if(!d)return!0;var M=t.findMinLabel(x);o.dfsEdgeList.push(new tg(w,u+1,Xp,M.edgeLabel,M.nodeLabel2));var O=o.dfsEdgeList.length-1;return e.dfsEdgeList[O]===o.dfsEdgeList[O]&&s(x["".concat(M.edgeLabel,"-").concat(M.nodeLabel2)].projected)},l="".concat(a.nodeLabel1,"-").concat(a.edgeLabel,"-").concat(a.nodeLabel2);return c(s[l].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Lp(t))}},t.prototype.subGraphMining=function(t){var e=this,n=this.getSupport(t);if(!(n<this.minSupport)&&this.isMin()){this.report();var r=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[i[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},c={};t.forEach((function(t){for(var n=e.graphs[t.graphId],l=n.nodeMap,u=new ng(t),h=i.length-1;h>=0;h--){var d=e.findBackwardEdge(n,u.edges[i[h]],u.edges[i[0]],u);if(d){var f="".concat(e.dfsCode.dfsEdgeList[i[h]].fromNode,"-").concat(d.label);c[f]||(c[f]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[i[h]].fromNode,edgeLabel:d.label}),c[f].projected.push({graphId:t.graphId,edge:d,preNode:t})}}if(!(r>=e.maxNodeNum)){var p=e.findForwardPureEdges(n,u.edges[i[0]],s,u);p.forEach((function(e){var n="".concat(o,"-").concat(e.label,"-").concat(l[e.to].label);a[n]||(a[n]={projected:[],fromNodeId:o,edgeLabel:e.label,nodeLabel2:l[e.to].label}),a[n].projected.push({graphId:t.graphId,edge:e,preNode:t})}));var g=function(r){var o=e.findForwardRmpathEdges(n,u.edges[i[r]],s,u);o.forEach((function(n){var o="".concat(e.dfsCode.dfsEdgeList[i[r]].fromNode,"-").concat(n.label,"-").concat(l[n.to].label);a[o]||(a[o]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[i[r]].fromNode,edgeLabel:n.label,nodeLabel2:l[n.to].label}),a[o].projected.push({graphId:t.graphId,edge:n,preNode:t})}))};for(h=0;h<i.length;h++)g(h)}})),Object.keys(c).forEach((function(t){var n=c[t],r=n.toNodeId,i=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new tg(o,r,"-1",i,"-1")),e.subGraphMining(c[t].projected),e.dfsCode.dfsEdgeList.pop()})),Object.keys(a).forEach((function(t){var n=a[t],r=n.fromNodeId,i=n.edgeLabel,s=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new tg(r,o+1,Xp,i,s)),e.subGraphMining(a[t].projected),e.dfsCode.dfsEdgeList.pop()}))}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},s={},a={};return Object.keys(t).forEach((function(n){var r=t[n],c=r.nodeMap;r.nodes.forEach((function(t,r){var l=t.label,u="".concat(n,"-").concat(l);if(!s[u]){var h=i[l]||0;h++,i[l]=h}s[u]={graphKey:n,label:l},t.edges.forEach((function(t){var r=l,i=c[t.to].label;if(!e&&r>i){var s=i;i=r,r=s}var u=t.label,h="".concat(n,"-").concat(r,"-").concat(u,"-").concat(i),d="".concat(r,"-").concat(u,"-").concat(i);if(!o[d]){var f=o[d]||0;f++,o[d]=f}a[h]={graphId:n,nodeLabel1:r,edgeLabel:u,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(t){var e=i[t];if(!(e<n)){var o={nodes:[],edges:[]};o.nodes.push({id:"0",label:t}),r.push(o)}})),r},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,n=(this.directed,{});Object.keys(e).forEach((function(r){var i=e[r],o=i.nodeMap;i.nodes.forEach((function(e){var s=t.findForwardRootEdges(i,e);s.forEach((function(t){var i=o[t.to],s="".concat(e.label,"-").concat(t.label,"-").concat(i.label);n[s]||(n[s]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:i.label});var a={graphId:r,edge:t,preNode:null};n[s].projected.push(a)}))}))})),Object.keys(n).forEach((function(e){var r=n[e],i=r.projected,o=r.nodeLabel1,s=r.edgeLabel,a=r.nodeLabel2;t.dfsCode.dfsEdgeList.push(new tg(0,1,o,s,a)),t.subGraphMining(i),t.dfsCode.dfsEdgeList.pop()}))}}})(),function(){function t(t){void 0===t&&(t=10),this.linkedList=new fp,this.maxStep=t}Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map((function(t){return t.value}))},t.prototype.clear=function(){while(!this.isEmpty())this.pop()}}();function rg(t){if(void 0!==t.id)return t.id;if(void 0!==t.source&&void 0!==t.target)return`${t.source}-${t.target}`;throw new Error(gf("The datum does not have available id."))}function ig(t){return t.combo}function og(t,e){const n={nodes:(t.nodes||[]).map(rg),edges:(t.edges||[]).map(rg),combos:(t.combos||[]).map(rg)};return e?Object.values(n).flat():n}const sg=(t,e,n)=>{var r;switch(n.type){case"degree":{const i=new Map;return null===(r=t.nodes)||void 0===r||r.forEach((t=>{const r=e(rg(t),n.direction).length;i.set(rg(t),r)})),i}case"betweenness":return cg(t,n.directed,n.weightPropertyName);case"closeness":return lg(t,n.directed,n.weightPropertyName);case"eigenvector":return hg(t,n.directed);case"pagerank":return ug(t,n.epsilon,n.linkProb);default:return ag(t)}},ag=t=>{var e;const n=new Map;return null===(e=t.nodes)||void 0===e||e.forEach((t=>{n.set(rg(t),0)})),n},cg=(t,e,n)=>{const r=ag(t),{nodes:i=[]}=t;return i.forEach((o=>{i.forEach((i=>{if(o!==i){const{allPath:s}=Vp(t,rg(o),rg(i),e,n),a=s.length;s.flat().forEach((t=>{t!==rg(o)&&t!==rg(i)&&r.set(t,r.get(t)+1/a)}))}}))})),r},lg=(t,e,n)=>{const r=new Map,{nodes:i=[]}=t;return i.forEach((o=>{const s=i.reduce(((r,i)=>{if(o!==i){const{length:s}=Vp(t,rg(o),rg(i),e,n);r+=s}return r}),0);r.set(rg(o),1/s)})),r},ug=(t,e,n)=>{var r;const i=new Map,o=Hp(t,e,n);return null===(r=t.nodes)||void 0===r||r.forEach((t=>{i.set(rg(t),o[rg(t)])})),i},hg=(t,e)=>{const{nodes:n=[]}=t,r=dg(t,e),i=fg(r,n.length),o=new Map;return n.forEach(((t,e)=>{o.set(rg(t),i[e])})),o},dg=(t,e)=>{const{nodes:n=[],edges:r=[]}=t,i=Array(n.length).fill(null).map((()=>Array(n.length).fill(0)));return r.forEach((({source:t,target:r})=>{const o=n.findIndex((e=>rg(e)===t)),s=n.findIndex((t=>rg(t)===r));e?i[o][s]=1:(i[o][s]=1,i[s][o]=1)})),i},fg=(t,e,n=100,r=1e-6)=>{let i=Array(e).fill(1),o=1/0;for(let s=0;s<n&&o>r;s++){const n=Array(e).fill(0);for(let o=0;o<e;o++)for(let r=0;r<e;r++)n[o]+=t[o][r]*i[r];const r=Math.sqrt(n.reduce(((t,e)=>t+e*e),0));for(let t=0;t<e;t++)n[t]/=r;o=Math.sqrt(n.reduce(((t,e,n)=>t+(e-i[n])*e),0)),i=n}return i};function pg(t,e,n,r=qd){const i=new Map(t.map((t=>[n(t),t]))),o=new Map(e.map((t=>[n(t),t]))),s=new Set(i.keys()),a=new Set(o.keys()),c=[],l=[],u=[],h=[];return a.forEach((t=>{s.has(t)?r(i.get(t),o.get(t))?h.push(o.get(t)):l.push(o.get(t)):c.push(o.get(t))})),s.forEach((t=>{a.has(t)||u.push(i.get(t))})),{enter:c,exit:u,keep:h,update:l}}function gg(t,e,n){const r=t=>{n&&!n(t)||(t.style.visibility=e)};t.forEach((t=>{r(t)}))}function vg(t,e,n){const r={},i=t=>(t in r||(r[t]=0),`${e}-${t}-${r[t]++}`);return n.map((e=>"string"===typeof e?{type:e,key:i(e)}:"function"===typeof e?e.call(t):e.key?e:Object.assign(Object.assign({},e),{key:i(e.type)})))}class yg{constructor(t){this.extensions=[],this.extensionMap={},this.context=t}setExtensions(t){const e=vg(this.context.graph,this.category,t),{enter:n,update:r,exit:i,keep:o}=pg(this.extensions,e,(t=>t.key));this.createExtensions(n),this.updateExtensions([...r,...o]),this.destroyExtensions(i),this.extensions=e}createExtension(t){const{category:e}=this,{key:n,type:r}=t,i=df(e,r);if(!i)return vf.warn(`The extension ${r} of ${e} is not registered.`);const o=new i(this.context,t);o.initialized=!0,this.extensionMap[n]=o}createExtensions(t){t.forEach((t=>this.createExtension(t)))}updateExtension(t){const{key:e}=t,n=this.extensionMap[e];n&&n.update(t)}updateExtensions(t){t.forEach((t=>this.updateExtension(t)))}destroyExtension(t){const e=this.extensionMap[t];e&&(e.initialized&&!e.destroyed&&e.destroy(),delete this.extensionMap[t])}destroyExtensions(t){t.forEach((({key:t})=>this.destroyExtension(t)))}destroy(){this.destroyExtensions(this.extensions),this.context={},this.extensions=[],this.extensionMap={}}}class mg{constructor(t,e){this.events=[],this.initialized=!1,this.destroyed=!1,this.context=t,this.options=e}update(t){this.options=Object.assign(this.options,t)}destroy(){this.context={},this.options={},this.destroyed=!0}}class bg extends mg{}class xg extends bg{constructor(t,e){super(t,Object.assign({},xg.defaultOptions,e)),this.isOverlapping=(t,e)=>e.some((e=>t.intersects(e))),this.occupiedBounds=[],this.detectLabelCollision=t=>{const e=this.context.viewport,n={show:[],hide:[]};return this.occupiedBounds=[],t.forEach((t=>{const r=t.getShape("label").getRenderBounds();e.isInViewport(r,!0)&&!this.isOverlapping(r,this.occupiedBounds)?(n.show.push(t),this.occupiedBounds.push(Jf(r,this.options.padding))):n.hide.push(t)})),n},this.hideLabelIfExceedViewport=(t,e)=>{const{exit:n}=pg(t,e,(t=>t.id));null===n||void 0===n||n.forEach(this.hideLabel)},this.nodeCentralities=new Map,this.sortNodesByCentrality=(t,e)=>{const{model:n}=this.context,r=n.getData(),i=n.getRelatedEdgesData.bind(n),o=t.map((t=>(this.nodeCentralities.has(t.id)||(this.nodeCentralities=sg(r,i,e)),{node:t,centrality:this.nodeCentralities.get(t.id)})));return o.sort(((t,e)=>e.centrality-t.centrality)).map((t=>t.node))},this.sortLabelElementsInView=t=>{const{sort:e,sortNode:n,sortCombo:r,sortEdge:i}=this.options,{model:o}=this.context;if(nr(e))return t.sort(((t,n)=>e(o.getElementDataById(t.id),o.getElementDataById(n.id))));const{node:s=[],edge:a=[],combo:c=[]}=jf(t,(t=>t.type)),l=nr(r)?c.sort(((t,e)=>r(...o.getComboData([t.id,e.id])))):c,u=nr(n)?s.sort(((t,e)=>n(...o.getNodeData([t.id,e.id])))):this.sortNodesByCentrality(s,n),h=nr(i)?a.sort(((t,e)=>i(...o.getEdgeData([t.id,e.id])))):a;return[...l,...u,...h]},this.labelElementsInView=[],this.isFirstRender=!0,this.onToggleVisibility=t=>{var e;if("zIndex"===(null===(e=t.data)||void 0===e?void 0:e.stage))return;if(!this.validate(t))return void(this.hiddenElements.size>0&&(this.hiddenElements.forEach(this.showLabel),this.hiddenElements.clear()));const n=this.isFirstRender?this.getLabelElements():this.getLabelElementsInView();this.hideLabelIfExceedViewport(this.labelElementsInView,n),this.labelElementsInView=n;const r=this.sortLabelElementsInView(this.labelElementsInView),{show:i,hide:o}=this.detectLabelCollision(r);for(let s=i.length-1;s>=0;s--)this.showLabel(i[s]);o.forEach(this.hideLabel)},this.hiddenElements=new Map,this.hideLabel=t=>{const e=t.getShape("label");e&&gg(e,"hidden"),this.hiddenElements.set(t.id,t)},this.showLabel=t=>{const e=t.getShape("label");e&&gg(e,"visible"),t.toFront(),this.hiddenElements.delete(t.id)},this.onTransform=Ff(this.onToggleVisibility,this.options.throttle,{leading:!0}),this.enableToggle=!0,this.toggle=t=>{this.enableToggle&&this.onToggleVisibility(t)},this.onBeforeRender=()=>{this.enableToggle=!1},this.onAfterRender=t=>{this.onToggleVisibility(t),this.enableToggle=!0},this.bindEvents()}update(t){this.unbindEvents(),super.update(t),this.bindEvents(),this.onToggleVisibility({})}getLabelElements(){const{elementMap:t}=this.context.element,e=[];for(const n in t){const r=t[n];r.isVisible()&&r.getShape("label")&&e.push(r)}return e}getLabelElementsInView(){const t=this.context.viewport;return this.getLabelElements().filter((e=>t.isInViewport(e.getShape("key").getRenderBounds())))}bindEvents(){const{graph:t}=this.context;t.on(of.BEFORE_RENDER,this.onBeforeRender),t.on(of.AFTER_RENDER,this.onAfterRender),t.on(of.AFTER_DRAW,this.toggle),t.on(of.AFTER_LAYOUT,this.toggle),t.on(of.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:t}=this.context;t.off(of.BEFORE_RENDER,this.onBeforeRender),t.off(of.AFTER_RENDER,this.onAfterRender),t.off(of.AFTER_DRAW,this.toggle),t.off(of.AFTER_LAYOUT,this.toggle),t.off(of.AFTER_TRANSFORM,this.onTransform)}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return nr(e)?e(t):!!e}destroy(){this.unbindEvents(),super.destroy()}}xg.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};var wg=function(t){if(!Ud(t)||!Qn(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;var e=t;while(null!==Object.getPrototypeOf(e))e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Eg=wg,kg=5;function Sg(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(null==t)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function Mg(t,e,n,r){for(var i in n=n||0,r=r||kg,e)if(Sg(e,i)){var o=e[i];null!==o&&Eg(o)?(Eg(t[i])||(t[i]={}),n<r?Mg(t[i],o,n+1,r):t[i]=e[i]):kn(o)?(t[i]=[],t[i]=t[i].concat(o)):void 0!==o&&(t[i]=o)}}var Og=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Mg(t,e[r]);return t},Ng=Og;const Tg=[0,0,0];function Ag(t,e){return t.map(((t,n)=>t+e[n]))}function Cg(t,e){return t.map(((t,n)=>t-e[n]))}function Pg(t,e){return"number"===typeof e?t.map((t=>t*e)):t.map(((t,n)=>t*e[n]))}function Rg(t,e){return"number"===typeof e?t.map((t=>t/e)):t.map(((t,n)=>t/e[n]))}function _g(t,e){return t.reduce(((t,n,r)=>t+n*e[r]),0)}function Lg(t,e){const n=Wg(t),r=Wg(e);return[n[1]*r[2]-n[2]*r[1],n[2]*r[0]-n[0]*r[2],n[0]*r[1]-n[1]*r[0]]}function Dg(t,e){return t.map((t=>t*e))}function Ig(t,e){return Math.sqrt(t.reduce(((t,n,r)=>t+Math.pow(n-e[r]||0,2)),0))}function jg(t,e){return t.reduce(((t,n,r)=>t+Math.abs(n-e[r])),0)}function Fg(t){const e=t.reduce(((t,e)=>t+Math.pow(e,2)),0);return t.map((t=>t/Math.sqrt(e)))}function Bg(t,e,n=!1){const r=t[0]*e[1]-t[1]*e[0];let i=Math.acos(Pg(t,e).reduce(((t,e)=>t+e),0)/(Ig(t,Tg)*Ig(e,Tg)));return n&&r<0&&(i=2*Math.PI-i),i}function zg(t,e=!0){return e?[-t[1],t[0]]:[t[1],-t[0]]}function Gg(t,e){return t.map((t=>t%e))}function Vg(t){return[t[0],t[1]]}function Wg(t){return Vf(t)?[t[0],t[1],0]:t}function Ug(t){const[e,n]=t;return e||n?Math.atan2(n,e):0}function Hg(t,e){const[n,r]=t,[i,o]=e,s=Cg(n,r),a=Cg(i,o);return Lg(s,a).every((t=>0===t))}function $g(t,e,n=!1){if(Hg(t,e))return;const[r,i]=t,[o,s]=e,a=((r[0]-o[0])*(o[1]-s[1])-(r[1]-o[1])*(o[0]-s[0]))/((r[0]-i[0])*(o[1]-s[1])-(r[1]-i[1])*(o[0]-s[0])),c=s[0]-o[0]?(r[0]-o[0]+a*(i[0]-r[0]))/(s[0]-o[0]):(r[1]-o[1]+a*(i[1]-r[1]))/(s[1]-o[1]);return n||Uf(a,0,1)&&Uf(c,0,1)?[r[0]+a*(i[0]-r[0]),r[1]+a*(i[1]-r[1])]:void 0}function Yg(t){if(Array.isArray(t))return Uf(t[0],0,1)&&Uf(t[1],0,1)?t:[.5,.5];const e=t.split("-"),n=e.includes("left")?0:e.includes("right")?1:.5,r=e.includes("top")?0:e.includes("bottom")?1:.5;return[n,r]}function qg(t){const{x:e=0,y:n=0,z:r=0}=t.style||{};return[+e,+n,+r]}function Xg(t){const{x:e,y:n,z:r}=t.style||{};return void 0!==e||void 0!==n||void 0!==r}function Kg(t,e){const[n,r]=e,{min:i,max:o}=t;return[i[0]+n*(o[0]-i[0]),i[1]+r*(o[1]-i[1])]}function Zg(t,e="center"){const n=Yg(e);return Kg(t,n)}function Jg(t){var e;return[t.x,t.y,null!==(e=t.z)&&void 0!==e?e:0]}function Qg(t){var e;return{x:t[0],y:t[1],z:null!==(e=t[2])&&void 0!==e?e:0}}function tv(t,e=0){return t.map((t=>parseFloat(t.toFixed(e))))}function ev(t,e,n,r=!1){if(qd(t,e))return t;const i=r?Cg(t,e):Cg(e,t),o=Fg(i),s=[o[0]*n,o[1]*n];return Ag(Vg(t),s)}function nv(t,e){return t[1]===e[1]}function rv(t,e){return t[0]===e[0]}function iv(t,e){return nv(t,e)||rv(t,e)}function ov(t,e,n){return Hg([t,e],[e,n])}function sv(t,e){return[2*e[0]-t[0],2*e[1]-t[1]]}function av(t,e,n,r=!0,i=!1){for(let o=0;o<n.length;o++){let s=n[o],a=n[(o+1)%n.length];r&&(s=Ag(e,s),a=Ag(e,a));const c=i?sv(t,e):t,l=$g([e,c],[s,a]);if(l)return{point:l,line:[s,a]}}return{point:e,line:void 0}}function cv(t,e,n,r){const i=t[0],o=t[1];let s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);const a=r-n;for(let c=0,l=a-1;c<a;l=c++){const t=e[c+n][0],r=e[c+n][1],a=e[l+n][0],u=e[l+n][1],h=r>o!==u>o&&i<(a-t)*(o-r)/(u-r)+t;h&&(s=!s)}return s}function lv(t,e,n=!1){const r=Zg(e,"center"),i=[Zg(e,"left-top"),Zg(e,"right-top"),Zg(e,"right-bottom"),Zg(e,"left-bottom")];return av(t,r,i,!1,n).point}function uv(t,e,n=!1){const r=e.center,i=n?sv(t,r):t,o=Cg(i,e.center),s=Math.atan2(o[1],o[0]);if(isNaN(s))return r;const a=Yf(e)/2,c=qf(e)/2,l=r[0]+a*Math.cos(s),u=r[1]+c*Math.sin(s);return[l,u]}function hv(t,e){let n=1/0,r=[t[0],e[0]];return t.forEach((t=>{e.forEach((e=>{const i=Ig(t,e);i<n&&(n=i,r=[t,e])}))})),r}function dv(t,e){let n=1/0,r=[[0,0],[0,0]];return e.forEach((e=>{const i=fv(t,e);i<n&&(n=i,r=e)})),r}function fv(t,e){const n=pv(t,e);return Ig(t,n)}function pv(t,e){const[n,r]=e[0],[i,o]=e[1],[s,a]=t,c=i-n,l=o-r;if(0===c&&0===l)return[n,r];let u=((s-n)*c+(a-r)*l)/(c*c+l*l);u>1?u=1:u<0&&(u=0);const h=n+u*c,d=r+u*l;return[h,d]}function gv(t){const e=t.reduce(((t,e)=>Ag(t,e)),[0,0]);return Rg(e,t.length)}function vv(t,e=!0){const n=gv(t);return t.sort((([t,r],[i,o])=>{const s=Math.atan2(r-n[1],t-n[0]),a=Math.atan2(o-n[1],i-n[0]);return e?a-s:s-a}))}function yv(t,e){return[t,[t[0],e[1]],e,[e[0],t[1]]]}class mv{constructor(t,e,n){if(this.phase=e,this.pointerByTouch=[],this.initialDistance=null,this.emitter=t,mv.instance)return mv.callbacks[this.phase].push(n),mv.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),mv.instance=this,mv.callbacks[this.phase].push(n)}bindEvents(){const{emitter:t}=this;t.on(ef.POINTER_DOWN,this.onPointerDown),t.on(ef.POINTER_MOVE,this.onPointerMove),t.on(ef.POINTER_UP,this.onPointerUp)}updatePointerPosition(t,e,n){const r=this.pointerByTouch.findIndex((e=>e.pointerId===t));r>=0&&(this.pointerByTouch[r]={x:e,y:n,pointerId:t})}onPointerDown(t){const{x:e,y:n}=t.client||{};if(void 0!==e&&void 0!==n&&(this.pointerByTouch.push({x:e,y:n,pointerId:t.pointerId}),"touch"===t.pointerType&&2===this.pointerByTouch.length)){mv.isPinching=!0;const e=this.pointerByTouch[0].x-this.pointerByTouch[1].x,n=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(e*e+n*n),mv.callbacks.pinchstart.forEach((e=>e(t,{scale:0})))}}onPointerMove(t){if(2!==this.pointerByTouch.length||null===this.initialDistance)return;const{x:e,y:n}=t.client||{};if(void 0===e||void 0===n)return;this.updatePointerPosition(t.pointerId,e,n);const r=this.pointerByTouch[0].x-this.pointerByTouch[1].x,i=this.pointerByTouch[0].y-this.pointerByTouch[1].y,o=Math.sqrt(r*r+i*i),s=o/this.initialDistance;mv.callbacks.pinchmove.forEach((e=>e(t,{scale:5*(s-1)})))}onPointerUp(t){var e;mv.callbacks.pinchend.forEach((e=>e(t,{scale:0}))),mv.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],null===(e=mv.instance)||void 0===e||e.tryDestroy()}destroy(){this.emitter.off(ef.POINTER_DOWN,this.onPointerDown),this.emitter.off(ef.POINTER_MOVE,this.onPointerMove),this.emitter.off(ef.POINTER_UP,this.onPointerUp),mv.instance=null}off(t,e){const n=mv.callbacks[t].indexOf(e);n>-1&&mv.callbacks[t].splice(n,1),this.tryDestroy()}tryDestroy(){Object.values(mv.callbacks).every((t=>0===t.length))&&this.destroy()}}mv.isPinching=!1,mv.instance=null,mv.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};const bv=t=>t.map((t=>Re(t)?t.toLocaleLowerCase():t));class xv{constructor(t){this.map=new Map,this.boundHandlePinch=()=>{},this.recordKey=new Set,this.onKeyDown=t=>{(null===t||void 0===t?void 0:t.key)&&(this.recordKey.add(t.key),this.trigger(t))},this.onKeyUp=t=>{(null===t||void 0===t?void 0:t.key)&&this.recordKey.delete(t.key)},this.onWheel=t=>{this.triggerExtendKey(ef.WHEEL,t)},this.onDrag=t=>{this.triggerExtendKey(ef.DRAG,t)},this.handlePinch=(t,e)=>{this.triggerExtendKey(ef.PINCH,Object.assign(Object.assign({},t),e))},this.onFocus=()=>{this.recordKey.clear()},this.emitter=t,this.bindEvents()}bind(t,e){0!==t.length&&(t.includes(ef.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new mv(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(t,e))}unbind(t,e){this.map.forEach(((n,r)=>{qd(r,t)&&(e&&e!==n||this.map.delete(r))}))}unbindAll(){this.map.clear()}match(t){const e=bv(Array.from(this.recordKey)).sort(),n=bv(t).sort();return qd(e,n)}bindEvents(){var t;const{emitter:e}=this;e.on(ef.KEY_DOWN,this.onKeyDown),e.on(ef.KEY_UP,this.onKeyUp),e.on(ef.WHEEL,this.onWheel),e.on(ef.DRAG,this.onDrag),null===(t=globalThis.addEventListener)||void 0===t||t.call(globalThis,"focus",this.onFocus)}trigger(t){this.map.forEach(((e,n)=>{this.match(n)&&e(t)}))}triggerExtendKey(t,e){this.map.forEach(((n,r)=>{r.includes(t)&&qd(Array.from(this.recordKey),r.filter((e=>e!==t)))&&n(e)}))}destroy(){var t,e;this.unbindAll(),this.emitter.off(ef.KEY_DOWN,this.onKeyDown),this.emitter.off(ef.KEY_UP,this.onKeyUp),this.emitter.off(ef.WHEEL,this.onWheel),this.emitter.off(ef.DRAG,this.onDrag),null===(t=this.pinchHandler)||void 0===t||t.off("pinchmove",this.boundHandlePinch),null===(e=globalThis.removeEventListener)||void 0===e||e.call(globalThis,"blur",this.onFocus)}}class wv extends bg{constructor(t,e){super(t,Ng({},wv.defaultOptions,e)),this.shortcut=new xv(t.graph),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.clearStates=this.clearStates.bind(this),this.bindEvents()}onPointerDown(t){if(!this.validate(t)||!this.isKeydown()||this.startPoint)return;const{canvas:e,graph:n}=this.context,r=Object.assign({},this.options.style);this.options.style.lineWidth&&(r.lineWidth=+this.options.style.lineWidth/n.getZoom()),this.rectShape=new Yu({id:"g6-brush-select",style:r}),e.appendChild(this.rectShape),this.startPoint=[t.canvas.x,t.canvas.y]}onPointerMove(t){var e;if(!this.startPoint)return;const{immediately:n,mode:r}=this.options;this.endPoint=Ev(t),null===(e=this.rectShape)||void 0===e||e.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),n&&"default"===r&&this.updateElementsStates(yv(this.startPoint,this.endPoint))}onPointerUp(t){this.startPoint&&(this.endPoint?(this.endPoint=Ev(t),this.updateElementsStates(yv(this.startPoint,this.endPoint)),this.clearBrush()):this.clearBrush())}clearStates(){this.endPoint||this.clearElementsStates()}clearElementsStates(){const{graph:t}=this.context,e=Object.values(t.getData()).reduce(((t,e)=>Object.assign({},t,e.reduce(((t,e)=>{var n;const r=null===(n=e.states||[])||void 0===n?void 0:n.filter((t=>t!==this.options.state));return t[rg(e)]=r,t}),{}))),{});t.setElementState(e,this.options.animation)}updateElementsStates(t){const{graph:e}=this.context,{enableElements:n,state:r,mode:i,onSelect:o}=this.options,s=this.selector(e,t,n);let a={};switch(i){case"union":s.forEach((t=>{a[t]=[...e.getElementState(t),r]}));break;case"diff":s.forEach((t=>{const n=e.getElementState(t);a[t]=n.includes(r)?n.filter((t=>t!==r)):[...n,r]}));break;case"intersect":s.forEach((t=>{const n=e.getElementState(t);a[t]=n.includes(r)?[r]:[]}));break;case"default":default:s.forEach((t=>{a[t]=[r]}));break}nr(o)&&(a=o(a)),e.setElementState(a,this.options.animation)}selector(t,e,n){if(!n||0===n.length)return[];const r=[],i=t.getData();if(n.forEach((n=>{i[`${n}s`].forEach((n=>{const i=rg(n);"hidden"!==t.getElementVisibility(i)&&cv(t.getElementPosition(i),e)&&r.push(i)}))})),n.includes("edge")){const t=i.edges;null===t||void 0===t||t.forEach((t=>{const{source:e,target:n}=t;r.includes(e)&&r.includes(n)&&r.push(rg(t))}))}return r}clearBrush(){var t;null===(t=this.rectShape)||void 0===t||t.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}isKeydown(){const{trigger:t}=this.options,e=Array.isArray(t)?t:[t];return this.shortcut.match(e.filter((t=>"drag"!==t)))}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return nr(e)?e(t):!!e}bindEvents(){const{graph:t}=this.context;t.on(ef.POINTER_DOWN,this.onPointerDown),t.on(ef.POINTER_MOVE,this.onPointerMove),t.on(ef.POINTER_UP,this.onPointerUp),t.on(Qd.CLICK,this.clearStates)}unbindEvents(){const{graph:t}=this.context;t.off(ef.POINTER_DOWN,this.onPointerDown),t.off(ef.POINTER_MOVE,this.onPointerMove),t.off(ef.POINTER_UP,this.onPointerUp),t.off(Qd.CLICK,this.clearStates)}update(t){this.unbindEvents(),this.options=Ng(this.options,t),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}wv.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};const Ev=t=>[t.canvas.x,t.canvas.y],kv=.8,Sv=["node","edge","combo"];function Mv(t,e,n,r,i=0){"TB"===r&&e(t,i);const o=n(t);if(o)for(const s of o)Mv(s,e,n,r,i+1);"BT"===r&&e(t,i)}function Ov(t,e,n){const r=[[t,0]];while(r.length){const[t,i]=r.shift();e(t,i);const o=n(t);if(o)for(const e of o)r.push([e,i+1])}}function Nv(t,e,n,r,i="both"){if("combo"===e||"node"===e)return Tv(t,n,r,i);const o=t.getEdgeData(n);if(!o)return[];const s=Tv(t,o.source,r-1,i),a=Tv(t,o.target,r-1,i);return Array.from(new Set([...s,...a,n]))}function Tv(t,e,n,r="both"){const i=new Set,o=new Set,s=new Set;return Ov(e,((e,i)=>{i>n||(s.add(e),t.getRelatedEdgesData(e,r).forEach((t=>{const e=rg(t);!o.has(e)&&i<n&&(s.add(e),o.add(e))})))}),(e=>t.getRelatedEdgesData(e,r).map((t=>t.source===e?t.target:t.source)).filter((t=>!i.has(t)&&(i.add(t),!0))))),Array.from(s)}function Av(t){return t.states||[]}var Cv=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class Pv extends bg{constructor(t,e){super(t,Object.assign({},Pv.defaultOptions,e)),this.onClickSelect=t=>Cv(this,void 0,void 0,(function*(){var e,n;this.validate(t)&&(yield this.updateState(t),null===(n=(e=this.options).onClick)||void 0===n||n.call(e,t))})),this.onClickCanvas=t=>Cv(this,void 0,void 0,(function*(){var e,n;this.validate(t)&&(yield this.clearState(),null===(n=(e=this.options).onClick)||void 0===n||n.call(e,t))})),this.shortcut=new xv(t.graph),this.bindEvents()}bindEvents(){const{graph:t}=this.context;this.unbindEvents(),Sv.forEach((e=>{t.on(`${e}:${ef.CLICK}`,this.onClickSelect)})),t.on(Qd.CLICK,this.onClickCanvas)}get isMultipleSelect(){const{multiple:t,trigger:e}=this.options;return t&&this.shortcut.match(e)}getNeighborIds(t){const{target:e,targetType:n}=t,{graph:r}=this.context,{degree:i}=this.options;return Nv(r,n,e.id,"function"===typeof i?i(t):i).filter((t=>t!==e.id))}updateState(t){return Cv(this,void 0,void 0,(function*(){const{state:e,unselectedState:n,neighborState:r,animation:i}=this.options;if(!e&&!r&&!n)return;const{target:o}=t,{graph:s}=this.context,a=s.getElementData(o.id),c=Av(a).includes(e)?"unselect":"select",l={},u=this.isMultipleSelect,h=[o.id],d=this.getNeighborIds(t);if(u)if(Object.assign(l,this.getDataStates()),"select"===c){const t=(t,e)=>{t.forEach((t=>{const r=new Set(s.getElementState(t));r.add(e),r.delete(n),l[t]=Array.from(r)}))};t(h,e),t(d,r),n&&Object.keys(l).forEach((t=>{const i=l[t];i.includes(e)||i.includes(r)||i.includes(n)||l[t].push(n)}))}else{const t=l[o.id];l[o.id]=t.filter((t=>t!==e&&t!==r)),t.includes(n)||l[o.id].push(n),d.forEach((t=>{l[t]=l[t].filter((t=>t!==r)),l[t].includes(e)||l[t].push(n)}))}else if("select"===c){Object.assign(l,this.getClearStates(!!n));const t=(t,e)=>{t.forEach((t=>{l[t]||(l[t]=s.getElementState(t)),l[t].push(e)}))};t(h,e),t(d,r),n&&Object.keys(l).forEach((t=>{h.includes(t)||d.includes(t)||l[t].push(n)}))}else Object.assign(l,this.getClearStates());yield s.setElementState(l,i)}))}getDataStates(){const{graph:t}=this.context,{nodes:e,edges:n,combos:r}=t.getData(),i={};return[...e,...n,...r].forEach((t=>{i[rg(t)]=Av(t)})),i}getClearStates(t=!1){const{graph:e}=this.context,{state:n,unselectedState:r,neighborState:i}=this.options,o=new Set([n,r,i]),{nodes:s,edges:a,combos:c}=e.getData(),l={};return[...s,...a,...c].forEach((e=>{const n=Av(e),r=n.filter((t=>!o.has(t)));(t||r.length!==n.length)&&(l[rg(e)]=r)})),l}clearState(){return Cv(this,void 0,void 0,(function*(){const{graph:t}=this.context;yield t.setElementState(this.getClearStates(),this.options.animation)}))}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return nr(e)?e(t):!!e}unbindEvents(){const{graph:t}=this.context;Sv.forEach((e=>{t.off(`${e}:${ef.CLICK}`,this.onClickSelect)})),t.off(Qd.CLICK,this.onClickCanvas)}destroy(){this.unbindEvents(),super.destroy()}}function Rv(t){var e;return!!(null===(e=t.style)||void 0===e?void 0:e.collapsed)}Pv.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};var _v=function(t,e,n){var r=0,i=Re(e)?e.split("."):e;while(t&&r<i.length)t=t[i[r++]];return void 0===t||r<i.length?n:t},Lv=function(t,e,n){var r=t,i=Re(e)?e.split("."):e;return i.forEach((function(t,e){e<i.length-1?(rr(r[t])||(r[t]=Ae(i[e+1])?[]:{}),r=r[t]):r[t]=n})),t},Dv=function(t){var e=zd(t);return e.charAt(0).toLowerCase()+e.substring(1)},Iv=Dv;function jv(t,e){if(!t.startsWith(e))return!1;const n=t[e.length];return n>="A"&&n<="Z"}function Fv(t,e){return`${e}${Vd(t)}`}function Bv(t,e,n=!0){if(!e)return t;if(!jv(t,e))return t;const r=t.slice(e.length);return n?Iv(r):r}function zv(t,e){const n=Object.entries(t).reduce(((t,[n,r])=>("className"===n||"class"===n||jv(n,e)&&Object.assign(t,{[Bv(n,e)]:r}),t)),{});if("opacity"in t){const r=Fv("opacity",e),i=t.opacity;if(r in t){const e=t[r];Object.assign(n,{opacity:i*e})}else Object.assign(n,{opacity:i})}return n}function Gv(t,e){const n=e.length;return Object.keys(t).reduce(((r,i)=>{if(i.startsWith(e)){const e=i.slice(n);r[e]=t[i]}return r}),{})}function Vv(t,e){const n="string"===typeof e?[e]:e,r={};return Object.keys(t).forEach((e=>{n.find((t=>e.startsWith(t)))||(r[e]=t[e])})),r}function Wv(t=0){if("number"===typeof t)return[t,t,t];const[e,n=e,r=e]=t;return[e,n,r]}var Uv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Hv(t,e){const{datum:n,graph:r}=e;return"function"===typeof t?t.call(r,n):Object.fromEntries(Object.entries(t).map((([t,e])=>"function"===typeof e?[t,e.call(r,n)]:[t,e])))}function $v(t,e){const n=(null===t||void 0===t?void 0:t.style)||{},r=(null===e||void 0===e?void 0:e.style)||{};for(const i in n)i in r||(r[i]=n[i]);return Object.assign({},t,e,{style:r})}function Yv(t){const{x:e,y:n,z:r,class:i,className:o,transform:s,transformOrigin:a,zIndex:c,visibility:l}=t,u=Uv(t,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"]);return u}function qv(t,e){const n=Wv(t);let r={};return e.text&&!e.fontSize&&(r={fontSize:.5*Math.min(...n)}),!e.src||e.width&&e.height||(r={width:.5*n[0],height:.5*n[1]}),r}function Xv(t){if(t)return"string"===typeof t||"function"===typeof t||Array.isArray(t)?{type:"group",field:t=>t.id,color:t,invert:!1}:t}function Kv(t,e){if(!e)return{};const{type:n,color:r,field:i,invert:o}=e,s=t=>{const e="string"===typeof r?df("palette",r):r;if("function"===typeof e){const n={};return t.forEach((([t,r])=>{n[t]=e(o?1-r:r)})),n}if(Array.isArray(e)){const n=o?[...e].reverse():e,r={};return t.forEach((([t,i])=>{r[t]=n[i%e.length]})),r}return{}},a=(t,e)=>{var n;return"string"===typeof t?null===(n=e.data)||void 0===n?void 0:n[t]:null===t||void 0===t?void 0:t(e)};if("group"===n){const e=jf(t,(t=>{if(!i)return"default";const e=a(i,t);return e?String(e):"default"})),n=Object.keys(e),r=s(n.map(((t,e)=>[t,e]))),o={};return Object.entries(e).forEach((([t,e])=>{e.forEach((e=>{o[rg(e)]=r[t]}))})),o}if("value"===n){const[e,n]=t.reduce((([t,e],n)=>{const r=a(i,n);if("number"!==typeof r)throw new Error(gf(`Palette field ${i} is not a number`));return[Math.min(t,r),Math.max(e,r)]}),[1/0,-1/0]),r=n-e;return s(t.map((t=>[t.id,(a(i,t)-e)/r])))}}function Zv(t){const e="string"===typeof t?df("palette",t):t;if("function"!==typeof e)return e}function Jv(t,e){let n=2*t;return"string"===typeof e?n=t*Number(e.replace("%",""))/100:"number"===typeof e&&(n=e),isNaN(n)&&(n=2*t),n}function Qv(t,e,n=1,r=!1){const i=r?n:1,o=(t.max[0]-t.min[0])*i;return Jv(o,e)}function ty(t,e,n=1){const r=Ig(t[0],t[1])*n;return Jv(r,e)}var ey={}.toString,ny=function(t){return ey.call(t).replace(/^\[object /,"").replace(/]$/,"")},ry=ny,iy=Object.prototype,oy=function(t){var e=t&&t.constructor,n="function"===typeof e&&e.prototype||iy;return t===n},sy=oy,ay=Object.prototype.hasOwnProperty;function cy(t){if(Pe(t))return!0;if($d(t))return!t.length;var e=ry(t);if("Map"===e||"Set"===e)return!t.size;if(sy(t))return!Object.keys(t).length;for(var n in t)if(ay.call(t,n))return!1;return!0}var ly=cy;class uy extends Ru{constructor(t){dy(t.style),super(t),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents()}get parsedAttributes(){return this.attributes}upsert(t,e,n,r,i){var o,s,a,c,l,u,h,d;const f=this.shapeMap[t];if(!1===n)return void(f&&(null===(o=null===i||void 0===i?void 0:i.beforeDestroy)||void 0===o||o.call(i,f),r.removeChild(f),delete this.shapeMap[t],null===(s=null===i||void 0===i?void 0:i.afterDestroy)||void 0===s||s.call(i,f)));const p="string"===typeof e?df(uf.SHAPE,e):e;if(!p)throw new Error(gf(`Shape ${e} not found`));if(!f||f.destroyed||!(f instanceof p)){f&&(null===(a=null===i||void 0===i?void 0:i.beforeDestroy)||void 0===a||a.call(i,f),null===f||void 0===f||f.destroy(),null===(c=null===i||void 0===i?void 0:i.afterDestroy)||void 0===c||c.call(i,f)),null===(l=null===i||void 0===i?void 0:i.beforeCreate)||void 0===l||l.call(i);const e=new p({className:t,style:n});return r.appendChild(e),this.shapeMap[t]=e,null===(u=null===i||void 0===i?void 0:i.afterCreate)||void 0===u||u.call(i,e),e}return null===(h=null===i||void 0===i?void 0:i.beforeUpdate)||void 0===h||h.call(i,f),dw(f,n),null===(d=null===i||void 0===i?void 0:i.afterUpdate)||void 0===d||d.call(i,f),f}update(t={}){const e=Object.assign({},this.attributes,t);dy(e),hw(this,e),this.render(e,this),this.setVisibility()}bindEvents(){}getGraphicStyle(t){return Yv(t)}get compositeShapes(){return[["badges","badge-"],["ports","port-"]]}animate(t,e){if(0===t.length)return null;const n=[];if(void 0!==t[0].x||void 0!==t[0].y||void 0!==t[0].z){const{x:e=0,y:n=0,z:r=0}=this.attributes;t.forEach((t=>{const{x:i=e,y:o=n,z:s=r}=t;Object.assign(t,{transform:s?[["translate3d",i,o,s]]:[["translate",i,o]]})}))}const r=super.animate(t,e);if(r&&(hy(this,r),n.push(r)),Array.isArray(t)&&t.length>0){const r=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(t[0]).some((t=>!r.includes(t)))){Object.entries(this.shapeMap).forEach((([r,i])=>{const o=`get${Vd(r)}Style`,s=this[o];if(nr(s)){const r=t.map((t=>s.call(this,Object.assign(Object.assign({},this.attributes),t)))),o=i.animate(bf(r),e);o&&(hy(i,o),n.push(o))}}));const r=(r,i)=>{if(!ly(r)){const o=`get${Vd(i)}Style`,s=this[o];if(nr(s)){const i=t.map((t=>s.call(this,Object.assign(Object.assign({},this.attributes),t))));Object.entries(i[0]).map((([t])=>{const o=i.map((e=>e[t])),s=r[t];if(s){const t=s.animate(bf(o),e);t&&(hy(s,t),n.push(t))}}))}}};this.compositeShapes.forEach((([t,e])=>{const n=Gv(this.shapeMap,e);r(n,t)}))}}return mf(n)}getShape(t){return this.shapeMap[t]}setVisibility(){const{visibility:t}=this.attributes;gg(this,t)}destroy(){this.shapeMap={},this.animateMap={},super.destroy()}}function hy(t,e){null===e||void 0===e||e.finished.then((()=>{const n=t.activeAnimations.findIndex((t=>t===e));n>-1&&t.activeAnimations.splice(n,1)}))}function dy(t){if(!t)return{};if("x"in t||"y"in t||"z"in t){const{x:e=0,y:n=0,z:r,transform:i}=t,o=Sf(e,n,r,i);o&&(t.transform=o)}return t}var fy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class py extends uy{constructor(t){super($v({style:py.defaultStyleProps},t))}isTextStyle(t){return jv(t,"label")}isBackgroundStyle(t){return jv(t,"background")}getTextStyle(t){const e=this.getGraphicStyle(t),{padding:n}=e,r=fy(e,["padding"]);return Vv(r,"background")}getBackgroundStyle(t){if(!1===t.background)return!1;const e=this.getGraphicStyle(t),{wordWrap:n,wordWrapWidth:r,padding:i}=e,o=zv(e,"background"),{min:[s,a],center:[c,l],halfExtents:[u,h]}=this.shapeMap.text.getGeometryBounds(),[d,f,p,g]=Hf(i),v=2*u+g+f,{width:y,height:m}=o;y&&m?Object.assign(o,{x:c-Number(y)/2,y:l-Number(m)/2}):Object.assign(o,{x:s-g,y:a-d,width:n?Math.min(v,r+g+f):v,height:2*h+d+p});const{radius:b}=o;if("string"===typeof b&&b.endsWith("%")){const t=Number(b.replace("%",""))/100;o.radius=Math.min(+o.width,+o.height)*t}return o}render(t=this.parsedAttributes,e=this){this.upsert("text",Xu,this.getTextStyle(t),e),this.upsert("background",Yu,this.getBackgroundStyle(t),e)}getGeometryBounds(){const t=this.getShape("background")||this.getShape("text");return t.getGeometryBounds()}}py.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};class gy extends uy{constructor(t){super($v({style:gy.defaultStyleProps},t))}getBadgeStyle(t){return this.getGraphicStyle(t)}render(t=this.parsedAttributes,e=this){this.upsert("label",py,this.getBadgeStyle(t),e)}getGeometryBounds(){const t=this.getShape("label"),e=t.getShape("background")||t.getShape("text");return e.getGeometryBounds()}}function vy(t,e=!0){const n=[];return t.forEach(((t,e)=>{n.push([0===e?"M":"L",...t])})),e&&n.push(["Z"]),n}gy.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};const yy={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function my(t){const e=t.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),n=[];let r="",i={};while(e.length>0){let t=e.shift();t in yy?r=t:e.unshift(t),i={type:r},yy[r].forEach((n=>{t=e.shift(),i[n]=t})),"M"===r?r="L":"m"===r&&(r="l");const[o,...s]=Object.values(i);n.push([o,...s.map(Number)])}return n}function by(t){const e=[],n="string"===typeof t?my(t):t;return n.forEach((t=>{const n=t[0];if("Z"!==n)if("A"!==n)for(let r=1;r<t.length;r+=2)e.push([t[r],t[r+1],0]);else{const n=t.length;e.push([t[n-2],t[n-1],0])}else e.push(e[0])})),e}const xy=t=>{if(t.length<2)return[["M",0,0],["L",0,0]];const e=t[0],n=t[1],r=t[t.length-1],i=t[t.length-2];t.unshift(i,r),t.push(e,n);const o=[["M",r[0],r[1]]];for(let s=1;s<t.length-2;s+=1){const[e,n]=t[s-1],[r,i]=t[s],[a,c]=t[s+1],[l,u]=s!==t.length-2?t[s+2]:[a,c],h=r+(a-e)/6,d=i+(c-n)/6,f=a-(l-r)/6,p=c-(u-i)/6;o.push(["C",h,d,f,p,a,c])}return o};function wy(t,e,n,r,i,o,s){const[a,c]=Zg(t,e),l={textAlign:"left"===e?"right":"right"===e?"left":"center",textBaseline:"top"===e?"bottom":"bottom"===e?"top":"middle",transform:[["translate",a+n,c+r]]};if("center"===e||!i)return l;const u=by(o);if(!u||u.length<=3)return l;const h=u.map(((t,e)=>{const n=t,r=u[(e+1)%u.length];return qd(n,r)?null:[n,r]})).filter(Boolean),d=dv([a,c],h),f=pv([a,c],d);if(f&&d&&(l.transform=[["translate",f[0]+n,f[1]+r]],s)){const t=Math.atan((d[0][1]-d[1][1])/(d[0][0]-d[1][0]));l.transform.push(["rotate",t/Math.PI*180]),l.textAlign="center","right"!==e&&"left"!==e||(l.textBaseline=t>0?"right"===e?"bottom":"top":"right"===e?"top":"bottom")}return l}var Ey=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class ky extends uy{constructor(t){super($v({style:ky.defaultStyleProps},t))}getLabelStyle(t){if(!t.label||!t.d||0===t.d.length)return!1;const e=zv(this.getGraphicStyle(t),"label"),{maxWidth:n,offsetX:r,offsetY:i,autoRotate:o,placement:s,closeToPath:a}=e,c=Ey(e,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),l=this.shapeMap.key,u=null===l||void 0===l?void 0:l.getRenderBounds();return Object.assign(wy(u,s,r,i,a,t.d,o),{wordWrapWidth:Qv(u,n)},c)}getKeyStyle(t){return this.getGraphicStyle(t)}render(t,e){this.upsert("key",Vu,this.getKeyStyle(t),e),this.upsert("label",py,this.getLabelStyle(t),e)}}function Sy(t){const e=[],n=t=>{(null===t||void 0===t?void 0:t.children.length)&&t.children.forEach((t=>{e.push(t),n(t)}))};return n(t),e}function My(t){const e=[];let n=t.parentNode;while(n)e.push(n),n=n.parentNode;return e}ky.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};class Oy extends Fu{constructor(t){super(t),this.onMounted=()=>{this.handleRadius()},this.onAttrModified=()=>{this.handleRadius()},Ty=this,this.isMutationObserved=!0,this.addEventListener(_l.MOUNTED,this.onMounted),this.addEventListener(_l.ATTR_MODIFIED,this.onAttrModified)}handleRadius(){const{radius:t,clipPath:e,width:n=0,height:r=0}=this.attributes;if(t&&n&&r){const[i,o]=this.getBounds().min,s={x:i,y:o,radius:t,width:n,height:r};if(e)Object.assign(this.parsedStyle.clipPath.style,s);else{const t=new Yu({style:s});this.style.clipPath=t}}else e&&(this.style.clipPath=null)}}const Ny=new WeakMap;let Ty=null;const Ay=t=>{if(Ty&&My(Ty).includes(t)){const e=Ny.get(t);e?e.includes(Ty)||e.push(Ty):Ny.set(t,[Ty])}},Cy=t=>{const e=Ny.get(t);e&&e.forEach((t=>t.handleRadius()))};class Py extends uy{constructor(t){super(t)}isImage(){const{src:t}=this.attributes;return!!t}getIconStyle(t=this.attributes){const{width:e=0,height:n=0}=t,r=this.getGraphicStyle(t);return this.isImage()?Object.assign({x:-e/2,y:-n/2},r):Object.assign({textBaseline:"middle",textAlign:"center"},r)}render(t=this.attributes,e=this){this.upsert("icon",this.isImage()?Oy:Xu,this.getIconStyle(t),e)}}class Ry extends uy{get context(){return this.config.context}get parsedAttributes(){return this.attributes}onframe(){}animate(t,e){const n=super.animate(t,e);return n&&(n.onframe=()=>this.onframe(),n.finished.then((()=>this.onframe()))),n}}var _y=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class Ly extends Ry{constructor(t){super($v({style:Ly.defaultStyleProps},t)),this.type="node"}getSize(t=this.attributes){const{size:e}=t;return Wv(e)}getKeyStyle(t){const e=this.getGraphicStyle(t);return Object.assign(Vv(e,["label","halo","icon","badge","port"]))}getLabelStyle(t){if(!1===t.label||!t.labelText)return!1;const e=zv(this.getGraphicStyle(t),"label"),{placement:n,maxWidth:r,offsetX:i,offsetY:o}=e,s=_y(e,["placement","maxWidth","offsetX","offsetY"]),a=this.getShape("key").getLocalBounds();return Object.assign(iw(a,n,i,o),{wordWrapWidth:Qv(a,r)},s)}getHaloStyle(t){if(!1===t.halo)return!1;const e=this.getKeyStyle(t),{fill:n}=e,r=_y(e,["fill"]),i=zv(this.getGraphicStyle(t),"halo");return Object.assign(Object.assign(Object.assign({},r),{stroke:n}),i)}getIconStyle(t){if(!1===t.icon||!t.iconText&&!t.iconSrc)return!1;const e=zv(this.getGraphicStyle(t),"icon");return Object.assign(qv(t.size,e),e)}getBadgesStyle(t){var e;const n=Gv(this.shapeMap,"badge-"),r={};if(Object.keys(n).forEach((t=>{r[t]=!1})),!1===t.badge||!(null===(e=t.badges)||void 0===e?void 0:e.length))return r;const{badges:i=[],badgePalette:o,opacity:s=1}=t,a=_y(t,["badges","badgePalette","opacity"]),c=Zv(o),l=zv(this.getGraphicStyle(a),"badge");return i.forEach(((t,e)=>{r[e]=Object.assign(Object.assign({backgroundFill:c?c[e%(null===c||void 0===c?void 0:c.length)]:void 0,opacity:s},l),this.getBadgeStyle(t))})),r}getBadgeStyle(t){const e=this.getShape("key"),{placement:n="top",offsetX:r,offsetY:i}=t,o=_y(t,["placement","offsetX","offsetY"]),s=iw(e.getLocalBounds(),n,r,i,!0);return Object.assign(Object.assign({},s),o)}getPortsStyle(t){var e;const n=this.getPorts(),r={};if(Object.keys(n).forEach((t=>{r[t]=!1})),!1===t.port||!(null===(e=t.ports)||void 0===e?void 0:e.length))return r;const i=zv(this.getGraphicStyle(t),"port"),{ports:o=[]}=t;return o.forEach(((e,n)=>{const o=e.key||n,s=Object.assign(Object.assign({},i),e);if(Kx(s))r[o]=!1;else{const[n,i]=this.getPortXY(t,e);r[o]=Object.assign({transform:[["translate",n,i]]},s)}})),r}getPortXY(t,e){const{placement:n="left"}=e,r=this.getShape("key");return qx(Dy(this.context,r),n)}getPorts(){return Gv(this.shapeMap,"port-")}getCenter(){return this.getShape("key").getBounds().center}getIntersectPoint(t,e=!1){const n=this.getShape("key").getBounds();return lv(t,n,e)}drawHaloShape(t,e){const n=this.getHaloStyle(t),r=this.getShape("key");this.upsert("halo",r.constructor,n,e)}drawIconShape(t,e){const n=this.getIconStyle(t);this.upsert("icon",Py,n,e),Ay(this)}drawBadgeShapes(t,e){const n=this.getBadgesStyle(t);Object.keys(n).forEach((t=>{const r=n[t];this.upsert(`badge-${t}`,gy,r,e)}))}drawPortShapes(t,e){const n=this.getPortsStyle(t);Object.keys(n).forEach((t=>{const r=n[t],i=`port-${t}`;this.upsert(i,Cu,r,e)}))}drawLabelShape(t,e){const n=this.getLabelStyle(t);this.upsert("label",py,n,e)}_drawKeyShape(t,e){return this.drawKeyShape(t,e)}render(t=this.parsedAttributes,e=this){this._drawKeyShape(t,e),this.getShape("key")&&(this.drawHaloShape(t,e),this.drawIconShape(t,e),this.drawBadgeShapes(t,e),this.drawLabelShape(t,e),this.drawPortShapes(t,e))}update(t){super.update(t),t&&("x"in t||"y"in t||"z"in t)&&Cy(this)}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}}function Dy(t,e){if(!t)return e.getLocalBounds();const n=t.canvas.getLayer(),r=e.cloneNode();gg(r,"hidden"),n.appendChild(r);const i=r.getLocalBounds();return r.destroy(),i}Ly.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};class Iy extends Ly{constructor(t){super($v({style:Iy.defaultStyleProps},t))}drawKeyShape(t,e){return this.upsert("key",Cu,this.getKeyStyle(t),e)}getKeyStyle(t){const e=super.getKeyStyle(t);return Object.assign(Object.assign({},e),{r:Math.min(...this.getSize(t))/2})}getIconStyle(t){const e=super.getIconStyle(t),{r:n}=this.getShape("key").attributes,r=2*n*kv;return!!e&&Object.assign({width:r,height:r},e)}getIntersectPoint(t,e=!1){const n=this.getShape("key").getBounds();return uv(t,n,e)}}Iy.defaultStyleProps={size:32};class jy extends Ly{constructor(t){super(t)}get parsedAttributes(){return this.attributes}drawKeyShape(t,e){return this.upsert("key",Uu,this.getKeyStyle(t),e)}getKeyStyle(t){const e=super.getKeyStyle(t);return Object.assign(Object.assign({},e),{points:this.getPoints(t)})}getIntersectPoint(t,e=!1){var n,r;const{points:i}=this.getShape("key").attributes,o=[+((null===(n=this.attributes)||void 0===n?void 0:n.x)||0),+((null===(r=this.attributes)||void 0===r?void 0:r.y)||0)];return av(t,o,i,!0,e).point}}class Fy extends jy{constructor(t){super(t)}getPoints(t){const[e,n]=this.getSize(t);return lw(e,n)}}var By=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class zy extends Iy{constructor(t){super($v({style:zy.defaultStyleProps},t))}parseOuterR(){const{size:t}=this.parsedAttributes;return Math.min(...Wv(t))/2}parseInnerR(){const{innerR:t}=this.parsedAttributes;return Re(t)?parseInt(t)/100*this.parseOuterR():t}drawDonutShape(t,e){const{donuts:n}=t;if(!(null===n||void 0===n?void 0:n.length))return;const r=n.map((t=>Ae(t)?{value:t}:t)),i=zv(this.getGraphicStyle(t),"donut"),o=Zv(t.donutPalette);if(!o)return;const s=r.reduce(((t,e)=>{var n;return t+(null!==(n=e.value)&&void 0!==n?n:0)}),0),a=this.parseOuterR(),c=this.parseInnerR();let l=0;r.forEach(((t,n)=>{const{value:u=0,color:h=o[n%o.length]}=t,d=By(t,["value","color"]),f=360*(0===s?1/r.length:u/s);this.upsert(`round${n}`,Vu,Object.assign(Object.assign(Object.assign({},i),{d:Uy(a,c,l,l+f),fill:h}),d),e),l+=f}))}render(t,e=this){super.render(t,e),this.drawDonutShape(t,e)}}zy.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};const Gy=(t,e,n,r)=>[t+Math.sin(r)*n,e-Math.cos(r)*n],Vy=(t,e,n,r)=>r<=0||n<=r?[["M",t-n,e],["A",n,n,0,1,1,t+n,e],["A",n,n,0,1,1,t-n,e],["Z"]]:[["M",t-n,e],["A",n,n,0,1,1,t+n,e],["A",n,n,0,1,1,t-n,e],["Z"],["M",t+r,e],["A",r,r,0,1,0,t-r,e],["A",r,r,0,1,0,t+r,e],["Z"]],Wy=(t,e,n,r,i,o)=>{const[s,a]=[i/360*2*Math.PI,o/360*2*Math.PI],c=[Gy(t,e,r,s),Gy(t,e,n,s),Gy(t,e,n,a),Gy(t,e,r,a)],l=a-s>Math.PI?1:0;return[["M",c[0][0],c[0][1]],["L",c[1][0],c[1][1]],["A",n,n,0,l,1,c[2][0],c[2][1]],["L",c[3][0],c[3][1]],["A",r,r,0,l,0,c[0][0],c[0][1]],["Z"]]},Uy=(t=0,e=0,n,r)=>{const[i,o]=[0,0];return Math.abs(n-r)%360<1e-6?Vy(i,o,t,e):Wy(i,o,t,e,n,r)};class Hy extends Ly{constructor(t){super($v({style:Hy.defaultStyleProps},t))}drawKeyShape(t,e){return this.upsert("key",_u,this.getKeyStyle(t),e)}getKeyStyle(t){const e=super.getKeyStyle(t),[n,r]=this.getSize(t);return Object.assign(Object.assign({},e),{rx:n/2,ry:r/2})}getIconStyle(t){const e=super.getIconStyle(t),{rx:n,ry:r}=this.getShape("key").attributes,i=2*Math.min(+n,+r)*kv;return!!e&&Object.assign({width:i,height:i},e)}getIntersectPoint(t,e=!1){const n=this.getShape("key").getBounds();return uv(t,n,e)}}Hy.defaultStyleProps={size:[45,35]};class $y extends jy{constructor(t){super(t)}getOuterR(t){return t.outerR||Math.min(...this.getSize(t))/2}getPoints(t){return fw(this.getOuterR(t))}getIconStyle(t){const e=super.getIconStyle(t),n=this.getOuterR(t)*kv;return!!e&&Object.assign({width:n,height:n},e)}}
/*!
 * @antv/g-plugin-canvas-path-generator
 * @description A G plugin of path generator with Canvas2D API
 * @version 2.1.22
 * @date 7/30/2025, 1:35:25 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */
function Yy(t,e){var n=e.cx,r=void 0===n?0:n,i=e.cy,o=void 0===i?0:i,s=e.r;t.arc(r,o,s,0,2*Math.PI,!1)}function qy(t,e){var n=e.cx,r=void 0===n?0:n,i=e.cy,o=void 0===i?0:i,s=e.rx,a=e.ry;if(t.ellipse)t.ellipse(r,o,s,a,0,0,2*Math.PI,!1);else{var c=s>a?s:a,l=s>a?1:s/a,u=s>a?a/s:1;t.save(),t.scale(l,u),t.arc(r,o,c,0,2*Math.PI)}}function Xy(t,e){var n,r,i=e.x1,o=e.y1,s=e.x2,a=e.y2,c=e.markerStart,l=e.markerEnd,u=e.markerStartOffset,h=e.markerEndOffset,d=0,f=0,p=0,g=0,v=0;c&&Su(c)&&u&&(n=s-i,r=a-o,v=Math.atan2(r,n),d=Math.cos(v)*(u||0),f=Math.sin(v)*(u||0)),l&&Su(l)&&h&&(n=i-s,r=o-a,v=Math.atan2(r,n),p=Math.cos(v)*(h||0),g=Math.sin(v)*(h||0)),t.moveTo(i+d,o+f),t.lineTo(s+p,a+g)}function Ky(t,e){var n,r,i=e.markerStart,o=e.markerEnd,s=e.markerStartOffset,a=e.markerEndOffset,c=e.d,l=c.absolutePath,u=c.segments,h=0,d=0,f=0,p=0,g=0;if(i&&Su(i)&&s){var v=i.parentNode.getStartTangent(),y=C(v,2),m=y[0],b=y[1];n=m[0]-b[0],r=m[1]-b[1],g=Math.atan2(r,n),h=Math.cos(g)*(s||0),d=Math.sin(g)*(s||0)}if(o&&Su(o)&&a){var x=o.parentNode.getEndTangent(),w=C(x,2),E=w[0],k=w[1];n=E[0]-k[0],r=E[1]-k[1],g=Math.atan2(r,n),f=Math.cos(g)*(a||0),p=Math.sin(g)*(a||0)}for(var S=0;S<l.length;S++){var M=l[S],O=M[0],N=l[S+1],T=0===S&&(0!==h||0!==d),A=(S===l.length-1||N&&("M"===N[0]||"Z"===N[0]))&&0!==f&&0!==p,P=T?[h,d]:[0,0],R=C(P,2),_=R[0],L=R[1],D=A?[f,p]:[0,0],I=C(D,2),j=I[0],F=I[1];switch(O){case"M":t.moveTo(M[1]+_,M[2]+L);break;case"L":t.lineTo(M[1]+j,M[2]+F);break;case"Q":t.quadraticCurveTo(M[1],M[2],M[3]+j,M[4]+F);break;case"C":t.bezierCurveTo(M[1],M[2],M[3],M[4],M[5]+j,M[6]+F);break;case"A":var B=u[S].arcParams,z=B.cx,G=B.cy,V=B.rx,W=B.ry,U=B.startAngle,H=B.endAngle,$=B.xRotation,Y=B.sweepFlag;if(t.ellipse)t.ellipse(z,G,V,W,$,U,H,!!(1-Y));else{var q=V>W?V:W,X=V>W?1:V/W,K=V>W?W/V:1;t.translate(z,G),t.rotate($),t.scale(X,K),t.arc(0,0,q,U,H,!!(1-Y)),t.scale(1/X,1/K),t.rotate(-$),t.translate(-z,-G)}A&&t.lineTo(M[6]+f,M[7]+p);break;case"Z":t.closePath();break}}}function Zy(t,e){var n,r,i=e.markerStart,o=e.markerEnd,s=e.markerStartOffset,a=e.markerEndOffset,c=e.points.points,l=c.length,u=c[0][0],h=c[0][1],d=c[l-1][0],f=c[l-1][1],p=0,g=0,v=0,y=0,m=0;i&&Su(i)&&s&&(n=c[1][0]-c[0][0],r=c[1][1]-c[0][1],m=Math.atan2(r,n),p=Math.cos(m)*(s||0),g=Math.sin(m)*(s||0)),o&&Su(o)&&a&&(n=c[l-1][0]-c[0][0],r=c[l-1][1]-c[0][1],m=Math.atan2(r,n),v=Math.cos(m)*(a||0),y=Math.sin(m)*(a||0)),t.moveTo(u+(p||v),h+(g||y));for(var b=1;b<l-1;b++){var x=c[b];t.lineTo(x[0],x[1])}t.lineTo(d,f)}function Jy(t,e){var n,r,i=e.markerStart,o=e.markerEnd,s=e.markerStartOffset,a=e.markerEndOffset,c=e.points.points,l=c.length,u=c[0][0],h=c[0][1],d=c[l-1][0],f=c[l-1][1],p=0,g=0,v=0,y=0,m=0;i&&Su(i)&&s&&(n=c[1][0]-c[0][0],r=c[1][1]-c[0][1],m=Math.atan2(r,n),p=Math.cos(m)*(s||0),g=Math.sin(m)*(s||0)),o&&Su(o)&&a&&(n=c[l-2][0]-c[l-1][0],r=c[l-2][1]-c[l-1][1],m=Math.atan2(r,n),v=Math.cos(m)*(a||0),y=Math.sin(m)*(a||0)),t.moveTo(u+p,h+g);for(var b=1;b<l-1;b++){var x=c[b];t.lineTo(x[0],x[1])}t.lineTo(d+v,f+y)}function Qy(t,e){var n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,s=e.radius,a=e.width,c=e.height,l=a,u=c,h=s&&s.some((function(t){return 0!==t}));if(h){var d=a>0?1:-1,f=c>0?1:-1,p=d+f===0,g=s.map((function(t){return Le(t,0,Math.min(Math.abs(l)/2,Math.abs(u)/2))})),v=C(g,4),y=v[0],m=v[1],b=v[2],x=v[3];t.moveTo(d*y+r,o),t.lineTo(l-d*m+r,o),0!==m&&t.arc(l-d*m+r,f*m+o,m,-f*Math.PI/2,d>0?0:Math.PI,p),t.lineTo(l+r,u-f*b+o),0!==b&&t.arc(l-d*b+r,u-f*b+o,b,d>0?0:Math.PI,f>0?Math.PI/2:1.5*Math.PI,p),t.lineTo(d*x+r,u+o),0!==x&&t.arc(d*x+r,u-f*x+o,x,f>0?Math.PI/2:-Math.PI/2,d>0?Math.PI:0,p),t.lineTo(r,f*y+o),0!==y&&t.arc(d*y+r,f*y+o,y,d>0?Math.PI:0,f>0?1.5*Math.PI:Math.PI/2,p)}else t.rect(r,o,l,u)}var tm=function(t){function e(){var t;h(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=S(this,e,[].concat(r)),t.name="canvas-path-generator",t}return O(e,t),f(e,[{key:"init",value:function(){var t,e=(t={},c(c(c(c(c(c(c(c(c(c(t,zr.CIRCLE,Yy),zr.ELLIPSE,qy),zr.RECT,Qy),zr.LINE,Xy),zr.POLYLINE,Jy),zr.POLYGON,Zy),zr.PATH,Ky),zr.TEXT,void 0),zr.GROUP,void 0),zr.IMAGE,void 0),c(c(c(t,zr.HTML,void 0),zr.MESH,void 0),zr.FRAGMENT,void 0));this.context.pathGeneratorFactory=e}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(Vr),em=D(),nm=D(),rm=D(),im=ht(),om=function(){function t(){var e=this;h(this,t),this.isHit=function(t,n,r,i){var o=e.context.pointInPathPickerFactory[t.nodeName];if(o){var s=mt(im,r),a=J(nm,z(rm,n[0],n[1],0),s);if(o(t,new ti(a[0],a[1]),i,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(t,n){var r=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),i=e.context.pathGeneratorFactory[t.nodeName];return i&&(r.beginPath(),i(r,t.parsedStyle),r.closePath()),r.isPointInPath(n.x,n.y)}}return f(t,[{key:"apply",value:function(e,n){var r,i=this,o=e.renderingService,s=e.renderingContext;this.context=e,this.runtime=n;var a=null===(r=s.root)||void 0===r?void 0:r.ownerDocument;o.hooks.pick.tapPromise(t.tag,function(){var t=Lr(Rr().mark((function t(e){return Rr().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",i.pick(a,e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),o.hooks.pickSync.tap(t.tag,(function(t){return i.pick(a,t)}))}},{key:"pick",value:function(t,e){var n,r=e.topmost,i=e.position,o=i.x,s=i.y,a=z(em,o,s,0),c=t.elementsFromBBox(a[0],a[1],a[0],a[1]),l=[],u=Dr(c);try{for(u.s();!(n=u.n()).done;){var h=n.value,d=h.getWorldTransform(),f=this.isHit(h,a,d,!1);if(f){var p=vc(h);if(p){var g=p.parsedStyle.clipPath,v=this.isHit(g,a,g.getWorldTransform(),!0);if(v){if(r)return e.picked=[h],e;l.push(h)}}else{if(r)return e.picked=[h],e;l.push(h)}}}}catch(y){u.e(y)}finally{u.f()}return e.picked=l,e}}])}();function sm(t,e,n){var r=t.parsedStyle,i=r.cx,o=void 0===i?0:i,s=r.cy,a=void 0===s?0:s,c=r.r,l=r.fill,u=r.stroke,h=r.lineWidth,d=void 0===h?1:h,f=r.increasedLineWidthForHitTesting,p=void 0===f?0:f,g=r.pointerEvents,v=void 0===g?"auto":g,y=(d+p)/2,m=cr(o,a,e.x,e.y),b=Oc(v,l,u),x=C(b,2),w=x[0],E=x[1];return w&&E||n?m<=c+y:w?m<=c:!!E&&(m>=c-y&&m<=c+y)}function am(t,e,n,r){return t/(n*n)+e/(r*r)}function cm(t,e,n){var r=t.parsedStyle,i=r.cx,o=void 0===i?0:i,s=r.cy,a=void 0===s?0:s,c=r.rx,l=r.ry,u=r.fill,h=r.stroke,d=r.lineWidth,f=void 0===d?1:d,p=r.increasedLineWidthForHitTesting,g=void 0===p?0:p,v=r.pointerEvents,y=void 0===v?"auto":v,m=e.x,b=e.y,x=Oc(y,u,h),w=C(x,2),E=w[0],k=w[1],S=(f+g)/2,M=(m-o)*(m-o),O=(b-a)*(b-a);return E&&k||n?am(M,O,c+S,l+S)<=1:E?am(M,O,c,l)<=1:!!k&&(am(M,O,c-S,l-S)>=1&&am(M,O,c+S,l+S)<=1)}function lm(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function um(t,e,n,r,i,o,s){var a=i/2;return lm(t-a,e-a,n,i,o,s)||lm(t+n-a,e-a,i,r,o,s)||lm(t+a,e+r-a,n,i,o,s)||lm(t-a,e+a,i,r,o,s)}function hm(t,e,n,r,i,o,s,a){var c=(Math.atan2(a-e,s-t)+2*Math.PI)%(2*Math.PI),l={x:t+n*Math.cos(c),y:e+n*Math.sin(c)};return cr(l.x,l.y,s,a)<=o/2}function dm(t,e,n,r,i,o,s){var a=Math.min(t,n),c=Math.max(t,n),l=Math.min(e,r),u=Math.max(e,r),h=i/2;return o>=a-h&&o<=c+h&&s>=l-h&&s<=u+h&&br(t,e,n,r,o,s)<=i/2}function fm(t,e,n,r,i){var o=t.length;if(o<2)return!1;for(var s=0;s<o-1;s++){var a=t[s][0],c=t[s][1],l=t[s+1][0],u=t[s+1][1];if(dm(a,c,l,u,e,n,r))return!0}if(i){var h=t[0],d=t[o-1];if(dm(h[0],h[1],d[0],d[1],e,n,r))return!0}return!1}om.tag="CanvasPicker";var pm=1e-6;function gm(t){return Math.abs(t)<pm?0:t<0?-1:1}function vm(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function ym(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var s=t[o],a=t[(o+1)%i];if(vm(s,a,[e,n]))return!0;gm(s[1]-n)>0!==gm(a[1]-n)>0&&gm(e-(n-s[1])*(s[0]-a[0])/(s[1]-a[1])-s[0])<0&&(r=!r)}return r}function mm(t,e,n){for(var r=!1,i=0;i<t.length;i++){var o=t[i];if(r=ym(o,e,n),r)break}return r}function bm(t,e,n){var r=t.parsedStyle,i=r.x1,o=r.y1,s=r.x2,a=r.y2,c=r.lineWidth,l=void 0===c?1:c,u=r.increasedLineWidthForHitTesting,h=void 0===u?0:u,d=r.pointerEvents,f=void 0===d?"auto":d,p=r.fill,g=r.stroke,v=Oc(f,p,g),y=C(v,2),m=y[1];return!(!m&&!n||!l)&&dm(i,o,s,a,l+h,e.x,e.y)}function xm(t,e,n,r,i){for(var o=!1,s=e/2,a=0;a<t.length;a++){var c=t[a],l=c.currentPoint,u=c.params,h=c.prePoint,d=c.box;if(!d||lm(d.x-s,d.y-s,d.width+e,d.height+e,n,r))switch(c.command){case"L":case"Z":if(o=dm(h[0],h[1],l[0],l[1],e,n,r),o)return!0;break;case"Q":var f=Pr(h[0],h[1],u[1],u[2],u[3],u[4],n,r);if(o=f<=e/2,o)return!0;break;case"C":var p=Sr(h[0],h[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,i);if(o=p<=e/2,o)return!0;break;case"A":c.cubicParams||(c.cubicParams=_n(h[0],h[1],u[1],u[2],u[3],u[4],u[5],u[6],u[7],void 0));for(var g=c.cubicParams,v=h,y=0;y<g.length;y+=6){var m=Sr(v[0],v[1],g[y],g[y+1],g[y+2],g[y+3],g[y+4],g[y+5],n,r,i);if(v=[g[y+4],g[y+5]],o=m<=e/2,o)return!0}break}}return o}function wm(t,e,n,r,i,o){var s=t.parsedStyle,a=s.lineWidth,c=void 0===a?1:a,l=s.increasedLineWidthForHitTesting,u=void 0===l?0:l,h=s.stroke,d=s.fill,f=s.d,p=s.pointerEvents,g=void 0===p?"auto":p,v=f.segments,y=f.hasArc,m=f.polylines,b=f.polygons,x=Oc(g,(null===b||void 0===b?void 0:b.length)&&d,h),w=C(x,2),E=w[0],k=w[1],S=Xs(t),M=!1;return E||n?(M=y?r(t,e):mm(b,e.x,e.y)||mm(m,e.x,e.y),M):((k||n)&&(M=xm(v,c+u,e.x,e.y,S)),M)}function Em(t,e,n){var r=t.parsedStyle,i=r.stroke,o=r.fill,s=r.lineWidth,a=void 0===s?1:s,c=r.increasedLineWidthForHitTesting,l=void 0===c?0:c,u=r.points,h=r.pointerEvents,d=void 0===h?"auto":h,f=Oc(d,o,i),p=C(f,2),g=p[0],v=p[1],y=!1;return(v||n)&&(y=fm(u.points,a+l,e.x,e.y,!0)),y||!g&&!n||(y=ym(u.points,e.x,e.y)),y}function km(t,e,n){var r=t.parsedStyle,i=r.lineWidth,o=void 0===i?1:i,s=r.increasedLineWidthForHitTesting,a=void 0===s?0:s,c=r.points,l=r.pointerEvents,u=void 0===l?"auto":l,h=r.fill,d=r.stroke,f=Oc(u,h,d),p=C(f,2),g=p[1];return!(!g&&!n||!o)&&fm(c.points,o+a,e.x,e.y,!1)}function Sm(t,e,n,r,i){var o=t.parsedStyle,s=o.radius,a=o.fill,c=o.stroke,l=o.lineWidth,u=void 0===l?1:l,h=o.increasedLineWidthForHitTesting,d=void 0===h?0:h,f=o.x,p=void 0===f?0:f,g=o.y,v=void 0===g?0:g,y=o.width,m=o.height,b=o.pointerEvents,x=void 0===b?"auto":b,w=Oc(x,a,c),E=C(w,2),k=E[0],S=E[1],M=s&&s.some((function(t){return 0!==t})),O=u+d;if(M){var N=!1;return(S||n)&&(N=Mm(p,v,y,m,s.map((function(t){return Le(t,0,Math.min(Math.abs(y)/2,Math.abs(m)/2))})),O,e.x,e.y)),N||!k&&!n||(N=r(t,e)),N}var T=O/2;return k&&S||n?lm(p-T,v-T,y+T,m+T,e.x,e.y):k?lm(p,v,y,m,e.x,e.y):!!S&&um(p,v,y,m,O,e.x,e.y)}function Mm(t,e,n,r,i,o,s,a){var c=C(i,4),l=c[0],u=c[1],h=c[2],d=c[3];return dm(t+l,e,t+n-u,e,o,s,a)||dm(t+n,e+u,t+n,e+r-h,o,s,a)||dm(t+n-h,e+r,t+d,e+r,o,s,a)||dm(t,e+r-d,t,e+l,o,s,a)||hm(t+n-u,e+u,u,1.5*Math.PI,2*Math.PI,o,s,a)||hm(t+n-h,e+r-h,h,0,.5*Math.PI,o,s,a)||hm(t+d,e+r-d,d,.5*Math.PI,Math.PI,o,s,a)||hm(t+l,e+l,l,Math.PI,1.5*Math.PI,o,s,a)}function Om(t,e,n,r,i,o){var s=t.parsedStyle,a=s.pointerEvents,c=void 0===a?"auto":a,l=s.x,h=void 0===l?0:l,d=s.y,f=void 0===d?0:d,p=s.width,g=s.height;if("non-transparent-pixel"===c){var v=i.config.offscreenCanvas,y=o.offscreenCanvasCreator.getOrCreateCanvas(v),m=o.offscreenCanvasCreator.getOrCreateContext(v,{willReadFrequently:!0});y.width=p,y.height=g,i.defaultStyleRendererFactory[zr.IMAGE].render(m,u(u({},t.parsedStyle),{},{x:0,y:0}),t,void 0,void 0,void 0);var b=m.getImageData(e.x-h,e.y-f,1,1).data;return b.every((function(t){return 0!==t}))}return!0}function Nm(t,e,n,r){var i=t.getGeometryBounds();return e.x>=i.min[0]&&e.y>=i.min[1]&&e.x<=i.max[0]&&e.y<=i.max[1]}var Tm=function(t){function e(){var t;h(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=S(this,e,[].concat(r)),t.name="canvas-picker",t}return O(e,t),f(e,[{key:"init",value:function(){var t,e=(t={},c(c(c(c(c(c(c(c(c(c(t,zr.CIRCLE,sm),zr.ELLIPSE,cm),zr.RECT,Sm),zr.LINE,bm),zr.POLYLINE,km),zr.POLYGON,Em),zr.PATH,wm),zr.TEXT,Nm),zr.GROUP,null),zr.IMAGE,Om),c(c(t,zr.HTML,null),zr.MESH,null));this.context.pointInPathPickerFactory=e,this.addRenderingPlugin(new om)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(Vr);function Am(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Cm=0;function Pm(t){return"__private_"+Cm+++"_"+t}
/*!
 * @antv/g-plugin-image-loader
 * @description A G plugin for loading image
 * @version 2.1.26
 * @date 7/30/2025, 1:35:52 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */
var Rm=function(){function t(){h(this,t),this.cacheStore=new Map}return f(t,[{key:"onRefAdded",value:function(t){}},{key:"has",value:function(t){return this.cacheStore.has(t)}},{key:"put",value:function(t,e,n){return!this.cacheStore.has(t)&&(this.cacheStore.set(t,{value:e,counter:new Set([n.entity])}),this.onRefAdded(n),!0)}},{key:"get",value:function(t,e){var n=this.cacheStore.get(t);return n?(n.counter.has(e.entity)||(n.counter.add(e.entity),this.onRefAdded(e)),n.value):null}},{key:"update",value:function(t,e,n){var r=this.cacheStore.get(t);return!!r&&(r.value=u(u({},r.value),e),r.counter.has(n.entity)||(r.counter.add(n.entity),this.onRefAdded(n)),!0)}},{key:"release",value:function(t,e){var n=this.cacheStore.get(t);return!!n&&(n.counter["delete"](e.entity),n.counter.size<=0&&this.cacheStore["delete"](t),!0)}},{key:"releaseRef",value:function(t){var e=this;Array.from(this.cacheStore.keys()).forEach((function(n){e.release(n,t)}))}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),_m=[],Lm=[],Dm=function(){function t(){h(this,t)}return f(t,null,[{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.api;t.rafId&&(e.cancelAnimationFrame(t.rafId),t.rafId=null)}},{key:"executeTask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.api;_m.length<=0&&Lm.length<=0||(Lm.forEach((function(t){return t()})),Lm=_m.splice(0,t.TASK_NUM_PER_FRAME),t.rafId=e.requestAnimationFrame((function(){t.executeTask(e)})))}},{key:"sliceImage",value:function(e,n,r,i){for(var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.api,a=e.naturalWidth||e.width,c=e.naturalHeight||e.height,l=n-o,u=r-o,h=Math.ceil(a/l),d=Math.ceil(c/u),f={tileSize:[n,r],gridSize:[d,h],tiles:Array(d).fill(null).map((function(){return Array(h).fill(null)}))},p=function(t){for(var o=function(o){_m.push((function(){var h=o*l,d=t*u,p=[Math.min(n,a-h),Math.min(r,c-d)],g=p[0],v=p[1],y=s.createCanvas();y.width=n,y.height=r;var m=y.getContext("2d");m.drawImage(e,h,d,g,v,0,0,g,v),f.tiles[t][o]={x:h,y:d,tileX:o,tileY:t,data:y},i()}))},d=0;d<h;d++)o(d)},g=0;g<d;g++)p(g);return t.stop(),t.executeTask(),f}}])}();Dm.TASK_NUM_PER_FRAME=10;var Im=new Rm;Im.onRefAdded=function(t){var e=this;t.addEventListener(_l.DESTROY,(function(){e.releaseRef(t)}),{once:!0})};var jm=function(){function t(e,n){h(this,t),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=n}return f(t,[{key:"getImageSync",value:function(t,e,n){var r=Re(t)?t:t.src;if(Im.has(r)){var i=Im.get(r,e);if(i.img.complete)return null===n||void 0===n||n(i),i}return this.getOrCreateImage(t,e).then((function(t){null===n||void 0===n||n(t)}))["catch"]((function(t){console.error(t)})),null}},{key:"getOrCreateImage",value:function(t,e){var n=this,r=Re(t)?t:t.src;if(!Re(t)&&!Im.has(r)){var i={img:t,size:[t.naturalWidth||t.width,t.naturalHeight||t.height],tileSize:Fm(t)};Im.put(r,i,e)}if(Im.has(r)){var o=Im.get(r,e);return o.img.complete?Promise.resolve(o):new Promise((function(t,e){o.img.addEventListener("load",(function(){o.size=[o.img.naturalWidth||o.img.width,o.img.naturalHeight||o.img.height],o.tileSize=Fm(o.img),t(o)})),o.img.addEventListener("error",(function(t){e(t)}))}))}return new Promise((function(t,i){var o=n.context.config.createImage();if(o){var s={img:o,size:[0,0],tileSize:Fm(o)};Im.put(r,s,e),o.onload=function(){s.size=[o.naturalWidth||o.width,o.naturalHeight||o.height],s.tileSize=Fm(s.img),t(s)},o.onerror=function(t){i(t)},o.crossOrigin="Anonymous",o.src=r}}))}},{key:"createDownSampledImage",value:function(){var t=Lr(Rr().mark((function t(e,n){var r,i,o,s,a,c,l,h,d,f,p,g,v,y;return Rr().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,this.getOrCreateImage(e,n);case 1:if(r=t.sent,"undefined"===typeof r.downSamplingRate){t.next=2;break}return t.abrupt("return",r);case 2:if(i=this.context.config.enableLargeImageOptimization,o="boolean"===typeof i?{}:i,s=o.maxDownSampledImageSize,a=void 0===s?2048:s,c=o.downSamplingRateThreshold,l=void 0===c?.5:c,h=this.runtime.globalThis.createImageBitmap,d=C(r.size,2),f=d[0],p=d[1],g=r.img,v=Math.min((a+a)/(f+p),Math.max(.01,Math.min(l,.5))),y=u(u({},r),{},{downSamplingRate:v}),Im.update(r.img.src,y,n),!h){t.next=7;break}return t.prev=3,t.next=4,h(r.img,{resizeWidth:f*v,resizeHeight:p*v});case 4:g=t.sent,t.next=6;break;case 5:t.prev=5,t["catch"](3),v=1;case 6:t.next=8;break;case 7:v=1;case 8:return y=u(u({},this.getImageSync(e,n)),{},{downSampled:g,downSamplingRate:v}),Im.update(r.img.src,y,n),t.abrupt("return",y);case 9:case"end":return t.stop()}}),t,this,[[3,5]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"createImageTiles",value:function(){var t=Lr(Rr().mark((function t(e,n,r,i){var o,s,a,c,l;return Rr().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,this.getOrCreateImage(e,i);case 1:return o=t.sent,s=i.ownerDocument.defaultView,a=s.requestAnimationFrame,c=s.cancelAnimationFrame,Dm.api={requestAnimationFrame:a,cancelAnimationFrame:c,createCanvas:function(){return Tl.createCanvas()}},l=u(u({},o),Dm.sliceImage(o.img,o.tileSize[0],o.tileSize[0],r)),Im.update(o.img.src,l,i),t.abrupt("return",l);case 2:case"end":return t.stop()}}),t,this)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"releaseImage",value:function(t,e){Im.release(Re(t)?t:t.src,e)}},{key:"releaseImageRef",value:function(t){Im.releaseRef(t)}},{key:"getOrCreatePatternSync",value:function(t,e,n,r,i,o,s){var a=this.generatePatternKey(e);if(a&&this.patternCache[a])return this.patternCache[a];var c,l=e.image,u=e.repetition,h=e.transform,d=!1;if(Re(l)){var f=this.getImageSync(l,t,s);c=null===f||void 0===f?void 0:f.img}else r?(c=r,d=!0):c=l;var p,g=c&&n.createPattern(c,u);g&&(p=h?sl(Sa(h),new Au({})):vt(ht()),d&&kt(p,p,[1/i,1/i,1]),g.setTransform({a:p[0],b:p[1],c:p[4],d:p[5],e:p[12]+o[0],f:p[13]+o[1]}));return a&&g&&(this.patternCache[a]=g),g}},{key:"getOrCreateGradient",value:function(t,e){var n=this.generateGradientKey(t),r=t.type,i=t.steps,o=t.min,s=t.width,a=t.height,c=t.angle,l=t.cx,u=t.cy,h=t.size;if(this.gradientCache[n])return this.gradientCache[n];var d=null;if(r===Ho.LinearGradient){var f=hs(o,s,a,c),p=f.x1,g=f.y1,v=f.x2,y=f.y2;d=e.createLinearGradient(p,g,v,y)}else if(r===Ho.RadialGradient){var m=ds(o,s,a,l,u,h),b=m.x,x=m.y,w=m.r;d=e.createRadialGradient(b,x,0,b,x,w)}return d&&(i.forEach((function(t){var e,n=t.offset,r=t.color;n.unit===Po.kPercentage&&(null===(e=d)||void 0===e||e.addColorStop(n.value/100,r.toString()))})),this.gradientCache[n]=d),this.gradientCache[n]}},{key:"generateGradientKey",value:function(t){var e=t.type,n=t.min,r=t.width,i=t.height,o=t.steps,s=t.angle,a=t.cx,c=t.cy,l=t.size;return"gradient-".concat(e,"-").concat((null===s||void 0===s?void 0:s.toString())||0,"-").concat((null===a||void 0===a?void 0:a.toString())||0,"-").concat((null===c||void 0===c?void 0:c.toString())||0,"-").concat((null===l||void 0===l?void 0:l.toString())||0,"-").concat(n[0],"-").concat(n[1],"-").concat(r,"-").concat(i,"-").concat(o.map((function(t){var e=t.offset,n=t.color;return"".concat(e).concat(n)})).join("-"))}},{key:"generatePatternKey",value:function(t){var e=t.image,n=t.repetition;return Re(e)?"pattern-".concat(e,"-").concat(n):"rect"===e.nodeName?"pattern-".concat(e.entity,"-").concat(n):void 0}}])}();function Fm(t){if(!t.complete)return[0,0];var e=t.naturalWidth||t.width,n=t.naturalHeight||t.height,r=256;return[256,512].forEach((function(t){var i=Math.ceil(n/t),o=Math.ceil(e/t);i*o<1e3&&(r=t)})),[r,r]}jm.isSupportTile=!!Tl.createCanvas();var Bm=function(){function t(){h(this,t)}return f(t,[{key:"apply",value:function(e){var n=e.renderingService,r=e.renderingContext,i=e.imagePool,o=r.root.ownerDocument.defaultView,s=function(t,e,n){var r=t.parsedStyle,i=r.width,o=r.height;i&&!o?t.setAttribute("height",n/e*i):!i&&o&&t.setAttribute("width",e/n*o)},a=function(t){var e=t.target,r=e.nodeName,o=e.attributes;if(r===zr.IMAGE){var a=o.src,c=o.keepAspectRatio;i.getImageSync(a,e,(function(t){var r=t.img,i=r.width,o=r.height;c&&s(e,i,o),e.renderable.dirty=!0,n.dirtify()}))}},c=function(t){var e=t.target,r=t.attrName,o=t.prevValue,a=t.newValue;e.nodeName===zr.IMAGE&&"src"===r&&(o!==a&&i.releaseImage(o,e),Re(a)&&i.getOrCreateImage(a,e).then((function(t){var r=t.img,i=r.width,o=r.height;e.attributes.keepAspectRatio&&s(e,i,o),e.renderable.dirty=!0,n.dirtify()}))["catch"]((function(){})))};n.hooks.init.tap(t.tag,(function(){o.addEventListener(_l.MOUNTED,a),o.addEventListener(_l.ATTR_MODIFIED,c)})),n.hooks.destroy.tap(t.tag,(function(){o.removeEventListener(_l.MOUNTED,a),o.removeEventListener(_l.ATTR_MODIFIED,c)}))}}])}();Bm.tag="LoadImage";var zm=function(t){function e(){var t;h(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=S(this,e,[].concat(r)),t.name="image-loader",t}return O(e,t),f(e,[{key:"init",value:function(t){this.context.imagePool=new jm(this.context,t),this.addRenderingPlugin(new Bm)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Vr),Gm=Pm("renderState"),Vm=function(){function t(e){h(this,t),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,Gm,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=ht(),this.dprMatrix=ht(),this.tmpMat4=ht(),this.vec3a=D(),this.vec3b=D(),this.vec3c=D(),this.vec3d=D(),this.canvasRendererPluginOptions=e}return f(t,[{key:"apply",value:function(e,n){var r=this;this.context=e;var i=this.context,o=i.config,s=i.camera,a=i.renderingService,c=i.renderingContext,l=i.rBushRoot,u=i.pathGeneratorFactory,h=o.renderer.getConfig().enableRenderingOptimization;o.renderer.getConfig().enableDirtyCheck=!1,o.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=l,this.pathGeneratorFactory=u;var d=e.contextService,f=c.root.ownerDocument.defaultView,p=function(t){var e=t.target,n=e.rBushNode;null!==n&&void 0!==n&&n.aabb&&r.removedRBushNodeAABBs.push(n.aabb)},g=function(t){var e=t.target,n=e.rBushNode;n.aabb&&r.removedRBushNodeAABBs.push(n.aabb)};a.hooks.init.tap(t.tag,(function(){f.addEventListener(_l.UNMOUNTED,p),f.addEventListener(_l.CULLED,g);var t=d.getDPR(),e=o.width,n=o.height,i=d.getContext();r.clearRect(i,0,0,e*t,n*t,o.background)})),a.hooks.destroy.tap(t.tag,(function(){f.removeEventListener(_l.UNMOUNTED,p),f.removeEventListener(_l.CULLED,g),r.renderQueue=[],r.removedRBushNodeAABBs=[],Am(r,Gm)[Gm]={restoreStack:[],prevObject:null,currentContext:null}}));var v=function(){var t,e=d.getContext(),n=d.getDPR(),i=o.width,s=o.height,c=r.canvasRendererPluginOptions,l=c.dirtyObjectNumThreshold,u=c.dirtyObjectRatioThreshold,h=a.getStats(),p=h.total,g=h.rendered,v=g/p;r.clearFullScreen=r.clearFullScreenLastFrame||!(null!==(t=f.context.renderingPlugins[1])&&void 0!==t&&t.isFirstTimeRenderingFinished)||a.disableDirtyRectangleRendering()||g>l&&v>u,e&&("function"===typeof e.resetTransform?e.resetTransform():e.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(e,0,0,i*n,s*n,o.background))},y=function(t,e){var i=[t];while(i.length>0){var o,s=i.pop();s.isVisible()&&!s.isCulled()&&(h?r.renderDisplayObjectOptimized(s,e,r.context,Am(r,Gm)[Gm],n):r.renderDisplayObject(s,e,r.context,Am(r,Gm)[Gm],n));for(var a=(null===(o=s.sortable)||void 0===o||null===(o=o.sorted)||void 0===o?void 0:o.length)>0?s.sortable.sorted:s.childNodes,c=a.length-1;c>=0;c--)i.push(a[c])}};a.hooks.endFrame.tap(t.tag,(function(){if(v(),0!==c.root.childNodes.length){h=o.renderer.getConfig().enableRenderingOptimization,Am(r,Gm)[Gm]={restoreStack:[],prevObject:null,currentContext:Am(r,Gm)[Gm].currentContext},Am(r,Gm)[Gm].currentContext.clear(),r.clearFullScreenLastFrame=!1;var t=d.getContext(),e=d.getDPR();if(At(r.dprMatrix,[e,e,1]),wt(r.vpMatrix,r.dprMatrix,s.getOrthoMatrix()),r.clearFullScreen)h?(t.save(),y(c.root,t),t.restore()):y(c.root,t),r.removedRBushNodeAABBs=[];else{var i=r.safeMergeAABB.apply(r,[r.mergeDirtyAABBs(r.renderQueue)].concat(b(r.removedRBushNodeAABBs.map((function(t){var e=t.minX,n=t.minY,r=t.maxX,i=t.maxY,o=new Kr;return o.setMinMax([e,n,0],[r,i,0]),o})))));if(r.removedRBushNodeAABBs=[],Kr.isEmpty(i))return void(r.renderQueue=[]);var a=r.convertAABB2Rect(i),l=a.x,u=a.y,p=a.width,g=a.height,m=J(r.vec3a,[l,u,0],r.vpMatrix),x=J(r.vec3b,[l+p,u,0],r.vpMatrix),w=J(r.vec3c,[l,u+g,0],r.vpMatrix),E=J(r.vec3d,[l+p,u+g,0],r.vpMatrix),k=Math.min(m[0],x[0],E[0],w[0]),S=Math.min(m[1],x[1],E[1],w[1]),M=Math.max(m[0],x[0],E[0],w[0]),O=Math.max(m[1],x[1],E[1],w[1]),N=Math.floor(k),T=Math.floor(S),A=Math.ceil(M-k),C=Math.ceil(O-S);t.save(),r.clearRect(t,N,T,A,C,o.background),t.beginPath(),t.rect(N,T,A,C),t.clip(),t.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]);var P=o.renderer.getConfig(),R=P.enableDirtyRectangleRenderingDebug;R&&f.dispatchEvent(new kl(rh.DIRTY_RECTANGLE,{dirtyRect:{x:N,y:T,width:A,height:C}}));var _=r.searchDirtyObjects(i);_.sort((function(t,e){return t.sortable.renderOrder-e.sortable.renderOrder})).forEach((function(e){e&&e.isVisible()&&!e.isCulled()&&r.renderDisplayObject(e,t,r.context,Am(r,Gm)[Gm],n)})),t.restore(),r.renderQueue.forEach((function(t){r.saveDirtyAABB(t)})),r.renderQueue=[]}Am(r,Gm)[Gm].restoreStack.forEach((function(){t.restore()})),Am(r,Gm)[Gm].restoreStack=[]}else r.clearFullScreenLastFrame=!0})),a.hooks.render.tap(t.tag,(function(t){r.clearFullScreen||r.renderQueue.push(t)}))}},{key:"clearRect",value:function(t,e,n,r,i,o){t.clearRect(e,n,r,i),o&&(t.fillStyle=o,t.fillRect(e,n,r,i))}},{key:"renderDisplayObjectOptimized",value:function(t,e,n,r,i){var o=t.nodeName,s=!1,a=!1,c=this.context.styleRendererFactory[o],l=this.pathGeneratorFactory[o],u=t.parsedStyle.clipPath;if(u){s=!r.prevObject||!ie(u.getWorldTransform(),r.prevObject.getWorldTransform()),s&&(this.applyWorldTransform(e,u),r.prevObject=null);var h=this.pathGeneratorFactory[u.nodeName];h&&(e.save(),a=!0,e.beginPath(),h(e,u.parsedStyle),e.closePath(),e.clip())}if(c){s=!r.prevObject||!ie(t.getWorldTransform(),r.prevObject.getWorldTransform()),s&&this.applyWorldTransform(e,t);var d=!r.prevObject;if(!d){var f=r.prevObject.nodeName;d=o===zr.TEXT?f!==zr.TEXT:o===zr.IMAGE?f!==zr.IMAGE:f===zr.TEXT||f===zr.IMAGE}c.applyStyleToContext(e,t,d,r),r.prevObject=t}l&&(e.beginPath(),l(e,t.parsedStyle),o!==zr.LINE&&o!==zr.PATH&&o!==zr.POLYLINE&&e.closePath()),c&&c.drawToContext(e,t,Am(this,Gm)[Gm],this,i),a&&e.restore(),t.dirty(!1)}},{key:"renderDisplayObject",value:function(t,e,n,r,i){var o=t.nodeName,s=r.restoreStack[r.restoreStack.length-1];!s||t.compareDocumentPosition(s)&Ml.DOCUMENT_POSITION_CONTAINS||(e.restore(),r.restoreStack.pop());var a=this.context.styleRendererFactory[o],c=this.pathGeneratorFactory[o],l=t.parsedStyle.clipPath;if(l){this.applyWorldTransform(e,l);var u=this.pathGeneratorFactory[l.nodeName];u&&(e.save(),r.restoreStack.push(t),e.beginPath(),u(e,l.parsedStyle),e.closePath(),e.clip())}a&&(this.applyWorldTransform(e,t),e.save(),this.applyAttributesToContext(e,t)),c&&(e.beginPath(),c(e,t.parsedStyle),o!==zr.LINE&&o!==zr.PATH&&o!==zr.POLYLINE&&e.closePath()),a&&(a.render(e,t.parsedStyle,t,n,this,i),e.restore()),t.dirty(!1)}},{key:"applyAttributesToContext",value:function(t,e){var n=e.parsedStyle,r=n.stroke,i=n.fill,o=n.opacity,s=n.lineDash,a=n.lineDashOffset;s&&t.setLineDash(s),Pe(a)||(t.lineDashOffset=a),Pe(o)||(t.globalAlpha*=o),Pe(r)||Array.isArray(r)||r.isNone||(t.strokeStyle=e.attributes.stroke),Pe(i)||Array.isArray(i)||i.isNone||(t.fillStyle=e.attributes.fill)}},{key:"convertAABB2Rect",value:function(t){var e=t.getMin(),n=t.getMax(),r=Math.floor(e[0]),i=Math.floor(e[1]),o=Math.ceil(n[0]),s=Math.ceil(n[1]),a=o-r,c=s-i;return{x:r,y:i,width:a,height:c}}},{key:"mergeDirtyAABBs",value:function(t){var e=new Kr;return t.forEach((function(t){var n=t.getRenderBounds();e.add(n);var r=t.renderable.dirtyRenderBounds;r&&e.add(r)})),e}},{key:"searchDirtyObjects",value:function(t){var e=t.getMin(),n=C(e,2),r=n[0],i=n[1],o=t.getMax(),s=C(o,2),a=s[0],c=s[1],l=this.rBush.search({minX:r,minY:i,maxX:a,maxY:c});return l.map((function(t){var e=t.displayObject;return e}))}},{key:"saveDirtyAABB",value:function(t){var e=t.renderable;e.dirtyRenderBounds||(e.dirtyRenderBounds=new Kr);var n=t.getRenderBounds();n&&e.dirtyRenderBounds.update(n.center,n.halfExtents)}},{key:"applyWorldTransform",value:function(t,e,n){n?(ft(this.tmpMat4,e.getLocalTransform()),wt(this.tmpMat4,n,this.tmpMat4),wt(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(ft(this.tmpMat4,e.getWorldTransform()),wt(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var t=new Kr,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){t.add(e)})),t}}])}();function Wm(t,e,n,r,i,o,s){var a,c;if("rect"===t.image.nodeName){var l=t.image.parsedStyle,u=l.width,h=l.height;c=r.contextService.getDPR();var d=r.config.offscreenCanvas;a=o.offscreenCanvasCreator.getOrCreateCanvas(d),a.width=u*c,a.height=h*c;var f=o.offscreenCanvasCreator.getOrCreateContext(d),p={restoreStack:[],prevObject:null,currentContext:new Map};t.image.forEach((function(t){i.renderDisplayObject(t,f,r,p,o)})),p.restoreStack.forEach((function(){f.restore()}))}var g=s.getOrCreatePatternSync(e,t,n,a,c,e.getGeometryBounds().min,(function(){e.dirty(),r.renderingService.dirtify()}));return g}function Um(t,e,n,r){var i;if(t.type===Ho.LinearGradient||t.type===Ho.RadialGradient){var o=e.getGeometryBounds(),s=o&&2*o.halfExtents[0]||1,a=o&&2*o.halfExtents[1]||1,c=o&&o.min||[0,0];i=r.getOrCreateGradient(u(u({type:t.type},t.value),{},{min:c,width:s,height:a}),n)}return i}Vm.tag="CanvasRenderer";var Hm=["shadowBlur","shadowOffsetX","shadowOffsetY"],$m=["lineCap","lineJoin","miterLimit"],Ym={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},qm={};function Xm(t,e,n,r){var i=r.has(e)?r.get(e):Ym[e];return i!==n&&("lineDash"===e?t.setLineDash(n):t[e]=n,r.set(e,n)),i}var Km=function(){function t(e){h(this,t),this.imagePool=e}return f(t,[{key:"applyAttributesToContext",value:function(t,e){}},{key:"render",value:function(t,e,n,r,i,o){}},{key:"applyCommonStyleToContext",value:function(t,e,n,r){var i=n?qm:r.prevObject.parsedStyle,o=e.parsedStyle;(n||o.opacity!==i.opacity)&&Xm(t,"globalAlpha",Pe(o.opacity)?Ym.globalAlpha:o.opacity,r.currentContext),(n||o.blend!==i.blend)&&Xm(t,"globalCompositeOperation",Pe(o.blend)?Ym.globalCompositeOperation:o.blend,r.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(t,e,n,r){var i=n?qm:r.prevObject.parsedStyle,o=e.parsedStyle,s=o.lineWidth,a=void 0===s?Ym.lineWidth:s,c=o.fill&&!o.fill.isNone,l=o.stroke&&!o.stroke.isNone&&a>0;if(l){if(n||e.attributes.stroke!==r.prevObject.attributes.stroke){var u=Pe(o.stroke)||Array.isArray(o.stroke)||o.stroke.isNone?Ym.strokeStyle:e.attributes.stroke;Xm(t,"strokeStyle",u,r.currentContext)}(n||o.lineWidth!==i.lineWidth)&&Xm(t,"lineWidth",Pe(o.lineWidth)?Ym.lineWidth:o.lineWidth,r.currentContext),(n||o.lineDash!==i.lineDash)&&Xm(t,"lineDash",o.lineDash||Ym.lineDash,r.currentContext),(n||o.lineDashOffset!==i.lineDashOffset)&&Xm(t,"lineDashOffset",Pe(o.lineDashOffset)?Ym.lineDashOffset:o.lineDashOffset,r.currentContext);for(var h=0;h<$m.length;h++){var d=$m[h];(n||o[d]!==i[d])&&Xm(t,d,Pe(o[d])?Ym[d]:o[d],r.currentContext)}}if(c&&(n||e.attributes.fill!==r.prevObject.attributes.fill)){var f=Pe(o.fill)||Array.isArray(o.fill)||o.fill.isNone?Ym.fillStyle:e.attributes.fill;Xm(t,"fillStyle",f,r.currentContext)}}},{key:"applyStyleToContext",value:function(t,e,n,r){var i=e.nodeName;this.applyCommonStyleToContext(t,e,n,r),i===zr.IMAGE||this.applyStrokeFillStyleToContext(t,e,n,r)}},{key:"applyShadowAndFilterStyleToContext",value:function(t,e,n,r){var i=e.parsedStyle;if(n){Xm(t,"shadowColor",i.shadowColor.toString(),r.currentContext);for(var o=0;o<Hm.length;o++){var s=Hm[o];Xm(t,s,i[s]||Ym[s],r.currentContext)}}i.filter&&i.filter.length&&Xm(t,"filter",e.attributes.filter,r.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e){Xm(t,"shadowColor",Ym.shadowColor,r.currentContext);for(var o=0;o<Hm.length;o++){var s=Hm[o];Xm(t,s,Ym[s],r.currentContext)}}if(n)if(e&&i){var a=t.filter;!Pe(a)&&a.indexOf("drop-shadow")>-1&&Xm(t,"filter",a.replace(/drop-shadow\([^)]*\)/,"").trim()||Ym.filter,r.currentContext)}else Xm(t,"filter",Ym.filter,r.currentContext)}},{key:"fillToContext",value:function(t,e,n,r,i){var o=this,s=e.parsedStyle,a=s.fill,c=s.fillRule,l=null;if(Array.isArray(a)&&a.length>0)a.forEach((function(r){var i=Xm(t,"fillStyle",Um(r,e,t,o.imagePool),n.currentContext);l=null!==l&&void 0!==l?l:i,c?t.fill(c):t.fill()}));else{if(Ss(a)){var u=Wm(a,e,t,e.ownerDocument.defaultView.context,r,i,this.imagePool);u&&(t.fillStyle=u,l=!0)}c?t.fill(c):t.fill()}null!==l&&Xm(t,"fillStyle",l,n.currentContext)}},{key:"strokeToContext",value:function(t,e,n,r,i){var o=this,s=e.parsedStyle.stroke,a=null;if(Array.isArray(s)&&s.length>0)s.forEach((function(r){var i=Xm(t,"strokeStyle",Um(r,e,t,o.imagePool),n.currentContext);a=null!==a&&void 0!==a?a:i,t.stroke()}));else{if(Ss(s)){var c=Wm(s,e,t,e.ownerDocument.defaultView.context,r,i,this.imagePool);if(c){var l=Xm(t,"strokeStyle",c,n.currentContext);a=null!==a&&void 0!==a?a:l}}t.stroke()}null!==a&&Xm(t,"strokeStyle",a,n.currentContext)}},{key:"drawToContext",value:function(t,e,n,r,i){var o,s=e.nodeName,a=e.parsedStyle,c=a.opacity,l=void 0===c?Ym.globalAlpha:c,u=a.fillOpacity,h=void 0===u?Ym.fillOpacity:u,d=a.strokeOpacity,f=void 0===d?Ym.strokeOpacity:d,p=a.lineWidth,g=void 0===p?Ym.lineWidth:p,v=a.fill&&!a.fill.isNone,y=a.stroke&&!a.stroke.isNone&&g>0;if(v||y){var m=!Pe(a.shadowColor)&&a.shadowBlur>0,b="inner"===a.shadowType,x=0===(null===(o=a.fill)||void 0===o?void 0:o.alpha),w=!(!a.filter||!a.filter.length),E=m&&y&&(s===zr.PATH||s===zr.LINE||s===zr.POLYLINE||x||b),k=null;if(v){E||this.applyShadowAndFilterStyleToContext(t,e,m,n);var S=l*h;k=Xm(t,"globalAlpha",S,n.currentContext),this.fillToContext(t,e,n,r,i),E||this.clearShadowAndFilterStyleForContext(t,m,w,n)}if(y){var M=!1,O=l*f,N=Xm(t,"globalAlpha",O,n.currentContext);if(k=v?k:N,E&&(this.applyShadowAndFilterStyleToContext(t,e,m,n),M=!0,b)){var T=t.globalCompositeOperation;t.globalCompositeOperation="source-atop",this.strokeToContext(t,e,n,r,i),t.globalCompositeOperation=T,this.clearShadowAndFilterStyleForContext(t,m,w,n,!0)}this.strokeToContext(t,e,n,r,i),M&&this.clearShadowAndFilterStyleForContext(t,m,w,n)}null!==k&&Xm(t,"globalAlpha",k,n.currentContext)}}}])}(),Zm=function(t){function e(){return h(this,e),S(this,e,arguments)}return O(e,t),f(e,[{key:"render",value:function(t,e,n,r,i,o){var s=e.fill,a=e.fillRule,c=e.opacity,l=void 0===c?1:c,u=e.fillOpacity,h=void 0===u?1:u,d=e.stroke,f=e.strokeOpacity,p=void 0===f?1:f,g=e.lineWidth,v=void 0===g?1:g,y=e.lineCap,m=e.lineJoin,b=e.shadowType,x=e.shadowColor,w=e.shadowBlur,E=e.filter,k=e.miterLimit,S=s&&!s.isNone,M=d&&!d.isNone&&v>0,O=0===(null===s||void 0===s?void 0:s.alpha),N=!(!E||!E.length),T=!Pe(x)&&w>0,A=n.nodeName,C="inner"===b,P=M&&T&&(A===zr.PATH||A===zr.LINE||A===zr.POLYLINE||O||C);S&&(t.globalAlpha=l*h,P||Jm(n,t,T),Qm(t,n,s,a,r,i,o,this.imagePool),P||this.clearShadowAndFilter(t,N,T)),M&&(t.globalAlpha=l*p,t.lineWidth=v,Pe(k)||(t.miterLimit=k),Pe(y)||(t.lineCap=y),Pe(m)||(t.lineJoin=m),P&&(C&&(t.globalCompositeOperation="source-atop"),Jm(n,t,!0),C&&(tb(t,n,d,r,i,o,this.imagePool),t.globalCompositeOperation=Ym.globalCompositeOperation,this.clearShadowAndFilter(t,N,!0))),tb(t,n,d,r,i,o,this.imagePool))}},{key:"clearShadowAndFilter",value:function(t,e,n){if(n&&(t.shadowColor="transparent",t.shadowBlur=0),e){var r=t.filter;!Pe(r)&&r.indexOf("drop-shadow")>-1&&(t.filter=r.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(Km);function Jm(t,e,n){var r=t.parsedStyle,i=r.filter,o=r.shadowColor,s=r.shadowBlur,a=r.shadowOffsetX,c=r.shadowOffsetY;i&&i.length&&(e.filter=t.style.filter),n&&(e.shadowColor=o.toString(),e.shadowBlur=s||0,e.shadowOffsetX=a||0,e.shadowOffsetY=c||0)}function Qm(t,e,n,r,i,o,s,a){var c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Array.isArray(n)?n.forEach((function(n){t.fillStyle=Um(n,e,t,a),c||(r?t.fill(r):t.fill())})):(Ss(n)&&(t.fillStyle=Wm(n,e,t,i,o,s,a)),c||(r?t.fill(r):t.fill()))}function tb(t,e,n,r,i,o,s){var a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Array.isArray(n)?n.forEach((function(n){t.strokeStyle=Um(n,e,t,s),a||t.stroke()})):(Ss(n)&&(t.strokeStyle=Wm(n,e,t,r,i,o,s)),a||t.stroke())}function eb(t,e){var n=C(t,4),r=n[0],i=n[1],o=n[2],s=n[3],a=C(e,4),c=a[0],l=a[1],u=a[2],h=a[3],d=Math.max(r,c),f=Math.max(i,l),p=Math.min(r+o,c+u),g=Math.min(i+s,l+h);return p<=d||g<=f?null:[d,f,p-d,g-f]}function nb(t,e){var n=J(D(),[t[0],t[1],0],e),r=J(D(),[t[0]+t[2],t[1],0],e),i=J(D(),[t[0],t[1]+t[3],0],e),o=J(D(),[t[0]+t[2],t[1]+t[3],0],e);return[Math.min(n[0],r[0],i[0],o[0]),Math.min(n[1],r[1],i[1],o[1]),Math.max(n[0],r[0],i[0],o[0])-Math.min(n[0],r[0],i[0],o[0]),Math.max(n[1],r[1],i[1],o[1])-Math.min(n[1],r[1],i[1],o[1])]}var rb=function(t){function e(){return h(this,e),S(this,e,arguments)}return O(e,t),f(e,[{key:"renderDownSampled",value:function(t,e,n,r){var i=r.src,o=r.imageCache;o.downSampled?t.drawImage(o.downSampled,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3])):this.imagePool.createDownSampledImage(i,n).then((function(){n.ownerDocument&&(n.dirty(),n.ownerDocument.defaultView.context.renderingService.dirtify())}))["catch"]((function(t){console.error(t)}))}},{key:"renderTile",value:function(t,e,n,r){var i=r.src,o=r.imageCache,s=r.imageRect,a=r.drawRect,c=o.size,l=t.getTransform(),u=l.a,h=l.b,d=l.c,f=l.d,p=l.e,g=l.f;if(t.resetTransform(),null!==o&&void 0!==o&&o.gridSize){for(var v=[c[0]/s[2],c[1]/s[3]],y=[o.tileSize[0]/v[0],o.tileSize[1]/v[1]],m=[Math.floor((a[0]-s[0])/y[0]),Math.ceil((a[0]+a[2]-s[0])/y[0])],b=m[0],x=m[1],w=[Math.floor((a[1]-s[1])/y[1]),Math.ceil((a[1]+a[3]-s[1])/y[1])],E=w[0],k=w[1],S=E;S<=k;S++)for(var M=b;M<=x;M++){var O=o.tiles[S][M];if(O){var N=[Math.floor(s[0]+O.tileX*y[0]),Math.floor(s[1]+O.tileY*y[1]),Math.ceil(y[0]),Math.ceil(y[1])];t.drawImage(O.data,N[0],N[1],N[2],N[3])}}t.setTransform(u,h,d,f,p,g)}else this.imagePool.createImageTiles(i,[],(function(){n.ownerDocument&&(n.dirty(),n.ownerDocument.defaultView.context.renderingService.dirtify())}),n)["catch"]((function(t){console.error(t)}))}},{key:"render",value:function(t,n,r){var i=n.x,o=void 0===i?0:i,s=n.y,a=void 0===s?0:s,c=n.width,l=n.height,u=n.src,h=n.shadowColor,d=n.shadowBlur,f=this.imagePool.getImageSync(u,r),p=null===f||void 0===f?void 0:f.img,g=c,v=l;if(p){g||(g=p.width),v||(v=p.height);var y=!Pe(h)&&d>0;Jm(r,t,y);try{var m=r.ownerDocument.defaultView.getContextService().getDomElement(),b=m.width,x=m.height,w=t.getTransform(),E=w.a,k=w.b,S=w.c,M=w.d,O=w.e,N=w.f,T=pt(E,S,0,0,k,M,0,0,0,0,1,0,O,N,0,1),A=nb([o,a,g,v],T),C=eb([0,0,b,x],A);if(!C)return;if(!r.ownerDocument.defaultView.getConfig().enableLargeImageOptimization)return void e.renderFull(t,n,r,{image:p,drawRect:[o,a,g,v]});var P=A[2]/f.size[0];if(P<(f.downSamplingRate||.5))return void this.renderDownSampled(t,n,r,{src:u,imageCache:f,drawRect:[o,a,g,v]});if(!jm.isSupportTile)return void e.renderFull(t,n,r,{image:p,drawRect:[o,a,g,v]});this.renderTile(t,n,r,{src:u,imageCache:f,imageRect:A,drawRect:C})}catch(R){}}}},{key:"drawToContext",value:function(t,e,n,r,i){this.render(t,e.parsedStyle,e)}}],[{key:"renderFull",value:function(t,e,n,r){t.drawImage(r.image,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3]))}}])}(Zm),ib=function(t){function e(){return h(this,e),S(this,e,arguments)}return O(e,t),f(e,[{key:"render",value:function(t,e,n,r,i,o){n.getBounds();var s=e.lineWidth,a=void 0===s?1:s,c=e.textAlign,l=void 0===c?"start":c,u=e.textBaseline,h=void 0===u?"alphabetic":u,d=e.lineJoin,f=void 0===d?"miter":d,p=e.miterLimit,g=void 0===p?10:p,v=e.letterSpacing,y=void 0===v?0:v,m=e.stroke,b=e.fill,x=e.fillRule,w=e.fillOpacity,E=void 0===w?1:w,k=e.strokeOpacity,S=void 0===k?1:k,M=e.opacity,O=void 0===M?1:M,N=e.metrics,T=e.x,A=void 0===T?0:T,C=e.y,P=void 0===C?0:C,R=e.dx,_=e.dy,L=e.shadowColor,D=e.shadowBlur,I=N.font,j=N.lines,F=N.height,B=N.lineHeight,z=N.lineMetrics;t.font=I,t.lineWidth=a,t.textAlign="middle"===l?"center":l;var G=h;"alphabetic"===G&&(G="bottom"),t.lineJoin=f,Pe(g)||(t.miterLimit=g);var V=P;"middle"===h?V+=-F/2-B/2:"bottom"===h||"alphabetic"===h||"ideographic"===h?V+=-F:"top"!==h&&"hanging"!==h||(V+=-B);var W=A+(R||0);V+=_||0,1===j.length&&("bottom"===G?(G="middle",V-=.5*F):"top"===G&&(G="middle",V+=.5*F)),t.textBaseline=G;var U=!Pe(L)&&D>0;Jm(n,t,U);for(var H=0;H<j.length;H++){var $=a/2+W;V+=B,Pe(m)||m.isNone||!a||this.drawLetterSpacing(t,n,j[H],z[H],l,$,V,y,b,x,E,m,S,O,!0,r,i,o),Pe(b)||this.drawLetterSpacing(t,n,j[H],z[H],l,$,V,y,b,x,E,m,S,O,!1,r,i,o)}}},{key:"drawLetterSpacing",value:function(t,e,n,r,i,o,s,a,c,l,u,h,d,f,p,g,v,y){if(0!==a){var m=t.textAlign;t.textAlign="left";var b=o;"center"===i||"middle"===i?b=o-r.width/2:"right"!==i&&"end"!==i||(b=o-r.width);for(var x=Array.from(n),w=t.measureText(n).width,E=0,k=0;k<x.length;++k){var S=x[k];p?this.strokeText(t,e,S,b,s,h,d,g,v,y):this.fillText(t,e,S,b,s,c,l,u,f,g,v,y),E=t.measureText(n.substring(k+1)).width,b+=w-E+a,w=E}t.textAlign=m}else p?this.strokeText(t,e,n,o,s,h,d,g,v,y):this.fillText(t,e,n,o,s,c,l,u,f,g,v,y)}},{key:"fillText",value:function(t,e,n,r,i,o,s,a,c,l,u,h){var d;Qm(t,e,o,s,l,u,h,this.imagePool,!0);var f=!Pe(a)&&1!==a;f&&(d=t.globalAlpha,t.globalAlpha=a*c),t.fillText(n,r,i),f&&(t.globalAlpha=d)}},{key:"strokeText",value:function(t,e,n,r,i,o,s,a,c,l){var u;tb(t,e,o,a,c,l,this.imagePool,!0);var h=!Pe(s)&&1!==s;h&&(u=t.globalAlpha,t.globalAlpha=s),t.strokeText(n,r,i),h&&(t.globalAlpha=u)}},{key:"drawToContext",value:function(t,e,n,r,i){this.render(t,e.parsedStyle,e,e.ownerDocument.defaultView.context,r,i)}}])}(Zm),ob=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,e),t=S(this,e),t.name="canvas-renderer",t.options=n,t}return O(e,t),f(e,[{key:"init",value:function(){var t,e=u({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),n=this.context.imagePool,r=new Zm(n),i=(t={},c(c(c(c(c(c(c(c(c(c(t,zr.CIRCLE,r),zr.ELLIPSE,r),zr.RECT,r),zr.IMAGE,new rb(n)),zr.TEXT,new ib(n)),zr.LINE,r),zr.POLYLINE,r),zr.POLYGON,r),zr.PATH,r),zr.GROUP,void 0),c(c(c(t,zr.HTML,void 0),zr.MESH,void 0),zr.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=i,this.context.styleRendererFactory=i,this.addRenderingPlugin(new Vm(e))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(Vr),sb=function(){function t(){h(this,t)}return f(t,[{key:"apply",value:function(e,n){var r=this,i=e.renderingService,o=e.renderingContext,s=e.config;this.context=e;var a=o.root.ownerDocument.defaultView,c=function(t){i.hooks.pointerMove.call(t)},l=function(t){i.hooks.pointerUp.call(t)},u=function(t){i.hooks.pointerDown.call(t)},h=function(t){i.hooks.pointerOver.call(t)},d=function(t){i.hooks.pointerOut.call(t)},f=function(t){i.hooks.pointerCancel.call(t)},p=function(t){i.hooks.pointerWheel.call(t)},g=function(t){i.hooks.click.call(t)},v=function(t){n.globalThis.document.addEventListener("pointermove",c,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("pointerleave",d,!0),t.addEventListener("pointerover",h,!0),n.globalThis.addEventListener("pointerup",l,!0),n.globalThis.addEventListener("pointercancel",f,!0)},y=function(t){t.addEventListener("touchstart",u,!0),t.addEventListener("touchend",l,!0),t.addEventListener("touchmove",c,!0),t.addEventListener("touchcancel",f,!0)},m=function(t){n.globalThis.document.addEventListener("mousemove",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("mouseout",d,!0),t.addEventListener("mouseover",h,!0),n.globalThis.addEventListener("mouseup",l,!0)},b=function(t){n.globalThis.document.removeEventListener("pointermove",c,!0),t.removeEventListener("pointerdown",u,!0),t.removeEventListener("pointerleave",d,!0),t.removeEventListener("pointerover",h,!0),n.globalThis.removeEventListener("pointerup",l,!0),n.globalThis.removeEventListener("pointercancel",f,!0)},x=function(t){t.removeEventListener("touchstart",u,!0),t.removeEventListener("touchend",l,!0),t.removeEventListener("touchmove",c,!0),t.removeEventListener("touchcancel",f,!0)},w=function(t){n.globalThis.document.removeEventListener("mousemove",c,!0),t.removeEventListener("mousedown",u,!0),t.removeEventListener("mouseout",d,!0),t.removeEventListener("mouseover",h,!0),n.globalThis.removeEventListener("mouseup",l,!0)};i.hooks.init.tap(t.tag,(function(){var t=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="none",t.style.msTouchAction="none"):a.supportsPointerEvents&&(t.style.touchAction="none"),a.supportsPointerEvents?v(t):m(t),a.supportsTouchEvents&&y(t),s.useNativeClickEvent&&t.addEventListener("click",g,!0),t.addEventListener("wheel",p,{passive:!0,capture:!0})})),i.hooks.destroy.tap(t.tag,(function(){var t=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="",t.style.msTouchAction=""):a.supportsPointerEvents&&(t.style.touchAction=""),a.supportsPointerEvents?b(t):w(t),a.supportsTouchEvents&&x(t),s.useNativeClickEvent&&t.removeEventListener("click",g,!0),t.removeEventListener("wheel",p,!0)}))}}])}();sb.tag="DOMInteraction";var ab=function(t){function e(){var t;h(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=S(this,e,[].concat(r)),t.name="dom-interaction",t}return O(e,t),f(e,[{key:"init",value:function(){this.addRenderingPlugin(new sb)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Vr),cb="g-canvas-camera",lb=function(){function t(){h(this,t),this.displayObjectHTMLElementMap=new WeakMap}return f(t,[{key:"joinTransformMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return"matrix(".concat([t[0],t[1],t[4],t[5],t[12]+e[0],t[13]+e[1]].join(","),")")}},{key:"apply",value:function(e,n){var r=this,i=e.camera,o=e.renderingContext,s=e.renderingService;this.context=e;var a=o.root.ownerDocument.defaultView,c=a.context.eventService.nativeHTMLMap,l=function(t,e){e.style.transform=r.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())},u=function(t){var e=t.target;if(e.nodeName===zr.HTML){r.$camera||(r.$camera=r.createCamera(i));var n=r.getOrCreateEl(e);r.$camera.appendChild(n),Object.keys(e.attributes).forEach((function(t){r.updateAttribute(t,e)})),l(e,n),c.set(n,e)}},h=function(t){var e=t.target;if(e.nodeName===zr.HTML&&r.$camera){var n=r.getOrCreateEl(e);n&&(n.remove(),c["delete"](n))}},d=function(t){var e=t.target;if(e.nodeName===zr.HTML){var n=t.attrName;r.updateAttribute(n,e)}},f=function(t){var e=t.target,n=e.nodeName===zr.FRAGMENT?e.childNodes:[e];n.forEach((function(t){if(t.nodeName===zr.HTML){var e=r.getOrCreateEl(t);l(t,e)}}))},p=function(){if(r.$camera){var t=r.context.config,e=t.width,n=t.height;r.$camera.parentElement.style.width="".concat(e||0,"px"),r.$camera.parentElement.style.height="".concat(n||0,"px")}};s.hooks.init.tap(t.tag,(function(){a.addEventListener(rh.RESIZE,p),a.addEventListener(_l.MOUNTED,u),a.addEventListener(_l.UNMOUNTED,h),a.addEventListener(_l.ATTR_MODIFIED,d),a.addEventListener(_l.BOUNDS_CHANGED,f)})),s.hooks.endFrame.tap(t.tag,(function(){r.$camera&&o.renderReasons.has(Al.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))})),s.hooks.destroy.tap(t.tag,(function(){r.$camera&&r.$camera.remove(),a.removeEventListener(rh.RESIZE,p),a.removeEventListener(_l.MOUNTED,u),a.removeEventListener(_l.UNMOUNTED,h),a.removeEventListener(_l.ATTR_MODIFIED,d),a.removeEventListener(_l.BOUNDS_CHANGED,f)}))}},{key:"createCamera",value:function(t){var e=this.context.config,n=e.document,r=e.width,i=e.height,o=this.context.contextService.getDomElement(),s=o.parentNode;if(s){var a=cb,c=s.querySelector("#".concat(a));if(!c){var l=(n||document).createElement("div");l.style.overflow="hidden",l.style.pointerEvents="none",l.style.position="absolute",l.style.left="0px",l.style.top="0px",l.style.width="".concat(r||0,"px"),l.style.height="".concat(i||0,"px");var u=(n||document).createElement("div");c=u,u.id=a,u.style.position="absolute",u.style.left="".concat(o.offsetLeft||0,"px"),u.style.top="".concat(o.offsetTop||0,"px"),u.style.transformOrigin="left top",u.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),u.style.pointerEvents="none",u.style.width="100%",u.style.height="100%",l.appendChild(u),s.appendChild(l)}return c}return null}},{key:"getOrCreateEl",value:function(t){var e=this.context.config.document,n=this.displayObjectHTMLElementMap.get(t);return n||(n=(e||document).createElement("div"),t.parsedStyle.$el=n,this.displayObjectHTMLElementMap.set(t,n),t.id&&(n.id=t.id),t.name&&n.setAttribute("name",t.name),t.className&&(n.className=t.className),n.style.position="absolute",n.style["will-change"]="transform",n.style.transform=this.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())),n}},{key:"updateAttribute",value:function(t,e){var n=this.getOrCreateEl(e);switch(t){case"innerHTML":var r=e.parsedStyle.innerHTML;Re(r)?n.innerHTML=r:(n.innerHTML="",n.appendChild(r));break;case"x":n.style.left="".concat(e.parsedStyle.x,"px");break;case"y":n.style.top="".concat(e.parsedStyle.y,"px");break;case"transformOrigin":var i=e.parsedStyle.transformOrigin;n.style["transform-origin"]="".concat(i[0].buildCSSText(null,null,"")," ").concat(i[1].buildCSSText(null,null,""));break;case"width":var o=e.parsedStyle.width;n.style.width=Ae(o)?"".concat(o,"px"):o.toString();break;case"height":var s=e.parsedStyle.height;n.style.height=Ae(s)?"".concat(s,"px"):s.toString();break;case"zIndex":var a=e.parsedStyle.zIndex;n.style["z-index"]="".concat(a);break;case"visibility":var c=e.parsedStyle.visibility;n.style.visibility=c;break;case"pointerEvents":var l=e.parsedStyle.pointerEvents,u=void 0===l?"auto":l;n.style.pointerEvents=u;break;case"opacity":var h=e.parsedStyle.opacity;n.style.opacity="".concat(h);break;case"fill":var d=e.parsedStyle.fill,f="";Ms(d)?f=d.isNone?"transparent":e.getAttribute("fill"):Array.isArray(d)?f=e.getAttribute("fill"):Ss(d),n.style.background=f;break;case"stroke":var p=e.parsedStyle.stroke,g="";Ms(p)?g=p.isNone?"transparent":e.getAttribute("stroke"):Array.isArray(p)?g=e.getAttribute("stroke"):Ss(p),n.style["border-color"]=g,n.style["border-style"]="solid";break;case"lineWidth":var v=e.parsedStyle.lineWidth;n.style["border-width"]="".concat(v||0,"px");break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":var y=e.style.filter;n.style.filter=y;break;default:Pe(e.style[t])||""===e.style[t]||(n.style[t]=e.style[t])}}}])}();lb.tag="HTMLRendering";var ub=function(t){function e(){var t;h(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=S(this,e,[].concat(r)),t.name="html-renderer",t}return O(e,t),f(e,[{key:"init",value:function(){this.addRenderingPlugin(new lb)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Vr),hb=function(){function t(e){h(this,t),this.renderingContext=e.renderingContext,this.canvasConfig=e.config}return f(t,[{key:"init",value:function(){var t=this.canvasConfig,e=t.container,n=t.canvas;if(n)this.$canvas=n,e&&n.parentElement!==e&&e.appendChild(n),this.$container=n.parentElement,this.canvasConfig.container=this.$container;else if(e&&(this.$container=Re(e)?document.getElementById(e):e,this.$container)){var r=document.createElement("canvas");this.$container.appendChild(r),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=r}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(t,e){var n=this.canvasConfig.devicePixelRatio;this.dpr=n,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*e,mc(this.$canvas,t,e)),this.renderingContext.renderReasons.add(Al.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)}},{key:"toDataURL",value:function(){var t=Lr(Rr().mark((function t(){var e,n,r,i=arguments;return Rr().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},n=e.type,r=e.encoderOptions,t.abrupt("return",this.context.canvas.toDataURL(n,r));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}])}(),db=function(t){function e(){var t;h(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=S(this,e,[].concat(r)),t.name="canvas-context-register",t}return O(e,t),f(e,[{key:"init",value:function(){this.context.ContextService=hb}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(Vr),fb=function(t){function e(t){var n;return h(this,e),n=S(this,e,[t]),n.registerPlugin(new db),n.registerPlugin(new zm),n.registerPlugin(new tm),n.registerPlugin(new ob),n.registerPlugin(new ab),n.registerPlugin(new Tm),n.registerPlugin(new ub),n}return O(e,t),f(e)}(Wr);function pb(t,e){var n;if(t)if(kn(t)){for(var r=0,i=t.length;r<i;r++)if(n=e(t[r],r),!1===n)break}else if(rr(t))for(var o in t)if(t.hasOwnProperty(o)&&(n=e(t[o],o),!1===n))break}var gb=pb,vb=Object.prototype.hasOwnProperty,yb=function(t,e){if(null===t||!Eg(t))return{};var n={};return gb(e,(function(e){vb.call(t,e)&&(n[e]=t[e])})),n},mb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class bb extends Ly{constructor(t){super(Object.assign(Object.assign({},t),{style:Object.assign({},bb.defaultStyleProps,t.style)})),this.rootPointerEvent=new wl(null),this.forwardEvents=t=>{const e=this.context.canvas,n=e.context.renderingContext.root.ownerDocument.defaultView,r=this.normalizeToPointerEvent(t,n);r.forEach((r=>{const i=this.bootstrapEvent(this.rootPointerEvent,r,n,t);Lv(e.context.eventService,"mappingTable.pointerupoutside",[]),e.context.eventService.mapEvent(i)}))}}get eventService(){return this.context.canvas.context.eventService}get events(){return[ef.CLICK,ef.POINTER_DOWN,ef.POINTER_MOVE,ef.POINTER_UP,ef.POINTER_OVER,ef.POINTER_LEAVE]}getDomElement(){return this.getShape("key").getDomElement()}render(t=this.parsedAttributes,e=this){this.drawKeyShape(t,e),this.drawPortShapes(t,e)}getKeyStyle(t){const e=yb(t,["dx","dy","innerHTML","pointerEvents","cursor"]),{dx:n=0,dy:r=0}=e,i=mb(e,["dx","dy"]),[o,s]=this.getSize(t);return Object.assign(Object.assign({x:n,y:r},i),{width:o,height:s})}drawKeyShape(t,e){const n=this.getKeyStyle(t),{x:r,y:i,width:o=0,height:s=0}=n,a=this.upsert("key-container",Yu,{x:r,y:i,width:o,height:s,opacity:0},e);return this.upsert("key",ju,n,a)}connectedCallback(){const t=this.context.canvas.getRenderer("main"),e=t instanceof fb;if(!e)return;const n=this.getDomElement();this.events.forEach((t=>{n.addEventListener(t,this.forwardEvents)}))}attributeChangedCallback(t,e,n){"zIndex"===t&&e!==n&&(this.getDomElement().style.zIndex=n)}destroy(){const t=this.getDomElement();this.events.forEach((e=>{t.removeEventListener(e,this.forwardEvents)})),super.destroy()}normalizeToPointerEvent(t,e){const n=[];if(e.isTouchEvent(t))for(let r=0;r<t.changedTouches.length;r++){const e=t.changedTouches[r];Kn(e.button)&&(e.button=0),Kn(e.buttons)&&(e.buttons=1),Kn(e.isPrimary)&&(e.isPrimary=1===t.touches.length&&"touchstart"===t.type),Kn(e.width)&&(e.width=e.radiusX||1),Kn(e.height)&&(e.height=e.radiusY||1),Kn(e.tiltX)&&(e.tiltX=0),Kn(e.tiltY)&&(e.tiltY=0),Kn(e.pointerType)&&(e.pointerType="touch"),Kn(e.pointerId)&&(e.pointerId=e.identifier||0),Kn(e.pressure)&&(e.pressure=e.force||.5),Kn(e.twist)&&(e.twist=0),Kn(e.tangentialPressure)&&(e.tangentialPressure=0),e.isNormalized=!0,e.type=t.type,n.push(e)}else if(e.isMouseEvent(t)){const e=t;Kn(e.isPrimary)&&(e.isPrimary=!0),Kn(e.width)&&(e.width=1),Kn(e.height)&&(e.height=1),Kn(e.tiltX)&&(e.tiltX=0),Kn(e.tiltY)&&(e.tiltY=0),Kn(e.pointerType)&&(e.pointerType="mouse"),Kn(e.pointerId)&&(e.pointerId=1),Kn(e.pressure)&&(e.pressure=.5),Kn(e.twist)&&(e.twist=0),Kn(e.tangentialPressure)&&(e.tangentialPressure=0),e.isNormalized=!0,n.push(e)}else n.push(t);return n}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null}bootstrapEvent(t,e,n,r){t.view=n,t.originalEvent=null,t.nativeEvent=r,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);const{x:i,y:o}=this.getViewportXY(e);t.viewport.x=i,t.viewport.y=o;const[s,a]=this.context.canvas.getCanvasByViewport([i,o]);return t.canvas.x=s,t.canvas.y=a,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=r.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t}getViewportXY(t){let e,n;const{offsetX:r,offsetY:i,clientX:o,clientY:s}=t;if(Pe(r)||Pe(i)){const t=this.eventService.client2Viewport({x:o,y:s});e=t.x,n=t.y}else e=r,n=i;return{x:e,y:n}}onframe(){super.onframe();const{opacity:t}=this.attributes;this.getDomElement().style.opacity=`${t}`}}bb.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};var xb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class wb extends Ly{constructor(t){super($v({style:wb.defaultStyleProps},t))}getKeyStyle(t){const[e,n]=this.getSize(t),r=super.getKeyStyle(t),{fillOpacity:i,opacity:o=i}=r,s=xb(r,["fillOpacity","opacity"]);return Object.assign(Object.assign({opacity:o},s),{width:e,height:n,x:-e/2,y:-n/2})}getBounds(){return this.getShape("key").getBounds()}getHaloStyle(t){if(!1===t.halo)return!1;const e=this.getShape("key").attributes,{fill:n,stroke:r}=e,i=(xb(e,["fill","stroke"]),zv(this.getGraphicStyle(t),"halo")),o=Number(i.lineWidth),[s,a]=Ag(this.getSize(t),[o,o]),{lineWidth:c}=i,l={fill:"transparent",lineWidth:c/2,width:s-c/2,height:a-c/2,x:-(s-c/2)/2,y:-(a-c/2)/2};return Object.assign(Object.assign({},i),l)}getIconStyle(t){const e=super.getIconStyle(t),[n,r]=this.getSize(t);return!!e&&Object.assign({width:n*kv,height:r*kv},e)}drawKeyShape(t,e){const n=this.upsert("key",Oy,this.getKeyStyle(t),e);return Ay(this),n}drawHaloShape(t,e){this.upsert("halo",Yu,this.getHaloStyle(t),e)}update(t){super.update(t),t&&("x"in t||"y"in t||"z"in t)&&Cy(this)}}wb.defaultStyleProps={size:32};class Eb extends Ly{constructor(t){super(t)}getKeyStyle(t){const[e,n]=this.getSize(t);return Object.assign(Object.assign({},super.getKeyStyle(t)),{width:e,height:n,x:-e/2,y:-n/2})}getIconStyle(t){const e=super.getIconStyle(t),{width:n,height:r}=this.getShape("key").attributes;return!!e&&Object.assign({width:n*kv,height:r*kv},e)}drawKeyShape(t,e){return this.upsert("key",Yu,this.getKeyStyle(t),e)}}class kb extends jy{constructor(t){super(t)}getInnerR(t){return t.innerR||3*this.getOuterR(t)/8}getOuterR(t){return Math.min(...this.getSize(t))/2}getPoints(t){return ow(this.getOuterR(t),this.getInnerR(t))}getIconStyle(t){const e=super.getIconStyle(t),n=2*this.getInnerR(t)*kv;return!!e&&Object.assign({width:n,height:n},e)}getPortXY(t,e){const{placement:n="top"}=e,r=this.getShape("key").getLocalBounds(),i=sw(this.getOuterR(t),this.getInnerR(t));return qx(r,n,i,!1)}}class Sb extends jy{constructor(t){super($v({style:Sb.defaultStyleProps},t))}getPoints(t){const{direction:e}=t,[n,r]=this.getSize(t);return aw(n,r,e)}getPortXY(t,e){const{direction:n}=t,{placement:r="top"}=e,i=this.getShape("key").getLocalBounds(),[o,s]=this.getSize(t),a=cw(o,s,n);return qx(i,r,a,!1)}getIconStyle(t){const{icon:e,iconText:n,iconSrc:r,direction:i}=t;if(!1===e||ly(n||r))return!1;const o=zv(this.getGraphicStyle(t),"icon"),s=this.getShape("key").getLocalBounds(),[a,c]=ap(s,i),l=2*cp(s,i)*kv;return Object.assign({x:a,y:c,width:l,height:l},o)}}Sb.defaultStyleProps={size:40,direction:"up"};var Mb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class Ob extends Ly{constructor(t){super($v({style:Ob.defaultStyleProps},t)),this.type="combo",this.updateComboPosition(this.parsedAttributes)}getKeySize(t){const{collapsed:e,childrenNode:n=[]}=t;return 0===n.length?this.getEmptyKeySize(t):e?this.getCollapsedKeySize(t):this.getExpandedKeySize(t)}getEmptyKeySize(t){const{padding:e,collapsedSize:n}=t,[r,i,o,s]=Hf(e);return Ag(Wv(n),[s+i,r+o,0])}getCollapsedKeySize(t){return Wv(t.collapsedSize)}getExpandedKeySize(t){const e=this.getContentBBox(t);return[Yf(e),qf(e),0]}getContentBBox(t){const{childrenNode:e=[],padding:n}=t,r=e.map((t=>this.context.element.getElement(t))).filter(Boolean);if(0===r.length){const e=new Kr,{x:n=0,y:r=0,size:i}=t,[o,s]=Wv(i);return e.setMinMax([n-o/2,r-s/2,0],[n+o/2,r+s/2,0]),e}const i=Qf(r.map((t=>t.getBounds())));return n?Jf(i,n):i}drawCollapsedMarkerShape(t,e){const n=this.getCollapsedMarkerStyle(t);this.upsert("collapsed-marker",Py,n,e),Ay(this)}getCollapsedMarkerStyle(t){if(!t.collapsed||!t.collapsedMarker)return!1;const e=zv(this.getGraphicStyle(t),"collapsedMarker"),{type:n}=e,r=Mb(e,["type"]),i=this.getShape("key"),[o,s]=Zg(i.getLocalBounds(),"center"),a=Object.assign(Object.assign({},r),{x:o,y:s});if(n){const e=this.getCollapsedMarkerText(n,t);Object.assign(a,{text:e})}return a}getCollapsedMarkerText(t,e){const{childrenData:n=[]}=e,{model:r}=this.context;return"descendant-count"===t?r.getDescendantsData(this.id).length.toString():"child-count"===t?n.length.toString():"node-count"===t?r.getDescendantsData(this.id).filter((t=>"node"===r.getElementType(rg(t)))).length.toString():nr(t)?t(n):""}getComboPosition(t){const{x:e=0,y:n=0,collapsed:r,childrenData:i=[]}=t;if(0===i.length)return[+e,+n,0];if(r){const{model:t}=this.context,r=t.getDescendantsData(this.id).filter((e=>!t.isCombo(rg(e))));if(r.length>0&&r.some(Xg)){const t=r.reduce(((t,e)=>Ag(t,qg(e))),[0,0,0]);return Rg(t,r.length)}return[+e,+n,0]}return this.getContentBBox(t).center}getComboStyle(t){const[e,n]=this.getComboPosition(t);return{x:e,y:n,transform:[["translate",e,n]]}}updateComboPosition(t){const e=this.getComboStyle(t);Object.assign(this.style,e);const{x:n,y:r}=e;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:n,y:r}}),Cy(this)}render(t,e=this){super.render(t,e),this.drawCollapsedMarkerShape(t,e)}update(t={}){super.update(t),this.updateComboPosition(this.parsedAttributes)}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}animate(t,e){const n=super.animate(this.attributes.collapsed?t:t.map((t=>{var{x:e,y:n,z:r,transform:i}=t,o=Mb(t,["x","y","z","transform"]);return o})),e);return n?new Proxy(n,{set:(t,e,n)=>("currentTime"===e&&Promise.resolve().then((()=>this.onframe())),Reflect.set(t,e,n))}):n}}Ob.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};class Nb extends Ob{constructor(t){super(t)}drawKeyShape(t,e){return this.upsert("key",Cu,this.getKeyStyle(t),e)}getKeyStyle(t){const{collapsed:e}=t,n=super.getKeyStyle(t),[r]=this.getKeySize(t);return Object.assign(Object.assign(Object.assign({},n),e&&zv(n,"collapsed")),{r:r/2})}getCollapsedKeySize(t){const[e,n]=Wv(t.collapsedSize),r=Math.max(e,n)/2;return[2*r,2*r,0]}getExpandedKeySize(t){const e=this.getContentBBox(t),[n,r]=Xf(e),i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2))/2;return[2*i,2*i,0]}getIntersectPoint(t,e=!1){const n=this.getShape("key").getBounds();return uv(t,n,e)}}class Tb extends Ob{constructor(t){super(t)}drawKeyShape(t,e){return this.upsert("key",Yu,this.getKeyStyle(t),e)}getKeyStyle(t){const e=super.getKeyStyle(t),[n,r]=this.getKeySize(t);return Object.assign(Object.assign(Object.assign({},e),t.collapsed&&zv(e,"collapsed")),{width:n,height:r,x:-n/2,y:-r/2})}}var Ab=function(t,e){if(!$d(t))return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];e(i,r)&&n.push(i)}return n},Cb=Ab,Pb=function(t,e){return!!$d(t)&&t.indexOf(e)>-1},Rb=Pb,_b=function(t,e){return void 0===e&&(e=[]),Cb(t,(function(t){return!Rb(e,t)}))},Lb=_b;const Db={padding:10};function Ib(t,e,n,r,i,o){const{padding:s}=Object.assign(Db,o),a=Kf(n,s),c=Kf(r,s),l=[t,...i,e];let u=null;const h=[];for(let d=0,f=l.length;d<f-1;d++){const t=d+1,e=l[d],n=l[t],r=iv(e,n);let i=null;if(0===d)if(t===f-1)if(a.intersects(c))i=Hb(e,n,a,c);else if(ip(e,a)||ip(n,c))r||(i=Ub(e,n,a,c));else{const t=sp(e,a),r=sp(n,c);i=Gb(t,r,Bb(t,r)),i.points.unshift(t),i.points.push(r)}else ep(n,a)?i=Hb(e,n,a,Kf(n,s),u):r||(i=Vb(e,n,a));else t===f-1?ep(e,c)?i=Hb(e,n,Kf(e,s),c,u):r||(i=Wb(e,n,c,u)):r||(i=Gb(e,n,u));i?(h.push(...i.points),u=i.direction):u=Bb(e,n),t<f-1&&h.push(n)}return h.map(Vg)}const jb={N:"S",S:"N",W:"E",E:"W"},Fb={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function Bb(t,e){const[n,r]=t,[i,o]=e;return n===i?r>o?"N":"S":r===o?n>i?"W":"E":null}function zb(t,e){return"N"===e||"S"===e?qf(t):Yf(t)}function Gb(t,e,n){const r=[t[0],e[1]],i=[e[0],t[1]],o=Bb(t,r),s=Bb(t,i),a=n?jb[n]:null,c=o===n||o!==a&&s!==n?r:i;return{points:[c],direction:Bb(c,e)}}function Vb(t,e,n){if(ip(t,n)){const r=$b(t,e,n);return{points:[r],direction:Bb(r,e)}}{const r=sp(t,n),i=["left","right"].includes(op(t,n)),o=i?[e[0],r[1]]:[r[0],e[1]];return{points:[o],direction:Bb(o,e)}}}function Wb(t,e,n,r){const i=ip(e,n)?e:sp(e,n),o=[[i[0],t[1]],[t[0],i[1]]],s=o.filter((t=>rp(t,n)&&!np(t,n,!0))),a=s.filter((e=>Bb(e,t)!==r));if(a.length>0){const n=a.find((e=>Bb(t,e)===r))||a[0];return{points:[n],direction:Bb(n,e)}}{const i=Lb(o,s)[0],a=ev(e,i,zb(n,r)/2),c=$b(a,t,n);return{points:[c,a],direction:Bb(a,e)}}}function Ub(t,e,n,r){let i=Vb(t,e,n);const o=Wg(i.points[0]);if(ep(o,r)){i=Vb(e,t,r);const s=Wg(i.points[0]);if(ep(s,n)){const a=ev(t,o,zb(n,Bb(t,o))/2),c=ev(e,s,zb(r,Bb(e,s))/2),l=[(a[0]+c[0])/2,(a[1]+c[1])/2],u=Vb(t,l,n),h=Wb(l,e,r,u.direction);i.points=[u.points[0],h.points[0]],i.direction=h.direction}}return i}function Hb(t,e,n,r,i){const o=.01,s=Qf([n,r]),a=Ig(e,s.center)>Ig(t,s.center),[c,l]=a?[e,t]:[t,e],u=qf(s)+Yf(s);let h;if(i){const t=[c[0]+u*Math.cos(Fb[i]),c[1]+u*Math.sin(Fb[i])];h=ev(sp(t,s),t,o)}else h=ev(sp(c,s),c,-o);let d=$b(h,l,s),f=[tv(h,2),tv(d,2)];if(qd(tv(h),tv(d))){const t=Bg(Cg(h,c),[1,0,0])+Math.PI/2;d=[l[0]+u*Math.cos(t),l[1]+u*Math.sin(t),0],d=tv(ev(sp(d,s),l,-o),2);const e=$b(h,d,s);f=[h,e,d]}return{points:a?f.reverse():f,direction:Bb(a?h:d,e)}}function $b(t,e,n){let r=[t[0],e[1]];return ep(r,n)&&(r=[e[0],t[1]]),r}function Yb(t,e,n,r,i){const o=0,s=.5,a=.99;let c="number"===typeof e?e:s;"start"===e&&(c=o),"end"===e&&(c=a);const l=Jg(t.getPoint(c)),u=Jg(t.getPoint(c+.01));let h="start"===e?"left":"end"===e?"right":"center";if(nv(l,u)||!n){const[e,n]=Xb(t,c,r,i);return{transform:[["translate",e,n]],textAlign:h}}let d=Math.atan2(u[1]-l[1],u[0]-l[0]);const f=u[0]<l[0];f&&(h="center"===h?h:"left"===h?"right":"left",r*=-1,d+=Math.PI);const[p,g]=Xb(t,c,r,i,d),v=[["translate",p,g],["rotate",d/Math.PI*180]];return{textAlign:h,transform:v}}function qb(t,e,n,r,i){var o,s;const a=2*(null===(o=t.badge)||void 0===o?void 0:o.getGeometryBounds().halfExtents[0])||0,c=2*(null===(s=t.label)||void 0===s?void 0:s.getGeometryBounds().halfExtents[0])||0;return Yb(t.key,n,!0,(c?(c/2+a/2)*("suffix"===e?1:-1):0)+r,i)}function Xb(t,e,n,r,i){const[o,s]=Jg(t.getPoint(e));let a=n,c=r;return i&&(a=n*Math.cos(i)-r*Math.sin(i),c=n*Math.sin(i)+r*Math.cos(i)),[o+a,s+c]}function Kb(t,e,n,r){if(qd(t,e))return t;const i=Cg(e,t),o=[t[0]+n*i[0],t[1]+n*i[1]],s=Fg(zg(i,!1));return o[0]+=r*s[0],o[1]+=r*s[1],o}function Zb(t){return Ae(t)?[t,-t]:t}function Jb(t){return Ae(t)?[t,1-t]:t}function Qb(t,e,n){return[["M",t[0],t[1]],["Q",n[0],n[1],e[0],e[1]]]}function tx(t,e,n){return[["M",t[0],t[1]],["C",n[0][0],n[0][1],n[1][0],n[1][1],e[0],e[1]]]}function ex(t,e=0,n=!1){const r=t.length-1,i=t[0],o=t[r],s=t.slice(1,r),a=[["M",i[0],i[1]]];return s.forEach(((t,n)=>{const r=s[n-1]||i,c=s[n+1]||o;if(!ov(r,t,c)&&e){const[n,i]=nx(r,t,c,e);a.push(["L",n[0],n[1]],["Q",t[0],t[1],i[0],i[1]],["L",i[0],i[1]])}else a.push(["L",t[0],t[1]])})),a.push(["L",o[0],o[1]]),n&&a.push(["Z"]),a}function nx(t,e,n,r){const i=jg(t,e),o=jg(n,e),s=Math.min(r,Math.min(i,o)/2),a=[e[0]-s/i*(e[0]-t[0]),e[1]-s/i*(e[1]-t[1])],c=[e[0]-s/o*(e[0]-n[0]),e[1]-s/o*(e[1]-n[1])];return[a,c]}const rx=t=>{const e=Math.PI/2,n=qf(t)/2,r=Yf(t)/2,i=Math.atan2(n,r)/2,o=Math.atan2(r,n)/2;return{top:[-e-o,-e+o],"top-right":[-e+o,-i],"right-top":[-e+o,-i],right:[-i,i],"bottom-right":[i,e-o],"right-bottom":[i,e-o],bottom:[e-o,e+o],"bottom-left":[e+o,Math.PI-i],"left-bottom":[e+o,Math.PI-i],left:[Math.PI-i,Math.PI+i],"top-left":[Math.PI+i,-e-o],"left-top":[Math.PI+i,-e-o]}};function ix(t,e,n,r,i){const o=Kf(t),s=t.getCenter();let a=r&&Zx(r),c=i&&Zx(i);if(!a||!c){const r=rx(o),i=r[e][0],l=r[e][1],[u,h]=Xf(o),d=Math.max(u,h),f=Ag(s,[d*Math.cos(i),d*Math.sin(i),0]),p=Ag(s,[d*Math.cos(l),d*Math.sin(l),0]);a=rw(t,f),c=rw(t,p),n||([a,c]=[c,a])}return[a,c]}function ox(t,e,n,r,i,o){const s=t.getPorts()[i||o],a=t.getPorts()[o||i];let[c,l]=ix(t,e,n,s,a);const u=sx(t,c,l,r);return s&&(c=nw(s,u[0])),a&&(l=nw(a,u.at(-1))),tx(c,l,u)}function sx(t,e,n,r){const i=t.getCenter();if(qd(e,n)){const t=Cg(e,i),o=[r*Math.sign(t[0])||r/2,r*Math.sign(t[1])||-r/2,0];return[Ag(e,o),Ag(n,Pg(o,[1,-1,1]))]}return[ev(i,e,Ig(i,e)+r),ev(i,n,Ig(i,n)+r)]}function ax(t,e,n,r,i,o,s){const a=Xx(t),c=a[o||s],l=a[s||o];let[u,h]=ix(t,n,r,c,l);const d=cx(t,u,h,i);return c&&(u=nw(c,d[0])),l&&(h=nw(l,d.at(-1))),ex([u,...d,h],e)}function cx(t,e,n,r){const i=[],o=Kf(t);if(qd(e,n)){const t=op(e,o);switch(t){case"left":i.push([e[0]-r,e[1]]),i.push([e[0]-r,e[1]+r]),i.push([e[0],e[1]+r]);break;case"right":i.push([e[0]+r,e[1]]),i.push([e[0]+r,e[1]+r]),i.push([e[0],e[1]+r]);break;case"top":i.push([e[0],e[1]-r]),i.push([e[0]+r,e[1]-r]),i.push([e[0]+r,e[1]]);break;case"bottom":i.push([e[0],e[1]+r]),i.push([e[0]+r,e[1]+r]),i.push([e[0]+r,e[1]]);break}}else{const t=op(e,o),s=op(n,o);if(t===s){const o=t;let s,a;switch(o){case"left":s=Math.min(e[0],n[0])-r,i.push([s,e[1]]),i.push([s,n[1]]);break;case"right":s=Math.max(e[0],n[0])+r,i.push([s,e[1]]),i.push([s,n[1]]);break;case"top":a=Math.min(e[1],n[1])-r,i.push([e[0],a]),i.push([n[0],a]);break;case"bottom":a=Math.max(e[1],n[1])+r,i.push([e[0],a]),i.push([n[0],a]);break}}else{const a=(t,e)=>({left:[e[0]-r,e[1]],right:[e[0]+r,e[1]],top:[e[0],e[1]-r],bottom:[e[0],e[1]+r]}[t]),c=a(t,e),l=a(s,n),u=$b(c,l,o);i.push(c,u,l)}}return i}function lx(t,e){const n=new Set,r=new Set,i=new Set;return t.forEach((o=>{const s=e(o);s.forEach((e=>{n.add(e),t.includes(e.source)&&t.includes(e.target)?r.add(e):i.add(e)}))})),{edges:Array.from(n),internal:Array.from(r),external:Array.from(i)}}function ux(t,e){const n=[];let r=t;while(r){n.push(r);const t=e(rg(r));if(!t)break;r=t}if(n.some((t=>{var e;return null===(e=t.style)||void 0===e?void 0:e.collapsed}))){const t=n.reverse().findIndex(Rv);return n[t]||n.at(-1)}return t}function hx(t,e){return e||(t<4?10:4===t?12:2.5*t)}const dx=(t,e)=>{const n=Math.max(t,e)/2;return[["M",-t/2,0],["A",n,n,0,1,0,2*n-t/2,0],["A",n,n,0,1,0,-t/2,0],["Z"]]},fx=(t,e)=>[["M",-t/2,0],["L",t/2,-e/2],["L",t/2,e/2],["Z"]],px=(t,e)=>[["M",-t/2,0],["L",0,-e/2],["L",t/2,0],["L",0,e/2],["Z"]],gx=(t,e)=>[["M",-t/2,0],["L",t/2,-e/2],["L",4*t/5-t/2,0],["L",t/2,e/2],["Z"]],vx=(t,e)=>[["M",-t/2,-e/2],["L",t/2,-e/2],["L",t/2,e/2],["L",-t/2,e/2],["Z"]],yx=(t,e)=>{const n=t/2,r=t/7,i=t-r;return[["M",-n,0],["L",0,-e/2],["L",0,e/2],["Z"],["M",i-n,-e/2],["L",i+r-n,-e/2],["L",i+r-n,e/2],["L",i-n,e/2],["Z"]]},mx=(t,e)=>[["M",t/2,-e/2],["L",-t/2,0],["L",t/2,0],["L",-t/2,0],["L",t/2,e/2]];var bx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class xx extends Ry{constructor(t){super($v({style:xx.defaultStyleProps},t)),this.type="edge"}get sourceNode(){const{sourceNode:t}=this.parsedAttributes;return this.context.element.getElement(t)}get targetNode(){const{targetNode:t}=this.parsedAttributes;return this.context.element.getElement(t)}getKeyStyle(t){const e=this.getGraphicStyle(t),{loop:n}=e,r=bx(e,["loop"]),{sourceNode:i,targetNode:o}=this,s=n&&$x(i,o)?this.getLoopPath(t):this.getKeyPath(t),a={d:s};return Vu.PARSED_STYLE_LIST.forEach((t=>{t in r&&(a[t]=r[t])})),a}getLoopPath(t){const{sourcePort:e,targetPort:n}=t,r=this.sourceNode,i=Kf(r),o=Math.max(Yf(i),qf(i)),{placement:s,clockwise:a,dist:c=o}=zv(this.getGraphicStyle(t),"loop");return ox(r,s,a,c,e,n)}getEndpoints(t,e=!0,n=[]){const{sourcePort:r,targetPort:i}=t,{sourceNode:o,targetNode:s}=this,[a,c]=Jx(o,s,r,i);if(!e){const t=a?Zx(a):o.getCenter(),e=c?Zx(c):s.getCenter();return[t,e]}const l="function"===typeof n?n():n,u=ew(a||o,l[0]||c||s),h=ew(c||s,l[l.length-1]||a||o);return[u,h]}getHaloStyle(t){if(!1===t.halo)return!1;const e=this.getKeyStyle(t),n=zv(this.getGraphicStyle(t),"halo");return Object.assign(Object.assign({},e),n)}getLabelStyle(t){if(!1===t.label||!t.labelText)return!1;const e=zv(this.getGraphicStyle(t),"label"),{placement:n,offsetX:r,offsetY:i,autoRotate:o,maxWidth:s}=e,a=bx(e,["placement","offsetX","offsetY","autoRotate","maxWidth"]),c=Yb(this.shapeMap.key,n,o,r,i),l=this.shapeMap.key.getLocalBounds(),u=ty([l.min,l.max],s);return Object.assign({wordWrapWidth:u},c,a)}getBadgeStyle(t){if(!1===t.badge||!t.badgeText)return!1;const e=zv(t,"badge"),{offsetX:n,offsetY:r,placement:i}=e,o=bx(e,["offsetX","offsetY","placement"]);return Object.assign(o,qb(this.shapeMap,i,t.labelPlacement,n,r))}drawArrow(t,e){var n;const r="start"===e,i="start"===e?"startArrow":"endArrow",o=t[i],s=this.shapeMap.key;if(o){const e=this.getArrowStyle(t,r),[n,i,o]=r?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],a=s.parsedStyle[n];if(a)a.attr(e);else{const t=e.src?Fu:Vu,r=new t({style:e});s.style[n]=r}s.style[i]=t[o]||e.width/2+ +e.lineWidth}else{const t=r?"markerStart":"markerEnd";null===(n=s.style[t])||void 0===n||n.destroy(),s.style[t]=null}}getArrowStyle(t,e){const n=this.getShape("key").attributes,r=e?"startArrow":"endArrow",o=zv(this.getGraphicStyle(t),r),{size:s,type:a}=o,c=bx(o,["size","type"]),[l,u]=Wv(hx(n.lineWidth,s)),h=nr(a)?a:i[a]||fx,d=h(l,u);return Object.assign(yb(n,["stroke","strokeOpacity","fillOpacity"]),{width:l,height:u},Object.assign({},d&&{d:d,fill:"simple"===a?"":n.stroke}),c)}drawLabelShape(t,e){const n=this.getLabelStyle(t);this.upsert("label",py,n,e)}drawHaloShape(t,e){const n=this.getHaloStyle(t);this.upsert("halo",Vu,n,e)}drawBadgeShape(t,e){const n=this.getBadgeStyle(t);this.upsert("badge",gy,n,e)}drawSourceArrow(t){this.drawArrow(t,"start")}drawTargetArrow(t){this.drawArrow(t,"end")}drawKeyShape(t,e){const n=this.getKeyStyle(t);return this.upsert("key",Vu,n,e)}render(t=this.parsedAttributes,e=this){this.drawKeyShape(t,e),this.getShape("key")&&(this.drawSourceArrow(t),this.drawTargetArrow(t),this.drawLabelShape(t,e),this.drawHaloShape(t,e),this.drawBadgeShape(t,e))}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}animate(t,e){const n=super.animate(t,e);return n?new Proxy(n,{set:(t,e,n)=>("currentTime"===e&&Promise.resolve().then((()=>this.onframe())),Reflect.set(t,e,n))}):n}}xx.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};class wx extends xx{constructor(t){super($v({style:wx.defaultStyleProps},t))}getKeyPath(t){const[e,n]=this.getEndpoints(t),{controlPoints:r,curvePosition:i,curveOffset:o}=t,s=this.getControlPoints(e,n,Jb(i),Zb(o),r);return tx(e,n,s)}getControlPoints(t,e,n,r,i){return 2===(null===i||void 0===i?void 0:i.length)?i:[Kb(t,e,n[0],r[0]),Kb(t,e,n[1],r[1])]}}wx.defaultStyleProps={curvePosition:.5,curveOffset:20};class Ex extends wx{constructor(t){super($v({style:Ex.defaultStyleProps},t))}getControlPoints(t,e,n,r){const i=e[0]-t[0];return[[t[0]+i*n[0]+r[0],t[1]],[e[0]-i*n[1]+r[1],e[1]]]}}Ex.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};class kx extends wx{constructor(t){super($v({style:kx.defaultStyleProps},t))}get ref(){return this.context.model.getRootsData()[0]}getEndpoints(t){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(t);const e=qg(this.ref),n=this.sourceNode.getIntersectPoint(e,!0),r=this.targetNode.getIntersectPoint(e);return[n,r]}toRadialCoordinate(t){const e=qg(this.ref),n=Ig(t,e),r=Ug(Cg(t,e));return[n,r]}getControlPoints(t,e,n,r){const[i,o]=this.toRadialCoordinate(t),[s]=this.toRadialCoordinate(e),a=s-i;return[[t[0]+(a*n[0]+r[0])*Math.cos(o),t[1]+(a*n[0]+r[0])*Math.sin(o)],[e[0]-(a*n[1]-r[0])*Math.cos(o),e[1]-(a*n[1]-r[0])*Math.sin(o)]]}}kx.defaultStyleProps={curvePosition:.5,curveOffset:20};class Sx extends wx{constructor(t){super($v({style:Sx.defaultStyleProps},t))}getControlPoints(t,e,n,r){const i=e[1]-t[1];return[[t[0],t[1]+i*n[0]+r[0]],[e[0],e[1]-i*n[1]+r[1]]]}}Sx.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};class Mx extends xx{constructor(t){super($v({style:Mx.defaultStyleProps},t))}getKeyPath(t){const[e,n]=this.getEndpoints(t);return[["M",e[0],e[1]],["L",n[0],n[1]]]}}Mx.defaultStyleProps={};const Ox={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:jg},Nx=t=>`${Math.round(t[0])}|||${Math.round(t[1])}`;function Tx(t,e){const n=t=>Math.round(t/e);return Ae(t)?n(t):t.map(n)}function Ax(t,e){const n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n}function Cx(t,e){const n=e[0]-t[0],r=e[1]-t[1];return n||r?Math.atan2(r,n):0}function Px(t,e,n,r){const i=Cx(t,e),o=n[Nx(t)],s=o||r,a=Cx(s,t);return Ax(a,i)}const Rx=(t,e)=>{const{offset:n,gridSize:r}=e,i={};return t.forEach((t=>{if(!t||t.destroyed||!t.isVisible())return;const e=Jf(t.getRenderBounds(),n);for(let n=Tx(e.min[0],r);n<=Tx(e.max[0],r);n+=1)for(let t=Tx(e.min[1],r);t<=Tx(e.max[1],r);t+=1)i[`${n}|||${t}`]=!0})),i};function _x(t,e,n){return Math.min(...e.map((e=>n(t,e))))}function Lx(t,e,n){let r=t[0],i=n(t[0],e);for(let o=0;o<t.length;o++){const s=t[o],a=n(s,e);a<i&&(r=s,i=a)}return r}const Dx=(t,e,n,r)=>{if(!e)return[t];const{directionMap:i,offset:o}=r,s=Jf(e.getRenderBounds(),o),a=Object.keys(i).reduce(((e,r)=>{if(n.includes(r)){const n=i[r],[o,a]=Xf(s),c=[t[0]+n.stepX*o,t[1]+n.stepY*a],l=lp(s);for(let r=0;r<l.length;r++){const n=$g([t,c],l[r]);n&&np(n,s)&&e.push(n)}}return e}),[]);return ep(t,s)||a.push(t),a.map((t=>Tx(t,r.gridSize)))},Ix=(t,e,n,r,i,o,s)=>{const a=[];let c=[o[0]===r[0]?r[0]:t[0]*s,o[1]===r[1]?r[1]:t[1]*s];a.unshift(c);let l=t,u=e[Nx(l)];while(u){const t=u,r=l,i=Px(t,r,e,n);i&&(c=[t[0]===r[0]?c[0]:t[0]*s,t[1]===r[1]?c[1]:t[1]*s],a.unshift(c)),u=e[Nx(t)],l=t}const h=i.map((t=>[t[0]*s,t[1]*s])),d=Lx(h,c,jg);return a.unshift(d),a};function jx(t,e,n,r){const i=Vg(t.getCenter()),o=Vg(e.getCenter()),s=Object.assign(Ox,r),{gridSize:a}=s,c=s.enableObstacleAvoidance?n:[t,e],l=Rx(c,s),u=Tx(i,a),h=Tx(o,a),d=Dx(i,t,s.startDirections,s),f=Dx(o,e,s.endDirections,s);d.forEach((t=>delete l[Nx(t)])),f.forEach((t=>delete l[Nx(t)]));const p={},g={},v={},y={},m={},b=new Fx;for(let S=0;S<d.length;S++){const t=d[S],e=Nx(t);p[e]=t,y[e]=0,m[e]=_x(t,f,s.distFunc),b.add({id:e,value:m[e]})}const x=f.map((t=>Nx(t)));let w,E=s.maximumLoops,k=1/0;for(const[S,M]of Object.entries(p))m[S]<=k&&(k=m[S],w=M);while(Object.keys(p).length>0&&E>0){const t=b.minId(!1);if(!t)break;w=p[t];const e=Nx(w);if(x.includes(e))return Ix(w,v,u,o,d,h,a);delete p[e],b.remove(e),g[e]=!0;for(const n of Object.values(s.directionMap)){const t=Ag(w,[n.stepX,n.stepY]),r=Nx(t);if(g[r])continue;const i=Px(w,t,v,u);if(i>s.maxAllowedDirectionChange)continue;if(l[r])continue;p[r]||(p[r]=t);const o=s.penalties[i],c=s.distFunc(w,t)+(isNaN(o)?a:o),h=y[e]+c,d=y[r];d&&h>=d||(v[r]=w,y[r]=h,m[r]=h+_x(t,f,s.distFunc),b.add({id:r,value:m[r]}))}E-=1}return[]}class Fx{constructor(){this.arr=[],this.map={},this.arr=[],this.map={}}_innerAdd(t,e){let n=0,r=e-1;while(r-n>1){const e=Math.floor((n+r)/2);if(this.arr[e].value>t.value)r=e;else{if(!(this.arr[e].value<t.value))return this.arr.splice(e,0,t),void(this.map[t.id]=!0);n=e}}this.arr.splice(r,0,t),this.map[t.id]=!0}add(t){delete this.map[t.id];const e=this.arr.length;if(!e||this.arr[e-1].value<t.value)return this.arr.push(t),void(this.map[t.id]=!0);this._innerAdd(t,e)}remove(t){this.map[t]&&delete this.map[t]}_clearAndGetMinId(){let t;for(let e=this.arr.length-1;e>=0;e--)this.map[this.arr[e].id]?t=this.arr[e].id:this.arr.splice(e,1);return t}_findFirstId(){while(this.arr.length){const t=this.arr.shift();if(this.map[t.id])return t.id}}minId(t){return t?this._clearAndGetMinId():this._findFirstId()}}class Bx extends xx{constructor(t){super($v({style:Bx.defaultStyleProps},t))}getControlPoints(t){const{router:e}=t,{sourceNode:n,targetNode:r}=this,[i,o]=this.getEndpoints(t,!1);let s=[];if(e)if("shortest-path"===e.type){const a=this.context.element.getNodes();s=jx(n,r,a,e),s.length||(s=Ib(i,o,n,r,t.controlPoints,{padding:e.offset}))}else"orth"===e.type&&(s=Ib(i,o,n,r,t.controlPoints,e));else s=t.controlPoints;return s}getPoints(t){const e=this.getControlPoints(t),[n,r]=this.getEndpoints(t,!0,e);return[n,...e,r]}getKeyPath(t){const e=this.getPoints(t);return ex(e,t.radius)}getLoopPath(t){const{sourcePort:e,targetPort:n,radius:r}=t,i=this.sourceNode,o=Kf(i),s=Math.max(Yf(o),qf(o))/4,{placement:a,clockwise:c,dist:l=s}=zv(this.getGraphicStyle(t),"loop");return ax(i,r,a,c,l,e,n)}}Bx.defaultStyleProps={radius:0,controlPoints:[],router:!1};class zx extends xx{constructor(t){super($v({style:zx.defaultStyleProps},t))}getKeyPath(t){const{curvePosition:e,curveOffset:n}=t,[r,i]=this.getEndpoints(t),o=t.controlPoint||Kb(r,i,e,n);return Qb(r,i,o)}}zx.defaultStyleProps={curvePosition:.5,curveOffset:30};var Gx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Vx(t){return t instanceof Ly&&"node"===t.type}function Wx(t){return t instanceof xx}function Ux(t){return t instanceof Ob}function Hx(t){return Vx(t)||Wx(t)||Ux(t)}function $x(t,e){return!(!t||!e)&&t===e}const Yx={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function qx(t,e,n=Yx,r=!0){const i=[.5,.5],o=Re(e)?_v(n,e.toLocaleLowerCase(),i):e;if(!r&&Re(e))return o;const[s,a]=o||i;return[t.min[0]+Yf(t)*s,t.min[1]+qf(t)*a]}function Xx(t){if(!t)return{};const e=t.getPorts(),n=t.attributes.ports||[];return n.forEach(((n,r)=>{var i;const{key:o,placement:s}=n;Kx(n)&&(e[i=o||r]||(e[i]=Zg(t.getShape("key").getBounds(),s)))})),e}function Kx(t){const{r:e}=t;return!e||0===Number(e)}function Zx(t){return Wf(t)?t:t.getPosition()}function Jx(t,e,n,r){const i=Qx(t,e,n,r),o=Qx(e,t,r,n);return[i,o]}function Qx(t,e,n,r){const i=Xx(t);if(n)return i[n];const o=Object.values(i);if(0===o.length)return;const s=o.map((t=>Zx(t))),a=tw(e,r),[c]=hv(s,a);return o.find((t=>Zx(t)===c))}function tw(t,e){const n=Xx(t);if(e)return[Zx(n[e])];const r=Object.values(n);return r.length>0?r.map((t=>Zx(t))):[t.getCenter()]}function ew(t,e){return Ux(t)||Vx(t)?rw(t,e):nw(t,e)}function nw(t,e){if(!t||!e)return[0,0,0];if(Wf(t))return t;if(t.attributes.linkToCenter)return t.getPosition();const n=Wf(e)?e:Vx(e)?e.getCenter():e.getPosition();return uv(n,t.getBounds())}function rw(t,e){if(!t||!e)return[0,0,0];const n=Wf(e)?e:Vx(e)?e.getCenter():e.getPosition();return t.getIntersectPoint(n)||t.getCenter()}function iw(t,e="bottom",n=0,r=0,i=!1){const o=e.split("-"),[s,a]=Zg(t,e),[c,l]=i?["bottom","top"]:["top","bottom"],u=o.includes("top")?l:o.includes("bottom")?c:"middle",h=o.includes("left")?"right":o.includes("right")?"left":"center";return{transform:[["translate",s+n,a+r]],textBaseline:u,textAlign:h}}function ow(t,e){return[[0,-t],[e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)],[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],[e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],[0,e],[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],[-e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],[-e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)]]}function sw(t,e){const n={};return n["top"]=[0,-t],n["left"]=[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n["left-bottom"]=[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n["bottom"]=[0,e],n["right-bottom"]=[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n["right"]=n["default"]=[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n}function aw(t,e,n){const r=e/2,i=t/2,o={up:[[-i,r],[i,r],[0,-r]],left:[[-i,0],[i,r],[i,-r]],right:[[-i,r],[-i,-r],[i,0]],down:[[-i,-r],[i,-r],[0,r]]};return o[n]||o["up"]}function cw(t,e,n){const r=e/2,i=t/2,o={};return"down"===n?(o["bottom"]=o["default"]=[0,r],o["right"]=[i,-r],o["left"]=[-i,-r]):"left"===n?(o["top"]=[i,-r],o["bottom"]=[i,r],o["left"]=o["default"]=[-i,0]):"right"===n?(o["top"]=[-i,-r],o["bottom"]=[-i,r],o["right"]=o["default"]=[i,0]):(o["left"]=[-i,r],o["top"]=o["default"]=[0,-r],o["right"]=[i,r]),o}function lw(t,e){return[[0,-e/2],[t/2,0],[0,e/2],[-t/2,0]]}function uw(t){return"hidden"!==_v(t,["style","visibility"])}function hw(t,e){const{zIndex:n,transform:r,transformOrigin:i,visibility:o,cursor:s,clipPath:a,component:c}=e,l=Gx(e,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(t.attributes,l),r&&t.setAttribute("transform",r),Ae(n)&&t.setAttribute("zIndex",n),i&&t.setAttribute("transformOrigin",i),o&&t.setAttribute("visibility",o),s&&t.setAttribute("cursor",s),a&&t.setAttribute("clipPath",a),c&&t.setAttribute("component",c)}function dw(t,e){"update"in t?t.update(e):t.attr(e)}function fw(t){return[[0,t],[t*Math.sqrt(3)/2,t/2],[t*Math.sqrt(3)/2,-t/2],[0,-t],[-t*Math.sqrt(3)/2,-t/2],[-t*Math.sqrt(3)/2,t/2]]}function pw(t){Lv(t,"__to_be_destroyed__",!0)}function gw(t){return _v(t,"__to_be_destroyed__",!1)}var vw=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class yw extends bg{constructor(t,e){super(t,Object.assign({},yw.defaultOptions,e)),this.onCollapseExpand=t=>vw(this,void 0,void 0,(function*(){if(!this.validate(t))return;const{target:e}=t;if(!Hx(e))return;const n=e.id,{model:r,graph:i}=this.context,o=r.getElementDataById(n);if(!o)return!1;const{onCollapse:s,onExpand:a,animation:c,align:l}=this.options;Rv(o)?(yield i.expandElement(n,{animation:c,align:l}),null===a||void 0===a||a(n)):(yield i.collapseElement(n,{animation:c,align:l}),null===s||void 0===s||s(n))})),this.bindEvents()}update(t){this.unbindEvents(),super.update(t),this.bindEvents()}bindEvents(){const{graph:t}=this.context,{trigger:e}=this.options;t.on(`node:${e}`,this.onCollapseExpand),t.on(`combo:${e}`,this.onCollapseExpand)}unbindEvents(){const{graph:t}=this.context,{trigger:e}=this.options;t.off(`node:${e}`,this.onCollapseExpand),t.off(`combo:${e}`,this.onCollapseExpand)}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return nr(e)?e(t):!!e}destroy(){this.unbindEvents(),super.destroy()}}yw.defaultOptions={enable:!0,animation:!0,trigger:ef.DBLCLICK,align:!0};n(29314);var mw={},bw=function(t){return t=t||"g",mw[t]?mw[t]+=1:mw[t]=1,t+mw[t]},xw=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};const ww="g6-create-edge-assist-edge-id",Ew="g6-create-edge-assist-node-id";class kw extends bg{constructor(t,e){super(t,Object.assign({},kw.defaultOptions,e)),this.drop=t=>xw(this,void 0,void 0,(function*(){const{targetType:e}=t;["combo","node"].includes(e)&&this.source?yield this.handleCreateEdge(t):yield this.cancelEdge()})),this.handleCreateEdge=t=>xw(this,void 0,void 0,(function*(){var e,n,r;if(!this.validate(t))return;const{graph:i,canvas:o,batch:s,element:a}=this.context,{style:c}=this.options;if(this.source)return this.createEdge(t),void(yield this.cancelEdge());s.startBatch(),o.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([t.target.id])[0];const l=i.getElementData(this.source);i.addNodeData([{id:Ew,style:{visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:null===(e=l.style)||void 0===e?void 0:e.x,y:null===(n=l.style)||void 0===n?void 0:n.y}}]),i.addEdgeData([{id:ww,source:this.source,target:Ew,style:Object.assign({pointerEvents:"none"},c)}]),yield null===(r=a.draw({animation:!1}))||void 0===r?void 0:r.finished})),this.updateAssistEdge=t=>xw(this,void 0,void 0,(function*(){var e;if(!this.source)return;const{model:n,element:r}=this.context;n.translateNodeTo(Ew,[t.canvas.x,t.canvas.y]),yield null===(e=r.draw({animation:!1,silence:!0}))||void 0===e?void 0:e.finished})),this.createEdge=t=>{var e,n;const{graph:r}=this.context,{style:i,onFinish:o,onCreate:s}=this.options,a=null===(e=t.target)||void 0===e?void 0:e.id;if(void 0===a||void 0===this.source)return;const c=null===(n=this.getSelectedNodeIDs([t.target.id]))||void 0===n?void 0:n[0],l=`${this.source}-${c}-${bw()}`,u=s({id:l,source:this.source,target:c,style:i});u&&(r.addEdgeData([u]),o(u))},this.cancelEdge=()=>xw(this,void 0,void 0,(function*(){var t;if(!this.source)return;const{graph:e,element:n,batch:r}=this.context;e.removeNodeData([Ew]),this.source=void 0,yield null===(t=n.draw({animation:!1}))||void 0===t?void 0:t.finished,r.endBatch()})),this.bindEvents()}update(t){super.update(t),this.bindEvents()}bindEvents(){const{graph:t}=this.context,{trigger:e}=this.options;this.unbindEvents(),"click"===e?(t.on(af.CLICK,this.handleCreateEdge),t.on(tf.CLICK,this.handleCreateEdge),t.on(Qd.CLICK,this.cancelEdge),t.on(rf.CLICK,this.cancelEdge)):(t.on(af.DRAG_START,this.handleCreateEdge),t.on(tf.DRAG_START,this.handleCreateEdge),t.on(ef.POINTER_UP,this.drop)),t.on(ef.POINTER_MOVE,this.updateAssistEdge)}getSelectedNodeIDs(t){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map((t=>t.id)).concat(t)))}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return nr(e)?e(t):!!e}unbindEvents(){const{graph:t}=this.context;t.off(af.CLICK,this.handleCreateEdge),t.off(tf.CLICK,this.handleCreateEdge),t.off(Qd.CLICK,this.cancelEdge),t.off(rf.CLICK,this.cancelEdge),t.off(af.DRAG_START,this.handleCreateEdge),t.off(tf.DRAG_START,this.handleCreateEdge),t.off(ef.POINTER_UP,this.drop),t.off(ef.POINTER_MOVE,this.updateAssistEdge)}destroy(){this.unbindEvents(),super.destroy()}}function Sw(t,e,n){var r;return function(){var i=this,o=arguments,s=function(){r=null,n||t.apply(i,o)},a=n&&!r;clearTimeout(r),r=setTimeout(s,e),a&&t.apply(i,o)}}kw.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:t=>t,onFinish:()=>{}};var Mw=Sw,Ow=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class Nw extends bg{constructor(t,e){super(t,Object.assign({},Nw.defaultOptions,e)),this.isDragging=!1,this.onDragStart=t=>{this.validate(t)&&(this.isDragging=!0,this.context.canvas.setCursor("grabbing"))},this.onDrag=t=>{var e,n,r,i;if(!this.isDragging||mv.isPinching)return;const o=null!==(n=null===(e=t.movement)||void 0===e?void 0:e.x)&&void 0!==n?n:t.dx,s=null!==(i=null===(r=t.movement)||void 0===r?void 0:r.y)&&void 0!==i?i:t.dy;0!==(o|s)&&this.translate([o,s],!1)},this.onDragEnd=()=>{var t,e;this.isDragging=!1,this.context.canvas.setCursor(this.defaultCursor),null===(e=(t=this.options).onFinish)||void 0===e||e.call(t)},this.invokeOnFinish=Mw((()=>{var t,e;null===(e=(t=this.options).onFinish)||void 0===e||e.call(t)}),300),this.shortcut=new xv(t.graph),this.bindEvents(),this.defaultCursor=this.context.canvas.getConfig().cursor||"default"}update(t){this.unbindEvents(),super.update(t),this.bindEvents()}bindEvents(){const{trigger:t}=this.options;if(rr(t)){const{up:e=[],down:n=[],left:r=[],right:i=[]}=t;this.shortcut.bind(e,(t=>this.onTranslate([0,1],t))),this.shortcut.bind(n,(t=>this.onTranslate([0,-1],t))),this.shortcut.bind(r,(t=>this.onTranslate([1,0],t))),this.shortcut.bind(i,(t=>this.onTranslate([-1,0],t)))}else{const{graph:t}=this.context;t.on(ef.DRAG_START,this.onDragStart),t.on(ef.DRAG,this.onDrag),t.on(ef.DRAG_END,this.onDragEnd)}}onTranslate(t,e){return Ow(this,void 0,void 0,(function*(){if(!this.validate(e))return;const{sensitivity:n}=this.options,r=-1*n;yield this.translate(Pg(t,r),this.options.animation),this.invokeOnFinish()}))}translate(t,e){return Ow(this,void 0,void 0,(function*(){t=this.clampByDirection(t),t=this.clampByRange(t),t=this.clampByRotation(t),yield this.context.graph.translateBy(t,e)}))}clampByRotation([t,e]){const n=this.context.graph.getRotation();if(n%360===0)return[t,e];const r=n*Math.PI/180,i=Math.cos(r),o=Math.sin(r);return[t*i-e*o,t*o+e*i]}clampByDirection([t,e]){const{direction:n}=this.options;return"x"===n?e=0:"y"===n&&(t=0),[t,e]}clampByRange([t,e]){const{viewport:n,canvas:r}=this.context,[i,o]=r.getSize(),[s,a,c,l]=Hf(this.options.range),u=[o*s,i*a,o*c,i*l],h=Jf(Zf(n.getCanvasCenter()),u),d=Cg(n.getViewportCenter(),[t,e,0]);if(!ep(d,h)){const{min:[n,r],max:[i,o]}=h;(d[0]<n&&t>0||d[0]>i&&t<0)&&(t=0),(d[1]<r&&e>0||d[1]>o&&e<0)&&(e=0)}return[t,e]}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return"function"===typeof e?e(t):!!e}unbindEvents(){this.shortcut.unbindAll();const{graph:t}=this.context;t.off(ef.DRAG_START,this.onDragStart),t.off(ef.DRAG,this.onDrag),t.off(ef.DRAG_END,this.onDragEnd)}destroy(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),super.destroy()}}Nw.defaultOptions={enable:t=>!("targetType"in t)||"canvas"===t.targetType,sensitivity:10,direction:"both",range:1/0};var Tw=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class Aw extends bg{constructor(t,e){super(t,Object.assign({},Aw.defaultOptions,e)),this.enable=!1,this.enableElements=["node","combo"],this.target=[],this.shadowOrigin=[0,0],this.hiddenEdges=[],this.isDragging=!1,this.onDrop=t=>Tw(this,void 0,void 0,(function*(){var e;if("link"!==this.options.dropEffect)return;const{model:n,element:r}=this.context,i=t.target.id;this.target.forEach((t=>{const e=n.getParentData(t,cf);e&&rg(e)===i&&n.refreshComboData(i),n.setParent(t,i,cf)})),yield null===(e=null===r||void 0===r?void 0:r.draw({animation:!0}))||void 0===e?void 0:e.finished})),this.setCursor=t=>{if(this.isDragging)return;const{type:e}=t,{canvas:n}=this.context,{cursor:r}=this.options;e===ef.POINTER_ENTER?n.setCursor((null===r||void 0===r?void 0:r.grab)||"grab"):n.setCursor((null===r||void 0===r?void 0:r.default)||"default")},this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDrop=this.onDrop.bind(this),this.bindEvents()}update(t){this.unbindEvents(),super.update(t),this.bindEvents()}bindEvents(){const{graph:t,canvas:e}=this.context,n=e.getLayer().getContextService().$canvas;n&&(n.addEventListener("blur",this.onDragEnd),n.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach((e=>{t.on(`${e}:${ef.DRAG_START}`,this.onDragStart),t.on(`${e}:${ef.DRAG}`,this.onDrag),t.on(`${e}:${ef.DRAG_END}`,this.onDragEnd),t.on(`${e}:${ef.POINTER_ENTER}`,this.setCursor),t.on(`${e}:${ef.POINTER_LEAVE}`,this.setCursor)})),["link"].includes(this.options.dropEffect)&&(t.on(tf.DROP,this.onDrop),t.on(Qd.DROP,this.onDrop))}getSelectedNodeIDs(t){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map((t=>t.id)).concat(t)))}getDelta(t){const e=this.context.graph.getZoom();return Rg([t.dx,t.dy],e)}onDragStart(t){var e;if(this.enable=this.validate(t),!this.enable)return;const{batch:n,canvas:r,graph:i}=this.context;r.setCursor((null===(e=this.options.cursor)||void 0===e?void 0:e.grabbing)||"grabbing"),this.isDragging=!0,n.startBatch();const o=t.target.id,s=i.getElementState(o);s.includes(this.options.state)?this.target=this.getSelectedNodeIDs([o]):this.target=[o],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}onDrag(t){if(!this.enable)return;const e=this.getDelta(t);this.options.shadow?this.moveShadow(e):this.moveElement(this.target,e)}onDragEnd(){var t,e,n;if(!this.enable)return;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";const{x:t=0,y:e=0}=this.shadow.attributes,[n,r]=Cg([+t,+e],this.shadowOrigin);this.moveElement(this.target,[n,r])}this.showEdges(),null===(e=(t=this.options).onFinish)||void 0===e||e.call(t,this.target);const{batch:r,canvas:i}=this.context;r.endBatch(),i.setCursor((null===(n=this.options.cursor)||void 0===n?void 0:n.grab)||"grab"),this.isDragging=!1,this.target=[]}validate(t){if(this.destroyed||gw(t.target)||this.context.graph.isCollapsingExpanding)return!1;const{enable:e}=this.options;return nr(e)?e(t):!!e}moveElement(t,e){return Tw(this,void 0,void 0,(function*(){const{graph:n,model:r}=this.context,{dropEffect:i}=this.options;"move"===i&&t.forEach((t=>r.refreshComboData(t))),n.translateElementBy(Object.fromEntries(t.map((t=>[t,e]))),!1)}))}moveShadow(t){if(!this.shadow)return;const{x:e=0,y:n=0}=this.shadow.attributes,[r,i]=t;this.shadow.attr({x:+e+r,y:+n+i})}createShadow(t){const e=zv(this.options,"shadow"),n=Qf(t.map((t=>this.context.element.getElement(t).getBounds()))),[r,i]=n.min;this.shadowOrigin=[r,i];const[o,s]=Xf(n),a={width:o,height:s,x:r,y:i};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},e),a),{visibility:"visible"})):(this.shadow=new Yu({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},e),a),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow))}showEdges(){this.options.shadow||0===this.hiddenEdges.length||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}hideEdge(){const{hideEdge:t,shadow:e}=this.options;if("none"===t||e)return;const{graph:n}=this.context;this.hiddenEdges="all"===t?n.getEdgeData().map(rg):Array.from(new Set(this.target.map((e=>n.getRelatedEdgesData(e,t).map(rg))).flat())),n.hideElement(this.hiddenEdges)}unbindEvents(){const{graph:t,canvas:e}=this.context,n=e.getLayer().getContextService().$canvas;n&&(n.removeEventListener("blur",this.onDragEnd),n.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach((e=>{t.off(`${e}:${ef.DRAG_START}`,this.onDragStart),t.off(`${e}:${ef.DRAG}`,this.onDrag),t.off(`${e}:${ef.DRAG_END}`,this.onDragEnd),t.off(`${e}:${ef.POINTER_ENTER}`,this.setCursor),t.off(`${e}:${ef.POINTER_LEAVE}`,this.setCursor)})),t.off(`combo:${ef.DROP}`,this.onDrop),t.off(`canvas:${ef.DROP}`,this.onDrop)}destroy(){var t;this.unbindEvents(),null===(t=this.shadow)||void 0===t||t.destroy(),super.destroy()}}Aw.defaultOptions={animation:!0,enable:t=>["node","combo"].includes(t.targetType),dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};var Cw="*",Pw=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],o=this._events[Cw]||[],s=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var s=r[o],a=s.callback,c=s.once;c&&(r.splice(o,1),0===r.length&&delete e._events[t],i--,o--),a.apply(e,n)}};s(i),s(o)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}(),Rw=Pw;function _w(t,e,n,r){while(t.length){const i=t.shift(),o=n(i);if(o)return!0;e.add(i.id),r(i.id).forEach((n=>{e.has(n.id)||(e.add(n.id),t.push(n))}))}return!1}function Lw(t,e,n,r){const i=n(t);if(i)return!0;e.add(t.id);for(const o of r(t.id))if(!e.has(o.id)&&Lw(o,e,n,r))return!0;return!1}const Dw=()=>!0;class Iw{constructor(t){c(this,"graph",void 0),c(this,"nodeFilter",void 0),c(this,"edgeFilter",void 0),c(this,"cacheEnabled",void 0),c(this,"inEdgesMap",new Map),c(this,"outEdgesMap",new Map),c(this,"bothEdgesMap",new Map),c(this,"allNodesMap",new Map),c(this,"allEdgesMap",new Map),c(this,"clearCache",(()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()})),c(this,"refreshCache",(()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map((t=>t.id)))})),c(this,"updateCache",(t=>{const e=new Set;t.forEach((t=>{const n=this.bothEdgesMap.get(t);if(n&&n.forEach((t=>e.add(t.id))),this.hasNode(t)){const n=this.graph.getRelatedEdges(t,"in").filter(this.edgeFilter),r=this.graph.getRelatedEdges(t,"out").filter(this.edgeFilter),i=Array.from(new Set([...n,...r]));i.forEach((t=>e.add(t.id))),this.inEdgesMap.set(t,n),this.outEdgesMap.set(t,r),this.bothEdgesMap.set(t,i),this.allNodesMap.set(t,this.graph.getNode(t))}else this.inEdgesMap.delete(t),this.outEdgesMap.delete(t),this.bothEdgesMap.delete(t),this.allNodesMap.delete(t)})),e.forEach((t=>{this.hasEdge(t)?this.allEdgesMap.set(t,this.graph.getEdge(t)):this.allEdgesMap.delete(t)}))})),c(this,"handleGraphChanged",(t=>{const e=new Set;t.changes.forEach((n=>{switch(n.type){case"NodeAdded":e.add(n.value.id);break;case"NodeDataUpdated":e.add(n.id);break;case"EdgeAdded":e.add(n.value.source),e.add(n.value.target);break;case"EdgeUpdated":"source"!==n.propertyName&&"target"!==n.propertyName||(e.add(n.oldValue),e.add(n.newValue));break;case"EdgeDataUpdated":if(t.graph.hasEdge(n.id)){const r=t.graph.getEdge(n.id);e.add(r.source),e.add(r.target)}break;case"EdgeRemoved":e.add(n.value.source),e.add(n.value.target);break;case"NodeRemoved":e.add(n.value.id);break;default:break}})),this.updateCache(e)})),this.graph=t.graph;const e=t.nodeFilter||Dw,n=t.edgeFilter||Dw;this.nodeFilter=e,this.edgeFilter=t=>{const{source:r,target:i}=this.graph.getEdgeDetail(t.id);return!(!e(r)||!e(i))&&n(t,r,i)},"auto"===t.cache?(this.cacheEnabled=!0,this.startAutoCache()):"manual"===t.cache?this.cacheEnabled=!0:this.cacheEnabled=!1}startAutoCache(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}stopAutoCache(){this.graph.off("changed",this.handleGraphChanged)}checkNodeExistence(t){this.getNode(t)}hasNode(t){if(!this.graph.hasNode(t))return!1;const e=this.graph.getNode(t);return this.nodeFilter(e)}areNeighbors(t,e){return this.checkNodeExistence(t),this.getNeighbors(e).some((e=>e.id===t))}getNode(t){const e=this.graph.getNode(t);if(!this.nodeFilter(e))throw new Error("Node not found for id: "+t);return e}getRelatedEdges(t,e){if(this.checkNodeExistence(t),this.cacheEnabled)return"in"===e?this.inEdgesMap.get(t):"out"===e?this.outEdgesMap.get(t):this.bothEdgesMap.get(t);const n=this.graph.getRelatedEdges(t,e);return n.filter(this.edgeFilter)}getDegree(t,e){return this.getRelatedEdges(t,e).length}getSuccessors(t){const e=this.getRelatedEdges(t,"out"),n=e.map((t=>this.getNode(t.target)));return Array.from(new Set(n))}getPredecessors(t){const e=this.getRelatedEdges(t,"in"),n=e.map((t=>this.getNode(t.source)));return Array.from(new Set(n))}getNeighbors(t){const e=this.getPredecessors(t),n=this.getSuccessors(t);return Array.from(new Set([...e,...n]))}hasEdge(t){if(!this.graph.hasEdge(t))return!1;const e=this.graph.getEdge(t);return this.edgeFilter(e)}getEdge(t){const e=this.graph.getEdge(t);if(!this.edgeFilter(e))throw new Error("Edge not found for id: "+t);return e}getEdgeDetail(t){const e=this.getEdge(t);return{edge:e,source:this.getNode(e.source),target:this.getNode(e.target)}}hasTreeStructure(t){return this.graph.hasTreeStructure(t)}getRoots(t){return this.graph.getRoots(t).filter(this.nodeFilter)}getChildren(t,e){return this.checkNodeExistence(t),this.graph.getChildren(t,e).filter(this.nodeFilter)}getParent(t,e){this.checkNodeExistence(t);const n=this.graph.getParent(t,e);return n&&this.nodeFilter(n)?n:null}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(t,e,n="out"){const r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];_w([this.getNode(t)],new Set,e,r)}dfs(t,e,n="out"){const r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];Lw(this.getNode(t),new Set,e,r)}}class jw extends Rw{constructor(t){super(),c(this,"nodeMap",new Map),c(this,"edgeMap",new Map),c(this,"inEdgesMap",new Map),c(this,"outEdgesMap",new Map),c(this,"bothEdgesMap",new Map),c(this,"treeIndices",new Map),c(this,"changes",[]),c(this,"batchCount",0),c(this,"onChanged",(()=>{})),c(this,"batch",(t=>{this.batchCount+=1,t(),this.batchCount-=1,this.batchCount||this.commit()})),t&&(t.nodes&&this.addNodes(t.nodes),t.edges&&this.addEdges(t.edges),t.tree&&this.addTree(t.tree),t.onChanged&&(this.onChanged=t.onChanged))}commit(){const t=this.changes;this.changes=[];const e={graph:this,changes:t};this.emit("changed",e),this.onChanged(e)}reduceChanges(t){let e=[];return t.forEach((t=>{switch(t.type){case"NodeRemoved":{let n=!1;e=e.filter((e=>{if("NodeAdded"===e.type){const r=e.value.id===t.value.id;return r&&(n=!0),!r}return"NodeDataUpdated"===e.type?e.id!==t.value.id:"TreeStructureChanged"!==e.type||e.nodeId!==t.value.id})),n||e.push(t);break}case"EdgeRemoved":{let n=!1;e=e.filter((e=>{if("EdgeAdded"===e.type){const r=e.value.id===t.value.id;return r&&(n=!0),!r}return"EdgeDataUpdated"!==e.type&&"EdgeUpdated"!==e.type||e.id!==t.value.id})),n||e.push(t);break}case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":{const n=e.findIndex((e=>e.type===t.type&&e.id===t.id&&(void 0===t.propertyName||e.propertyName===t.propertyName))),r=e[n];r?void 0!==t.propertyName?r.newValue=t.newValue:(e.splice(n,1),e.push(t)):e.push(t);break}case"TreeStructureDetached":e=e.filter((e=>"TreeStructureAttached"===e.type?e.treeKey!==t.treeKey:"TreeStructureChanged"!==e.type||e.treeKey!==t.treeKey)),e.push(t);break;case"TreeStructureChanged":{const n=e.find((e=>"TreeStructureChanged"===e.type&&e.treeKey===t.treeKey&&e.nodeId===t.nodeId));n?n.newParentId=t.newParentId:e.push(t);break}default:e.push(t);break}})),e}checkNodeExistence(t){this.getNode(t)}hasNode(t){return this.nodeMap.has(t)}areNeighbors(t,e){return this.getNeighbors(e).some((e=>e.id===t))}getNode(t){const e=this.nodeMap.get(t);if(!e)throw new Error("Node not found for id: "+t);return e}getRelatedEdges(t,e){if(this.checkNodeExistence(t),"in"===e){const e=this.inEdgesMap.get(t);return Array.from(e)}if("out"===e){const e=this.outEdgesMap.get(t);return Array.from(e)}{const e=this.bothEdgesMap.get(t);return Array.from(e)}}getDegree(t,e){return this.getRelatedEdges(t,e).length}getSuccessors(t){const e=this.getRelatedEdges(t,"out"),n=e.map((t=>this.getNode(t.target)));return Array.from(new Set(n))}getPredecessors(t){const e=this.getRelatedEdges(t,"in"),n=e.map((t=>this.getNode(t.source)));return Array.from(new Set(n))}getNeighbors(t){const e=this.getPredecessors(t),n=this.getSuccessors(t);return Array.from(new Set([...e,...n]))}doAddNode(t){if(this.hasNode(t.id))throw new Error("Node already exists: "+t.id);this.nodeMap.set(t.id,t),this.inEdgesMap.set(t.id,new Set),this.outEdgesMap.set(t.id,new Set),this.bothEdgesMap.set(t.id,new Set),this.treeIndices.forEach((e=>{e.childrenMap.set(t.id,new Set)})),this.changes.push({type:"NodeAdded",value:t})}addNodes(t){this.batch((()=>{for(const e of t)this.doAddNode(e)}))}addNode(t){this.addNodes([t])}doRemoveNode(t){const e=this.getNode(t),n=this.bothEdgesMap.get(t);n?.forEach((t=>this.doRemoveEdge(t.id))),this.nodeMap.delete(t),this.treeIndices.forEach((n=>{n.childrenMap.get(t)?.forEach((t=>{n.parentMap.delete(t.id)}));const r=n.parentMap.get(t);r&&n.childrenMap.get(r.id)?.delete(e),n.parentMap.delete(t),n.childrenMap.delete(t)})),this.bothEdgesMap.delete(t),this.inEdgesMap.delete(t),this.outEdgesMap.delete(t),this.changes.push({type:"NodeRemoved",value:e})}removeNodes(t){this.batch((()=>{t.forEach((t=>this.doRemoveNode(t)))}))}removeNode(t){this.removeNodes([t])}updateNodeDataProperty(t,e,n){const r=this.getNode(t);this.batch((()=>{const i=r.data[e],o=n;r.data[e]=o,this.changes.push({type:"NodeDataUpdated",id:t,propertyName:e,oldValue:i,newValue:o})}))}mergeNodeData(t,e){this.batch((()=>{Object.entries(e).forEach((([e,n])=>{this.updateNodeDataProperty(t,e,n)}))}))}updateNodeData(...t){const e=t[0],n=this.getNode(e);if("string"===typeof t[1])return void this.updateNodeDataProperty(e,t[1],t[2]);let r;if("function"===typeof t[1]){const e=t[1];r=e(n.data)}else"object"===typeof t[1]&&(r=t[1]);this.batch((()=>{const t=n.data,i=r;n.data=r,this.changes.push({type:"NodeDataUpdated",id:e,oldValue:t,newValue:i})}))}checkEdgeExistence(t){if(!this.hasEdge(t))throw new Error("Edge not found for id: "+t)}hasEdge(t){return this.edgeMap.has(t)}getEdge(t){return this.checkEdgeExistence(t),this.edgeMap.get(t)}getEdgeDetail(t){const e=this.getEdge(t);return{edge:e,source:this.getNode(e.source),target:this.getNode(e.target)}}doAddEdge(t){if(this.hasEdge(t.id))throw new Error("Edge already exists: "+t.id);this.checkNodeExistence(t.source),this.checkNodeExistence(t.target),this.edgeMap.set(t.id,t);const e=this.inEdgesMap.get(t.target),n=this.outEdgesMap.get(t.source),r=this.bothEdgesMap.get(t.source),i=this.bothEdgesMap.get(t.target);e.add(t),n.add(t),r.add(t),i.add(t),this.changes.push({type:"EdgeAdded",value:t})}addEdges(t){this.batch((()=>{for(const e of t)this.doAddEdge(e)}))}addEdge(t){this.addEdges([t])}doRemoveEdge(t){const e=this.getEdge(t),n=this.outEdgesMap.get(e.source),r=this.inEdgesMap.get(e.target),i=this.bothEdgesMap.get(e.source),o=this.bothEdgesMap.get(e.target);n.delete(e),r.delete(e),i.delete(e),o.delete(e),this.edgeMap.delete(t),this.changes.push({type:"EdgeRemoved",value:e})}removeEdges(t){this.batch((()=>{t.forEach((t=>this.doRemoveEdge(t)))}))}removeEdge(t){this.removeEdges([t])}updateEdgeSource(t,e){const n=this.getEdge(t);this.checkNodeExistence(e);const r=n.source,i=e;this.outEdgesMap.get(r).delete(n),this.bothEdgesMap.get(r).delete(n),this.outEdgesMap.get(i).add(n),this.bothEdgesMap.get(i).add(n),n.source=e,this.batch((()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"source",oldValue:r,newValue:i})}))}updateEdgeTarget(t,e){const n=this.getEdge(t);this.checkNodeExistence(e);const r=n.target,i=e;this.inEdgesMap.get(r).delete(n),this.bothEdgesMap.get(r).delete(n),this.inEdgesMap.get(i).add(n),this.bothEdgesMap.get(i).add(n),n.target=e,this.batch((()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"target",oldValue:r,newValue:i})}))}updateEdgeDataProperty(t,e,n){const r=this.getEdge(t);this.batch((()=>{const i=r.data[e],o=n;r.data[e]=o,this.changes.push({type:"EdgeDataUpdated",id:t,propertyName:e,oldValue:i,newValue:o})}))}updateEdgeData(...t){const e=t[0],n=this.getEdge(e);if("string"===typeof t[1])return void this.updateEdgeDataProperty(e,t[1],t[2]);let r;if("function"===typeof t[1]){const e=t[1];r=e(n.data)}else"object"===typeof t[1]&&(r=t[1]);this.batch((()=>{const t=n.data,i=r;n.data=r,this.changes.push({type:"EdgeDataUpdated",id:e,oldValue:t,newValue:i})}))}mergeEdgeData(t,e){this.batch((()=>{Object.entries(e).forEach((([e,n])=>{this.updateEdgeDataProperty(t,e,n)}))}))}checkTreeExistence(t){if(!this.hasTreeStructure(t))throw new Error("Tree structure not found for treeKey: "+t)}hasTreeStructure(t){return this.treeIndices.has(t)}attachTreeStructure(t){this.treeIndices.has(t)||(this.treeIndices.set(t,{parentMap:new Map,childrenMap:new Map}),this.batch((()=>{this.changes.push({type:"TreeStructureAttached",treeKey:t})})))}detachTreeStructure(t){this.checkTreeExistence(t),this.treeIndices.delete(t),this.batch((()=>{this.changes.push({type:"TreeStructureDetached",treeKey:t})}))}addTree(t,e){this.batch((()=>{this.attachTreeStructure(e);const n=[],r=Array.isArray(t)?t:[t];while(r.length){const t=r.shift();n.push(t),t.children&&r.push(...t.children)}this.addNodes(n),n.forEach((t=>{t.children?.forEach((n=>{this.setParent(n.id,t.id,e)}))}))}))}getRoots(t){return this.checkTreeExistence(t),this.getAllNodes().filter((e=>!this.getParent(e.id,t)))}getChildren(t,e){this.checkNodeExistence(t),this.checkTreeExistence(e);const n=this.treeIndices.get(e),r=n.childrenMap.get(t);return Array.from(r||[])}getParent(t,e){this.checkNodeExistence(t),this.checkTreeExistence(e);const n=this.treeIndices.get(e);return n.parentMap.get(t)||null}getAncestors(t,e){const n=[];let r,i=this.getNode(t);while(r=this.getParent(i.id,e))n.push(r),i=r;return n}setParent(t,e,n){this.checkTreeExistence(n);const r=this.treeIndices.get(n);if(!r)return;const i=this.getNode(t),o=r.parentMap.get(t);if(o?.id===e)return;if(void 0===e||null===e)return o&&r.childrenMap.get(o.id)?.delete(i),void r.parentMap.delete(t);const s=this.getNode(e);r.parentMap.set(t,s),o&&r.childrenMap.get(o.id)?.delete(i);let a=r.childrenMap.get(s.id);a||(a=new Set,r.childrenMap.set(s.id,a)),a.add(i),this.batch((()=>{this.changes.push({type:"TreeStructureChanged",treeKey:n,nodeId:t,oldParentId:o?.id,newParentId:s.id})}))}dfsTree(t,e,n){const r=t=>this.getChildren(t,n);return Lw(this.getNode(t),new Set,e,r)}bfsTree(t,e,n){const r=t=>this.getChildren(t,n);return _w([this.getNode(t)],new Set,e,r)}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(t,e,n="out"){const r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];return _w([this.getNode(t)],new Set,e,r)}dfs(t,e,n="out"){const r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];return Lw(this.getNode(t),new Set,e,r)}clone(){const t=this.getAllNodes().map((t=>({...t,data:{...t.data}}))),e=this.getAllEdges().map((t=>({...t,data:{...t.data}}))),n=new jw({nodes:t,edges:e});return this.treeIndices.forEach((({parentMap:t,childrenMap:e},r)=>{const i=new Map;t.forEach(((t,e)=>{i.set(e,n.getNode(t.id))}));const o=new Map;e.forEach(((t,e)=>{o.set(e,new Set(Array.from(t).map((t=>n.getNode(t.id)))))})),n.treeIndices.set(r,{parentMap:i,childrenMap:o})})),n}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(t){return new Iw({graph:this,...t})}}class Fw{constructor(t,e){this.context=t,this.options=e||{}}}var Bw=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))},zw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Gw(t){const{type:e}=t;return["compact-box","mindmap","dendrogram","indented"].includes(e)}function Vw(t){return!Array.isArray(t)&&(null===t||void 0===t?void 0:t.preLayout)}function Ww(t){const{nodes:e,edges:n}=t,r={nodes:[],edges:[],combos:[]};return e.forEach((t=>{const e=t.data._isCombo?r.combos:r.nodes,{x:n,y:i,z:o=0}=t.data;null===e||void 0===e||e.push({id:t.id,style:{x:n,y:i,z:o}})})),n.forEach((t=>{const{id:e,source:n,target:i,data:{points:o=[],controlPoints:s=o.slice(1,o.length-1)}}=t;r.edges.push({id:e,source:n,target:i,style:Object.assign({},(null===s||void 0===s?void 0:s.length)?{controlPoints:s.map(Jg)}:{})})})),r}function Uw(t,e){class n extends Fw{constructor(e,n){if(super(e,n),this.instance=new t({}),this.id=this.instance.id,"stop"in this.instance&&"tick"in this.instance){const t=this.instance;this.stop=t.stop.bind(t),this.tick=e=>{const n=t.tick(e);return Ww(n)}}}execute(t,e){return Bw(this,void 0,void 0,(function*(){return Ww(yield this.instance.execute(this.graphData2LayoutModel(t),this.transformOptions(Ng({},this.options,e))))}))}transformOptions(t){if(!("onTick"in t))return t;const e=t.onTick;return t.onTick=t=>e(Ww(t)),t}graphData2LayoutModel(t){const{nodes:n=[],edges:r=[],combos:i=[]}=t,o=n.map((t=>{const e=rg(t),{data:n,style:r,combo:i}=t,o=zw(t,["data","style","combo"]),s={id:e,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),{data:n}),i?{parentId:i}:{}),{style:r}),o)};return(null===r||void 0===r?void 0:r.x)&&Object.assign(s.data,{x:r.x}),(null===r||void 0===r?void 0:r.y)&&Object.assign(s.data,{y:r.y}),(null===r||void 0===r?void 0:r.z)&&Object.assign(s.data,{z:r.z}),s})),s=new Map(o.map((t=>[t.id,t]))),a=r.filter((t=>{const{source:e,target:n}=t;return s.has(e)&&s.has(n)})).map((t=>{const{source:e,target:n,data:r,style:i}=t;return{id:rg(t),source:e,target:n,data:Object.assign({},r),style:Object.assign({},i)}})),c=i.map((t=>({id:rg(t),data:Object.assign({_isCombo:!0},t.data),style:Object.assign({},t.style)}))),l=new jw({nodes:[...o,...c],edges:a});return e.model.model.hasTreeStructure(cf)&&(l.attachTreeStructure(cf),o.forEach((t=>{const n=e.model.model.getParent(t.id,cf);n&&l.hasNode(n.id)&&l.setParent(t.id,n.id,cf)}))),l}}return n}function Hw(t,e,...n){if(e in t)return t[e](...n);if("instance"in t){const r=t.instance;if(e in r)return r[e](...n)}return null}function $w(t,e){if(e in t)return t[e];if("instance"in t){const n=t.instance;if(e in n)return n[e]}return null}var Yw=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class qw extends Aw{get forceLayoutInstance(){return this.context.layout.getLayoutInstance().find((t=>["d3-force","d3-force-3d"].includes(null===t||void 0===t?void 0:t.id)))}validate(t){return!!this.context.layout&&(this.forceLayoutInstance?super.validate(t):(vf.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1))}moveElement(t,e){return Yw(this,void 0,void 0,(function*(){const n=this.forceLayoutInstance;this.context.graph.getNodeData(t).forEach(((r,i)=>{const{x:o=0,y:s=0}=r.style||{};n&&Hw(n,"setFixedPosition",t[i],[...Ag([+o,+s],e)])}))}))}onDragStart(t){if(this.enable=this.validate(t),!this.enable)return;this.target=this.getSelectedNodeIDs([t.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);const e=this.forceLayoutInstance;e&&$w(e,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach((t=>{const{x:n=0,y:r=0}=t.style||{};e&&Hw(e,"setFixedPosition",rg(t),[+n,+r])}))}onDrag(t){if(!this.enable)return;const e=this.getDelta(t);this.moveElement(this.target,e)}onDragEnd(){const t=this.forceLayoutInstance;t&&$w(t,"simulation").alphaTarget(0),this.options.fixed||this.context.graph.getNodeData(this.target).forEach((e=>{t&&Hw(t,"setFixedPosition",rg(e),[null,null,null])}))}}var Xw=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class Kw extends bg{constructor(t,e){super(t,Object.assign({},Kw.defaultOptions,e)),this.isZoomEvent=t=>Boolean(t.data&&"scale"in t.data),this.relatedEdgeToUpdate=new Set,this.zoom=this.context.graph.getZoom(),this.fixElementSize=t=>Xw(this,void 0,void 0,(function*(){if(!this.validate(t))return;const{graph:e}=this.context,{state:n,nodeFilter:r,edgeFilter:i,comboFilter:o}=this.options,s=(n?e.getElementDataByState("node",n):e.getNodeData()).filter(r),a=(n?e.getElementDataByState("edge",n):e.getEdgeData()).filter(i),c=(n?e.getElementDataByState("combo",n):e.getComboData()).filter(o),l=this.isZoomEvent(t)?this.zoom=Math.max(.01,Math.min(t.data.scale,10)):this.zoom,u=[...s,...c];u.length>0&&u.forEach((t=>this.fixNodeLike(t,l))),this.updateRelatedEdges(),a.length>0&&a.forEach((t=>this.fixEdge(t,l)))})),this.cachedStyles=new Map,this.getOriginalFieldValue=(t,e,n)=>{var r;const i=this.cachedStyles.get(t)||[],o=(null===(r=i.find((t=>t.shape===e)))||void 0===r?void 0:r.style)||{};return n in o||(o[n]=e.attributes[n],this.cachedStyles.set(t,[...i.filter((t=>t.shape!==e)),{shape:e,style:o}])),o[n]},this.scaleEntireElement=(t,e,n)=>{e.setLocalScale(1/n);const r=this.cachedStyles.get(t)||[];r.push({shape:e}),this.cachedStyles.set(t,r)},this.scaleSpecificShapes=(t,e,n)=>{const r=Sy(t),i=Array.isArray(n)?n:[n];i.forEach((n=>{const{shape:i,fields:o}=n,s="function"===typeof i?i(r):t.getShape(i);s&&(o?o.forEach((n=>{const r=this.getOriginalFieldValue(t.id,s,n);Ae(r)&&(s.style[n]=r/e)})):this.scaleEntireElement(t.id,s,e))}))},this.skipIfExceedViewport=t=>{const{viewport:e}=this.context;return!(null===e||void 0===e?void 0:e.isInViewport(t.getRenderBounds(),!1,30))},this.fixNodeLike=(t,e)=>{const n=rg(t),{element:r,model:i}=this.context,o=r.getElement(n);if(!o||this.skipIfExceedViewport(o))return;const s=i.getRelatedEdgesData(n);s.forEach((t=>this.relatedEdgeToUpdate.add(rg(t))));const a=this.options[o.type];a?this.scaleSpecificShapes(o,e,a):this.scaleEntireElement(n,o,e)},this.fixEdge=(t,e)=>{const n=rg(t),r=this.context.element.getElement(n);if(!r||this.skipIfExceedViewport(r))return;const i=this.options.edge;if(!i)return r.style.transformOrigin="center",void this.scaleEntireElement(n,r,e);this.scaleSpecificShapes(r,e,i)},this.updateRelatedEdges=()=>{const{element:t}=this.context;this.relatedEdgeToUpdate.size>0&&this.relatedEdgeToUpdate.forEach((e=>{const n=t.getElement(e);null===n||void 0===n||n.update({})})),this.relatedEdgeToUpdate.clear()},this.resetTransform=t=>Xw(this,void 0,void 0,(function*(){var e;(null===(e=t.data)||void 0===e?void 0:e.firstRender)||(this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}}))})),this.bindEvents()}restoreCachedStyles(){if(this.cachedStyles.size>0){this.cachedStyles.forEach((t=>{t.forEach((({shape:t,style:e})=>{if(ly(e))t.setLocalScale(1);else{if(this.options.state)return;Object.entries(e).forEach((([e,n])=>t.style[e]=n))}}))}));const{graph:t,element:e}=this.context,n=Object.keys(Object.fromEntries(this.cachedStyles)).filter((e=>e&&"node"===t.getElementType(e)));if(n.length>0){const r=new Set;n.forEach((e=>{t.getRelatedEdgesData(e).forEach((t=>r.add(rg(t))))})),r.forEach((t=>{const n=null===e||void 0===e?void 0:e.getElement(t);null===n||void 0===n||n.update({})}))}}}bindEvents(){const{graph:t}=this.context;t.on(of.AFTER_DRAW,this.resetTransform),t.on(of.AFTER_TRANSFORM,this.fixElementSize)}unbindEvents(){const{graph:t}=this.context;t.off(of.AFTER_DRAW,this.resetTransform),t.off(of.AFTER_TRANSFORM,this.fixElementSize)}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return nr(e)?e(t):!!e}destroy(){this.unbindEvents(),super.destroy()}}Kw.defaultOptions={enable:t=>t.data.scale<1,nodeFilter:()=>!0,edgeFilter:()=>!0,comboFilter:()=>!0,edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var Zw=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class Jw extends bg{constructor(t,e){super(t,Object.assign({},Jw.defaultOptions,e)),this.focus=t=>Zw(this,void 0,void 0,(function*(){if(!this.validate(t))return;const{graph:e}=this.context;yield e.focusElement(t.target.id,this.options.animation)})),this.bindEvents()}bindEvents(){const{graph:t}=this.context;this.unbindEvents(),Sv.forEach((e=>{t.on(`${e}:${ef.CLICK}`,this.focus)}))}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return nr(e)?e(t):!!e}unbindEvents(){const{graph:t}=this.context;Sv.forEach((e=>{t.off(`${e}:${ef.CLICK}`,this.focus)}))}destroy(){this.unbindEvents(),super.destroy()}}Jw.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0};class Qw extends bg{constructor(t,e){super(t,Object.assign({},Qw.defaultOptions,e)),this.isFrozen=!1,this.toggleFrozen=t=>{this.isFrozen="dragstart"===t.type},this.hoverElement=t=>{if(!this.validate(t))return;const e=t.type===ef.POINTER_ENTER;this.updateElementsState(t,e);const{onHover:n,onHoverEnd:r}=this.options;e?null===n||void 0===n||n(t):null===r||void 0===r||r(t)},this.updateElementsState=(t,e)=>{if(!this.options.state&&!this.options.inactiveState)return;const{graph:n}=this.context,{state:r,animation:i,inactiveState:o}=this.options,s=this.getActiveIds(t),a={};if(r&&Object.assign(a,this.getElementsState(s,r,e)),o){const t=og(n.getData(),!0).filter((t=>!s.includes(t)));Object.assign(a,this.getElementsState(t,o,e))}n.setElementState(a,i)},this.getElementsState=(t,e,n)=>{const{graph:r}=this.context,i={};return t.forEach((t=>{const o=r.getElementState(t);i[t]=n?o.includes(e)?o:[...o,e]:o.filter((t=>t!==e))})),i},this.bindEvents()}bindEvents(){const{graph:t}=this.context;this.unbindEvents(),Sv.forEach((e=>{t.on(`${e}:${ef.POINTER_ENTER}`,this.hoverElement),t.on(`${e}:${ef.POINTER_LEAVE}`,this.hoverElement)}));const e=this.context.canvas.document;e.addEventListener(`${ef.DRAG_START}`,this.toggleFrozen),e.addEventListener(`${ef.DRAG_END}`,this.toggleFrozen)}getActiveIds(t){const{graph:e}=this.context,{degree:n,direction:r}=this.options,i=t.target.id;return n?Nv(e,t.targetType,i,"function"===typeof n?n(t):n,r):[i]}validate(t){if(this.destroyed||this.isFrozen||gw(t.target)||this.context.graph.isCollapsingExpanding)return!1;const{enable:e}=this.options;return nr(e)?e(t):!!e}unbindEvents(){const{graph:t}=this.context;Sv.forEach((e=>{t.off(`${e}:${ef.POINTER_ENTER}`,this.hoverElement),t.off(`${e}:${ef.POINTER_LEAVE}`,this.hoverElement)}));const e=this.context.canvas.document;e.removeEventListener(`${ef.DRAG_START}`,this.toggleFrozen),e.removeEventListener(`${ef.DRAG_END}`,this.toggleFrozen)}destroy(){this.unbindEvents(),super.destroy()}}Qw.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};class tE extends wv{onPointerDown(t){if(!super.validate(t)||!super.isKeydown()||this.points)return;const{canvas:e}=this.context;this.pathShape=new Vu({id:"g6-lasso-select",style:this.options.style}),e.appendChild(this.pathShape),this.points=[Ev(t)]}onPointerMove(t){var e;if(!this.points)return;const{immediately:n,mode:r}=this.options;this.points.push(Ev(t)),null===(e=this.pathShape)||void 0===e||e.setAttribute("d",vy(this.points)),n&&"default"===r&&this.points.length>2&&super.updateElementsStates(this.points)}onPointerUp(){this.points&&(this.points.length<2||super.updateElementsStates(this.points),this.clearLasso())}clearLasso(){var t;null===(t=this.pathShape)||void 0===t||t.remove(),this.pathShape=void 0,this.points=void 0}}class eE extends bg{constructor(t,e){super(t,Object.assign({},eE.defaultOptions,e)),this.hiddenShapes=[],this.isVisible=!0,this.setElementsVisibility=(t,e,n)=>{t.filter(Boolean).forEach((t=>{"hidden"!==e||t.isVisible()?"visible"===e&&this.hiddenShapes.includes(t)?this.hiddenShapes.splice(this.hiddenShapes.indexOf(t),1):gg(t,e,n):this.hiddenShapes.push(t)}))},this.filterShapes=(t,e)=>{if(nr(e))return n=>!e(t,n);const n=null===e||void 0===e?void 0:e[t];return t=>!t.className||!(null===n||void 0===n?void 0:n.includes(t.className))},this.hideShapes=t=>{if(!this.validate(t)||!this.isVisible)return;const{element:e}=this.context,{shapes:n={}}=this.options;this.setElementsVisibility(e.getNodes(),"hidden",this.filterShapes("node",n)),this.setElementsVisibility(e.getEdges(),"hidden",this.filterShapes("edge",n)),this.setElementsVisibility(e.getCombos(),"hidden",this.filterShapes("combo",n)),this.isVisible=!1},this.showShapes=Mw((t=>{if(!this.validate(t)||this.isVisible)return;const{element:e}=this.context;this.setElementsVisibility(e.getNodes(),"visible"),this.setElementsVisibility(e.getEdges(),"visible"),this.setElementsVisibility(e.getCombos(),"visible"),this.isVisible=!0}),this.options.debounce),this.bindEvents()}bindEvents(){const{graph:t}=this.context;t.on(of.BEFORE_TRANSFORM,this.hideShapes),t.on(of.AFTER_TRANSFORM,this.showShapes)}unbindEvents(){const{graph:t}=this.context;t.off(of.BEFORE_TRANSFORM,this.hideShapes),t.off(of.AFTER_TRANSFORM,this.showShapes)}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return nr(e)?e(t):!!e}update(t){this.unbindEvents(),super.update(t),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}eE.defaultOptions={enable:!0,debounce:200,shapes:t=>"node"===t};var nE=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class rE extends bg{constructor(t,e){super(t,Object.assign({},rE.defaultOptions,e)),this.onWheel=t=>nE(this,void 0,void 0,(function*(){this.options.preventDefault&&t.preventDefault();const e=t.deltaX,n=t.deltaY;yield this.scroll([-e,-n],t)})),this.shortcut=new xv(t.graph),this.bindEvents()}update(t){super.update(t),this.bindEvents()}bindEvents(){var t,e;const{trigger:n}=this.options;if(this.shortcut.unbindAll(),rr(n)){null===(t=this.graphDom)||void 0===t||t.removeEventListener(ef.WHEEL,this.onWheel);const{up:e=[],down:r=[],left:i=[],right:o=[]}=n;this.shortcut.bind(e,(t=>this.scroll([0,-10],t))),this.shortcut.bind(r,(t=>this.scroll([0,10],t))),this.shortcut.bind(i,(t=>this.scroll([-10,0],t))),this.shortcut.bind(o,(t=>this.scroll([10,0],t)))}else null===(e=this.graphDom)||void 0===e||e.addEventListener(ef.WHEEL,this.onWheel,{passive:!1})}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}formatDisplacement(t){const{sensitivity:e}=this.options;return t=Pg(t,e),t=this.clampByDirection(t),t=this.clampByRange(t),t}clampByDirection([t,e]){const{direction:n}=this.options;return"x"===n?e=0:"y"===n&&(t=0),[t,e]}clampByRange([t,e]){const{viewport:n,canvas:r}=this.context,[i,o]=r.getSize(),[s,a,c,l]=Hf(this.options.range),u=[o*s,i*a,o*c,i*l],h=Jf(Zf(n.getCanvasCenter()),u),d=Cg(n.getViewportCenter(),[t,e,0]);if(!ep(d,h)){const{min:[n,r],max:[i,o]}=h;(d[0]<n&&t>0||d[0]>i&&t<0)&&(t=0),(d[1]<r&&e>0||d[1]>o&&e<0)&&(e=0)}return[t,e]}scroll(t,e){return nE(this,void 0,void 0,(function*(){if(!this.validate(e))return;const{onFinish:n}=this.options,r=this.context.graph,i=this.formatDisplacement(t);yield r.translateBy(i,!1),null===n||void 0===n||n()}))}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return nr(e)?e(t):!!e}destroy(){var t;this.shortcut.destroy(),null===(t=this.graphDom)||void 0===t||t.removeEventListener(ef.WHEEL,this.onWheel),super.destroy()}}rE.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var iE=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class oE extends bg{constructor(t,e){super(t,Object.assign({},oE.defaultOptions,e)),this.zoom=(t,e,n)=>iE(this,void 0,void 0,(function*(){if(!this.validate(e))return;const{graph:r}=this.context;let i=this.options.origin;!i&&"viewport"in e&&(i=Jg(e.viewport));const{sensitivity:o,onFinish:s}=this.options,a=1+Le(t,-50,50)*o/100,c=r.getZoom();yield r.zoomTo(c*a,n,i),null===s||void 0===s||s()})),this.onReset=()=>iE(this,void 0,void 0,(function*(){yield this.context.graph.zoomTo(1,this.options.animation)})),this.preventDefault=t=>{this.options.preventDefault&&t.preventDefault()},this.shortcut=new xv(t.graph),this.bindEvents()}update(t){super.update(t),this.bindEvents()}bindEvents(){const{trigger:t}=this.options;if(this.shortcut.unbindAll(),Array.isArray(t))if(t.includes(ef.PINCH))this.shortcut.bind([ef.PINCH],(t=>{this.zoom(t.scale,t,!1)}));else{const e=this.context.canvas.getContainer();null===e||void 0===e||e.addEventListener(ef.WHEEL,this.preventDefault),this.shortcut.bind([...t,ef.WHEEL],(t=>{const{deltaX:e,deltaY:n}=t;this.zoom(-(null!==n&&void 0!==n?n:e),t,!1)}))}if("object"===typeof t){const{zoomIn:e=[],zoomOut:n=[],reset:r=[]}=t;this.shortcut.bind(e,(t=>this.zoom(10,t,this.options.animation))),this.shortcut.bind(n,(t=>this.zoom(-10,t,this.options.animation))),this.shortcut.bind(r,this.onReset)}}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return nr(e)?e(t):!!e}destroy(){var t;this.shortcut.destroy(),null===(t=this.context.canvas.getContainer())||void 0===t||t.removeEventListener(ef.WHEEL,this.preventDefault),super.destroy()}}oE.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};var sE=n(24875);const aE=(t,e)=>{if("next"!==t&&"prev"!==t)return e},cE=t=>{t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev};class lE{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,e=t.prev;if(e&&e!==t)return cE(e),e}enqueue(t){const e=this.shortcut;t.prev&&t.next&&cE(t),t.next=e.next,e.next.prev=t,e.next=t,t.prev=e}toString(){const t=[],e=this.shortcut;let n=e.prev;while(n!==e)t.push(JSON.stringify(n,aE)),n=null===n||void 0===n?void 0:n.prev;return`[${t.join(", ")}]`}}class uE extends lE{}const hE=()=>1,dE=(t,e)=>{var n;if(t.getAllNodes().length<=1)return[];const r=gE(t,e||hE),i=fE(r.graph,r.buckets,r.zeroIdx);return null===(n=i.map((e=>t.getRelatedEdges(e.v,"out").filter((({target:t})=>t===e.w)))))||void 0===n?void 0:n.flat()},fE=(t,e,n)=>{let r=[];const i=e[e.length-1],o=e[0];let s;while(t.getAllNodes().length){while(s=o.dequeue())pE(t,e,n,s);while(s=i.dequeue())pE(t,e,n,s);if(t.getAllNodes().length)for(let i=e.length-2;i>0;--i)if(s=e[i].dequeue(),s){r=r.concat(pE(t,e,n,s,!0));break}}return r},pE=(t,e,n,r,i)=>{var o,s;const a=[];return t.hasNode(r.v)&&(null===(o=t.getRelatedEdges(r.v,"in"))||void 0===o||o.forEach((r=>{const o=r.data.weight,s=t.getNode(r.source);i&&a.push({v:r.source,w:r.target,in:0,out:0}),void 0===s.data.out&&(s.data.out=0),s.data.out-=o,vE(e,n,Object.assign({v:s.id},s.data))})),null===(s=t.getRelatedEdges(r.v,"out"))||void 0===s||s.forEach((r=>{const i=r.data.weight,o=r.target,s=t.getNode(o);void 0===s.data.in&&(s.data.in=0),s.data.in-=i,vE(e,n,Object.assign({v:s.id},s.data))})),t.removeNode(r.v)),i?a:void 0},gE=(t,e)=>{const n=new jw;let r=0,i=0;t.getAllNodes().forEach((t=>{n.addNode({id:t.id,data:{v:t.id,in:0,out:0}})})),t.getAllEdges().forEach((t=>{const o=n.getRelatedEdges(t.source,"out").find((e=>e.target===t.target)),s=(null===e||void 0===e?void 0:e(t))||1;o?n.updateEdgeData(null===o||void 0===o?void 0:o.id,Object.assign(Object.assign({},o.data),{weight:o.data.weight+s})):n.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:s}}),i=Math.max(i,n.getNode(t.source).data.out+=s),r=Math.max(r,n.getNode(t.target).data.in+=s)}));const o=[],s=i+r+3;for(let c=0;c<s;c++)o.push(new uE);const a=r+1;return n.getAllNodes().forEach((t=>{vE(o,a,Object.assign({v:t.id},n.getNode(t.id).data))})),{buckets:o,zeroIdx:a,graph:n}},vE=(t,e,n)=>{n.out?n["in"]?t[n.out-n["in"]+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)},yE=(t,e)=>{const n=t=>t=>t.data.weight||1,r="greedy"===e?dE(t,n(t)):mE(t);null===r||void 0===r||r.forEach((e=>{const n=e.data;t.removeEdge(e.id),n.forwardName=e.data.name,n.reversed=!0,t.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign({},n)})}))},mE=t=>{const e=[],n={},r={},i=o=>{r[o]||(r[o]=!0,n[o]=!0,t.getRelatedEdges(o,"out").forEach((t=>{n[t.target]?e.push(t):i(t.target)})),delete n[o])};return t.getAllNodes().forEach((t=>i(t.id))),e},bE=t=>{t.getAllEdges().forEach((e=>{const n=e.data;if(n.reversed){t.removeEdge(e.id);const r=n.forwardName;delete n.reversed,delete n.forwardName,t.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign(Object.assign({},n),{forwardName:r})})}}))},xE=(t,e)=>Number(t)-Number(e),wE=(t,e,n,r)=>{let i;do{i=`${r}${Math.random()}`}while(t.hasNode(i));return n.dummy=e,t.addNode({id:i,data:n}),i},EE=t=>{const e=new jw;return t.getAllNodes().forEach((t=>{e.addNode(Object.assign({},t))})),t.getAllEdges().forEach((t=>{const n=e.getRelatedEdges(t.source,"out").find((e=>e.target===t.target));n?e.updateEdgeData(null===n||void 0===n?void 0:n.id,Object.assign(Object.assign({},n.data),{weight:n.data.weight+t.data.weight||0,minlen:Math.max(n.data.minlen,t.data.minlen||1)})):e.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||0,minlen:t.data.minlen||1}})})),e},kE=t=>{const e=new jw;return t.getAllNodes().forEach((n=>{t.getChildren(n.id).length||e.addNode(Object.assign({},n))})),t.getAllEdges().forEach((t=>{e.addEdge(t)})),e},SE=(t,e)=>null===t||void 0===t?void 0:t.reduce(((t,n,r)=>(t[n]=e[r],t)),{}),ME=(t,e)=>{const n=Number(t.x),r=Number(t.y),i=Number(e.x)-n,o=Number(e.y)-r;let s,a,c=Number(t.width)/2,l=Number(t.height)/2;return i||o?(Math.abs(o)*c>Math.abs(i)*l?(o<0&&(l=-l),s=l*i/o,a=l):(i<0&&(c=-c),s=c,a=c*o/i),{x:n+s,y:r+a}):{x:0,y:0}},OE=t=>{const e=[],n=CE(t)+1;for(let r=0;r<n;r++)e.push([]);t.getAllNodes().forEach((t=>{const n=t.data.rank;void 0!==n&&e[n]&&e[n].push(t.id)}));for(let r=0;r<n;r++)e[r]=e[r].sort(((e,n)=>xE(t.getNode(e).data.order,t.getNode(n).data.order)));return e},NE=t=>{const e=t.getAllNodes().filter((t=>void 0!==t.data.rank)).map((t=>t.data.rank)),n=Math.min(...e);t.getAllNodes().forEach((t=>{t.data.hasOwnProperty("rank")&&n!==1/0&&(t.data.rank-=n)}))},TE=(t,e=0)=>{const n=t.getAllNodes(),r=n.filter((t=>void 0!==t.data.rank)).map((t=>t.data.rank)),i=Math.min(...r),o=[];n.forEach((t=>{const e=(t.data.rank||0)-i;o[e]||(o[e]=[]),o[e].push(t.id)}));let s=0;for(let a=0;a<o.length;a++){const n=o[a];void 0===n?a%e!==0&&(s-=1):s&&(null===n||void 0===n||n.forEach((e=>{const n=t.getNode(e);n&&(n.data.rank=n.data.rank||0,n.data.rank+=s)})))}},AE=(t,e,n,r)=>{const i={width:0,height:0};return Ae(n)&&Ae(r)&&(i.rank=n,i.order=r),wE(t,"border",i,e)},CE=t=>{let e;return t.getAllNodes().forEach((t=>{const n=t.data.rank;void 0!==n&&(void 0===e||n>e)&&(e=n)})),e||(e=0),e},PE=(t,e)=>{const n={lhs:[],rhs:[]};return null===t||void 0===t||t.forEach((t=>{e(t)?n.lhs.push(t):n.rhs.push(t)})),n},RE=(t,e)=>t.reduce(((t,n)=>{const r=e(t),i=e(n);return r>i?n:t})),_E=(t,e,n,r,i,o)=>{r.includes(e.id)||(r.push(e.id),n||o.push(e.id),i(e.id).forEach((e=>_E(t,e,n,r,i,o))),n&&o.push(e.id))},LE=(t,e,n,r)=>{const i=Array.isArray(e)?e:[e],o=e=>r?t.getSuccessors(e):t.getNeighbors(e),s=[],a=[];return i.forEach((e=>{if(!t.hasNode(e.id))throw new Error(`Graph does not have node: ${e}`);_E(t,e,"post"===n,a,o,s)})),s},DE=t=>{const e=n=>{const r=t.getChildren(n),i=t.getNode(n);if((null===r||void 0===r?void 0:r.length)&&r.forEach((t=>e(t.id))),i.data.hasOwnProperty("minRank")){i.data.borderLeft=[],i.data.borderRight=[];for(let e=i.data.minRank,r=i.data.maxRank+1;e<r;e+=1)IE(t,"borderLeft","_bl",n,i,e),IE(t,"borderRight","_br",n,i,e)}};t.getRoots().forEach((t=>e(t.id)))},IE=(t,e,n,r,i,o)=>{const s={rank:o,borderType:e,width:0,height:0},a=i.data[e][o-1],c=wE(t,"border",s,n);i.data[e][o]=c,t.setParent(c,r),a&&t.addEdge({id:`e${Math.random()}`,source:a,target:c,data:{weight:1}})},jE=(t,e)=>{const n=e.toLowerCase();"lr"!==n&&"rl"!==n||BE(t)},FE=(t,e)=>{const n=e.toLowerCase();"bt"!==n&&"rl"!==n||GE(t),"lr"!==n&&"rl"!==n||(WE(t),BE(t))},BE=t=>{t.getAllNodes().forEach((t=>{zE(t)})),t.getAllEdges().forEach((t=>{zE(t)}))},zE=t=>{const e=t.data.width;t.data.width=t.data.height,t.data.height=e},GE=t=>{t.getAllNodes().forEach((t=>{VE(t.data)})),t.getAllEdges().forEach((t=>{var e;null===(e=t.data.points)||void 0===e||e.forEach((t=>VE(t))),t.data.hasOwnProperty("y")&&VE(t.data)}))},VE=t=>{(null===t||void 0===t?void 0:t.y)&&(t.y=-t.y)},WE=t=>{t.getAllNodes().forEach((t=>{UE(t.data)})),t.getAllEdges().forEach((t=>{var e;null===(e=t.data.points)||void 0===e||e.forEach((t=>UE(t))),t.data.hasOwnProperty("x")&&UE(t.data)}))},UE=t=>{const e=t.x;t.x=t.y,t.y=e},HE=t=>{const e=wE(t,"root",{},"_root"),n=YE(t);let r=Math.max(...Object.values(n));Math.abs(r)===1/0&&(r=1);const i=r-1,o=2*i+1;t.getAllEdges().forEach((t=>{t.data.minlen*=o}));const s=qE(t)+1;return t.getRoots().forEach((r=>{$E(t,e,o,s,i,n,r.id)})),{nestingRoot:e,nodeRankFactor:o}},$E=(t,e,n,r,i,o,s)=>{const a=t.getChildren(s);if(!(null===a||void 0===a?void 0:a.length))return void(s!==e&&t.addEdge({id:`e${Math.random()}`,source:e,target:s,data:{weight:0,minlen:n}}));const c=AE(t,"_bt"),l=AE(t,"_bb"),u=t.getNode(s);t.setParent(c,s),u.data.borderTop=c,t.setParent(l,s),u.data.borderBottom=l,null===a||void 0===a||a.forEach((a=>{$E(t,e,n,r,i,o,a.id);const u=a.data.borderTop?a.data.borderTop:a.id,h=a.data.borderBottom?a.data.borderBottom:a.id,d=a.data.borderTop?r:2*r,f=u!==h?1:i-o[s]+1;t.addEdge({id:`e${Math.random()}`,source:c,target:u,data:{minlen:f,weight:d,nestingEdge:!0}}),t.addEdge({id:`e${Math.random()}`,source:h,target:l,data:{minlen:f,weight:d,nestingEdge:!0}})})),t.getParent(s)||t.addEdge({id:`e${Math.random()}`,source:e,target:c,data:{weight:0,minlen:i+o[s]}})},YE=t=>{const e={},n=(r,i)=>{const o=t.getChildren(r);null===o||void 0===o||o.forEach((t=>n(t.id,i+1))),e[r]=i};return t.getRoots().forEach((t=>n(t.id,1))),e},qE=t=>{let e=0;return t.getAllEdges().forEach((t=>{e+=t.data.weight})),e},XE=(t,e)=>{e&&t.removeNode(e),t.getAllEdges().forEach((e=>{e.data.nestingEdge&&t.removeEdge(e.id)}))},KE="edge",ZE="edge-label",JE=(t,e)=>{t.getAllEdges().forEach((n=>QE(t,n,e)))},QE=(t,e,n)=>{let r=e.source,i=t.getNode(r).data.rank;const o=e.target,s=t.getNode(o).data.rank,a=e.data.labelRank;if(s===i+1)return;let c,l,u;for(t.removeEdge(e.id),u=0,++i;i<s;++u,++i)e.data.points=[],l={originalEdge:e,width:0,height:0,rank:i},c=wE(t,KE,l,"_d"),i===a&&(l.width=e.data.width,l.height=e.data.height,l.dummy=ZE,l.labelpos=e.data.labelpos),t.addEdge({id:`e${Math.random()}`,source:r,target:c,data:{weight:e.data.weight}}),0===u&&n.push(c),r=c;t.addEdge({id:`e${Math.random()}`,source:r,target:o,data:{weight:e.data.weight}})},tk=(t,e)=>{e.forEach((e=>{let n=t.getNode(e);const{data:r}=n,i=r.originalEdge;let o;i&&t.addEdge(i);let s=e;while(n.data.dummy)o=t.getSuccessors(s)[0],t.removeNode(s),i.data.points.push({x:n.data.x,y:n.data.y}),n.data.dummy===ZE&&(i.data.x=n.data.x,i.data.y=n.data.y,i.data.width=n.data.width,i.data.height=n.data.height),s=o.id,n=t.getNode(s)}))},ek=(t,e,n)=>{const r={};let i;null===n||void 0===n||n.forEach((n=>{let o,s,a=t.getParent(n);while(a){if(o=t.getParent(a.id),o?(s=r[o.id],r[o.id]=a.id):(s=i,i=a.id),s&&s!==a.id)return e.hasNode(s)||e.addNode({id:s,data:{}}),e.hasNode(a.id)||e.addNode({id:a.id,data:{}}),void(e.hasEdge(`e${s}-${a.id}`)||e.addEdge({id:`e${s}-${a.id}`,source:s,target:a.id,data:{}}));a=o}}))},nk=(t,e,n)=>{const r=rk(t),i=new jw({tree:[{id:r,children:[],data:{}}]});return t.getAllNodes().forEach((o=>{const s=t.getParent(o.id);(o.data.rank===e||o.data.minRank<=e&&e<=o.data.maxRank)&&(i.hasNode(o.id)||i.addNode(Object.assign({},o)),(null===s||void 0===s?void 0:s.id)&&!i.hasNode(null===s||void 0===s?void 0:s.id)&&i.addNode(Object.assign({},s)),i.setParent(o.id,(null===s||void 0===s?void 0:s.id)||r),t.getRelatedEdges(o.id,n).forEach((e=>{const n=e.source===o.id?e.target:e.source;i.hasNode(n)||i.addNode(Object.assign({},t.getNode(n)));const r=i.getRelatedEdges(n,"out").find((({target:t})=>t===o.id)),s=void 0!==r?r.data.weight:0;r?i.updateEdgeData(r.id,Object.assign(Object.assign({},r.data),{weight:e.data.weight+s})):i.addEdge({id:e.id,source:n,target:o.id,data:{weight:e.data.weight+s}})})),o.data.hasOwnProperty("minRank")&&i.updateNodeData(o.id,Object.assign(Object.assign({},o.data),{borderLeft:o.data.borderLeft[e],borderRight:o.data.borderRight[e]})))})),i},rk=t=>{let e;while(t.hasNode(e=`_root${Math.random()}`));return e},ik=(t,e,n)=>{const r=SE(n,n.map(((t,e)=>e))),i=e.map((e=>{const n=t.getRelatedEdges(e,"out").map((t=>({pos:r[t.target]||0,weight:t.data.weight})));return null===n||void 0===n?void 0:n.sort(((t,e)=>t.pos-e.pos))})),o=i.flat().filter((t=>void 0!==t));let s=1;while(s<n.length)s<<=1;const a=2*s-1;s-=1;const c=Array(a).fill(0,0,a);let l=0;return null===o||void 0===o||o.forEach((t=>{if(t){let e=t.pos+s;c[e]+=t.weight;let n=0;while(e>0)e%2&&(n+=c[e+1]),e=e-1>>1,c[e]+=t.weight;l+=t.weight*n}})),l},ok=(t,e)=>{let n=0;for(let r=1;r<(null===e||void 0===e?void 0:e.length);r+=1)n+=ik(t,e[r-1],e[r]);return n},sk=t=>{const e={},n=t.getAllNodes(),r=n.map((t=>{var e;return null!==(e=t.data.rank)&&void 0!==e?e:-1/0})),i=Math.max(...r),o=[];for(let l=0;l<i+1;l++)o.push([]);const s=n.sort(((e,n)=>t.getNode(e.id).data.rank-t.getNode(n.id).data.rank)),a=s.filter((e=>void 0!==t.getNode(e.id).data.fixorder)),c=a.sort(((e,n)=>t.getNode(e.id).data.fixorder-t.getNode(n.id).data.fixorder));return null===c||void 0===c||c.forEach((n=>{isNaN(t.getNode(n.id).data.rank)||o[t.getNode(n.id).data.rank].push(n.id),e[n.id]=!0})),null===s||void 0===s||s.forEach((n=>t.dfsTree(n.id,(t=>{if(e.hasOwnProperty(t.id))return!0;e[t.id]=!0,isNaN(t.data.rank)||o[t.data.rank].push(t.id)})))),o},ak=(t,e)=>e.map((e=>{const n=t.getRelatedEdges(e,"in");if(!(null===n||void 0===n?void 0:n.length))return{v:e};const r={sum:0,weight:0};return null===n||void 0===n||n.forEach((e=>{const n=t.getNode(e.source);r.sum+=e.data.weight*n.data.order,r.weight+=e.data.weight})),{v:e,barycenter:r.sum/r.weight,weight:r.weight}})),ck=(t,e)=>{var n,r,i;const o={};null===t||void 0===t||t.forEach(((t,e)=>{o[t.v]={i:e,indegree:0,in:[],out:[],vs:[t.v]};const n=o[t.v];void 0!==t.barycenter&&(n.barycenter=t.barycenter,n.weight=t.weight)})),null===(n=e.getAllEdges())||void 0===n||n.forEach((t=>{const e=o[t.source],n=o[t.target];void 0!==e&&void 0!==n&&(n.indegree++,e.out.push(o[t.target]))}));const s=null===(i=(r=Object.values(o)).filter)||void 0===i?void 0:i.call(r,(t=>!t.indegree));return lk(s)},lk=t=>{var e,n;const r=[],i=t=>e=>{e.merged||(void 0===e.barycenter||void 0===t.barycenter||e.barycenter>=t.barycenter)&&uk(t,e)},o=e=>n=>{n["in"].push(e),0===--n.indegree&&t.push(n)};while(null===t||void 0===t?void 0:t.length){const s=t.pop();r.push(s),null===(e=s["in"].reverse())||void 0===e||e.forEach((t=>i(s)(t))),null===(n=s.out)||void 0===n||n.forEach((t=>o(s)(t)))}const s=r.filter((t=>!t.merged)),a=["vs","i","barycenter","weight"];return s.map((t=>{const e={};return null===a||void 0===a||a.forEach((n=>{void 0!==t[n]&&(e[n]=t[n])})),e}))},uk=(t,e)=>{var n;let r=0,i=0;t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.vs=null===(n=e.vs)||void 0===n?void 0:n.concat(t.vs),t.barycenter=r/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0};var hk=ck;const dk=(t,e,n,r)=>{const i=PE(t,(t=>{const e=t.hasOwnProperty("fixorder")&&!isNaN(t.fixorder);return r?!e&&t.hasOwnProperty("barycenter"):e||t.hasOwnProperty("barycenter")})),o=i.lhs,s=i.rhs.sort(((t,e)=>-t.i- -e.i)),a=[];let c=0,l=0,u=0;null===o||void 0===o||o.sort(pk(!!e,!!n)),u=fk(a,s,u),null===o||void 0===o||o.forEach((t=>{var e;u+=null===(e=t.vs)||void 0===e?void 0:e.length,a.push(t.vs),c+=t.barycenter*t.weight,l+=t.weight,u=fk(a,s,u)}));const h={vs:a.flat()};return l&&(h.barycenter=c/l,h.weight=l),h},fk=(t,e,n)=>{let r,i=n;while(e.length&&(r=e[e.length-1]).i<=i)e.pop(),null===t||void 0===t||t.push(r.vs),i++;return i},pk=(t,e)=>(n,r)=>{if(void 0!==n.fixorder&&void 0!==r.fixorder)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(e&&void 0!==n.order&&void 0!==r.order){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return t?r.i-n.i:n.i-r.i},gk=(t,e,n,r,i,o)=>{var s,a,c,l;let u=t.getChildren(e).map((t=>t.id));const h=t.getNode(e),d=h?h.data.borderLeft:void 0,f=h?h.data.borderRight:void 0,p={};d&&(u=null===u||void 0===u?void 0:u.filter((t=>t!==d&&t!==f)));const g=ak(t,u||[]);null===g||void 0===g||g.forEach((e=>{var i;if(null===(i=t.getChildren(e.v))||void 0===i?void 0:i.length){const i=gk(t,e.v,n,r,o);p[e.v]=i,i.hasOwnProperty("barycenter")&&yk(e,i)}}));const v=hk(g,n);vk(v,p),null===(s=v.filter((t=>t.vs.length>0)))||void 0===s||s.forEach((e=>{const n=t.getNode(e.vs[0]);n&&(e.fixorder=n.data.fixorder,e.order=n.data.order)}));const y=dk(v,r,i,o);if(d&&(y.vs=[d,y.vs,f].flat(),null===(a=t.getPredecessors(d))||void 0===a?void 0:a.length)){const e=t.getNode((null===(c=t.getPredecessors(d))||void 0===c?void 0:c[0].id)||""),n=t.getNode((null===(l=t.getPredecessors(f))||void 0===l?void 0:l[0].id)||"");y.hasOwnProperty("barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+e.data.order+n.data.order)/(y.weight+2),y.weight+=2}return y},vk=(t,e)=>{null===t||void 0===t||t.forEach((t=>{var n;const r=null===(n=t.vs)||void 0===n?void 0:n.map((t=>e[t]?e[t].vs:t));t.vs=r.flat()}))},yk=(t,e)=>{void 0!==t.barycenter?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)},mk=(t,e)=>{const n=CE(t),r=[],i=[];for(let u=1;u<n+1;u++)r.push(u);for(let u=n-1;u>-1;u--)i.push(u);const o=bk(t,r,"in"),s=bk(t,i,"out");let a=sk(t);wk(t,a);let c,l=Number.POSITIVE_INFINITY;for(let u=0,h=0;h<4;++u,++h){xk(u%2?o:s,u%4>=2,!1,e),a=OE(t);const n=ok(t,a);n<l&&(h=0,c=zf(a),l=n)}a=sk(t),wk(t,a);for(let u=0,h=0;h<4;++u,++h){xk(u%2?o:s,u%4>=2,!0,e),a=OE(t);const n=ok(t,a);n<l&&(h=0,c=zf(a),l=n)}wk(t,c)},bk=(t,e,n)=>e.map((e=>nk(t,e,n))),xk=(t,e,n,r)=>{const i=new jw;null===t||void 0===t||t.forEach((t=>{var o;const s=t.getRoots()[0].id,a=gk(t,s,i,e,n,r);for(let e=0;e<(null===(o=a.vs)||void 0===o?void 0:o.length);e++){const n=t.getNode(a.vs[e]);n&&(n.data.order=e)}ek(t,i,a.vs)}))},wk=(t,e)=>{null===e||void 0===e||e.forEach((e=>{null===e||void 0===e||e.forEach(((e,n)=>{t.getNode(e).data.order=n}))}))},Ek=(t,e)=>{const n=t.getAllNodes().filter((e=>{var n;return!(null===(n=t.getChildren(e.id))||void 0===n?void 0:n.length)})),r=n.map((t=>t.data.rank)),i=Math.max(...r),o=[];for(let s=0;s<i+1;s++)o[s]=[];null===e||void 0===e||e.forEach((e=>{const n=t.getNode(e);n&&!n.data.dummy&&(isNaN(n.data.rank)||(n.data.fixorder=o[n.data.rank].length,o[n.data.rank].push(e)))}))},kk=t=>{const e={};let n=0;const r=i=>{const o=n;t.getChildren(i).forEach((t=>r(t.id))),e[i]={low:o,lim:n++}};return t.getRoots().forEach((t=>r(t.id))),e},Sk=(t,e,n,r)=>{var i,o;const s=[],a=[],c=Math.min(e[n].low,e[r].low),l=Math.max(e[n].lim,e[r].lim);let u,h;u=n;do{u=null===(i=t.getParent(u))||void 0===i?void 0:i.id,s.push(u)}while(u&&(e[u].low>c||l>e[u].lim));h=u,u=r;while(u&&u!==h)a.push(u),u=null===(o=t.getParent(u))||void 0===o?void 0:o.id;return{lca:h,path:s.concat(a.reverse())}},Mk=(t,e)=>{const n=kk(t);e.forEach((e=>{var r,i;let o=e,s=t.getNode(o);const a=s.data.originalEdge;if(!a)return;const c=Sk(t,n,a.source,a.target),l=c.path,u=c.lca;let h=0,d=l[h],f=!0;while(o!==a.target){if(s=t.getNode(o),f){while(d!==u&&(null===(r=t.getNode(d))||void 0===r?void 0:r.data.maxRank)<s.data.rank)h++,d=l[h];d===u&&(f=!1)}if(!f){while(h<l.length-1&&(null===(i=t.getNode(l[h+1]))||void 0===i?void 0:i.data.minRank)<=s.data.rank)h++;d=l[h]}t.hasNode(d)&&t.setParent(o,d),o=t.getSuccessors(o)[0].id}}))},Ok=(t,e)=>{const n={},r=(e,r)=>{let i=0,o=0;const s=e.length,a=null===r||void 0===r?void 0:r[(null===r||void 0===r?void 0:r.length)-1];return null===r||void 0===r||r.forEach(((e,c)=>{var l;const u=Tk(t,e),h=u?t.getNode(u.id).data.order:s;(u||e===a)&&(null===(l=r.slice(o,c+1))||void 0===l||l.forEach((e=>{var r;null===(r=t.getPredecessors(e))||void 0===r||r.forEach((r=>{var o;const s=t.getNode(r.id),a=s.data.order;!(a<i||h<a)||s.data.dummy&&(null===(o=t.getNode(e))||void 0===o?void 0:o.data.dummy)||Ak(n,r.id,e)}))})),o=c+1,i=h)})),r};return(null===e||void 0===e?void 0:e.length)&&e.reduce(r),n},Nk=(t,e)=>{const n={};function r(e,r,i,o,s){var a,c;let l;for(let u=r;u<i;u++)l=e[u],(null===(a=t.getNode(l))||void 0===a?void 0:a.data.dummy)&&(null===(c=t.getPredecessors(l))||void 0===c||c.forEach((e=>{const r=t.getNode(e.id);r.data.dummy&&(r.data.order<o||r.data.order>s)&&Ak(n,e.id,l)})))}function i(t){return JSON.stringify(t.slice(1))}function o(t,e){const n=i(t);e.get(n)||(r(...t),e.set(n,!0))}const s=(e,n)=>{let r,i=-1,s=0;const a=new Map;return null===n||void 0===n||n.forEach(((c,l)=>{var u;if("border"===(null===(u=t.getNode(c))||void 0===u?void 0:u.data.dummy)){const e=t.getPredecessors(c)||[];e.length&&(r=t.getNode(e[0].id).data.order,o([n,s,l,i,r],a),s=l,i=r)}o([n,s,n.length,r,e.length],a)})),n};return(null===e||void 0===e?void 0:e.length)&&e.reduce(s),n},Tk=(t,e)=>{var n,r;if(null===(n=t.getNode(e))||void 0===n?void 0:n.data.dummy)return null===(r=t.getPredecessors(e))||void 0===r?void 0:r.find((e=>t.getNode(e.id).data.dummy))},Ak=(t,e,n)=>{let r=e,i=n;if(r>i){const t=r;r=i,i=t}let o=t[r];o||(t[r]=o={}),o[i]=!0},Ck=(t,e,n)=>{let r=e,i=n;if(r>i){const t=e;r=i,i=t}return!!t[r]},Pk=(t,e,n,r)=>{const i={},o={},s={};return null===e||void 0===e||e.forEach((t=>{null===t||void 0===t||t.forEach(((t,e)=>{i[t]=t,o[t]=t,s[t]=e}))})),null===e||void 0===e||e.forEach((t=>{let e=-1;null===t||void 0===t||t.forEach((t=>{let a=r(t).map((t=>t.id));if(a.length){a=a.sort(((t,e)=>s[t]-s[e]));const r=(a.length-1)/2;for(let c=Math.floor(r),l=Math.ceil(r);c<=l;++c){const r=a[c];o[t]===t&&e<s[r]&&!Ck(n,t,r)&&(o[r]=t,o[t]=i[t]=i[r],e=s[r])}}}))})),{root:i,align:o}},Rk=(t,e,n,r,i,o,s)=>{var a;const c={},l=_k(t,e,n,i,o,s),u=s?"borderLeft":"borderRight",h=(t,e)=>{let n=l.getAllNodes(),r=n.pop();const i={};while(r)i[r.id]?t(r.id):(i[r.id]=!0,n.push(r),n=n.concat(e(r.id))),r=n.pop()},d=t=>{c[t]=(l.getRelatedEdges(t,"in")||[]).reduce(((t,e)=>Math.max(t,(c[e.source]||0)+e.data.weight)),0)},f=e=>{const n=(l.getRelatedEdges(e,"out")||[]).reduce(((t,e)=>Math.min(t,(c[e.target]||0)-e.data.weight)),Number.POSITIVE_INFINITY),r=t.getNode(e);n!==Number.POSITIVE_INFINITY&&r.data.borderType!==u&&(c[e]=Math.max(c[e],n))};return h(d,l.getPredecessors.bind(l)),h(f,l.getSuccessors.bind(l)),null===(a=Object.values(r))||void 0===a||a.forEach((t=>{c[t]=c[n[t]]})),c},_k=(t,e,n,r,i,o)=>{const s=new jw,a=jk(r,i,o);return null===e||void 0===e||e.forEach((e=>{let r;null===e||void 0===e||e.forEach((e=>{const i=n[e];if(s.hasNode(i)||s.addNode({id:i,data:{}}),r){const o=n[r],c=s.getRelatedEdges(o,"out").find((t=>t.target===i));c?s.updateEdgeData(c.id,Object.assign(Object.assign({},c.data),{weight:Math.max(a(t,e,r),c.data.weight||0)})):s.addEdge({id:`e${Math.random()}`,source:o,target:i,data:{weight:Math.max(a(t,e,r),0)}})}r=e}))})),s},Lk=(t,e)=>RE(Object.values(e),(e=>{var n;let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return null===(n=Object.keys(e))||void 0===n||n.forEach((n=>{const o=e[n],s=Fk(t,n)/2;r=Math.max(o+s,r),i=Math.min(o-s,i)})),r-i}));function Dk(t,e){const n=Object.values(e),r=Math.min(...n),i=Math.max(...n);["u","d"].forEach((n=>{["l","r"].forEach((o=>{const s=n+o,a=t[s];let c;if(a===e)return;const l=Object.values(a);c="l"===o?r-Math.min(...l):i-Math.max(...l),c&&(t[s]={},Object.keys(a).forEach((e=>{t[s][e]=a[e]+c})))}))}))}const Ik=(t,e)=>{const n={};return Object.keys(t.ul).forEach((r=>{if(e)n[r]=t[e.toLowerCase()][r];else{const e=Object.values(t).map((t=>t[r]));n[r]=(e[0]+e[1])/2}})),n},jk=(t,e,n)=>(r,i,o)=>{const s=r.getNode(i),a=r.getNode(o);let c=0,l=0;if(c+=s.data.width/2,s.data.hasOwnProperty("labelpos"))switch((s.data.labelpos||"").toLowerCase()){case"l":l=-s.data.width/2;break;case"r":l=s.data.width/2;break}if(l&&(c+=n?l:-l),l=0,c+=(s.data.dummy?e:t)/2,c+=(a.data.dummy?e:t)/2,c+=a.data.width/2,a.data.labelpos)switch((a.data.labelpos||"").toLowerCase()){case"l":l=a.data.width/2;break;case"r":l=-a.data.width/2;break}return l&&(c+=n?l:-l),l=0,c},Fk=(t,e)=>t.getNode(e).data.width||0,Bk=(t,e)=>{const{ranksep:n=0}=e||{},r=OE(t);let i=0;null===r||void 0===r||r.forEach((e=>{const r=e.map((e=>t.getNode(e).data.height)),o=Math.max(...r,0);null===e||void 0===e||e.forEach((e=>{t.getNode(e).data.y=i+o/2})),i+=o+n}))},zk=(t,e)=>{const{align:n,nodesep:r=0,edgesep:i=0}=e||{},o=OE(t),s=Object.assign(Ok(t,o),Nk(t,o)),a={};let c=[];["u","d"].forEach((e=>{c="u"===e?o:Object.values(o).reverse(),["l","r"].forEach((n=>{"r"===n&&(c=c.map((t=>Object.values(t).reverse())));const o=("u"===e?t.getPredecessors:t.getSuccessors).bind(t),l=Pk(t,c,s,o),u=Rk(t,c,l.root,l.align,r,i,"r"===n);"r"===n&&Object.keys(u).forEach((t=>u[t]=-u[t])),a[e+n]=u}))}));const l=Lk(t,a);return l&&Dk(a,l),Ik(a,n)},Gk=(t,e)=>{var n;const r=kE(t);Bk(r,e);const i=zk(r,e);null===(n=Object.keys(i))||void 0===n||n.forEach((t=>{r.getNode(t).data.x=i[t]}))},Vk=t=>{const e={},n=r=>{var i;const o=t.getNode(r);if(!o)return 0;if(e[r])return o.data.rank;let s;return e[r]=!0,null===(i=t.getRelatedEdges(r,"out"))||void 0===i||i.forEach((t=>{const e=n(t.target),r=t.data.minlen,i=e-r;i&&(void 0===s||i<s)&&(s=i)})),s||(s=0),o.data.rank=s,s};t.getAllNodes().filter((e=>0===t.getRelatedEdges(e.id,"in").length)).forEach((t=>n(t.id)))},Wk=t=>{const e={};let n;const r=i=>{var o;const s=t.getNode(i);if(!s)return 0;if(e[i])return s.data.rank;let a;return e[i]=!0,null===(o=t.getRelatedEdges(i,"out"))||void 0===o||o.forEach((t=>{const e=r(t.target),n=t.data.minlen,i=e-n;i&&(void 0===a||i<a)&&(a=i)})),a||(a=0),(void 0===n||a<n)&&(n=a),s.data.rank=a,a};t.getAllNodes().filter((e=>0===t.getRelatedEdges(e.id,"in").length)).forEach((t=>{t&&r(t.id)})),void 0===n&&(n=0);const i={},o=(e,n)=>{var r;const s=t.getNode(e),a=isNaN(s.data.layer)?n:s.data.layer;(void 0===s.data.rank||s.data.rank<a)&&(s.data.rank=a),i[e]||(i[e]=!0,null===(r=t.getRelatedEdges(e,"out"))||void 0===r||r.forEach((t=>{o(t.target,a+t.data.minlen)})))};t.getAllNodes().forEach((t=>{const e=t.data;e&&(isNaN(e.layer)?e.rank-=n:o(t.id,e.layer))}))},Uk=(t,e)=>t.getNode(e.target).data.rank-t.getNode(e.source).data.rank-e.data.minlen,Hk=t=>{const e=new jw({tree:[]}),n=t.getAllNodes()[0],r=t.getAllNodes().length;let i,o;e.addNode(n);while($k(e,t)<r)i=Xk(e,t),o=e.hasNode(i.source)?Uk(t,i):-Uk(t,i),Kk(e,t,o);return e},$k=(t,e)=>{const n=r=>{e.getRelatedEdges(r,"both").forEach((i=>{const o=i.source,s=r===o?i.target:o;t.hasNode(s)||Uk(e,i)||(t.addNode({id:s,data:{}}),t.addEdge({id:i.id,source:r,target:s,data:{}}),n(s))}))};return t.getAllNodes().forEach((t=>n(t.id))),t.getAllNodes().length},Yk=t=>{const e=new jw({tree:[]}),n=t.getAllNodes()[0],r=t.getAllNodes().length;let i,o;e.addNode(n);while(qk(e,t)<r)i=Xk(e,t),o=e.hasNode(i.source)?Uk(t,i):-Uk(t,i),Kk(e,t,o);return e},qk=(t,e)=>{const n=r=>{var i;null===(i=e.getRelatedEdges(r,"both"))||void 0===i||i.forEach((i=>{const o=i.source,s=r===o?i.target:o;t.hasNode(s)||void 0===e.getNode(s).data.layer&&Uk(e,i)||(t.addNode({id:s,data:{}}),t.addEdge({id:i.id,source:r,target:s,data:{}}),n(s))}))};return t.getAllNodes().forEach((t=>n(t.id))),t.getAllNodes().length},Xk=(t,e)=>RE(e.getAllEdges(),(n=>t.hasNode(n.source)!==t.hasNode(n.target)?Uk(e,n):1/0)),Kk=(t,e,n)=>{t.getAllNodes().forEach((t=>{const r=e.getNode(t.id);r.data.rank||(r.data.rank=0),r.data.rank+=n}))},Zk=t=>{const e=EE(t);Vk(e);const n=Hk(e);let r,i;eS(n),Jk(n,e);while(r=rS(n))i=iS(n,e,r),oS(n,e,r,i)},Jk=(t,e)=>{let n=LE(t,t.getAllNodes(),"post",!1);n=n.slice(0,(null===n||void 0===n?void 0:n.length)-1),n.forEach((n=>{Qk(t,e,n)}))},Qk=(t,e,n)=>{const r=t.getNode(n),i=r.data.parent,o=t.getRelatedEdges(n,"both").find((t=>t.target===i||t.source===i));o.data.cutvalue=tS(t,e,n)},tS=(t,e,n)=>{const r=t.getNode(n),i=r.data.parent;let o=!0,s=e.getRelatedEdges(n,"out").find((t=>t.target===i)),a=0;return s||(o=!1,s=e.getRelatedEdges(i,"out").find((t=>t.target===n))),a=s.data.weight,e.getRelatedEdges(n,"both").forEach((e=>{const r=e.source===n,s=r?e.target:e.source;if(s!==i){const i=r===o,c=e.data.weight;if(a+=i?c:-c,aS(t,n,s)){const e=t.getRelatedEdges(n,"both").find((t=>t.source===s||t.target===s)).data.cutvalue;a+=i?-e:e}}})),a},eS=(t,e=t.getAllNodes()[0].id)=>{nS(t,{},1,e)},nS=(t,e,n,r,i)=>{var o;const s=n;let a=n;const c=t.getNode(r);return e[r]=!0,null===(o=t.getNeighbors(r))||void 0===o||o.forEach((n=>{e[n.id]||(a=nS(t,e,a,n.id,r))})),c.data.low=s,c.data.lim=a++,i?c.data.parent=i:delete c.data.parent,a},rS=t=>t.getAllEdges().find((t=>t.data.cutvalue<0)),iS=(t,e,n)=>{let r=n.source,i=n.target;e.getRelatedEdges(r,"out").find((t=>t.target===i))||(r=n.target,i=n.source);const o=t.getNode(r),s=t.getNode(i);let a=o,c=!1;o.data.lim>s.data.lim&&(a=s,c=!0);const l=e.getAllEdges().filter((e=>c===cS(t.getNode(e.source),a)&&c!==cS(t.getNode(e.target),a)));return RE(l,(t=>Uk(e,t)))},oS=(t,e,n,r)=>{const i=t.getRelatedEdges(n.source,"both").find((t=>t.source===n.target||t.target===n.target));i&&t.removeEdge(i.id),t.addEdge({id:`e${Math.random()}`,source:r.source,target:r.target,data:{}}),eS(t),Jk(t,e),sS(t,e)},sS=(t,e)=>{const n=t.getAllNodes().find((t=>!t.data.parent));let r=LE(t,n,"pre",!1);r=r.slice(1),r.forEach((n=>{const r=t.getNode(n).data.parent;let i=e.getRelatedEdges(n,"out").find((t=>t.target===r)),o=!1;!i&&e.hasNode(r)&&(i=e.getRelatedEdges(r,"out").find((t=>t.target===n)),o=!0),e.getNode(n).data.rank=(e.hasNode(r)&&e.getNode(r).data.rank||0)+(o?null===i||void 0===i?void 0:i.data.minlen:-(null===i||void 0===i?void 0:i.data.minlen))}))},aS=(t,e,n)=>t.getRelatedEdges(e,"both").find((t=>t.source===n||t.target===n)),cS=(t,e)=>e.data.low<=t.data.lim&&t.data.lim<=e.data.lim,lS=(t,e)=>{switch(e){case"network-simplex":dS(t);break;case"tight-tree":hS(t);break;case"longest-path":uS(t);break;default:hS(t)}},uS=Vk,hS=t=>{Wk(t),Yk(t)},dS=t=>{Zk(t)},fS=(t,e)=>{const{edgeLabelSpace:n,keepNodeOrder:r,prevGraph:i,rankdir:o,ranksep:s}=e;!r&&i&&gS(t,i);const a=ES(t);let c;n&&(e.ranksep=kS(a,{rankdir:o,ranksep:s}));try{c=pS(a,e)}catch(l){if("Not possible to find intersection inside of the rectangle"===l.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",l);throw l}return vS(t,a),c},pS=(t,e)=>{const{acyclicer:n,ranker:r,rankdir:i="tb",nodeOrder:o,keepNodeOrder:s,align:a,nodesep:c=50,edgesep:l=20,ranksep:u=50}=e;RS(t),yE(t,n);const{nestingRoot:h,nodeRankFactor:d}=HE(t);lS(kE(t),r),SS(t),TE(t,d),XE(t,h),NE(t),MS(t),OS(t);const f=[];JE(t,f),Mk(t,f),DE(t),s&&Ek(t,o),mk(t,s),_S(t),jE(t,i),Gk(t,{align:a,nodesep:c,edgesep:l,ranksep:u}),LS(t),PS(t),tk(t,f),AS(t),FE(t,i);const{width:p,height:g}=NS(t);return TS(t),CS(t),bE(t),{width:p,height:g}},gS=(t,e)=>{t.getAllNodes().forEach((n=>{const r=t.getNode(n.id);if(e.hasNode(n.id)){const t=e.getNode(n.id);r.data.fixorder=t.data._order,delete t.data._order}else delete r.data.fixorder}))},vS=(t,e)=>{t.getAllNodes().forEach((n=>{var r;const i=t.getNode(n.id);if(i){const t=e.getNode(n.id);i.data.x=t.data.x,i.data.y=t.data.y,i.data._order=t.data.order,i.data._rank=t.data.rank,(null===(r=e.getChildren(n.id))||void 0===r?void 0:r.length)&&(i.data.width=t.data.width,i.data.height=t.data.height)}})),t.getAllEdges().forEach((n=>{const r=t.getEdge(n.id),i=e.getEdge(n.id);r.data.points=i?i.data.points:[],i&&i.data.hasOwnProperty("x")&&(r.data.x=i.data.x,r.data.y=i.data.y)}))},yS=["width","height","layer","fixorder"],mS={width:0,height:0},bS=["minlen","weight","width","height","labeloffset"],xS={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},wS=["labelpos"],ES=t=>{const e=new jw({tree:[]});return t.getAllNodes().forEach((n=>{const r=IS(t.getNode(n.id).data),i=Object.assign(Object.assign({},mS),r),o=DS(i,yS);e.hasNode(n.id)||e.addNode({id:n.id,data:Object.assign({},o)});const s=t.hasTreeStructure("combo")?t.getParent(n.id,"combo"):t.getParent(n.id);Pe(s)||(e.hasNode(s.id)||e.addNode(Object.assign({},s)),e.setParent(n.id,s.id))})),t.getAllEdges().forEach((n=>{const r=IS(t.getEdge(n.id).data),i={};null===wS||void 0===wS||wS.forEach((t=>{void 0!==r[t]&&(i[t]=r[t])})),e.addEdge({id:n.id,source:n.source,target:n.target,data:Object.assign({},xS,DS(r,bS),i)})})),e},kS=(t,e)=>{const{ranksep:n=0,rankdir:r}=e;return t.getAllNodes().forEach((t=>{isNaN(t.data.layer)||t.data.layer||(t.data.layer=0)})),t.getAllEdges().forEach((t=>{var e;t.data.minlen*=2,"c"!==(null===(e=t.data.labelpos)||void 0===e?void 0:e.toLowerCase())&&("TB"===r||"BT"===r?t.data.width+=t.data.labeloffset:t.data.height+=t.data.labeloffset)})),n/2},SS=t=>{t.getAllEdges().forEach((e=>{if(e.data.width&&e.data.height){const n=t.getNode(e.source),r=t.getNode(e.target),i={e:e,rank:(r.data.rank-n.data.rank)/2+n.data.rank};wE(t,"edge-proxy",i,"_ep")}}))},MS=t=>{let e=0;return t.getAllNodes().forEach((n=>{var r,i;n.data.borderTop&&(n.data.minRank=null===(r=t.getNode(n.data.borderTop))||void 0===r?void 0:r.data.rank,n.data.maxRank=null===(i=t.getNode(n.data.borderBottom))||void 0===i?void 0:i.data.rank,e=Math.max(e,n.data.maxRank||-1/0))})),e},OS=t=>{t.getAllNodes().forEach((e=>{"edge-proxy"===e.data.dummy&&(t.getEdge(e.data.e.id).data.labelRank=e.data.rank,t.removeNode(e.id))}))},NS=(t,e)=>{let n,r,i=0,o=0;const{marginx:s=0,marginy:a=0}=e||{},c=t=>{if(!t.data)return;const e=t.data.x,s=t.data.y,a=t.data.width,c=t.data.height;isNaN(e)||isNaN(a)||(void 0===n&&(n=e-a/2),n=Math.min(n,e-a/2),i=Math.max(i,e+a/2)),isNaN(s)||isNaN(c)||(void 0===r&&(r=s-c/2),r=Math.min(r,s-c/2),o=Math.max(o,s+c/2))};return t.getAllNodes().forEach((t=>{c(t)})),t.getAllEdges().forEach((t=>{(null===t||void 0===t?void 0:t.data.hasOwnProperty("x"))&&c(t)})),n-=s,r-=a,t.getAllNodes().forEach((t=>{t.data.x-=n,t.data.y-=r})),t.getAllEdges().forEach((t=>{var e;null===(e=t.data.points)||void 0===e||e.forEach((t=>{t.x-=n,t.y-=r})),t.data.hasOwnProperty("x")&&(t.data.x-=n),t.data.hasOwnProperty("y")&&(t.data.y-=r)})),{width:i-n+s,height:o-r+a}},TS=t=>{t.getAllEdges().forEach((e=>{const n=t.getNode(e.source),r=t.getNode(e.target);let i,o;e.data.points?(i=e.data.points[0],o=e.data.points[e.data.points.length-1]):(e.data.points=[],i={x:r.data.x,y:r.data.y},o={x:n.data.x,y:n.data.y}),e.data.points.unshift(ME(n.data,i)),e.data.points.push(ME(r.data,o))}))},AS=t=>{t.getAllEdges().forEach((t=>{if(t.data.hasOwnProperty("x"))switch("l"!==t.data.labelpos&&"r"!==t.data.labelpos||(t.data.width-=t.data.labeloffset),t.data.labelpos){case"l":t.data.x-=t.data.width/2+t.data.labeloffset;break;case"r":t.data.x+=t.data.width/2+t.data.labeloffset;break}}))},CS=t=>{t.getAllEdges().forEach((t=>{var e;t.data.reversed&&(null===(e=t.data.points)||void 0===e||e.reverse())}))},PS=t=>{t.getAllNodes().forEach((e=>{var n,r,i;if(null===(n=t.getChildren(e.id))||void 0===n?void 0:n.length){const n=t.getNode(e.id),o=t.getNode(n.data.borderTop),s=t.getNode(n.data.borderBottom),a=t.getNode(n.data.borderLeft[(null===(r=n.data.borderLeft)||void 0===r?void 0:r.length)-1]),c=t.getNode(n.data.borderRight[(null===(i=n.data.borderRight)||void 0===i?void 0:i.length)-1]);n.data.width=Math.abs((null===c||void 0===c?void 0:c.data.x)-(null===a||void 0===a?void 0:a.data.x))||10,n.data.height=Math.abs((null===s||void 0===s?void 0:s.data.y)-(null===o||void 0===o?void 0:o.data.y))||10,n.data.x=((null===a||void 0===a?void 0:a.data.x)||0)+n.data.width/2,n.data.y=((null===o||void 0===o?void 0:o.data.y)||0)+n.data.height/2}})),t.getAllNodes().forEach((e=>{"border"===e.data.dummy&&t.removeNode(e.id)}))},RS=t=>{t.getAllEdges().forEach((e=>{if(e.source===e.target){const n=t.getNode(e.source);n.data.selfEdges||(n.data.selfEdges=[]),n.data.selfEdges.push(e),t.removeEdge(e.id)}}))},_S=t=>{const e=OE(t);null===e||void 0===e||e.forEach((e=>{let n=0;null===e||void 0===e||e.forEach(((e,r)=>{var i;const o=t.getNode(e);o.data.order=r+n,null===(i=o.data.selfEdges)||void 0===i||i.forEach((e=>{wE(t,"selfedge",{width:e.data.width,height:e.data.height,rank:o.data.rank,order:r+ ++n,e:e},"_se")})),delete o.data.selfEdges}))}))},LS=t=>{t.getAllNodes().forEach((e=>{const n=t.getNode(e.id);if("selfedge"===n.data.dummy){const r=t.getNode(n.data.e.source),i=r.data.x+r.data.width/2,o=r.data.y,s=n.data.x-i,a=r.data.height/2;t.hasEdge(n.data.e.id)?t.updateEdgeData(n.data.e.id,n.data.e.data):t.addEdge({id:n.data.e.id,source:n.data.e.source,target:n.data.e.target,data:n.data.e.data}),t.removeNode(e.id),n.data.e.data.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{y:o,x:i+s},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.data.e.data.x=n.data.x,n.data.e.data.y=n.data.y}}))},DS=(t,e)=>{const n={};return null===e||void 0===e||e.forEach((e=>{void 0!==t[e]&&(n[e]=+t[e])})),n},IS=(t={})=>{const e={};return Object.keys(t).forEach((n=>{e[n.toLowerCase()]=t[n]})),e};function jS(t){if(!t)return[0,0,0];if(Ae(t))return[t,t,t];if(0===t.length)return[0,0,0];const[e,n=e,r=e]=t;return[e,n,r]}function FS(t,e){let n;return n=nr(e)?e:Ae(e)?()=>e:()=>t,n}function BS(t,e,n=!0){return e||0===e?nr(e)?e:Ae(e)?()=>e:Array.isArray(e)?()=>n?Math.max(...e)||t:e:rr(e)&&e.width&&e.height?()=>n?Math.max(e.width,e.height)||t:[e.width,e.height]:()=>t:e=>{const{size:r}=e.data||{};return r?Array.isArray(r)?n?Math.max(...r)||t:r:rr(r)&&r.width&&r.height?n?Math.max(r.width,r.height)||t:[r.width,r.height]:r:t}}const zS=(t,e,n=10)=>{let r;const i="function"===typeof e?e:()=>e||0;r=t?Array.isArray(t)?e=>t:nr(t)?t:e=>t:t=>{var e,r,i;if(null===(e=t.data)||void 0===e?void 0:e.bboxSize)return null===(r=t.data)||void 0===r?void 0:r.bboxSize;if(null===(i=t.data)||void 0===i?void 0:i.size){const e=t.data.size;return Array.isArray(e)?e:rr(e)?[e.width,e.height]:e}return n};const o=t=>{const e=r(t),n=i(t);return Math.max(...jS(e))+n};return o},GS=t=>{if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){const e=[];return t.forEach((t=>{e.push(t)})),e.map((t=>GS(t)))}if("object"===typeof t){const e={};return Object.keys(t).forEach((n=>{e[n]=GS(t[n])})),e}return t},VS=(t,e)=>{const n=GS(t);return n.data=n.data||{},e&&(Ae(n.data.x)||(n.data.x=Math.random()*e[0]),Ae(n.data.y)||(n.data.y=Math.random()*e[1])),n},WS={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null};class US{constructor(t={}){this.options=t,this.id="antv-dagre",this.options=Object.assign(Object.assign({},WS),t)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericDagreLayout(!1,t,e)}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericDagreLayout(!0,t,e)}))}genericDagreLayout(t,e,n){return Be(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},this.options),n),{nodeSize:i,align:o,rankdir:s="TB",ranksep:a,nodesep:c,ranksepFunc:l,nodesepFunc:u,edgeLabelSpace:h,ranker:d,nodeOrder:f,begin:p,controlPoints:g,radial:v,sortByCombo:y,preset:m}=r,b=new jw({tree:[]}),x=FS(a||50,l),w=FS(c||50,u);let E=w,k=x;"LR"!==s&&"RL"!==s||(E=x,k=w);const S=BS(10,i,!1),M=e.getAllNodes(),O=e.getAllEdges();let N;M.forEach((t=>{const e=jS(S(t)),n=k(t),r=E(t),i=e[0]+2*r,o=e[1]+2*n,s=t.data.layer;Ae(s)?b.addNode({id:t.id,data:{width:i,height:o,layer:s}}):b.addNode({id:t.id,data:{width:i,height:o}})})),y&&(b.attachTreeStructure("combo"),M.forEach((t=>{const{parentId:e}=t.data;void 0!==e&&b.hasNode(e)&&b.setParent(t.id,e,"combo")}))),O.forEach((t=>{b.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||1}})})),(null===m||void 0===m?void 0:m.length)&&(N=new jw({nodes:m})),fS(b,{prevGraph:N,edgeLabelSpace:h,keepNodeOrder:!!f,nodeOrder:f||[],acyclicer:"greedy",ranker:d,rankdir:s,nodesep:c,align:o});const T=[0,0];if(p){let t=1/0,e=1/0;b.getAllNodes().forEach((n=>{t>n.data.x&&(t=n.data.x),e>n.data.y&&(e=n.data.y)})),b.getAllEdges().forEach((n=>{var r;null===(r=n.data.points)||void 0===r||r.forEach((n=>{t>n.x&&(t=n.x),e>n.y&&(e=n.y)}))})),T[0]=p[0]-t,T[1]=p[1]-e}const A="LR"===s||"RL"===s;if(v);else{const t=new Set,e="BT"===s||"RL"===s,n=e?(t,e)=>e-t:(t,e)=>t-e;b.getAllNodes().forEach((e=>{e.data.x=e.data.x+T[0],e.data.y=e.data.y+T[1],t.add(A?e.data.x:e.data.y)}));const r=Array.from(t).sort(n),i=A?(t,e)=>t.x!==e.x:(t,e)=>t.y!==e.y,o=A?(t,e,n)=>{const r=Math.max(e.y,n.y),i=Math.min(e.y,n.y);return t.filter((t=>t.y<=r&&t.y>=i))}:(t,e,n)=>{const r=Math.max(e.x,n.x),i=Math.min(e.x,n.x);return t.filter((t=>t.x<=r&&t.x>=i))};b.getAllEdges().forEach(((t,e)=>{var n;h&&g&&"loop"!==t.data.type&&(t.data.controlPoints=HS(null===(n=t.data.points)||void 0===n?void 0:n.map((({x:t,y:e})=>({x:t+T[0],y:e+T[1]}))),b.getNode(t.source),b.getNode(t.target),r,A,i,o))}))}let C=[];C=b.getAllNodes().map((t=>VS(t)));const P=b.getAllEdges();t&&(C.forEach((t=>{e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),P.forEach((t=>{e.mergeEdgeData(t.id,{controlPoints:t.data.controlPoints})})));const R={nodes:C,edges:P};return R}))}}const HS=(t,e,n,r,i,o,s)=>{let a=(null===t||void 0===t?void 0:t.slice(1,t.length-1))||[];if(e&&n){let{x:t,y:c}=e.data,{x:l,y:u}=n.data;if(i&&(t=e.data.y,c=e.data.x,l=n.data.y,u=n.data.x),u!==c&&t!==l){const h=r.indexOf(c),d=r[h+1];if(d){const t=a[0],e=i?{x:(c+d)/2,y:(null===t||void 0===t?void 0:t.y)||l}:{x:(null===t||void 0===t?void 0:t.x)||l,y:(c+d)/2};t&&!o(t,e)||a.unshift(e)}const f=r.indexOf(u),p=Math.abs(f-h);if(1===p)a=s(a,e.data,n.data),a.length||a.push(i?{x:(c+u)/2,y:t}:{x:t,y:(c+u)/2});else if(p>1){const e=r[f-1];if(e){const n=a[a.length-1],r=i?{x:(u+e)/2,y:(null===n||void 0===n?void 0:n.y)||l}:{x:(null===n||void 0===n?void 0:n.x)||t,y:(u+e)/2};n&&!o(n,r)||a.push(r)}}}}return a},$S=(t,e,n)=>{const r=t.getAllNodes(),i=t.getAllEdges();if(!(null===r||void 0===r?void 0:r.length)){const t={nodes:[],edges:i};return t}if(1===r.length){e&&t.mergeNodeData(r[0].id,{x:n[0],y:n[1]});const o={nodes:[Object.assign(Object.assign({},r[0]),{data:Object.assign(Object.assign({},r[0].data),{x:n[0],y:n[1]})})],edges:i};return o}},YS={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1};class qS{constructor(t={}){this.options=t,this.id="circular",this.options=Object.assign(Object.assign({},YS),t)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericCircularLayout(!1,t,e)}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericCircularLayout(!0,t,e)}))}genericCircularLayout(t,e,n){return Be(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},this.options),n),{width:i,height:o,center:s,divisions:a,startAngle:c=0,endAngle:l=2*Math.PI,angleRatio:u,ordering:h,clockwise:d,nodeSpacing:f,nodeSize:p}=r,g=e.getAllNodes(),v=e.getAllEdges(),[y,m,b]=ZS(i,o,s),x=null===g||void 0===g?void 0:g.length;if(!x||1===x)return $S(e,t,b);const w=(l-c)/x;let{radius:E,startRadius:k,endRadius:S}=r;if(f){const t=FS(10,f),e=BS(10,p);let n=-1/0;g.forEach((t=>{const r=e(t);n<r&&(n=r)}));let r=0;g.forEach(((e,i)=>{r+=0===i?n||10:(t(e)||0)+(n||10)})),E=r/(2*Math.PI)}else E||k||S?!k&&S?k=S:k&&!S&&(S=k):E=Math.min(m,y)/2;const M=w*u;let O=[];O="topology"===h?XS(e,g):"topology-directed"===h?XS(e,g,!0):"degree"===h?KS(e,g):g.map((t=>VS(t)));const N=Math.ceil(x/a);for(let t=0;t<x;++t){let e=E;e||null===k||null===S||(e=k+t*(S-k)/(x-1)),e||(e=10+100*t/(x-1));let n=c+t%N*M+2*Math.PI/a*Math.floor(t/N);d||(n=l-t%N*M-2*Math.PI/a*Math.floor(t/N)),O[t].data.x=b[0]+Math.cos(n)*e,O[t].data.y=b[1]+Math.sin(n)*e}t&&O.forEach((t=>{e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}));const T={nodes:O,edges:v};return T}))}}const XS=(t,e,n=!1)=>{const r=[VS(e[0])],i={},o=e.length;i[e[0].id]=!0;let s=0;return e.forEach(((a,c)=>{if(0!==c)if(c!==o-1&&t.getDegree(a.id,"both")===t.getDegree(e[c+1].id,"both")&&!t.areNeighbors(r[s].id,a.id)||i[a.id]){const c=n?t.getSuccessors(r[s].id):t.getNeighbors(r[s].id);let l=!1;for(let e=0;e<c.length;e++){const n=c[e];if(t.getDegree(n.id)===t.getDegree(a.id)&&!i[n.id]){r.push(VS(n)),i[n.id]=!0,l=!0;break}}let u=0;while(!l)if(i[e[u].id]||(r.push(VS(e[u])),i[e[u].id]=!0,l=!0),u++,u===o)break}else r.push(VS(a)),i[a.id]=!0,s++})),r};function KS(t,e){const n=[];return e.forEach(((t,e)=>{n.push(VS(t))})),n.sort(((e,n)=>t.getDegree(e.id,"both")-t.getDegree(n.id,"both"))),n}const ZS=(t,e,n)=>{let r=t,i=e,o=n;return r||"undefined"===typeof window||(r=window.innerWidth),i||"undefined"===typeof window||(i=window.innerHeight),o||(o=[r/2,i/2]),[r,i,o]},JS=Array.isArray,QS={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"};class tM{constructor(t={}){this.options=t,this.id="concentric",this.options=Object.assign(Object.assign({},QS),t)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericConcentricLayout(!1,t,e)}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericConcentricLayout(!0,t,e)}))}genericConcentricLayout(t,e,n){return Be(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},this.options),n),{center:i,width:o,height:s,sortBy:a,maxLevelDiff:c,sweep:l,clockwise:u,equidistant:h,preventOverlap:d,startAngle:f=1.5*Math.PI,nodeSize:p,nodeSpacing:g}=r,v=e.getAllNodes(),y=e.getAllEdges(),m=o||"undefined"===typeof window?o:window.innerWidth,b=s||"undefined"===typeof window?s:window.innerHeight,x=i||[m/2,b/2];if(!(null===v||void 0===v?void 0:v.length)||1===v.length)return $S(e,t,x);const w=[];let E,k=0;JS(p)?E=Math.max(p[0],p[1]):nr(p)?(E=-1/0,v.forEach((t=>{const e=Math.max(...jS(p(t)));e>E&&(E=e)}))):E=p,JS(g)?k=Math.max(g[0],g[1]):Ae(g)&&(k=g),v.forEach((t=>{const e=VS(t);w.push(e);let n=E;const{data:r}=e;JS(r.size)?n=Math.max(r.size[0],r.size[1]):Ae(r.size)?n=r.size:rr(r.size)&&(n=Math.max(r.size.width,r.size.height)),E=Math.max(E,n),nr(g)&&(k=Math.max(g(t),k))}));const S={};w.forEach(((t,e)=>{S[t.id]=e}));let M=a;Re(M)&&void 0!==w[0].data[M]||(M="degree"),"degree"===M?w.sort(((t,n)=>e.getDegree(n.id,"both")-e.getDegree(t.id,"both"))):w.sort(((t,e)=>e.data[M]-t.data[M]));const O=w[0],N=(c||("degree"===M?e.getDegree(O.id,"both"):O.data[M]))/4,T=[{nodes:[]}];let A=T[0];w.forEach((t=>{if(A.nodes.length>0){const n="degree"===M?Math.abs(e.getDegree(A.nodes[0].id,"both")-e.getDegree(t.id,"both")):Math.abs(A.nodes[0].data[M]-t.data[M]);N&&n>=N&&(A={nodes:[]},T.push(A))}A.nodes.push(t)}));let C=E+k;if(!d){const t=T.length>0&&T[0].nodes.length>1,e=Math.min(m,b)/2-C,n=e/(T.length+(t?1:0));C=Math.min(C,n)}let P=0;if(T.forEach((t=>{const e=void 0===l?2*Math.PI-2*Math.PI/t.nodes.length:l;if(t.dTheta=e/Math.max(1,t.nodes.length-1),t.nodes.length>1&&d){const e=Math.cos(t.dTheta)-Math.cos(0),n=Math.sin(t.dTheta)-Math.sin(0),r=Math.sqrt(C*C/(e*e+n*n));P=Math.max(r,P)}t.r=P,P+=C})),h){let t=0,e=0;for(let n=0;n<T.length;n++){const r=T[n],i=(r.r||0)-e;t=Math.max(t,i)}e=0,T.forEach(((n,r)=>{0===r&&(e=n.r||0),n.r=e,e+=t}))}T.forEach((t=>{const e=t.dTheta||0,n=t.r||0;t.nodes.forEach(((t,r)=>{const i=f+(u?1:-1)*e*r;t.data.x=x[0]+n*Math.cos(i),t.data.y=x[1]+n*Math.sin(i)}))})),t&&w.forEach((t=>e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})));const R={nodes:w,edges:y};return R}))}}function eM(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return nM(this.cover(e,n),e,n,t)}function nM(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,s,a,c,l,u,h,d,f=t._root,p={data:r},g=t._x0,v=t._y0,y=t._x1,m=t._y1;if(!f)return t._root=p,t;while(f.length)if((l=e>=(o=(g+y)/2))?g=o:y=o,(u=n>=(s=(v+m)/2))?v=s:m=s,i=f,!(f=f[h=u<<1|l]))return i[h]=p,t;if(a=+t._x.call(null,f.data),c=+t._y.call(null,f.data),e===a&&n===c)return p.next=f,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(l=e>=(o=(g+y)/2))?g=o:y=o,(u=n>=(s=(v+m)/2))?v=s:m=s}while((h=u<<1|l)===(d=(c>=s)<<1|a>=o));return i[d]=f,i[h]=p,t}function rM(t){var e,n,r,i,o=t.length,s=new Array(o),a=new Array(o),c=1/0,l=1/0,u=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(s[n]=r,a[n]=i,r<c&&(c=r),r>u&&(u=r),i<l&&(l=i),i>h&&(h=i));if(c>u||l>h)return this;for(this.cover(c,l).cover(u,h),n=0;n<o;++n)nM(this,s[n],a[n],t[n]);return this}function iM(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{var s,a,c=i-n||1,l=this._root;while(n>t||t>=i||r>e||e>=o)switch(a=(e<r)<<1|t<n,s=new Array(4),s[a]=l,l=s,c*=2,a){case 0:i=n+c,o=r+c;break;case 1:n=i-c,o=r+c;break;case 2:i=n+c,r=o-c;break;case 3:n=i-c,r=o-c;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function oM(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function sM(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function aM(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function cM(t,e,n){var r,i,o,s,a,c,l,u=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],g=this._root;g&&p.push(new aM(g,u,h,d,f)),null==n?n=1/0:(u=t-n,h=e-n,d=t+n,f=e+n,n*=n);while(c=p.pop())if(!(!(g=c.node)||(i=c.x0)>d||(o=c.y0)>f||(s=c.x1)<u||(a=c.y1)<h))if(g.length){var v=(i+s)/2,y=(o+a)/2;p.push(new aM(g[3],v,y,s,a),new aM(g[2],i,y,v,a),new aM(g[1],v,o,s,y),new aM(g[0],i,o,v,y)),(l=(e>=y)<<1|t>=v)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=c)}else{var m=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),x=m*m+b*b;if(x<n){var w=Math.sqrt(n=x);u=t-w,h=e-w,d=t+w,f=e+w,r=g.data}}return r}function lM(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,r,i,o,s,a,c,l,u,h,d,f=this._root,p=this._x0,g=this._y0,v=this._x1,y=this._y1;if(!f)return this;if(f.length)while(1){if((l=o>=(a=(p+v)/2))?p=a:v=a,(u=s>=(c=(g+y)/2))?g=c:y=c,e=f,!(f=f[h=u<<1|l]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}while(f.data!==t)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)}function uM(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function hM(){return this._root}function dM(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function fM(t){var e,n,r,i,o,s,a=[],c=this._root;c&&a.push(new aM(c,this._x0,this._y0,this._x1,this._y1));while(e=a.pop())if(!t(c=e.node,r=e.x0,i=e.y0,o=e.x1,s=e.y1)&&c.length){var l=(r+o)/2,u=(i+s)/2;(n=c[3])&&a.push(new aM(n,l,u,o,s)),(n=c[2])&&a.push(new aM(n,r,u,l,s)),(n=c[1])&&a.push(new aM(n,l,i,o,u)),(n=c[0])&&a.push(new aM(n,r,i,l,u))}return this}function pM(t){var e,n=[],r=[];this._root&&n.push(new aM(this._root,this._x0,this._y0,this._x1,this._y1));while(e=n.pop()){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,c=e.x1,l=e.y1,u=(s+c)/2,h=(a+l)/2;(o=i[0])&&n.push(new aM(o,s,a,u,h)),(o=i[1])&&n.push(new aM(o,u,a,c,h)),(o=i[2])&&n.push(new aM(o,s,h,u,l)),(o=i[3])&&n.push(new aM(o,u,h,c,l))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function gM(t){return t[0]}function vM(t){return arguments.length?(this._x=t,this):this._x}function yM(t){return t[1]}function mM(t){return arguments.length?(this._y=t,this):this._y}function bM(t,e,n){var r=new xM(null==e?gM:e,null==n?yM:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function xM(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function wM(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}var EM=bM.prototype=xM.prototype;function kM(t){const e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return SM(this.cover(e,n,r),e,n,r,t)}function SM(t,e,n,r,i){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var o,s,a,c,l,u,h,d,f,p,g,v,y=t._root,m={data:i},b=t._x0,x=t._y0,w=t._z0,E=t._x1,k=t._y1,S=t._z1;if(!y)return t._root=m,t;while(y.length)if((d=e>=(s=(b+E)/2))?b=s:E=s,(f=n>=(a=(x+k)/2))?x=a:k=a,(p=r>=(c=(w+S)/2))?w=c:S=c,o=y,!(y=y[g=p<<2|f<<1|d]))return o[g]=m,t;if(l=+t._x.call(null,y.data),u=+t._y.call(null,y.data),h=+t._z.call(null,y.data),e===l&&n===u&&r===h)return m.next=y,o?o[g]=m:t._root=m,t;do{o=o?o[g]=new Array(8):t._root=new Array(8),(d=e>=(s=(b+E)/2))?b=s:E=s,(f=n>=(a=(x+k)/2))?x=a:k=a,(p=r>=(c=(w+S)/2))?w=c:S=c}while((g=p<<2|f<<1|d)===(v=(h>=c)<<2|(u>=a)<<1|l>=s));return o[v]=y,o[g]=m,t}function MM(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let o=1/0,s=1/0,a=1/0,c=-1/0,l=-1/0,u=-1/0;for(let h,d,f,p,g=0;g<e;++g)isNaN(d=+this._x.call(null,h=t[g]))||isNaN(f=+this._y.call(null,h))||isNaN(p=+this._z.call(null,h))||(n[g]=d,r[g]=f,i[g]=p,d<o&&(o=d),d>c&&(c=d),f<s&&(s=f),f>l&&(l=f),p<a&&(a=p),p>u&&(u=p));if(o>c||s>l||a>u)return this;this.cover(o,s,a).cover(c,l,u);for(let h=0;h<e;++h)SM(this,n[h],r[h],i[h],t[h]);return this}function OM(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,s=this._x1,a=this._y1,c=this._z1;if(isNaN(r))s=(r=Math.floor(t))+1,a=(i=Math.floor(e))+1,c=(o=Math.floor(n))+1;else{var l,u,h=s-r||1,d=this._root;while(r>t||t>=s||i>e||e>=a||o>n||n>=c)switch(u=(n<o)<<2|(e<i)<<1|t<r,l=new Array(8),l[u]=d,d=l,h*=2,u){case 0:s=r+h,a=i+h,c=o+h;break;case 1:r=s-h,a=i+h,c=o+h;break;case 2:s=r+h,i=a-h,c=o+h;break;case 3:r=s-h,i=a-h,c=o+h;break;case 4:s=r+h,a=i+h,o=c-h;break;case 5:r=s-h,a=i+h,o=c-h;break;case 6:s=r+h,i=a-h,o=c-h;break;case 7:r=s-h,i=a-h,o=c-h;break}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=i,this._z0=o,this._x1=s,this._y1=a,this._z1=c,this}function NM(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function TM(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function AM(t,e,n,r,i,o,s){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=s}function CM(t,e,n,r){var i,o,s,a,c,l,u,h,d,f=this._x0,p=this._y0,g=this._z0,v=this._x1,y=this._y1,m=this._z1,b=[],x=this._root;x&&b.push(new AM(x,f,p,g,v,y,m)),null==r?r=1/0:(f=t-r,p=e-r,g=n-r,v=t+r,y=e+r,m=n+r,r*=r);while(h=b.pop())if(!(!(x=h.node)||(o=h.x0)>v||(s=h.y0)>y||(a=h.z0)>m||(c=h.x1)<f||(l=h.y1)<p||(u=h.z1)<g))if(x.length){var w=(o+c)/2,E=(s+l)/2,k=(a+u)/2;b.push(new AM(x[7],w,E,k,c,l,u),new AM(x[6],o,E,k,w,l,u),new AM(x[5],w,s,k,c,E,u),new AM(x[4],o,s,k,w,E,u),new AM(x[3],w,E,a,c,l,k),new AM(x[2],o,E,a,w,l,k),new AM(x[1],w,s,a,c,E,k),new AM(x[0],o,s,a,w,E,k)),(d=(n>=k)<<2|(e>=E)<<1|t>=w)&&(h=b[b.length-1],b[b.length-1]=b[b.length-1-d],b[b.length-1-d]=h)}else{var S=t-+this._x.call(null,x.data),M=e-+this._y.call(null,x.data),O=n-+this._z.call(null,x.data),N=S*S+M*M+O*O;if(N<r){var T=Math.sqrt(r=N);f=t-T,p=e-T,g=n-T,v=t+T,y=e+T,m=n+T,i=x.data}}return i}EM.copy=function(){var t,e,n=new xM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=wM(r),n;t=[{source:r,target:n._root=new Array(4)}];while(r=t.pop())for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=wM(e));return n},EM.add=eM,EM.addAll=rM,EM.cover=iM,EM.data=oM,EM.extent=sM,EM.find=cM,EM.remove=lM,EM.removeAll=uM,EM.root=hM,EM.size=dM,EM.visit=fM,EM.visitAfter=pM,EM.x=vM,EM.y=mM;const PM=(t,e,n,r,i,o)=>Math.sqrt((t-r)**2+(e-i)**2+(n-o)**2);function RM(t,e,n,r){const i=[],o=t-r,s=e-r,a=n-r,c=t+r,l=e+r,u=n+r;return this.visit(((h,d,f,p,g,v,y)=>{if(!h.length)do{const o=h.data;PM(t,e,n,this._x(o),this._y(o),this._z(o))<=r&&i.push(o)}while(h=h.next);return d>c||f>l||p>u||g<o||v<s||y<a})),i}function _M(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t))||isNaN(a=+this._z.call(null,t)))return this;var e,n,r,i,o,s,a,c,l,u,h,d,f,p,g,v=this._root,y=this._x0,m=this._y0,b=this._z0,x=this._x1,w=this._y1,E=this._z1;if(!v)return this;if(v.length)while(1){if((h=o>=(c=(y+x)/2))?y=c:x=c,(d=s>=(l=(m+w)/2))?m=l:w=l,(f=a>=(u=(b+E)/2))?b=u:E=u,e=v,!(v=v[p=f<<2|d<<1|h]))return this;if(!v.length)break;(e[p+1&7]||e[p+2&7]||e[p+3&7]||e[p+4&7]||e[p+5&7]||e[p+6&7]||e[p+7&7])&&(n=e,g=p)}while(v.data!==t)if(r=v,!(v=v.next))return this;return(i=v.next)&&delete v.next,r?(i?r.next=i:delete r.next,this):e?(i?e[p]=i:delete e[p],(v=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&v===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!v.length&&(n?n[g]=v:this._root=v),this):(this._root=i,this)}function LM(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function DM(){return this._root}function IM(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function jM(t){var e,n,r,i,o,s,a,c,l=[],u=this._root;u&&l.push(new AM(u,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));while(e=l.pop())if(!t(u=e.node,r=e.x0,i=e.y0,o=e.z0,s=e.x1,a=e.y1,c=e.z1)&&u.length){var h=(r+s)/2,d=(i+a)/2,f=(o+c)/2;(n=u[7])&&l.push(new AM(n,h,d,f,s,a,c)),(n=u[6])&&l.push(new AM(n,r,d,f,h,a,c)),(n=u[5])&&l.push(new AM(n,h,i,f,s,d,c)),(n=u[4])&&l.push(new AM(n,r,i,f,h,d,c)),(n=u[3])&&l.push(new AM(n,h,d,o,s,a,f)),(n=u[2])&&l.push(new AM(n,r,d,o,h,a,f)),(n=u[1])&&l.push(new AM(n,h,i,o,s,d,f)),(n=u[0])&&l.push(new AM(n,r,i,o,h,d,f))}return this}function FM(t){var e,n=[],r=[];this._root&&n.push(new AM(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));while(e=n.pop()){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,c=e.z0,l=e.x1,u=e.y1,h=e.z1,d=(s+l)/2,f=(a+u)/2,p=(c+h)/2;(o=i[0])&&n.push(new AM(o,s,a,c,d,f,p)),(o=i[1])&&n.push(new AM(o,d,a,c,l,f,p)),(o=i[2])&&n.push(new AM(o,s,f,c,d,u,p)),(o=i[3])&&n.push(new AM(o,d,f,c,l,u,p)),(o=i[4])&&n.push(new AM(o,s,a,p,d,f,h)),(o=i[5])&&n.push(new AM(o,d,a,p,l,f,h)),(o=i[6])&&n.push(new AM(o,s,f,p,d,u,h)),(o=i[7])&&n.push(new AM(o,d,f,p,l,u,h))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.y0,e.z0,e.x1,e.y1,e.z1);return this}function BM(t){return t[0]}function zM(t){return arguments.length?(this._x=t,this):this._x}function GM(t){return t[1]}function VM(t){return arguments.length?(this._y=t,this):this._y}function WM(t){return t[2]}function UM(t){return arguments.length?(this._z=t,this):this._z}function HM(t,e,n,r){var i=new $M(null==e?BM:e,null==n?GM:n,null==r?WM:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function $M(t,e,n,r,i,o,s,a,c){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=s,this._y1=a,this._z1=c,this._root=void 0}function YM(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}var qM=HM.prototype=$M.prototype;qM.copy=function(){var t,e,n=new $M(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=YM(r),n;t=[{source:r,target:n._root=new Array(8)}];while(r=t.pop())for(var i=0;i<8;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(8)}):r.target[i]=YM(e));return n},qM.add=kM,qM.addAll=MM,qM.cover=OM,qM.data=NM,qM.extent=TM,qM.find=CM,qM.findAllWithinRadius=RM,qM.remove=_M,qM.removeAll=LM,qM.root=DM,qM.size=IM,qM.visit=jM,qM.visitAfter=FM,qM.x=zM,qM.y=VM,qM.z=UM;const XM=.81,KM=.1;function ZM(t,e,n,r,i=2){const o=e/n,s=t.getAllNodes(),a=s.map(((t,e)=>{const{nodeStrength:n,x:r,y:i,z:s,size:a}=t.data;return{x:r,y:i,z:s,size:a,index:e,id:t.id,vx:0,vy:0,vz:0,weight:o*n}})),c=(2===i?bM(a,(t=>t.x),(t=>t.y)):HM(a,(t=>t.x),(t=>t.y),(t=>t.z))).visitAfter(JM),l=new Map;return a.forEach((t=>{l.set(t.id,t),tO(t,c,i)})),a.map(((t,e)=>{const{id:n,data:i}=s[e],{mass:o=1}=i;r[n]={x:t.vx/o,y:t.vy/o,z:t.vz/o}})),r}function JM(t){let e=0,n=0,r=0,i=0,o=0;const s=t.length;if(s){for(let a=0;a<s;a++){const s=t[a];s&&s.weight&&(e+=s.weight,n+=s.x*s.weight,r+=s.y*s.weight,i+=s.z*s.weight,o+=s.size*s.weight)}t.x=n/e,t.y=r/e,t.z=i/e,t.size=o/e,t.weight=e}else{const e=t;t.x=e.data.x,t.y=e.data.y,t.z=e.data.z,t.size=e.data.size,t.weight=e.data.weight}}const QM=(t,e,n,r,i,o,s)=>{var a;if((null===(a=t.data)||void 0===a?void 0:a.id)===o.id)return;const c=[n,r,i][s-1],l=o.x-t.x||KM,u=o.y-t.y||KM,h=o.z-t.z||KM,d=[l,u,h],f=c-e;let p=0;for(let y=0;y<s;y++)p+=d[y]*d[y];const g=Math.sqrt(p),v=g*p;if(f*f*XM<p){const e=t.weight/v;return o.vx+=l*e,o.vy+=u*e,o.vz+=h*e,!0}if(t.length)return!1;if(t.data!==o){const e=t.data.weight/v;o.vx+=l*e,o.vy+=u*e,o.vz+=h*e}};function tO(t,e,n){e.visit(((e,r,i,o,s)=>QM(e,r,i,o,s,t,n)))}const eO={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"};class nO{constructor(t={}){this.options=t,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},eO),t)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericForceLayout(!1,t,e)}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericForceLayout(!0,t,e)}))}stop(){this.timeInterval&&"undefined"!==typeof window&&window.clearInterval(this.timeInterval),this.running=!1}tick(t=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let n=0;(this.judgingDistance>this.lastOptions.minMovement||n<1)&&n<t;n++)this.runOneStep(this.lastCalcGraph,this.lastGraph,n,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);const e={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&e.nodes.forEach((t=>this.lastGraph.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===this.options.dimensions?t.data.z:void 0}))),e}genericForceLayout(t,e,n){return Be(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},this.options),n),i=e.getAllNodes(),o=e.getAllEdges(),s=this.formatOptions(r,e),{dimensions:a,width:c,height:l,nodeSize:u,getMass:h,nodeStrength:d,edgeStrength:f,linkDistance:p}=s,g=i.map(((t,e)=>Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{x:Ae(t.data.x)?t.data.x:Math.random()*c,y:Ae(t.data.y)?t.data.y:Math.random()*l,z:Ae(t.data.z)?t.data.z:Math.random()*Math.sqrt(c*l),size:u(t)||30,mass:h(t),nodeStrength:d(t)})}))),v=o.map((t=>Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{edgeStrength:f(t),linkDistance:p(t,e.getNode(t.source),e.getNode(t.target))})})));if(!(null===i||void 0===i?void 0:i.length))return this.lastResult={nodes:[],edges:o},{nodes:[],edges:o};const y={};i.forEach(((t,e)=>{y[t.id]={x:0,y:0,z:0}}));const m=new jw({nodes:g,edges:v});this.formatCentripetal(s,m);const{maxIteration:b,minMovement:x,onTick:w}=s;if(this.lastLayoutNodes=g,this.lastLayoutEdges=v,this.lastAssign=t,this.lastGraph=e,this.lastCalcGraph=m,this.lastOptions=s,this.lastVelMap=y,"undefined"===typeof window)return;let E=0;return new Promise((n=>{this.timeInterval=window.setInterval((()=>{i&&this.running||n({nodes:aO(e,g),edges:o}),this.runOneStep(m,e,E,y,s),this.updatePosition(e,m,y,s),t&&g.forEach((t=>e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===a?t.data.z:void 0}))),null===w||void 0===w||w({nodes:aO(e,g),edges:o}),E++,(E>=b||this.judgingDistance<x)&&(window.clearInterval(this.timeInterval),n({nodes:aO(e,g),edges:o}))}),0),this.running=!0}))}))}formatOptions(t,e){const n=Object.assign({},t),{width:r,height:i,getMass:o}=t;n.width=r||"undefined"===typeof window?r:window.innerWidth,n.height=i||"undefined"===typeof window?i:window.innerHeight,t.center||(n.center=[n.width/2,n.height/2]),o||(n.getMass=t=>{let n=1;Ae(null===t||void 0===t?void 0:t.data.mass)&&(n=null===t||void 0===t?void 0:t.data.mass);const r=e.getDegree(t.id,"both");return!r||r<5?n:5*r*n}),n.nodeSize=zS(t.nodeSize,t.nodeSpacing);const s=t.linkDistance?FS(1,t.linkDistance):t=>1+n.nodeSize(e.getNode(t.source))+n.nodeSize(e.getNode(t.target));return n.linkDistance=s,n.nodeStrength=FS(1,t.nodeStrength),n.edgeStrength=FS(1,t.edgeStrength),n}formatCentripetal(t,e){const{dimensions:n,centripetalOptions:r,center:i,clusterNodeStrength:o,leafCluster:s,clustering:a,nodeClusterBy:c}=t,l=e.getAllNodes(),u=r||{leaf:2,single:2,others:1,center:t=>({x:i[0],y:i[1],z:3===n?i[2]:void 0})};let h,d;if("function"!==typeof o&&(t.clusterNodeStrength=t=>o),s&&c&&(h=rO(e,c),d=Array.from(new Set(null===l||void 0===l?void 0:l.map((t=>t.data[c]))))||[],t.centripetalOptions=Object.assign(u,{single:100,leaf:e=>{const{siblingLeaves:n,sameTypeLeaves:r}=h[e.id]||{};return(null===r||void 0===r?void 0:r.length)===(null===n||void 0===n?void 0:n.length)||1===(null===d||void 0===d?void 0:d.length)?1:t.clusterNodeStrength(e)},others:1,center:t=>{const n=e.getDegree(t.id,"both");if(!n)return{x:100,y:100,z:0};let r;if(1===n){const{sameTypeLeaves:e=[]}=h[t.id]||{};1===e.length?r=void 0:e.length>1&&(r=sO(e))}else r=void 0;return{x:null===r||void 0===r?void 0:r.x,y:null===r||void 0===r?void 0:r.y,z:null===r||void 0===r?void 0:r.z}}})),a&&c){h||(h=rO(e,c)),d||(d=Array.from(new Set(l.map((t=>t.data[c]))))),d=d.filter((t=>void 0!==t));const n={};d.forEach((t=>{const r=l.filter((e=>e.data[c]===t)).map((t=>e.getNode(t.id)));n[t]=sO(r)})),t.centripetalOptions=Object.assign(u,{single:e=>t.clusterNodeStrength(e),leaf:e=>t.clusterNodeStrength(e),others:e=>t.clusterNodeStrength(e),center:t=>{const e=n[t.data[c]];return{x:null===e||void 0===e?void 0:e.x,y:null===e||void 0===e?void 0:e.y,z:null===e||void 0===e?void 0:e.z}}})}const{leaf:f,single:p,others:g}=t.centripetalOptions||{};f&&"function"!==typeof f&&(t.centripetalOptions.leaf=()=>f),p&&"function"!==typeof p&&(t.centripetalOptions.single=()=>p),g&&"function"!==typeof g&&(t.centripetalOptions.others=()=>g)}runOneStep(t,e,n,r,i){const o={},s=t.getAllNodes(),a=t.getAllEdges();if(!(null===s||void 0===s?void 0:s.length))return;const{monitor:c}=i;if(this.calRepulsive(t,o,i),a&&this.calAttractive(t,o,i),this.calGravity(t,e,o,i),this.updateVelocity(t,o,r,i),c){const t=this.calTotalEnergy(o,s);c({energy:t,nodes:e.getAllNodes(),edges:e.getAllEdges(),iterations:n})}}calTotalEnergy(t,e){if(!(null===e||void 0===e?void 0:e.length))return 0;let n=0;return e.forEach(((e,r)=>{const i=t[e.id].x,o=t[e.id].y,s=3===this.options.dimensions?t[e.id].z:0,a=i*i+o*o+s*s,{mass:c=1}=e.data;n+=c*a*.5})),n}calRepulsive(t,e,n){const{dimensions:r,factor:i,coulombDisScale:o}=n;ZM(t,i,o*o,e,r)}calAttractive(t,e,n){const{dimensions:r,nodeSize:i}=n;t.getAllEdges().forEach(((n,o)=>{const{source:s,target:a}=n,c=t.getNode(s),l=t.getNode(a);if(!c||!l)return;let u=l.data.x-c.data.x,h=l.data.y-c.data.y,d=3===r?l.data.z-c.data.z:0;u||h||(u=.01*Math.random(),h=.01*Math.random(),3!==r||d||(d=.01*Math.random()));const f=Math.sqrt(u*u+h*h+d*d);if(f<i(c)+i(l))return;const p=u/f,g=h/f,v=d/f,{linkDistance:y=200,edgeStrength:m=200}=n.data||{},b=y-f,x=b*m,w=c.data.mass||1,E=l.data.mass||1,k=1/w,S=1/E,M=p*x,O=g*x,N=v*x;e[s].x-=M*k,e[s].y-=O*k,e[s].z-=N*k,e[a].x+=M*S,e[a].y+=O*S,e[a].z+=N*S}))}calGravity(t,e,n,r){const{getCenter:i}=r,o=t.getAllNodes(),s=e.getAllNodes(),a=e.getAllEdges(),{width:c,height:l,center:u,gravity:h,centripetalOptions:d}=r;o&&o.forEach((r=>{const{id:o,data:f}=r,{mass:p,x:g,y:v,z:y}=f,m=e.getNode(o);let b=0,x=0,w=0,E=h;const k=t.getDegree(o,"in"),S=t.getDegree(o,"out"),M=t.getDegree(o,"both"),O=null===i||void 0===i?void 0:i(m,M);if(O){const[t,e,n]=O;b=g-t,x=v-e,E=n}else b=g-u[0],x=v-u[1],w=y-u[2];if(E&&(n[o].x-=E*b/p,n[o].y-=E*x/p,n[o].z-=E*w/p),d){const{leaf:t,single:e,others:r,center:i}=d,{x:u,y:h,z:f,centerStrength:b}=(null===i||void 0===i?void 0:i(m,s,a,c,l))||{x:0,y:0,z:0,centerStrength:0};if(!Ae(u)||!Ae(h))return;const x=(g-u)/p,w=(v-h)/p,E=(y-f)/p;if(b&&(n[o].x-=b*x,n[o].y-=b*w,n[o].z-=b*E),0===M){const t=e(m);if(!t)return;return n[o].x-=t*x,n[o].y-=t*w,void(n[o].z-=t*E)}if(0===k||0===S){const e=t(m,s,a);if(!e)return;return n[o].x-=e*x,n[o].y-=e*w,void(n[o].z-=e*E)}const O=r(m);if(!O)return;n[o].x-=O*x,n[o].y-=O*w,n[o].z-=O*E}}))}updateVelocity(t,e,n,r){const{damping:i,maxSpeed:o,interval:s,dimensions:a}=r,c=t.getAllNodes();(null===c||void 0===c?void 0:c.length)&&c.forEach((t=>{const{id:r}=t;let c=(n[r].x+e[r].x*s)*i||.01,l=(n[r].y+e[r].y*s)*i||.01,u=3===a?(n[r].z+e[r].z*s)*i||.01:0;const h=Math.sqrt(c*c+l*l+u*u);if(h>o){const t=o/h;c*=t,l*=t,u*=t}n[r]={x:c,y:l,z:u}}))}updatePosition(t,e,n,r){const{distanceThresholdMode:i,interval:o,dimensions:s}=r,a=e.getAllNodes();if(!(null===a||void 0===a?void 0:a.length))return void(this.judgingDistance=0);let c=0;"max"===i?this.judgingDistance=-1/0:"min"===i&&(this.judgingDistance=1/0),a.forEach((r=>{const{id:a}=r,l=t.getNode(a);if(Ae(l.data.fx)&&Ae(l.data.fy))return void e.mergeNodeData(a,{x:l.data.fx,y:l.data.fy,z:3===s?l.data.fz:void 0});const u=n[a].x*o,h=n[a].y*o,d=3===s?n[a].z*o:0;e.mergeNodeData(a,{x:r.data.x+u,y:r.data.y+h,z:r.data.z+d});const f=Math.sqrt(u*u+h*h+d*d);switch(i){case"max":this.judgingDistance<f&&(this.judgingDistance=f);break;case"min":this.judgingDistance>f&&(this.judgingDistance=f);break;default:c+=f;break}})),i&&"mean"!==i||(this.judgingDistance=c/a.length)}}const rO=(t,e)=>{const n=t.getAllNodes();if(!(null===n||void 0===n?void 0:n.length))return{};const r={};return n.forEach(((n,i)=>{const o=t.getDegree(n.id,"both");1===o&&(r[n.id]=iO(t,"leaf",n,e))})),r},iO=(t,e,n,r)=>{const i=t.getDegree(n.id,"in"),o=t.getDegree(n.id,"out");let s=n,a=[];0===i?(s=t.getSuccessors(n.id)[0],a=t.getNeighbors(s.id)):0===o&&(s=t.getPredecessors(n.id)[0],a=t.getNeighbors(s.id)),a=a.filter((e=>0===t.getDegree(e.id,"in")||0===t.getDegree(e.id,"out")));const c=oO(t,e,r,n,a);return{coreNode:s,siblingLeaves:a,sameTypeLeaves:c}},oO=(t,e,n,r,i)=>{const o=r.data[n]||"";let s=(null===i||void 0===i?void 0:i.filter((t=>t.data[n]===o)))||[];return"leaf"===e&&(s=s.filter((e=>0===t.getDegree(e.id,"in")||0===t.getDegree(e.id,"out")))),s},sO=t=>{const e={x:0,y:0};t.forEach((t=>{const{x:n,y:r}=t.data;e.x+=n||0,e.y+=r||0}));const n=t.length||1;return{x:e.x/n,y:e.y/n}},aO=(t,e)=>e.map((e=>{const{id:n,data:r}=e,i=t.getNode(n);return Object.assign(Object.assign({},i),{data:Object.assign(Object.assign({},i.data),{x:r.x,y:r.y,z:r.z})})}));var cO=n(68742);cO.y3,cO.jy,cO.oN,cO.Hc,cO.cg,cO.hj,cO.LU,cO.Tb;const lO=cO.uq,uO=(cO.Zm,cO.Dq,cO.__,cO.q0,cO.lh,cO.pI,cO.zC,cO.zg,cO.g6,cO.OL,cO.ks,cO.QR,cO.jp,cO.mk,cO.W2);cO.l,cO.KY,cO.dv,cO.BR,cO.Wu;cO.uq,cO.uq;cO.a4,cO.DI,cO.Jo,cO.Zi,cO.kH,cO.LV;const hO=t=>{const e=[],n=t.length;for(let r=0;r<n;r+=1){e[r]=[];for(let i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(let r=0;r<n;r+=1)for(let t=0;t<n;t+=1)for(let i=0;i<n;i+=1)e[t][i]>e[t][r]+e[r][i]&&(e[t][i]=e[t][r]+e[r][i]);return e},dO=(t,e)=>{const{nodes:n,edges:r}=t,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(((t,e)=>{o[t.id]=e;const n=[];i.push(n)})),null===r||void 0===r||r.forEach((t=>{const{source:n,target:r}=t,s=o[n],a=o[r];void 0!==s&&void 0!==a&&(i[s][a]=1,e||(i[a][s]=1))})),i},fO=(t,e)=>{const n=[];return t.forEach((t=>{const r=[];t.forEach((t=>{r.push(t*e)})),n.push(r)})),n},pO=t=>{let e=1/0,n=1/0,r=-1/0,i=-1/0;return t.forEach((t=>{let o=t.data.size;JS(o)?1===o.length&&(o=[o[0],o[0]]):Ae(o)?o=[o,o]:(void 0===o||isNaN(o))&&(o=[30,30]);const s=[o[0]/2,o[1]/2],a=t.data.x-s[0],c=t.data.x+s[0],l=t.data.y-s[1],u=t.data.y+s[1];e>a&&(e=a),n>l&&(n=l),r<c&&(r=c),i<u&&(i=u)})),{minX:e,minY:n,maxX:r,maxY:i}},gO=(t,e)=>Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),vO=(t,e,n,r="TB",i,o={})=>{if(!(null===e||void 0===e?void 0:e.length))return;const{stopBranchFn:s,stopAllFn:a}=o;for(let c=0;c<e.length;c++){const l=e[c];if(t.hasNode(l.id)&&!(null===s||void 0===s?void 0:s(l))){if(null===a||void 0===a?void 0:a(l))return;"TB"===r&&n(l),vO(t,t.getChildren(l.id,i),n,r,i,o),"TB"!==r&&n(l)}}},yO={center:[0,0],linkDistance:50};class mO{constructor(t={}){this.options=t,this.id="mds",this.options=Object.assign(Object.assign({},yO),t)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericMDSLayout(!1,t,e)}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericMDSLayout(!0,t,e)}))}genericMDSLayout(t,e,n){return Be(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},this.options),n),{center:i=[0,0],linkDistance:o=50}=r,s=e.getAllNodes(),a=e.getAllEdges();if(!(null===s||void 0===s?void 0:s.length)||1===s.length)return $S(e,t,i);const c=dO({nodes:s,edges:a},!1),l=hO(c);bO(l);const u=fO(l,o),h=xO(u),d=[];h.forEach(((t,e)=>{const n=VS(s[e]);n.data.x=t[0]+i[0],n.data.y=t[1]+i[1],d.push(n)})),t&&d.forEach((t=>e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})));const f={nodes:d,edges:a};return f}))}}const bO=t=>{let e=-999999;t.forEach((t=>{t.forEach((t=>{t!==1/0&&e<t&&(e=t)}))})),t.forEach(((n,r)=>{n.forEach(((n,i)=>{n===1/0&&(t[r][i]=e)}))}))},xO=t=>{const e=2,n=lO.mul(lO.pow(t,2),-.5),r=n.mean("row"),i=n.mean("column"),o=n.mean();n.add(o).subRowVector(r).subColumnVector(i);const s=new uO(n),a=lO.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map((t=>lO.mul([t],[a]).toJSON()[0].splice(0,e)))};function wO(t){return!!t.tick&&!!t.stop}const EO={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},kO={center:[0,0],comboPadding:10,treeKey:"combo"};class SO{constructor(t={}){this.options=t,this.id="comboCombined",this.options=Object.assign(Object.assign({},kO),t)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericComboCombinedLayout(!1,t,e)}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericComboCombinedLayout(!0,t,e)}))}genericComboCombinedLayout(t,e,n){return Be(this,void 0,void 0,(function*(){const r=this.initVals(Object.assign(Object.assign({},this.options),n)),{center:i,treeKey:o,outerLayout:s}=r,a=e.getAllNodes().filter((t=>!t.data._isCombo)),c=e.getAllNodes().filter((t=>t.data._isCombo)),l=e.getAllEdges(),u=null===a||void 0===a?void 0:a.length;if(!u||1===u)return $S(e,t,i);const h=[],d=new Map;a.forEach((t=>{d.set(t.id,t)}));const f=new Map;c.forEach((t=>{f.set(t.id,t)}));const p=new Map,g=this.getInnerGraphs(e,o,d,f,l,r,p);yield Promise.all(g);const v=new Map,y=[],m=new Map;let b=!0;e.getRoots(o).forEach((t=>{const n=p.get(t.id),r=f.get(t.id)||d.get(t.id),i={id:t.id,data:Object.assign(Object.assign({},t.data),{x:n.data.x||r.data.x,y:n.data.y||r.data.y,fx:n.data.fx||r.data.fx,fy:n.data.fy||r.data.fy,mass:n.data.mass||r.data.mass,size:n.data.size})};y.push(i),v.set(t.id,!0),isNaN(i.data.x)||0===i.data.x||isNaN(i.data.y)||0===i.data.y?(i.data.x=100*Math.random(),i.data.y=100*Math.random()):b=!1,vO(e,[t],(e=>{e.id!==t.id&&m.set(e.id,t.id)}),"TB",o)}));const x=[];let w;if(l.forEach((t=>{const e=m.get(t.source)||t.source,n=m.get(t.target)||t.target;e!==n&&v.has(e)&&v.has(n)&&x.push({id:t.id,source:e,target:n,data:{}})})),null===y||void 0===y?void 0:y.length){if(1===y.length)y[0].data.x=i[0],y[0].data.y=i[1];else{const t=new jw({nodes:y,edges:x}),e=s||new nO;if(b&&EO[e.id]){const e=y.length<100?new mO:new tM;yield e.assign(t)}const n=Object.assign({center:i,kg:5,preventOverlap:!0,animate:!1},"force"===e.id?{gravity:1,factor:4,linkDistance:(t,e,n)=>{const r=Math.max(...e.data.size)||32,i=Math.max(...n.data.size)||32;return r/2+i/2+200}}:{});w=yield MO(e,t,n)}p.forEach((t=>{var e;const n=w.nodes.find((e=>e.id===t.id));if(n){const{x:e,y:r}=n.data;t.data.visited=!0,t.data.x=e,t.data.y=r,h.push({id:t.id,data:{x:e,y:r}})}const{x:r,y:i}=t.data;null===(e=t.data.nodes)||void 0===e||e.forEach((t=>{h.push({id:t.id,data:{x:t.data.x+r,y:t.data.y+i}})}))})),p.forEach((({data:t})=>{const{x:e,y:n,visited:r,nodes:i}=t;null===i||void 0===i||i.forEach((t=>{if(!r){const r=h.find((e=>e.id===t.id));r.data.x+=e||0,r.data.y+=n||0}}))}))}t&&h.forEach((t=>{e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}));const E={nodes:h,edges:l};return E}))}initVals(t){const e=Object.assign({},t),{nodeSize:n,spacing:r,comboPadding:i}=t;let o,s,a;if(s=Ae(r)?()=>r:nr(r)?r:()=>0,e.spacing=s,n)if(nr(n))o=t=>{const e=n(t),r=s(t);if(JS(t.size)){const e=t.size[0]>t.size[1]?t.size[0]:t.size[1];return(e+r)/2}return((e||32)+r)/2};else if(JS(n)){const t=n[0]>n[1]?n[0]:n[1],e=t/2;o=t=>e+s(t)/2}else{const t=n/2;o=e=>t+s(e)/2}else o=t=>{const e=s(t);if(t.size){if(JS(t.size)){const n=t.size[0]>t.size[1]?t.size[0]:t.size[1];return(n+e)/2}if(rr(t.size)){const n=t.size.width>t.size.height?t.size.width:t.size.height;return(n+e)/2}return(t.size+e)/2}return 32+e/2};return e.nodeSize=o,a=Ae(i)?()=>i:JS(i)?()=>Math.max.apply(null,i):nr(i)?i:()=>0,e.comboPadding=a,e}getInnerGraphs(t,e,n,r,i,o,s){const{nodeSize:a,comboPadding:c,spacing:l,innerLayout:u}=o,h=u||new tM({}),d={center:[0,0],preventOverlap:!0,nodeSpacing:l},f=[],p=t=>{let e=(null===c||void 0===c?void 0:c(t))||10;return JS(e)&&(e=Math.max(...e)),{size:e?[2*e,2*e]:[30,30],padding:e}};return t.getRoots(e).forEach((o=>{s.set(o.id,{id:o.id,data:{nodes:[],size:p(o).size}});let c=Promise.resolve();vO(t,[o],(o=>{var l;if(!o.data._isCombo)return;const{size:u,padding:f}=p(o);if(null===(l=t.getChildren(o.id,e))||void 0===l?void 0:l.length){const l=s.get(o.id);s.set(o.id,{id:o.id,data:Object.assign({nodes:[]},null===l||void 0===l?void 0:l.data)});const u=new Map,p=t.getChildren(o.id,e).map((t=>{if(t.data._isCombo)return s.has(t.id)||s.set(t.id,{id:t.id,data:Object.assign({},t.data)}),u.set(t.id,!0),s.get(t.id);const e=n.get(t.id)||r.get(t.id);return u.set(t.id,!0),{id:t.id,data:Object.assign(Object.assign({},e.data),t.data)}})),g={nodes:p,edges:i.filter((t=>u.has(t.source)&&u.has(t.target)))};let v=1/0;p.forEach((t=>{var e;let{size:n}=t.data;n||(n=(null===(e=s.get(t.id))||void 0===e?void 0:e.data.size)||(null===a||void 0===a?void 0:a(t))||[30,30]),Ae(n)&&(n=[n,n]);const[r,i]=n;v>r&&(v=r),v>i&&(v=i),t.data.size=n})),c=c.then((()=>Be(this,void 0,void 0,(function*(){const t=new jw(g);yield MO(h,t,d,!0);const{minX:e,minY:n,maxX:r,maxY:i}=pO(p),a={x:(r+e)/2,y:(i+n)/2};g.nodes.forEach((t=>{t.data.x-=a.x,t.data.y-=a.y}));const c=[Math.max(r-e,v)+2*f,Math.max(i-n,v)+2*f];s.get(o.id).data.size=c,s.get(o.id).data.nodes=p}))))}else s.set(o.id,{id:o.id,data:Object.assign(Object.assign({},o.data),{size:u})});return!0}),"BT",e),f.push(c)})),f}}function MO(t,e,n,r){var i;return Be(this,void 0,void 0,(function*(){return wO(t)?(t.execute(e,n),t.stop(),t.tick(null!==(i=n.iterations)&&void 0!==i?i:300)):r?yield t.assign(e,n):yield t.execute(e,n)}))}function OO(t){return function(){return t}}function NO(t){return 1e-6*(t()-.5)}function TO(t){return t.index}function AO(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function CO(t){var e,n,r,i,o,s,a=TO,c=h,l=OO(30),u=1;function h(t){return 1/Math.min(i[t.source.index],i[t.target.index])}function d(r){for(var i=0,a=t.length;i<u;++i)for(var c,l,h,d,f,p,g,v=0;v<a;++v)c=t[v],l=c.source,h=c.target,d=h.x+h.vx-l.x-l.vx||NO(s),f=h.y+h.vy-l.y-l.vy||NO(s),p=Math.sqrt(d*d+f*f),p=(p-n[v])/p*r*e[v],d*=p,f*=p,h.vx-=d*(g=o[v]),h.vy-=f*g,l.vx+=d*(g=1-g),l.vy+=f*g}function f(){if(r){var s,c,l=r.length,u=t.length,h=new Map(r.map(((t,e)=>[a(t,e,r),t])));for(s=0,i=new Array(l);s<u;++s)c=t[s],c.index=s,"object"!==typeof c.source&&(c.source=AO(h,c.source)),"object"!==typeof c.target&&(c.target=AO(h,c.target)),i[c.source.index]=(i[c.source.index]||0)+1,i[c.target.index]=(i[c.target.index]||0)+1;for(s=0,o=new Array(u);s<u;++s)c=t[s],o[s]=i[c.source.index]/(i[c.source.index]+i[c.target.index]);e=new Array(u),p(),n=new Array(u),g()}}function p(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+c(t[n],n,t)}function g(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),d.initialize=function(t,e){r=t,s=e,f()},d.links=function(e){return arguments.length?(t=e,f(),d):t},d.id=function(t){return arguments.length?(a=t,d):a},d.iterations=function(t){return arguments.length?(u=+t,d):u},d.strength=function(t){return arguments.length?(c="function"===typeof t?t:OO(+t),p(),d):c},d.distance=function(t){return arguments.length?(l="function"===typeof t?t:OO(+t),g(),d):l},d}var PO={value:()=>{}};function RO(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new _O(r)}function _O(t){this._=t}function LO(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function DO(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function IO(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=PO,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}_O.prototype=RO.prototype={constructor:_O,on:function(t,e){var n,r=this._,i=LO(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);while(++o<s)if(n=(t=i[o]).type)r[n]=IO(r[n],t.name,e);else if(null==e)for(n in r)r[n]=IO(r[n],t.name,null);return this}while(++o<s)if((n=(t=i[o]).type)&&(n=DO(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new _O(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var jO,FO,BO=RO,zO=0,GO=0,VO=0,WO=1e3,UO=0,HO=0,$O=0,YO="object"===typeof performance&&performance.now?performance:Date,qO="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function XO(){return HO||(qO(KO),HO=YO.now()+$O)}function KO(){HO=0}function ZO(){this._call=this._time=this._next=null}function JO(t,e,n){var r=new ZO;return r.restart(t,e,n),r}function QO(){XO(),++zO;var t,e=jO;while(e)(t=HO-e._time)>=0&&e._call.call(void 0,t),e=e._next;--zO}function tN(){HO=(UO=YO.now())+$O,zO=GO=0;try{QO()}finally{zO=0,nN(),HO=0}}function eN(){var t=YO.now(),e=t-UO;e>WO&&($O-=e,UO=t)}function nN(){var t,e,n=jO,r=1/0;while(n)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:jO=e);FO=t,rN(r)}function rN(t){if(!zO){GO&&(GO=clearTimeout(GO));var e=t-HO;e>24?(t<1/0&&(GO=setTimeout(tN,t-YO.now()-$O)),VO&&(VO=clearInterval(VO))):(VO||(UO=YO.now(),VO=setInterval(eN,WO)),zO=1,qO(tN))}}ZO.prototype=JO.prototype={constructor:ZO,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?XO():+n)+(null==e?0:+e),this._next||FO===this||(FO?FO._next=this:jO=this,FO=this),this._call=t,this._time=n,rN()},stop:function(){this._call&&(this._call=null,this._time=1/0,rN())}};const iN=1664525,oN=1013904223,sN=4294967296;function aN(){let t=1;return()=>(t=(iN*t+oN)%sN)/sN}function cN(t){return t.x}function lN(t){return t.y}var uN=10,hN=Math.PI*(3-Math.sqrt(5));function dN(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,c=JO(h),l=BO("tick","end"),u=aN();function h(){d(),l.call("tick",e),n<r&&(c.stop(),l.call("end",e))}function d(r){var c,l,u=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,a.forEach((function(t){t(n)})),c=0;c<u;++c)l=t[c],null==l.fx?l.x+=l.vx*=s:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=s:(l.y=l.fy,l.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=uN*Math.sqrt(.5+n),o=n*hN;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,u),e}return null==t&&(t=[]),f(),e={tick:d,restart:function(){return c.restart(h),e},stop:function(){return c.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),a.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},randomSource:function(t){return arguments.length?(u=t,a.forEach(p),e):u},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,p(n)),e):a.get(t)},find:function(e,n,r){var i,o,s,a,c,l=0,u=t.length;for(null==r?r=1/0:r*=r,l=0;l<u;++l)a=t[l],i=e-a.x,o=n-a.y,s=i*i+o*o,s<r&&(c=a,r=s);return c},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}}function fN(){var t,e,n,r,i,o=OO(-30),s=1,a=1/0,c=.81;function l(n){var i,o=t.length,s=bM(t,cN,lN).visitAfter(h);for(r=n,i=0;i<o;++i)e=t[i],s.visit(d)}function u(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function h(t){var e,n,r,o,s,a=0,c=0;if(t.length){for(r=o=s=0;s<4;++s)(e=t[s])&&(n=Math.abs(e.value))&&(a+=e.value,c+=n,r+=n*e.x,o+=n*e.y);t.x=r/c,t.y=o/c}else{e=t,e.x=e.data.x,e.y=e.data.y;do{a+=i[e.data.index]}while(e=e.next)}t.value=a}function d(t,o,l,u){if(!t.value)return!0;var h=t.x-e.x,d=t.y-e.y,f=u-o,p=h*h+d*d;if(f*f/c<p)return p<a&&(0===h&&(h=NO(n),p+=h*h),0===d&&(d=NO(n),p+=d*d),p<s&&(p=Math.sqrt(s*p)),e.vx+=h*t.value*r/p,e.vy+=d*t.value*r/p),!0;if(!(t.length||p>=a)){(t.data!==e||t.next)&&(0===h&&(h=NO(n),p+=h*h),0===d&&(d=NO(n),p+=d*d),p<s&&(p=Math.sqrt(s*p)));do{t.data!==e&&(f=i[t.data.index]*r/p,e.vx+=h*f,e.vy+=d*f)}while(t=t.next)}}return l.initialize=function(e,r){t=e,n=r,u()},l.strength=function(t){return arguments.length?(o="function"===typeof t?t:OO(+t),u(),l):o},l.distanceMin=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.distanceMax=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.theta=function(t){return arguments.length?(c=t*t,l):Math.sqrt(c)},l}function pN(t,e){var n,r=1;function i(){var i,o,s=n.length,a=0,c=0;for(i=0;i<s;++i)o=n[i],a+=o.x,c+=o.y;for(a=(a/s-t)*r,c=(c/s-e)*r,i=0;i<s;++i)o=n[i],o.x-=a,o.y-=c}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function gN(t){return t.x+t.vx}function vN(t){return t.y+t.vy}function yN(t){var e,n,r,i=1,o=1;function s(){for(var t,s,c,l,u,h,d,f=e.length,p=0;p<o;++p)for(s=bM(e,gN,vN).visitAfter(a),t=0;t<f;++t)c=e[t],h=n[c.index],d=h*h,l=c.x+c.vx,u=c.y+c.vy,s.visit(g);function g(t,e,n,o,s){var a=t.data,f=t.r,p=h+f;if(!a)return e>l+p||o<l-p||n>u+p||s<u-p;if(a.index>c.index){var g=l-a.x-a.vx,v=u-a.y-a.vy,y=g*g+v*v;y<p*p&&(0===g&&(g=NO(r),y+=g*g),0===v&&(v=NO(r),y+=v*v),y=(p-(y=Math.sqrt(y)))/y*i,c.vx+=(g*=y)*(p=(f*=f)/(d+f)),c.vy+=(v*=y)*p,a.vx-=g*(p=1-p),a.vy-=v*p)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function c(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!==typeof t&&(t=OO(null==t?1:+t)),s.initialize=function(t,n){e=t,r=n,c()},s.iterations=function(t){return arguments.length?(o=+t,s):o},s.strength=function(t){return arguments.length?(i=+t,s):i},s.radius=function(e){return arguments.length?(t="function"===typeof e?e:OO(+e),c(),s):t},s}function mN(t,e,n){var r,i,o,s=OO(.1);function a(t){for(var s=0,a=r.length;s<a;++s){var c=r[s],l=c.x-e||1e-6,u=c.y-n||1e-6,h=Math.sqrt(l*l+u*u),d=(o[s]-h)*i[s]*t/h;c.vx+=l*d,c.vy+=u*d}}function c(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+s(r[e],e,r)}}return"function"!==typeof t&&(t=OO(+t)),null==e&&(e=0),null==n&&(n=0),a.initialize=function(t){r=t,c()},a.strength=function(t){return arguments.length?(s="function"===typeof t?t:OO(+t),c(),a):s},a.radius=function(e){return arguments.length?(t="function"===typeof e?e:OO(+e),c(),a):t},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(t){return arguments.length?(n=+t,a):n},a}function bN(t){var e,n,r,i=OO(.1);function o(t){for(var i,o=0,s=e.length;o<s;++o)i=e[o],i.vx+=(r[o]-i.x)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),r=new Array(s),o=0;o<s;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=OO(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:OO(+t),s(),o):i},o.x=function(e){return arguments.length?(t="function"===typeof e?e:OO(+e),s(),o):t},o}function xN(t){var e,n,r,i=OO(.1);function o(t){for(var i,o=0,s=e.length;o<s;++o)i=e[o],i.vy+=(r[o]-i.y)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),r=new Array(s),o=0;o<s;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=OO(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:OO(+t),s(),o):i},o.y=function(e){return arguments.length?(t="function"===typeof e?e:OO(+e),s(),o):t},o}class wN{constructor(t){this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:CO,manyBody:fN,center:pN,collide:yN,radial:mN,x:bN,y:xN},this.options={link:{id:t=>t.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},Ng(this.options,t),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericLayout(!1,t,e)}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericLayout(!0,t,e)}))}stop(){this.simulation.stop()}tick(t){return this.simulation.tick(t),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(t,e){const n=this.context.nodes.find((e=>e.id===t));n&&e.forEach(((t,e)=>{if("number"===typeof t||null===t){const r=["fx","fy","fz"][e];n[r]=t}}))}getOptions(t){var e,n;const r=Ng({},this.options,t);return r.collide&&void 0===(null===(e=r.collide)||void 0===e?void 0:e.radius)&&(r.collide=r.collide||{},r.collide.radius=null!==(n=r.nodeSize)&&void 0!==n?n:10),void 0===r.iterations&&(r.link&&void 0===r.link.iterations&&(r.iterations=r.link.iterations),r.collide&&void 0===r.collide.iterations&&(r.iterations=r.collide.iterations)),this.context.options=r,r}genericLayout(t,e,n){var r;return Be(this,void 0,void 0,(function*(){const i=this.getOptions(n),o=e.getAllNodes().map((({id:t,data:e})=>Object.assign(Object.assign({id:t},e),yb(e.data,this.config.inputNodeAttrs)))),s=e.getAllEdges().map((t=>Object.assign({},t)));Object.assign(this.context,{assign:t,nodes:o,edges:s,graph:e});const a=new Promise((t=>{this.resolver=t})),c=this.setSimulation(i);return c.nodes(o),null===(r=c.force("link"))||void 0===r||r.links(s),a}))}getResult(){const{assign:t,nodes:e,edges:n,graph:r}=this.context,i=e.map((t=>({id:t.id,data:Object.assign(Object.assign({},t.data),yb(t,this.config.outputNodeAttrs))}))),o=n.map((({id:t,source:e,target:n,data:r})=>({id:t,source:"object"===typeof e?e.id:e,target:"object"===typeof n?n.id:n,data:r})));return t&&i.forEach((t=>r.mergeNodeData(t.id,t.data))),{nodes:i,edges:o}}initSimulation(){return dN()}setSimulation(t){const e=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=e.on("tick",(()=>{var e;return null===(e=t.onTick)||void 0===e?void 0:e.call(t,this.getResult())})).on("end",(()=>{var t;return null===(t=this.resolver)||void 0===t?void 0:t.call(this,this.getResult())}))),EN(e,this.config.simulationAttrs.map((e=>[e,t[e]]))),Object.entries(this.forceMap).forEach((([n,r])=>{const i=n;if(t[n]){let n=e.force(i);n||(n=r(),e.force(i,n)),EN(n,Object.entries(t[i]))}else e.force(i,null)})),e}}const EN=(t,e)=>e.reduce(((e,[n,r])=>e[n]&&void 0!==r?e[n].call(t,r):e),t);var kN=n(92119),SN=n.n(kN);class MN{constructor(t){this.id="dagre",this.options={},Object.assign(this.options,MN.defaultOptions,t)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericDagreLayout(!1,t,Object.assign(Object.assign({},this.options),e))}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericDagreLayout(!0,t,Object.assign(Object.assign({},this.options),e))}))}genericDagreLayout(t,e,n){return Be(this,void 0,void 0,(function*(){const{nodeSize:r}=n,i=new kN.graphlib.Graph;i.setGraph(n),i.setDefaultEdgeLabel((()=>({})));const o=e.getAllNodes(),s=e.getAllEdges();[...o,...s].some((({id:t})=>Ae(t)))&&console.error("Dagre layout only support string id, it will convert number to string."),e.getAllNodes().forEach((t=>{const{id:e}=t,n=Object.assign({},t.data);if(void 0!==r){const[e,i]=jS(nr(r)?r(t):r);Object.assign(n,{width:e,height:i})}i.setNode(e.toString(),n)})),e.getAllEdges().forEach((({id:t,source:e,target:n})=>{i.setEdge(e.toString(),n.toString(),{id:t})})),SN().layout(i);const a={nodes:[],edges:[]};return i.nodes().forEach((n=>{const r=i.node(n);a.nodes.push({id:n,data:r}),t&&e.mergeNodeData(n,r)})),i.edges().forEach((n=>{const r=i.edge(n),{id:o}=r,s=Fe(r,["id"]),{v:c,w:l}=n;a.edges.push({id:o,source:c,target:l,data:s}),t&&e.mergeEdgeData(o,s)})),a}))}}MN.defaultOptions={};class ON{constructor(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}distanceTo(t){const e=this.rx-t.rx,n=this.ry-t.ry;return Math.hypot(e,n)}setPos(t,e){this.rx=t,this.ry=e}resetForce(){this.fx=0,this.fy=0}addForce(t){const e=t.rx-this.rx,n=t.ry-this.ry;let r=Math.hypot(e,n);r=r<1e-4?1e-4:r;const i=this.g*(this.degree+1)*(t.degree+1)/r;this.fx+=i*e/r,this.fy+=i*n/r}in(t){return t.contains(this.rx,this.ry)}add(t){const e=this.mass+t.mass,n=(this.rx*this.mass+t.rx*t.mass)/e,r=(this.ry*this.mass+t.ry*t.mass)/e,i=this.degree+t.degree,o={rx:n,ry:r,mass:e,degree:i};return new ON(o)}}class NN{constructor(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}getLength(){return this.length}contains(t,e){const n=this.length/2;return t<=this.xmid+n&&t>=this.xmid-n&&e<=this.ymid+n&&e>=this.ymid-n}NW(){const t=this.xmid-this.length/4,e=this.ymid+this.length/4,n=this.length/2,r={xmid:t,ymid:e,length:n},i=new NN(r);return i}NE(){const t=this.xmid+this.length/4,e=this.ymid+this.length/4,n=this.length/2,r={xmid:t,ymid:e,length:n},i=new NN(r);return i}SW(){const t=this.xmid-this.length/4,e=this.ymid-this.length/4,n=this.length/2,r={xmid:t,ymid:e,length:n},i=new NN(r);return i}SE(){const t=this.xmid+this.length/4,e=this.ymid-this.length/4,n=this.length/2,r={xmid:t,ymid:e,length:n},i=new NN(r);return i}}class TN{constructor(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=t&&(this.quad=t)}insert(t){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new TN(this.quad.NW()),this.NE=new TN(this.quad.NE()),this.SW=new TN(this.quad.SW()),this.SE=new TN(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t)):this.body=t}_putBody(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}_isExternal(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE}updateForce(t){if(null!=this.body&&t!==this.body)if(this._isExternal())t.addForce(this.body);else{const e=this.quad?this.quad.getLength():0,n=this.body.distanceTo(t);e/n<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t))}}}const AN={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1};class CN{constructor(t={}){this.options=t,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},AN),t)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericForceAtlas2Layout(!1,t,e)}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericForceAtlas2Layout(!0,t,e)}))}genericForceAtlas2Layout(t,e,n){return Be(this,void 0,void 0,(function*(){const r=e.getAllEdges(),i=e.getAllNodes(),o=this.formatOptions(n,i.length),{width:s,height:a,prune:c,maxIteration:l,nodeSize:u,center:h}=o;if(!(null===i||void 0===i?void 0:i.length)||1===i.length)return $S(e,t,h);const d=i.map((t=>VS(t,[s,a]))),f=r.filter((t=>{const{source:e,target:n}=t;return e!==n})),p=new jw({nodes:d,edges:f}),g=this.getSizes(p,u);if(this.run(p,e,l,g,t,o),c){for(let t=0;t<f.length;t+=1){const{source:e,target:n}=f[t],r=p.getDegree(e),i=p.getDegree(e);if(r<=1){const t=p.getNode(n);p.mergeNodeData(e,{x:t.data.x,y:t.data.y})}else if(i<=1){const t=p.getNode(e);p.mergeNodeData(n,{x:t.data.x,y:t.data.y})}}const n=Object.assign(Object.assign({},o),{prune:!1,barnesHut:!1});this.run(p,e,100,g,t,n)}return{nodes:d,edges:r}}))}getSizes(t,e){const n=t.getAllNodes(),r={};for(let i=0;i<n.length;i+=1){const t=n[i];r[t.id]=zS(e,void 0)(t)}return r}formatOptions(t={},e){const n=Object.assign(Object.assign({},this.options),t),{center:r,width:i,height:o,barnesHut:s,prune:a,maxIteration:c,kr:l,kg:u}=n;return n.width=i||"undefined"===typeof window?i:window.innerWidth,n.height=o||"undefined"===typeof window?o:window.innerHeight,n.center=r||[n.width/2,n.height/2],void 0===s&&e>250&&(n.barnesHut=!0),void 0===a&&e>100&&(n.prune=!0),0!==c||a?0===c&&a&&(n.maxIteration=100,e<=200&&e>100?n.maxIteration=500:e>200&&(n.maxIteration=950)):(n.maxIteration=250,e<=200&&e>100?n.maxIteration=1e3:e>200&&(n.maxIteration=1200)),l||(n.kr=50,e>100&&e<=500?n.kr=20:e>500&&(n.kr=1)),u||(n.kg=20,e>100&&e<=500?n.kg=10:e>500&&(n.kg=1)),n}run(t,e,n,r,i,o){const{kr:s,barnesHut:a,onTick:c}=o,l=t.getAllNodes();let u=0,h=n;const d={},f={},p={};for(let g=0;g<l.length;g+=1){const{data:e,id:n}=l[g];if(d[n]=[0,0],a){const r={id:g,rx:e.x,ry:e.y,mass:1,g:s,degree:t.getDegree(n)};p[n]=new ON(r)}}while(h>0)u=this.oneStep(t,{iter:h,preventOverlapIters:50,krPrime:100,sg:u,forces:d,preForces:f,bodies:p,sizes:r},o),h--,null===c||void 0===c||c({nodes:l,edges:e.getAllEdges()});return t}oneStep(t,e,n){const{iter:r,preventOverlapIters:i,krPrime:o,sg:s,preForces:a,bodies:c,sizes:l}=e;let{forces:u}=e;const{preventOverlap:h,barnesHut:d}=n,f=t.getAllNodes();for(let p=0;p<f.length;p+=1){const{id:t}=f[p];a[t]=[...u[t]],u[t]=[0,0]}return u=this.getAttrForces(t,r,i,l,u,n),u=d&&(h&&r>i||!h)?this.getOptRepGraForces(t,u,c,n):this.getRepGraForces(t,r,i,u,o,l,n),this.updatePos(t,u,a,s,n)}getAttrForces(t,e,n,r,i,o){const{preventOverlap:s,dissuadeHubs:a,mode:c,prune:l}=o,u=t.getAllEdges();for(let h=0;h<u.length;h+=1){const{source:o,target:d}=u[h],f=t.getNode(o),p=t.getNode(d),g=t.getDegree(o),v=t.getDegree(d);if(l&&(g<=1||v<=1))continue;const y=[p.data.x-f.data.x,p.data.y-f.data.y];let m=Math.hypot(y[0],y[1]);m=m<1e-4?1e-4:m,y[0]=y[0]/m,y[1]=y[1]/m,s&&e<n&&(m=m-r[o]-r[d]);let b=m,x=b;"linlog"===c&&(b=Math.log(1+m),x=b),a&&(b=m/g,x=m/v),s&&e<n&&m<=0?(b=0,x=0):s&&e<n&&m>0&&(b=m,x=m),i[o][0]+=b*y[0],i[d][0]-=x*y[0],i[o][1]+=b*y[1],i[d][1]-=x*y[1]}return i}getOptRepGraForces(t,e,n,r){const{kg:i,center:o,prune:s}=r,a=t.getAllNodes(),c=a.length;let l=9e10,u=-9e10,h=9e10,d=-9e10;for(let y=0;y<c;y+=1){const{id:e,data:r}=a[y];s&&t.getDegree(e)<=1||(n[e].setPos(r.x,r.y),r.x>=u&&(u=r.x),r.x<=l&&(l=r.x),r.y>=d&&(d=r.y),r.y<=h&&(h=r.y))}const f=Math.max(u-l,d-h),p={xmid:(u+l)/2,ymid:(d+h)/2,length:f,massCenter:o,mass:c},g=new NN(p),v=new TN(g);for(let y=0;y<c;y+=1){const{id:e}=a[y];s&&t.getDegree(e)<=1||n[e].in(g)&&v.insert(n[e])}for(let y=0;y<c;y+=1){const{id:r,data:c}=a[y],l=t.getDegree(r);if(s&&l<=1)continue;n[r].resetForce(),v.updateForce(n[r]),e[r][0]-=n[r].fx,e[r][1]-=n[r].fy;const u=[c.x-o[0],c.y-o[1]];let h=Math.hypot(u[0],u[1]);h=h<1e-4?1e-4:h,u[0]=u[0]/h,u[1]=u[1]/h;const d=i*(l+1);e[r][0]-=d*u[0],e[r][1]-=d*u[1]}return e}getRepGraForces(t,e,n,r,i,o,s){const{preventOverlap:a,kr:c,kg:l,center:u,prune:h}=s,d=t.getAllNodes(),f=d.length;for(let p=0;p<f;p+=1){const s=d[p],g=t.getDegree(s.id);for(let l=p+1;l<f;l+=1){const u=d[l],f=t.getDegree(u.id);if(h&&(g<=1||f<=1))continue;const p=[u.data.x-s.data.x,u.data.y-s.data.y];let v=Math.hypot(p[0],p[1]);v=v<1e-4?1e-4:v,p[0]=p[0]/v,p[1]=p[1]/v,a&&e<n&&(v=v-o[s.id]-o[u.id]);let y=c*(g+1)*(f+1)/v;a&&e<n&&v<0?y=i*(g+1)*(f+1):a&&e<n&&0===v?y=0:a&&e<n&&v>0&&(y=c*(g+1)*(f+1)/v),r[s.id][0]-=y*p[0],r[u.id][0]+=y*p[0],r[s.id][1]-=y*p[1],r[u.id][1]+=y*p[1]}const v=[s.data.x-u[0],s.data.y-u[1]],y=Math.hypot(v[0],v[1]);v[0]=v[0]/y,v[1]=v[1]/y;const m=l*(g+1);r[s.id][0]-=m*v[0],r[s.id][1]-=m*v[1]}return r}updatePos(t,e,n,r,i){const{ks:o,tao:s,prune:a,ksmax:c}=i,l=t.getAllNodes(),u=l.length,h=[],d=[];let f=0,p=0,g=r;for(let y=0;y<u;y+=1){const{id:r}=l[y],i=t.getDegree(r);if(a&&i<=1)continue;const o=[e[r][0]-n[r][0],e[r][1]-n[r][1]],s=Math.hypot(o[0],o[1]),c=[e[r][0]+n[r][0],e[r][1]+n[r][1]],u=Math.hypot(c[0],c[1]);h[y]=s,d[y]=u/2,f+=(i+1)*h[y],p+=(i+1)*d[y]}const v=g;g=s*p/f,0!==v&&(g=g>1.5*v?1.5*v:g);for(let y=0;y<u;y+=1){const{id:n,data:r}=l[y],i=t.getDegree(n);if(a&&i<=1)continue;if(Ae(r.fx)&&Ae(r.fy))continue;let s=o*g/(1+g*Math.sqrt(h[y])),u=Math.hypot(e[n][0],e[n][1]);u=u<1e-4?1e-4:u;const d=c/u;s=s>d?d:s;const f=s*e[n][0],p=s*e[n][1];t.mergeNodeData(n,{x:r.x+f,y:r.y+p})}return g}}const PN={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},RN=800;class _N{constructor(t={}){this.options=t,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},PN),t)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericFruchtermanLayout(!1,t,e)}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericFruchtermanLayout(!0,t,e)}))}stop(){this.timeInterval&&"undefined"!==typeof window&&window.clearInterval(this.timeInterval),this.running=!1}tick(t=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let n=0;n<t;n++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);const e={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&e.nodes.forEach((t=>this.lastGraph.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===this.options.dimensions?t.data.z:void 0}))),e}genericFruchtermanLayout(t,e,n){return Be(this,void 0,void 0,(function*(){if(this.running)return;const r=this.formatOptions(n),{dimensions:i,width:o,height:s,center:a,clustering:c,nodeClusterBy:l,maxIteration:u,onTick:h}=r,d=e.getAllNodes(),f=e.getAllEdges();if(!(null===d||void 0===d?void 0:d.length)){const t={nodes:[],edges:f};return this.lastResult=t,t}if(1===d.length){t&&e.mergeNodeData(d[0].id,{x:a[0],y:a[1],z:3===i?a[2]:void 0});const n={nodes:[Object.assign(Object.assign({},d[0]),{data:Object.assign(Object.assign({},d[0].data),{x:a[0],y:a[1],z:3===i?a[2]:void 0})})],edges:f};return this.lastResult=n,n}const p=d.map((t=>VS(t,[o,s]))),g=new jw({nodes:p,edges:f}),v={};if(c&&p.forEach((t=>{const e=t.data[l];v[e]||(v[e]={name:e,cx:0,cy:0,count:0})})),this.lastLayoutNodes=p,this.lastLayoutEdges=f,this.lastAssign=t,this.lastGraph=g,this.lastOptions=r,this.lastClusterMap=v,"undefined"===typeof window)return;let y=0;return new Promise((n=>{this.timeInterval=window.setInterval((()=>{this.running?(this.runOneStep(g,v,r),t&&p.forEach((({id:t,data:n})=>e.mergeNodeData(t,{x:n.x,y:n.y,z:3===i?n.z:void 0}))),null===h||void 0===h||h({nodes:p,edges:f}),y++,y>=u&&(window.clearInterval(this.timeInterval),n({nodes:p,edges:f}))):n({nodes:p,edges:f})}),0),this.running=!0}))}))}formatOptions(t={}){const e=Object.assign(Object.assign({},this.options),t),{clustering:n,nodeClusterBy:r}=e,{center:i,width:o,height:s}=e;return e.width=o||"undefined"===typeof window?o:window.innerWidth,e.height=s||"undefined"===typeof window?s:window.innerHeight,e.center=i||[e.width/2,e.height/2],e.clustering=n&&!!r,e}runOneStep(t,e,n){const{dimensions:r,height:i,width:o,gravity:s,center:a,speed:c,clustering:l,nodeClusterBy:u,clusterGravity:h}=n,d=i*o,f=Math.sqrt(d)/10,p=t.getAllNodes(),g=d/(p.length+1),v=Math.sqrt(g),y={};if(this.applyCalculate(t,y,v,g),l){for(const n in e)e[n].cx=0,e[n].cy=0,e[n].count=0;p.forEach((t=>{const{data:n}=t,r=e[n[u]];Ae(n.x)&&(r.cx+=n.x),Ae(n.y)&&(r.cy+=n.y),r.count++}));for(const n in e)e[n].cx/=e[n].count,e[n].cy/=e[n].count;const t=h||s;p.forEach(((n,r)=>{const{id:i,data:o}=n;if(!Ae(o.x)||!Ae(o.y))return;const s=e[o[u]],a=Math.sqrt((o.x-s.cx)*(o.x-s.cx)+(o.y-s.cy)*(o.y-s.cy)),c=v*t;y[i].x-=c*(o.x-s.cx)/a,y[i].y-=c*(o.y-s.cy)/a}))}p.forEach(((t,e)=>{const{id:n,data:i}=t;if(!Ae(i.x)||!Ae(i.y))return;const o=.01*v*s;y[n].x-=o*(i.x-a[0]),y[n].y-=o*(i.y-a[1]),3===r&&(y[n].z-=o*(i.z-a[2]))})),p.forEach(((e,n)=>{const{id:i,data:o}=e;if(Ae(o.fx)&&Ae(o.fy))return o.x=o.fx,o.y=o.fy,void(3===r&&(o.z=o.fz));if(!Ae(o.x)||!Ae(o.y))return;const s=Math.sqrt(y[i].x*y[i].x+y[i].y*y[i].y+(3===r?y[i].z*y[i].z:0));if(s>0){const e=Math.min(f*(c/RN),s);t.mergeNodeData(i,{x:o.x+y[i].x/s*e,y:o.y+y[i].y/s*e,z:3===r?o.z+y[i].z/s*e:void 0})}}))}applyCalculate(t,e,n,r){this.calRepulsive(t,e,r),this.calAttractive(t,e,n)}calRepulsive(t,e,n){const r=t.getAllNodes();r.forEach((({data:t,id:i},o)=>{e[i]={x:0,y:0,z:0},r.forEach((({data:r,id:s},a)=>{if(o<=a||!Ae(t.x)||!Ae(r.x)||!Ae(t.y)||!Ae(r.y))return;let c=t.x-r.x,l=t.y-r.y,u=3===this.options.dimensions?t.z-r.z:0,h=c*c+l*l+u*u;0===h&&(h=1,c=.01,l=.01,u=.01);const d=n/h,f=c*d,p=l*d,g=u*d;e[i].x+=f,e[i].y+=p,e[s].x-=f,e[s].y-=p,3===this.options.dimensions&&(e[i].z+=g,e[s].z-=g)}))}))}calAttractive(t,e,n){const r=t.getAllEdges();r.forEach((r=>{const{source:i,target:o}=r;if(!i||!o||i===o)return;const{data:s}=t.getNode(i),{data:a}=t.getNode(o);if(!Ae(a.x)||!Ae(s.x)||!Ae(a.y)||!Ae(s.y))return;const c=a.x-s.x,l=a.y-s.y,u=3===this.options.dimensions?a.z-s.z:0,h=Math.sqrt(c*c+l*l+u*u)/n,d=c*h,f=l*h,p=u*h;e[i].x+=d,e[i].y+=f,e[o].x-=d,e[o].y-=f,3===this.options.dimensions&&(e[i].z+=p,e[o].z-=p)}))}}const LN={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300};class DN{constructor(t={}){this.options=t,this.id="grid",this.options=Object.assign(Object.assign({},LN),t)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericGridLayout(!1,t,e)}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericGridLayout(!0,t,e)}))}genericGridLayout(t,e,n){return Be(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},this.options),n),{begin:i=[0,0],condense:o,preventOverlapPadding:s,preventOverlap:a,rows:c,cols:l,nodeSpacing:u,nodeSize:h,width:d,height:f,position:p}=r;let{sortBy:g}=r;const v=e.getAllNodes(),y=e.getAllEdges(),m=null===v||void 0===v?void 0:v.length;if(!m||1===m)return $S(e,t,i);const b=v.map((t=>VS(t)));"id"===g||Re(g)&&void 0!==b[0].data[g]||(g="degree"),"degree"===g?b.sort(((t,n)=>e.getDegree(n.id,"both")-e.getDegree(t.id,"both"))):"id"===g?b.sort(((t,e)=>Ae(e.id)&&Ae(t.id)?e.id-t.id:`${t.id}`.localeCompare(`${e.id}`))):b.sort(((t,e)=>e.data[g]-t.data[g]));const x=d||"undefined"===typeof window?d:window.innerWidth,w=f||"undefined"===typeof window?f:window.innerHeight,E=m,k={rows:c,cols:l};if(null!=c&&null!=l)k.rows=c,k.cols=l;else if(null!=c&&null==l)k.rows=c,k.cols=Math.ceil(E/k.rows);else if(null==c&&null!=l)k.cols=l,k.rows=Math.ceil(E/k.cols);else{const t=Math.sqrt(E*w/x);k.rows=Math.round(t),k.cols=Math.round(x/w*t)}if(k.rows=Math.max(k.rows,1),k.cols=Math.max(k.cols,1),k.cols*k.rows>E){const t=IN(k),e=jN(k);(t-1)*e>=E?IN(k,t-1):(e-1)*t>=E&&jN(k,e-1)}else while(k.cols*k.rows<E){const t=IN(k),e=jN(k);(e+1)*t>=E?jN(k,e+1):IN(k,t+1)}let S=o?0:x/k.cols,M=o?0:w/k.rows;if(a||u){const t=FS(10,u),n=BS(30,h,!1);b.forEach((r=>{r.data.x&&r.data.y||(r.data.x=0,r.data.y=0);const i=e.getNode(r.id),[o,a]=jS(n(i)||30),c=void 0!==t?t(r):s,l=o+c,u=a+c;S=Math.max(S,l),M=Math.max(M,u)}))}const O={},N={row:0,col:0},T={};for(let t=0;t<b.length;t++){const n=b[t];let r;if(p&&(r=p(e.getNode(n.id))),r&&(void 0!==r.row||void 0!==r.col)){const t={row:r.row,col:r.col};if(void 0===t.col){t.col=0;while(FN(O,t))t.col++}else if(void 0===t.row){t.row=0;while(FN(O,t))t.row++}T[n.id]=t,BN(O,t)}GN(n,i,S,M,T,k,N,O)}const A={nodes:b,edges:y};return t&&b.forEach((t=>{e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),A}))}}const IN=(t,e)=>{let n;const r=t.rows||5,i=t.cols||5;if(null==e)n=Math.min(r,i);else{const n=Math.min(r,i);n===t.rows?t.rows=e:t.cols=e}return n},jN=(t,e)=>{let n;const r=t.rows||5,i=t.cols||5;if(null==e)n=Math.max(r,i);else{const n=Math.max(r,i);n===t.rows?t.rows=e:t.cols=e}return n},FN=(t,e)=>t[`c-${e.row}-${e.col}`]||!1,BN=(t,e)=>t[`c-${e.row}-${e.col}`]=!0,zN=(t,e)=>{const n=t.cols||5;e.col++,e.col>=n&&(e.col=0,e.row++)},GN=(t,e,n,r,i,o,s,a)=>{let c,l;const u=i[t.id];if(u)c=u.col*n+n/2+e[0],l=u.row*r+r/2+e[1];else{while(FN(a,s))zN(o,s);c=s.col*n+n/2+e[0],l=s.row*r+r/2+e[1],BN(a,s),zN(o,s)}t.data.x=c,t.data.y=l},VN=(t,e,n)=>{try{const n=lO.mul(lO.pow(e,2),-.5),r=n.mean("row"),i=n.mean("column"),o=n.mean();n.add(o).subRowVector(r).subColumnVector(i);const s=new uO(n),a=lO.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map((e=>lO.mul([e],[a]).toJSON()[0].splice(0,t)))}catch(BR){const r=[];for(let i=0;i<e.length;i++){const t=Math.random()*n,e=Math.random()*n;r.push([t,e])}return r}},WN=800,UN={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},HN=(t,e)=>{const n=Object.assign(Object.assign({},UN),e),{positions:r,iterations:i,width:o,k:s,speed:a=100,strictRadial:c,focusIdx:l,radii:u=[],nodeSizeFunc:h}=n,d=t.getAllNodes(),f=[],p=o/10;for(let g=0;g<i;g++)r.forEach(((t,e)=>{f[e]={x:0,y:0}})),$N(d,r,f,s,u,h),YN(r,f,a,c,l,p,o,u);return r},$N=(t,e,n,r,i,o)=>{e.forEach(((s,a)=>{n[a]={x:0,y:0},e.forEach(((e,c)=>{if(a===c)return;if(i[a]!==i[c])return;let l=s.x-e.x,u=s.y-e.y,h=Math.sqrt(l*l+u*u);if(0===h){h=1;const t=a>c?1:-1;l=.01*t,u=.01*t}if(h<o(t[a])/2+o(t[c])/2){const t=r*r/h;n[a].x+=l/h*t,n[a].y+=u/h*t}}))}))},YN=(t,e,n,r,i,o,s,a)=>{const c=o||s/10;return r&&e.forEach(((e,n)=>{const r=t[n].x-t[i].x,o=t[n].y-t[i].y,s=Math.sqrt(r*r+o*o);let a=o/s,c=-r/s;const l=Math.sqrt(e.x*e.x+e.y*e.y);let u=Math.acos((a*e.x+c*e.y)/l);u>Math.PI/2&&(u-=Math.PI/2,a*=-1,c*=-1);const h=Math.cos(u)*l;e.x=a*h,e.y=c*h})),t.forEach(((o,s)=>{if(s===i)return;const l=Math.sqrt(e[s].x*e[s].x+e[s].y*e[s].y);if(l>0&&s!==i){const u=Math.min(c*(n/WN),l);if(o.x+=e[s].x/l*u,o.y+=e[s].y/l*u,r){let e=o.x-t[i].x,n=o.y-t[i].y;const r=Math.sqrt(e*e+n*n);e=e/r*a[s],n=n/r*a[s],o.x=t[i].x+e,o.y=t[i].y+n}}})),t},qN={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10};class XN{constructor(t={}){this.options=t,this.id="radial",this.options=Object.assign(Object.assign({},qN),t)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericRadialLayout(!1,t,e)}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericRadialLayout(!0,t,e)}))}genericRadialLayout(t,e,n){return Be(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},this.options),n),{width:i,height:o,center:s,focusNode:a,unitRadius:c,nodeSize:l,nodeSpacing:u,strictRadial:h,preventOverlap:d,maxPreventOverlapIteration:f,sortBy:p,linkDistance:g=50,sortStrength:v=10,maxIteration:y=1e3}=r,m=e.getAllNodes(),b=e.getAllEdges(),x=i||"undefined"===typeof window?i:window.innerWidth,w=o||"undefined"===typeof window?o:window.innerHeight,E=s||[x/2,w/2];if(!(null===m||void 0===m?void 0:m.length)||1===m.length)return $S(e,t,E);let k=m[0];if(Re(a)){for(let t=0;t<m.length;t++)if(m[t].id===a){k=m[t];break}}else k=a||m[0];const S=JN(m,k.id),M=dO({nodes:m,edges:b},!1),O=hO(M),N=tT(O,S);QN(O,S,N+1);const T=O[S];let A=x-E[0]>E[0]?E[0]:x-E[0],C=w-E[1]>E[1]?E[1]:w-E[1];0===A&&(A=x/2),0===C&&(C=w/2);const P=Math.min(A,C),R=Math.max(...T),_=[],L=c||P/R;T.forEach(((t,e)=>{_[e]=t*L}));const D=KN(m,O,g,_,L,p,v),I=ZN(D),j=VN(g,D,g);let F,B=j.map((([t,e])=>({x:(isNaN(t)?Math.random()*g:t)-j[S][0],y:(isNaN(e)?Math.random()*g:e)-j[S][1]})));if(this.run(y,B,I,D,_,S),d){F=zS(l,u);const t={nodes:m,nodeSizeFunc:F,positions:B,radii:_,height:w,width:x,strictRadial:Boolean(h),focusIdx:S,iterations:f||200,k:B.length/4.5};B=HN(e,t)}const z=[];B.forEach(((t,e)=>{const n=VS(m[e]);n.data.x=t.x+E[0],n.data.y=t.y+E[1],z.push(n)})),t&&z.forEach((t=>e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})));const G={nodes:z,edges:b};return G}))}run(t,e,n,r,i,o){for(let s=0;s<=t;s++){const a=s/t;this.oneIteration(a,e,i,r,n,o)}}oneIteration(t,e,n,r,i,o){const s=1-t;e.forEach(((a,c)=>{const l=gO(a,{x:0,y:0}),u=0===l?0:1/l;if(c===o)return;let h=0,d=0,f=0;e.forEach(((t,e)=>{if(c===e)return;const n=gO(a,t),o=0===n?0:1/n,s=r[e][c];f+=i[c][e],h+=i[c][e]*(t.x+s*(a.x-t.x)*o),d+=i[c][e]*(t.y+s*(a.y-t.y)*o)}));const p=0===n[c]?0:1/n[c];f*=s,f+=t*p*p,h*=s,h+=t*p*a.x*u,a.x=h/f,d*=s,d+=t*p*a.y*u,a.y=d/f}))}}const KN=(t,e,n,r,i,o,s)=>{if(!t)return[];const a=[];if(e){const c={};e.forEach(((e,l)=>{const u=[];e.forEach(((e,a)=>{var h,d;if(l===a)u.push(0);else if(r[l]===r[a])if("data"===o)u.push(e*(Math.abs(l-a)*s)/(r[l]/i));else if(o){let n,f;if(c[t[l].id])n=c[t[l].id];else{const e=("id"===o?t[l].id:null===(h=t[l].data)||void 0===h?void 0:h[o])||0;n=Re(e)?e.charCodeAt(0):e,c[t[l].id]=n}if(c[t[a].id])f=c[t[a].id];else{const e=("id"===o?t[a].id:null===(d=t[a].data)||void 0===d?void 0:d[o])||0;f=Re(e)?e.charCodeAt(0):e,c[t[a].id]=f}u.push(e*(Math.abs(n-f)*s)/(r[l]/i))}else u.push(e*n/(r[l]/i));else{const t=(n+i)/2;u.push(e*t)}})),a.push(u)}))}return a},ZN=t=>{const e=t.length,n=t[0].length,r=[];for(let i=0;i<e;i++){const e=[];for(let r=0;r<n;r++)0!==t[i][r]?e.push(1/(t[i][r]*t[i][r])):e.push(0);r.push(e)}return r},JN=(t,e)=>{let n=-1;return t.forEach(((t,r)=>{t.id===e&&(n=r)})),Math.max(n,0)},QN=(t,e,n)=>{const r=t.length;for(let i=0;i<r;i++)if(t[e][i]===1/0){t[e][i]=n,t[i][e]=n;for(let o=0;o<r;o++)t[i][o]!==1/0&&t[e][o]===1/0&&(t[e][o]=n+t[i][o],t[o][e]=n+t[i][o])}for(let i=0;i<r;i++)if(i!==e)for(let n=0;n<r;n++)if(t[i][n]===1/0){let r=Math.abs(t[e][i]-t[e][n]);r=0===r?1:r,t[i][n]=r}},tT=(t,e)=>{let n=0;for(let r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n},eT={center:[0,0],width:300,height:300};class nT{constructor(t={}){this.options=t,this.id="random",this.options=Object.assign(Object.assign({},eT),t)}execute(t,e){return Be(this,void 0,void 0,(function*(){return this.genericRandomLayout(!1,t,e)}))}assign(t,e){return Be(this,void 0,void 0,(function*(){yield this.genericRandomLayout(!0,t,e)}))}genericRandomLayout(t,e,n){return Be(this,void 0,void 0,(function*(){const r=Object.assign(Object.assign({},this.options),n),{center:i,width:o,height:s}=r,a=e.getAllNodes(),c=.9,l=o||"undefined"===typeof window?o:window.innerWidth,u=s||"undefined"===typeof window?s:window.innerHeight,h=i||[l/2,u/2],d=[];a&&a.forEach((t=>{d.push({id:t.id,data:{x:(Math.random()-.5)*c*l+h[0],y:(Math.random()-.5)*c*u+h[1]}})})),t&&d.forEach((t=>e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})));const f={nodes:d,edges:e.getAllEdges()};return f}))}}function rT(t){var e,n,r,i=t||1;function o(t,o){++e>i&&(r=n,s(1),++e),n[t]=o}function s(t){e=0,n=Object.create(null),t||(r=Object.create(null))}return s(),{clear:s,has:function(t){return void 0!==n[t]||void 0!==r[t]},get:function(t){var e=n[t];return void 0!==e?e:void 0!==(e=r[t])?(o(t,e),e):void 0},set:function(t,e){void 0!==n[t]?n[t]=e:o(t,e)}}}var iT=new Map;function oT(t,e,n){void 0===n&&(n=128);var r=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0];iT.has(t)||iT.set(t,rT(n));var s=iT.get(t);if(s.has(o))return s.get(o);var a=t.apply(this,r);return s.set(o,a),a};return r}var sT=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class aT extends Fw{constructor(){super(...arguments),this.id="fishbone"}getRoot(){const t=this.context.model.getRootsData();if(!(ly(t)||t.length>2))return t[0]}formatSize(t){const e="function"===typeof t?t:()=>t;return t=>Wv(e(t))}doLayout(t,e){const{hGap:n,getRibSep:r,vGap:i,nodeSize:o,height:s}=e,{model:a}=this.context,c=this.formatSize(o);let l=c(t)[0]+r(t);const u=(t,e=0)=>{var r;return e+=n*((t.children||[]).length+1),null===(r=t.children)||void 0===r||r.forEach((t=>{var n;const r=a.getNodeLikeDatum(t);null===(n=r.children)||void 0===n||n.forEach((t=>{const n=a.getNodeLikeDatum(t);e=u(n,e)}))})),e},h=t=>{if(1===t.depth)return l;const e=a.getParentData(t.id,"tree");if(uT(t)){const r=a.getParentData(e.id,"tree"),o=p(t)-p(r);return h(e)+o*n/i}{const n=(e.children||[]).indexOf(t.id),r=a.getNodeData((e.children||[]).slice(n));return d(e)-r.reduce(((t,e)=>t+u(e)),0)-c(e)[0]/2}},d=oT((t=>{if(lT(t))return c(t)[0]/2;const e=a.getParentData(t.id,"tree");if(uT(t))return h(t)+u(t)+c(t)[0]/2;{const r=p(t)-p(e),o=n/i;return h(t)+r*o}}),(t=>t.id)),f=t=>p(a.getParentData(t,"tree")),p=oT((t=>{if(lT(t))return s/2;if(uT(t)){const e=a.getParentData(t.id,"tree"),n=e.children.indexOf(t.id);if(0===n)return f(e.id)+i;const r=a.getNodeLikeDatum(e.children[n-1]);if(ly(r.children))return p(r)+i;const o=a.getDescendantsData(r.id);return Math.max(...o.map((t=>uT(t)?f(t.id):p(t))))+i}{if(ly(t.children))return f(t.id)+i;const e=a.getNodeLikeDatum(t.children.slice(-1)[0]);if(ly(e.children))return p(e)+i;const n=a.getDescendantsData(t.id).slice(-1)[0];return(uT(n)?f(n.id):p(n))+i}}),(t=>t.id));let g=0;const v={nodes:[],edges:[]},y=t=>{var e;null===(e=t.children)||void 0===e||e.forEach((t=>y(a.getNodeLikeDatum(t))));const n=p(t),i=d(t);if(v.nodes.push({id:t.id,x:i,y:n}),lT(t))return;const o=a.getRelatedEdgesData(t.id,"in")[0],s=[h(t),uT(t)?n:f(t.id)];v.edges.push({id:rg(o),controlPoints:[s],relatedNodeId:t.id}),g=Math.max(g,i+r(t)),1===t.depth&&(l=g)};return y(t),v}placeAlterative(t,e){const n=(e.children||[]).filter(((t,e)=>e%2!==0));if(0===n.length)return t;const{model:r}=this.context,i=t.nodes.find((t=>t.id===e.id)).y,o=t=>{const e=r.getAncestorsData(t,"tree");if(ly(e))return!1;const i=1===e.length?t:e[e.length-2].id;return n.includes(i)};t.nodes.forEach((t=>{o(t.id)&&(t.y=2*i-t.y)})),t.edges.forEach((t=>{o(t.relatedNodeId)&&(t.controlPoints=t.controlPoints.map((t=>[t[0],2*i-t[1]])))}))}rightToLeft(t,e){return t.nodes.forEach((t=>t.x=e.width-t.x)),t.edges.forEach((t=>{t.controlPoints=t.controlPoints.map((t=>[e.width-t[0],t[1]]))})),t}execute(t,e){return sT(this,void 0,void 0,(function*(){const n=Object.assign(Object.assign(Object.assign({},aT.defaultOptions),this.options),e),{direction:r,nodeSize:i}=n,o=this.getRoot();if(!o)return t;const s=this.formatSize(i);n.vGap||(n.vGap=Math.max(...(t.nodes||[]).map((t=>s(t)[1])))),n.hGap||(n.hGap=Math.max(...(t.nodes||[]).map((t=>s(t)[0]))));let a=this.doLayout(o,n);this.placeAlterative(a,o),"RL"===r&&(a=this.rightToLeft(a,n));const{model:c}=this.context,l=[],u=[];return a.nodes.forEach((t=>{const{id:e,x:n,y:r}=t,i=c.getNodeLikeDatum(e);l.push(cT(i,{x:n,y:r}))})),a.edges.forEach((t=>{const{id:e,controlPoints:n}=t,r=c.getEdgeDatum(e);u.push(cT(r,{controlPoints:n}))})),{nodes:l,edges:u}}))}}aT.defaultOptions={direction:"RL",getRibSep:()=>60};const cT=(t,e)=>Object.assign(Object.assign({},t),{style:Object.assign(Object.assign({},t.style||{}),e)}),lT=t=>0===t.depth,uT=t=>(t.depth||(t.depth=0))%2===0;var hT=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class dT extends Fw{constructor(){super(...arguments),this.id="snake"}formatSize(t,e){const n="function"===typeof e?e:()=>e;return t.reduce(((t,e)=>{const[r,i]=Wv(n(e))||[0,0];return[Math.max(t[0],r),Math.max(t[1],i)]}),[0,0])}validate(t){const{nodes:e=[],edges:n=[]}=t,r={},i={},o={};e.forEach((t=>{r[t.id]=0,i[t.id]=0,o[t.id]=[]})),n.forEach((t=>{r[t.target]++,i[t.source]++,o[t.source].push(t.target)}));const s=new Set,a=t=>{s.has(t)||(s.add(t),o[t].forEach(a))};if(a(e[0].id),s.size!==e.length)return!1;const c=e.filter((t=>0===r[t.id])),l=e.filter((t=>0===i[t.id]));if(1!==c.length||1!==l.length)return!1;const u=e.filter((t=>1===r[t.id]&&1===i[t.id]));return u.length===e.length-2}execute(t,e){return hT(this,void 0,void 0,(function*(){var n;if(!this.validate(t))return t;const{nodeSize:r,padding:i,sortBy:o,cols:s,colGap:a,rowGap:c,clockwise:l,width:u,height:h}=Object.assign({},dT.defaultOptions,this.options,e),[d,f,p,g]=Hf(i),v=this.formatSize(t.nodes||[],r),y=Math.ceil((t.nodes||[]).length/s);let m=a||(u-g-f-s*v[0])/(s-1),b=c||(h-d-p-y*v[1])/(y-1);(b===1/0||b<0)&&(b=0),(m===1/0||m<0)&&(m=0);const x=o?null===(n=t.nodes)||void 0===n?void 0:n.sort(o):fT(t),w=(x||[]).map(((t,e)=>{const n=Math.floor(e/s),r=e%s,i=l?n%2===0?r:s-1-r:n%2===0?s-1-r:r,o=g+i*(v[0]+m)+v[0]/2,a=d+n*(v[1]+b)+v[1]/2;return{id:t.id,style:{x:o,y:a}}}));return{nodes:w}}))}}function fT(t){const{nodes:e=[],edges:n=[]}=t,r={},i={};e.forEach((t=>{r[t.id]=0,i[t.id]=[]})),n.forEach((t=>{r[t.target]++,i[t.source].push(t.target)}));const o=[],s=[];e.forEach((t=>{0===r[t.id]&&o.push(t.id)}));while(o.length>0){const t=o.shift(),n=e.find((e=>e.id===t));s.push(n),i[t].forEach((t=>{r[t]--,0===r[t]&&o.push(t)}))}return s}dT.defaultOptions={padding:0,cols:5,clockwise:!0};const pT=["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],gT=["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],vT=["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],yT=["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],mT=["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"];var bT=function(t,e,n){if(!kn(t)&&!Eg(t))return t;var r=n;return gb(t,(function(t,n){r=e(r,t,n)})),r},xT=bT,wT=function(t,e){return xT(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})};class ET extends mg{}function kT(t,e=!0,n){const r=document.createElement("div");return r.setAttribute("class",`g6-${t}`),Object.assign(r.style,{position:"absolute",display:"block"}),e&&Object.assign(r.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),n&&Object.assign(r.style,n),r}function ST(t,e="div",n={},r="",i=document.body){const o=document.getElementById(t);o&&o.remove();const s=document.createElement(e);return s.innerHTML=r,s.id=t,Object.assign(s.style,n),i.appendChild(s),s}var MT,OT,NT=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class TT extends ET{constructor(t,e){super(t,Object.assign({},TT.defaultOptions,e)),this.$element=kT("background");const n=this.context.canvas.getContainer();n.prepend(this.$element),this.update(e)}update(t){const e=Object.create(null,{update:{get:()=>super.update}});return NT(this,void 0,void 0,(function*(){e.update.call(this,t),Object.assign(this.$element.style,wT(this.options,["key","type"]))}))}destroy(){super.destroy(),this.$element.remove()}}function AT(t,e,n,r,i,o){const s=t,a=e,c=n-s,l=r-a;let u=i-s,h=o-a,d=u*c+h*l,f=0;d<=0?f=0:(u=c-u,h=l-h,d=u*c+h*l,f=d<=0?0:d*d/(c*c+l*l));const p=u*u+h*h-f;return p<0?0:p}function CT(t,e,n,r){return(t-n)*(t-n)+(e-r)*(e-r)}function PT(t,e,n,r,i){return CT(t,e,n,r)<i*i}function RT(t){if(!Number.isFinite(t))return t=>t;if(0===t)return Math.round;const e=Math.pow(10,t);return t=>Math.round(t*e)/e}function _T(t){const e=Math.min(t.x1,t.x2),n=Math.max(t.x1,t.x2),r=Math.min(t.y1,t.y2),i=Math.max(t.y1,t.y2);return{x:e,y:r,x2:n,y2:i,width:n-e,height:i-r}}TT.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};class LT{constructor(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}draw(t){t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2)}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`}static from(t){return new LT(t.x1,t.y1,t.x2,t.y2)}cuts(t,e){if(this.y1===this.y2)return!1;if(e<this.y1&&e<=this.y2||e>this.y1&&e>=this.y2)return!1;if(t>this.x1&&t>=this.x2)return!1;if(t<this.x1&&t<=this.x2)return!0;const n=this.x1+(e-this.y1)*(this.x2-this.x1)/(this.y2-this.y1);return t<=n}distSquare(t,e){return AT(this.x1,this.y1,this.x2,this.y2,t,e)}ptClose(t,e,n){if(this.x1<this.x2){if(t<this.x1-n||t>this.x2+n)return!1}else if(t<this.x2-n||t>this.x1+n)return!1;if(this.y1<this.y2){if(e<this.y1-n||e>this.y2+n)return!1}else if(e<this.y2-n||e>this.y1+n)return!1;return!0}}(function(t){t[t["POINT"]=1]="POINT",t[t["PARALLEL"]=2]="PARALLEL",t[t["COINCIDENT"]=3]="COINCIDENT",t[t["NONE"]=4]="NONE"})(MT||(MT={}));class DT{constructor(t,e=0,n=0){this.state=t,this.x=e,this.y=n}}function IT(t,e){const n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){const e=n/i,o=r/i;return 0<=e&&e<=1&&0<=o&&o<=1?new DT(MT.POINT,t.x1+e*(t.x2-t.x1),t.y1+e*(t.y2-t.y1)):new DT(MT.NONE)}return new DT(0===n||0===r?MT.COINCIDENT:MT.PARALLEL)}function jT(t,e){const n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){const t=n/i,e=r/i;if(0<=t&&t<=1&&0<=e&&e<=1)return t}return Number.POSITIVE_INFINITY}function FT(t,e){function n(t,n,r,i){let o=jT(e,new LT(t,n,r,i));return o=Math.abs(o-.5),o>=0&&o<=1?1:0}let r=n(t.x,t.y,t.x2,t.y);return r+=n(t.x,t.y,t.x,t.y2),r>1||(r+=n(t.x,t.y2,t.x2,t.y2),r>1||(r+=n(t.x2,t.y,t.x2,t.y2),r>0))}function BT(t,e,n){const r=new Set;return t.width<=0?(r.add(OT.LEFT),r.add(OT.RIGHT)):e<t.x?r.add(OT.LEFT):e>t.x+t.width&&r.add(OT.RIGHT),t.height<=0?(r.add(OT.TOP),r.add(OT.BOTTOM)):n<t.y?r.add(OT.TOP):n>t.y+t.height&&r.add(OT.BOTTOM),r}function zT(t,e){let n=e.x1,r=e.y1;const i=e.x2,o=e.y2,s=Array.from(BT(t,i,o));if(0===s.length)return!0;let a=BT(t,n,r);while(0!==a.size){for(const t of s)if(a.has(t))return!1;if(a.has(OT.RIGHT)||a.has(OT.LEFT)){let e=t.x;a.has(OT.RIGHT)&&(e+=t.width),r+=(e-n)*(o-r)/(i-n),n=e}else{let e=t.y;a.has(OT.BOTTOM)&&(e+=t.height),n+=(e-r)*(i-n)/(o-r),r=e}a=BT(t,n,r)}return!0}function GT(t,e){let n=Number.POSITIVE_INFINITY,r=0;function i(t,i,o,s){let a=jT(e,new LT(t,i,o,s));a=Math.abs(a-.5),a>=0&&a<=1&&(r++,a<n&&(n=a))}return i(t.x,t.y,t.x2,t.y),i(t.x,t.y,t.x,t.y2),r>1?n:(i(t.x,t.y2,t.x2,t.y2),r>1?n:(i(t.x2,t.y,t.x2,t.y2),0===r?-1:n))}function VT(t,e){let n=0;const r=IT(t,new LT(e.x,e.y,e.x2,e.y));n+=r.state===MT.POINT?1:0;const i=IT(t,new LT(e.x,e.y,e.x,e.y2));n+=i.state===MT.POINT?1:0;const o=IT(t,new LT(e.x,e.y2,e.x2,e.y2));n+=o.state===MT.POINT?1:0;const s=IT(t,new LT(e.x2,e.y,e.x2,e.y2));return n+=s.state===MT.POINT?1:0,{top:r,left:i,bottom:o,right:s,count:n}}(function(t){t[t["LEFT"]=0]="LEFT",t[t["TOP"]=1]="TOP",t[t["RIGHT"]=2]="RIGHT",t[t["BOTTOM"]=3]="BOTTOM"})(OT||(OT={}));class WT{constructor(t,e,n,r){this.x=t,this.y=e,this.width=n,this.height=r}get x2(){return this.x+this.width}get y2(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}get radius(){return Math.max(this.width,this.height)/2}static from(t){return new WT(t.x,t.y,t.width,t.height)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}clone(){return new WT(this.x,this.y,this.width,this.height)}add(t){const e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x2,t.x+t.width),i=Math.max(this.y2,t.y+t.height);this.x=e,this.y=n,this.width=r-e,this.height=i-n}addPoint(t){const e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x2,t.x),i=Math.max(this.y2,t.y);this.x=e,this.y=n,this.width=r-e,this.height=i-n}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`}draw(t){t.rect(this.x,this.y,this.width,this.height)}containsPt(t,e){return t>=this.x&&t<=this.x2&&e>=this.y&&e<=this.y2}get area(){return this.width*this.height}intersects(t){return!(this.area<=0||t.width<=0||t.height<=0)&&(t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x2&&t.y<this.y2)}distSquare(t,e){if(this.containsPt(t,e))return 0;const n=BT(this,t,e);return n.has(OT.TOP)?n.has(OT.LEFT)?CT(t,e,this.x,this.y):n.has(OT.RIGHT)?CT(t,e,this.x2,this.y):(this.y-e)*(this.y-e):n.has(OT.BOTTOM)?n.has(OT.LEFT)?CT(t,e,this.x,this.y2):n.has(OT.RIGHT)?CT(t,e,this.x2,this.y2):(e-this.y2)*(e-this.y2):n.has(OT.LEFT)?(this.x-t)*(this.x-t):n.has(OT.RIGHT)?(t-this.x2)*(t-this.x2):0}}function UT(t){if(0===t.length)return null;const e=t[0],n=new WT(e.x,e.y,0,0);for(const r of t)n.addPoint(r);return n}class HT{constructor(t,e,n){this.cx=t,this.cy=e,this.radius=n}get x(){return this.cx-this.radius}get x2(){return this.cx+this.radius}get width(){return 2*this.radius}get y(){return this.cy-this.radius}get y2(){return this.cy+this.radius}get height(){return 2*this.radius}static from(t){return new HT(t.cx,t.cy,t.radius)}containsPt(t,e){return CT(this.cx,this.cy,t,e)<this.radius*this.radius}distSquare(t,e){const n=CT(this.cx,this.cy,t,e);if(n<this.radius*this.radius)return 0;const r=Math.sqrt(n)-this.radius;return r*r}draw(t){t.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,2*Math.PI)}}class $T{constructor(t,e=0,n=0,r=0,i=0,o=10,s=10,a=new Float32Array(Math.max(0,o*s)).fill(0)){this.pixelGroup=t,this.i=e,this.j=n,this.pixelX=r,this.pixelY=i,this.width=o,this.height=s,this.area=a}createSub(t,e){return new $T(this.pixelGroup,t.x,t.y,e.x,e.y,t.width,t.height)}static fromPixelRegion(t,e){return new $T(e,0,0,t.x,t.y,Math.ceil(t.width/e),Math.ceil(t.height/e))}copy(t,e){return new $T(this.pixelGroup,this.scaleX(e.x),this.scaleY(e.y),e.x,e.y,t.width,t.height,t.area)}boundX(t){return t<this.i?this.i:t>=this.width?this.width-1:t}boundY(t){return t<this.j?this.j:t>=this.height?this.height-1:t}scaleX(t){return this.boundX(Math.floor((t-this.pixelX)/this.pixelGroup))}scaleY(t){return this.boundY(Math.floor((t-this.pixelY)/this.pixelGroup))}scale(t){const e=this.scaleX(t.x),n=this.scaleY(t.y),r=this.boundX(Math.ceil((t.x+t.width-this.pixelX)/this.pixelGroup)),i=this.boundY(Math.ceil((t.y+t.height-this.pixelY)/this.pixelGroup)),o=r-e,s=i-n;return new WT(e,n,o,s)}invertScaleX(t){return Math.round(t*this.pixelGroup+this.pixelX)}invertScaleY(t){return Math.round(t*this.pixelGroup+this.pixelY)}addPadding(t,e){const n=Math.ceil(e/this.pixelGroup),r=this.boundX(t.x-n),i=this.boundY(t.y-n),o=this.boundX(t.x2+n),s=this.boundY(t.y2+n),a=o-r,c=s-i;return new WT(r,i,a,c)}get(t,e){return t<0||e<0||t>=this.width||e>=this.height?Number.NaN:this.area[t+e*this.width]}inc(t,e,n){t<0||e<0||t>=this.width||e>=this.height||(this.area[t+e*this.width]+=n)}set(t,e,n){t<0||e<0||t>=this.width||e>=this.height||(this.area[t+e*this.width]=n)}incArea(t,e){if(t.width<=0||t.height<=0||0===e)return;const n=this.width,r=t.width,i=Math.max(0,t.i),o=Math.max(0,t.j),s=Math.min(t.i+t.width,n),a=Math.min(t.j+t.height,this.height);if(!(a<=0||s<=0||i>=n||a>=this.height))for(let c=o;c<a;c++){const o=(c-t.j)*r,a=c*n;for(let n=i;n<s;n++){const r=t.area[n-t.i+o];0!==r&&(this.area[n+a]+=e*r)}}}fill(t){this.area.fill(t)}fillArea(t,e){const n=t.x+t.y*this.width;for(let r=0;r<t.height;r++){const i=n+r*this.width;this.area.fill(e,i,i+t.width)}}fillHorizontalLine(t,e,n,r){const i=t+e*this.width;this.area.fill(r,i,i+n)}fillVerticalLine(t,e,n,r){const i=t+e*this.width;for(let o=0;o<n;o++)this.area[i+o*this.width]=r}clear(){this.area.fill(0)}toString(){let t="";for(let e=0;e<this.height;e++){const n=e*this.width;for(let e=0;e<this.width;e++){const r=this.area[n+e];t+=r.toFixed(1).padStart(6),t+=" "}t+="\n"}return t}draw(t,e=!0){if(this.width<=0||this.height<=0)return;t.save(),e&&t.translate(this.pixelX,this.pixelY);const n=this.area.reduce(((t,e)=>Math.min(t,e)),Number.POSITIVE_INFINITY),r=this.area.reduce(((t,e)=>Math.max(t,e)),Number.NEGATIVE_INFINITY),i=t=>(t-n)/(r-n);t.scale(this.pixelGroup,this.pixelGroup);for(let o=0;o<this.width;o++)for(let e=0;e<this.height;e++){const n=this.area[o+e*this.width];t.fillStyle=`rgba(0, 0, 0, ${i(n)})`,t.fillRect(o,e,1,1)}t.restore()}drawThreshold(t,e,n=!0){if(!(this.width<=0||this.height<=0)){t.save(),n&&t.translate(this.pixelX,this.pixelY),t.scale(this.pixelGroup,this.pixelGroup);for(let n=0;n<this.width;n++)for(let r=0;r<this.height;r++){const i=this.area[n+r*this.width];t.fillStyle=i>e?"black":"white",t.fillRect(n,r,1,1)}t.restore()}}}function YT(t,e){const n=t=>({x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e});return Array.isArray(t)?t.map(n):n(t)}function qT(t,e,n){return XT(Object.assign(_T(t),{distSquare:(e,n)=>AT(t.x1,t.y1,t.x2,t.y2,e,n)}),e,n)}function XT(t,e,n){const r=YT(t,n),i=e.scale(r),o=e.createSub(i,r);return KT(o,e,n,((e,n)=>t.distSquare(e,n))),o}function KT(t,e,n,r){const i=n*n;for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){const a=e.invertScaleX(t.i+s),c=e.invertScaleY(t.j+o),l=r(a,c);if(0!==l){if(l<i){const e=n-Math.sqrt(l);t.set(s,o,e*e)}}else t.set(s,o,i)}return t}function ZT(t,e,n){const r=e.scale(t),i=e.addPadding(r,n),o=e.createSub(i,{x:t.x-n,y:t.y-n}),s=r.x-i.x,a=r.y-i.y,c=i.x2-r.x2,l=i.y2-r.y2,u=i.width-s-c,h=i.height-a-l,d=n*n;o.fillArea({x:s,y:a,width:u+1,height:h+1},d);const f=[0],p=Math.max(a,s,c,l);{const i=e.invertScaleX(r.x+r.width/2);for(let o=1;o<p;o++){const s=e.invertScaleY(r.y-o),a=t.distSquare(i,s);if(!(a<d))break;{const t=n-Math.sqrt(a);f.push(t*t)}}}const g=[],v=Math.max(s,c),y=Math.max(a,c);for(let m=1;m<v;m++){const i=e.invertScaleX(r.x-m),o=[];for(let s=1;s<y;s++){const a=e.invertScaleY(r.y-s),c=t.distSquare(i,a);if(c<d){const t=n-Math.sqrt(c);o.push(t*t)}else o.push(0)}g.push(o)}for(let m=1;m<Math.min(a,f.length);m++){const t=f[m];o.fillHorizontalLine(s,a-m,u+1,t)}for(let m=1;m<Math.min(l,f.length);m++){const t=f[m];o.fillHorizontalLine(s,a+h+m,u+1,t)}for(let m=1;m<Math.min(s,f.length);m++){const t=f[m];o.fillVerticalLine(s-m,a,h+1,t)}for(let m=1;m<Math.min(l,f.length);m++){const t=f[m];o.fillVerticalLine(s+u+m,a,h+1,t)}for(let m=1;m<s;m++){const t=g[m-1],e=s-m;for(let n=1;n<a;n++)o.set(e,a-n,t[n-1]);for(let n=1;n<l;n++)o.set(e,a+h+n,t[n-1])}for(let m=1;m<c;m++){const t=g[m-1],e=s+u+m;for(let n=1;n<a;n++)o.set(e,a-n,t[n-1]);for(let n=1;n<l;n++)o.set(e,a+h+n,t[n-1])}return o}function JT(t,e){return{x:t,y:e}}function QT(t,e,n,r){if(0===t.length)return[];const i=iA(t);return i.map(((t,o)=>{const s=i.slice(0,o);return tA(e,t,s,n,r)})).flat()}function tA(t,e,n,r,i){const o=JT(e.cx,e.cy),s=rA(o,n,t);if(null==s)return[];const a=new LT(o.x,o.y,s.cx,s.cy),c=eA(a,t,r,i);return nA(c,t)}function eA(t,e,n,r){const i=[],o=[];o.push(t);let s=!0;for(let a=0;a<n&&s;a++){s=!1;while(!s&&o.length>0){const t=o.pop(),n=aA(e,t),a=n?VT(t,n):null;if(!n||!a||2!==a.count){s||i.push(t);continue}let c=r,l=lA(n,c,a,!0),u=sA(l,o)||sA(l,i),h=oA(l,e);while(!u&&h&&c>=1)c/=1.5,l=lA(n,c,a,!0),u=sA(l,o)||sA(l,i),h=oA(l,e);if(!l||u||h||(o.push(new LT(t.x1,t.y1,l.x,l.y)),o.push(new LT(l.x,l.y,t.x2,t.y2)),s=!0),s)continue;c=r,l=lA(n,c,a,!1);let d=sA(l,o)||sA(l,i);h=oA(l,e);while(!d&&h&&c>=1)c/=1.5,l=lA(n,c,a,!1),d=sA(l,o)||sA(l,i),h=oA(l,e);l&&!d&&(o.push(new LT(t.x1,t.y1,l.x,l.y)),o.push(new LT(l.x,l.y,t.x2,t.y2)),s=!0),s||i.push(t)}}while(o.length>0)i.push(o.pop());return i}function nA(t,e){const n=[];while(t.length>0){const r=t.pop();if(0===t.length){n.push(r);break}const i=t.pop(),o=new LT(r.x1,r.y1,i.x2,i.y2),s=aA(e,o);s?(n.push(r),t.push(i)):t.push(o)}return n}function rA(t,e,n){let r=Number.POSITIVE_INFINITY;return e.reduce(((e,i)=>{const o=CT(t.x,t.y,i.cx,i.cy);if(o>r)return e;const s=new LT(t.x,t.y,i.cx,i.cy),a=cA(n,s);return o*(a+1)*(a+1)<r&&(e=i,r=o*(a+1)*(a+1)),e}),null)}function iA(t){if(t.length<2)return t;let e=0,n=0;return t.forEach((t=>{e+=t.cx,n+=t.cy})),e/=t.length,n/=t.length,t.map((t=>{const r=e-t.cx,i=n-t.cy,o=r*r+i*i;return[t,o]})).sort(((t,e)=>t[1]-e[1])).map((t=>t[0]))}function oA(t,e){return e.some((e=>e.containsPt(t.x,t.y)))}function sA(t,e){return e.some((e=>!!PT(e.x1,e.y1,t.x,t.y,.001)||!!PT(e.x2,e.y2,t.x,t.y,.001)))}function aA(t,e){let n=Number.POSITIVE_INFINITY,r=null;for(const i of t){if(!zT(i,e))continue;const t=GT(i,e);t>=0&&t<n&&(r=i,n=t)}return r}function cA(t,e){return t.reduce(((t,n)=>zT(n,e)&&FT(n,e)?t+1:t),0)}function lA(t,e,n,r){const i=n.top,o=n.left,s=n.bottom,a=n.right;if(r){if(o.state===MT.POINT){if(i.state===MT.POINT)return JT(t.x-e,t.y-e);if(s.state===MT.POINT)return JT(t.x-e,t.y2+e);const n=t.width*t.height,r=t.width*(.5*(o.y-t.y+(a.y-t.y)));return r<.5*n?o.y>a.y?JT(t.x-e,t.y-e):JT(t.x2+e,t.y-e):o.y<a.y?JT(t.x-e,t.y2+e):JT(t.x2+e,t.y2+e)}if(a.state===MT.POINT){if(i.state===MT.POINT)return JT(t.x2+e,t.y-e);if(s.state===MT.POINT)return JT(t.x2+e,t.y2+e)}const n=t.height*t.width,r=t.height*(.5*(i.x-t.x+(a.x-t.x)));return r<.5*n?i.x>s.x?JT(t.x-e,t.y-e):JT(t.x-e,t.y2+e):i.x<s.x?JT(t.x2+e,t.y-e):JT(t.x2+e,t.y2+e)}if(o.state===MT.POINT){if(i.state===MT.POINT)return JT(t.x2+e,t.y2+e);if(s.state===MT.POINT)return JT(t.x2+e,t.y-e);const n=t.height*t.width,r=t.width*(.5*(o.y-t.y+(a.y-t.y)));return r<.5*n?o.y>a.y?JT(t.x2+e,t.y2+e):JT(t.x-e,t.y2+e):o.y<a.y?JT(t.x2+e,t.y-e):JT(t.x-e,t.y-e)}if(a.state===MT.POINT){if(i.state===MT.POINT)return JT(t.x-e,t.y2+e);if(s.state===MT.POINT)return JT(t.x-e,t.y-e)}const c=t.height*t.width,l=t.height*(.5*(i.x-t.x+(a.x-t.x)));return l<.5*c?i.x>s.x?JT(t.x2+e,t.y2+e):JT(t.x2+e,t.y-e):i.x<s.x?JT(t.x-e,t.y2+e):JT(t.x-e,t.y-e)}function uA(t,e,n,r){const i=t.closed?n<t.length:n<t.length-1;if(!i)return!1;const o=t.get(e),s=t.get(n+1);for(let a=e+1;a<=n;a++){const e=t.get(a),n=AT(o.x,o.y,s.x,s.y,e.x,e.y);if(n>r)return!1}return!0}function hA(t=0){return e=>{if(t<0||e.length<3)return e;const n=[];let r=0;const i=t*t;while(r<e.length){let t=r+1;while(uA(e,r,t,i))t++;n.push(e.get(r)),r=t}return new gA(n)}}function dA(t,e){switch(t){case-2:return(((3-e)*e-3)*e+1)/6;case-1:return((3*e-6)*e*e+4)/6;case 0:return(((-3*e+3)*e+3)*e+1)/6;case 1:return e*e*e/6;default:throw new Error("unknown error")}}function fA(t=6){const e=3,n=e-1,r=1,i=r-e;function o(t,e,n){let o=0,s=0;for(let a=i;a<=r;a++){const r=t.get(e+a),i=dA(a,n);o+=i*r.x,s+=i*r.y}return{x:o,y:s}}return r=>{if(r.length<3)return r;const i=[],s=r.closed,a=r.length+e-1+(s?0:2);i.push(o(r,n-(s?0:2),0));for(let e=n-(s?0:2);e<a;e++)for(let n=1;n<=t;n++)i.push(o(r,e,n/t));return new gA(i)}}function pA(t=8){return e=>{let n=t,r=e.length;if(n>1){r=Math.floor(e.length/n);while(r<3&&n>1)n-=1,r=Math.floor(e.length/n)}const i=[];for(let t=0,o=0;o<r;o++,t+=n)i.push(e.get(t));return new gA(i)}}class gA{constructor(t=[],e=!0){this.points=t,this.closed=e}get(t){const e=t,n=this.points.length;return t<0?this.closed?this.get(t+n):this.points[0]:t>=n?this.closed?this.get(t-n):this.points[n-1]:this.points[e]}get length(){return this.points.length}toString(t=1/0){const e=this.points;if(0===e.length)return"";const n="function"===typeof t?t:RT(t);let r="M";for(const i of e)r+=`${n(i.x)},${n(i.y)} L`;return r=r.slice(0,-1),this.closed&&(r+=" Z"),r}draw(t){const e=this.points;if(0!==e.length){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(const n of e)t.lineTo(n.x,n.y);this.closed&&t.closePath()}}sample(t){return pA(t)(this)}simplify(t){return hA(t)(this)}bSplines(t){return fA(t)(this)}apply(t){return t(this)}containsElements(t){const e=UT(this.points);return!!e&&t.every((t=>e.containsPt(t.cx,t.cy)&&this.withinArea(t.cx,t.cy)))}withinArea(t,e){if(0===this.length)return!1;let n=0;const r=this.points[0],i=new LT(r.x,r.y,r.x,r.y);for(let o=1;o<this.points.length;o++){const r=this.points[o];i.x1=i.x2,i.y1=i.y2,i.x2=r.x,i.y2=r.y,i.cuts(t,e)&&n++}return i.x1=i.x2,i.y1=i.y2,i.x2=r.x,i.y2=r.y,i.cuts(t,e)&&n++,n%2===1}}class vA{constructor(t=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=t}add(t){this.set.add(`${t.x}x${t.y}`),this.arr[this.count++]=t}contains(t){return this.set.has(`${t.x}x${t.y}`)}isFirst(t){if(0===this.count)return!1;const e=this.arr[0];return null!=e&&e.x===t.x&&e.y===t.y}path(){return new gA(this.arr.slice(0,this.count))}clear(){this.set.clear(),this.count=0}get(t){return this.arr[t]}get length(){return this.count}}const yA=0,mA=1,bA=2,xA=3;function wA(t,e){const n=2*(Math.floor(t.width)+Math.floor(t.height)),r=new vA(n);function i(n,r,i,o){const s=t.get(n,r);return Number.isNaN(s)?Number.NaN:s>e?i+o:i}function o(t,e){let n=yA;return n=i(t,e,n,1),n=i(t+1,e,n,2),n=i(t,e+1,n,4),n=i(t+1,e+1,n,8),Number.isNaN(n)?-1:n}let s=mA;function a(e,n){let i=e,a=n,c=t.invertScaleX(i),l=t.invertScaleY(a);for(let u=0;u<t.width*t.height;u++){const e={x:c,y:l};if(r.contains(e)){if(r.isFirst(e))return!0}else r.add(e);const n=o(i,a);switch(n){case-1:return!0;case 0:case 3:case 2:case 7:s=bA;break;case 12:case 14:case 4:s=xA;break;case 6:s=s===yA?xA:bA;break;case 1:case 13:case 5:s=yA;break;case 9:s=s===bA?yA:mA;break;case 10:case 8:case 11:s=mA;break;default:return console.warn("Marching squares invalid state: "+n),!0}switch(s){case yA:a--,l-=t.pixelGroup;break;case mA:a++,l+=t.pixelGroup;break;case xA:i--,c-=t.pixelGroup;break;case bA:i++,c+=t.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+n),!0}}return!0}for(let c=0;c<t.width;c++)for(let n=0;n<t.height;n++){if(t.get(c,n)<=e)continue;const i=o(c,n);if(!(i<0||15===i)&&a(c,n))return r.path()}return null}const EA={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function kA(t){return null!=t&&"number"===typeof t.radius}function SA(t,e){if(kA(t)!==kA(e))return!1;if(kA(t)){const n=e;return t.cx===n.cx&&t.cy===n.cy&&t.radius===n.radius}const n=e;return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}var MA;(function(t){t[t["MEMBERS"]=0]="MEMBERS",t[t["NON_MEMBERS"]=1]="NON_MEMBERS",t[t["EDGES"]=2]="EDGES"})(MA||(MA={}));class OA{constructor(t={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new WT(0,0,0,0),this.potentialArea=new $T(1,0,0,0,0,0,0),this.o=Object.assign({},EA,t)}pushMember(...t){if(0!==t.length){this.dirty.add(MA.MEMBERS);for(const e of t)this.members.push({raw:e,obj:kA(e)?HT.from(e):WT.from(e),area:null})}}removeMember(t){const e=this.members.findIndex((e=>SA(e.raw,t)));return!(e<0)&&(this.members.splice(e,1),this.dirty.add(MA.MEMBERS),!0)}removeNonMember(t){const e=this.nonMembers.findIndex((e=>SA(e.raw,t)));return!(e<0)&&(this.nonMembers.splice(e,1),this.dirty.add(MA.NON_MEMBERS),!0)}removeEdge(t){const e=this.edges.findIndex((e=>e.obj.equals(t)));return!(e<0)&&(this.edges.splice(e,1),this.dirty.add(MA.NON_MEMBERS),!0)}pushNonMember(...t){if(0!==t.length){this.dirty.add(MA.NON_MEMBERS);for(const e of t)this.nonMembers.push({raw:e,obj:kA(e)?HT.from(e):WT.from(e),area:null})}}pushEdge(...t){if(0!==t.length){this.dirty.add(MA.EDGES);for(const e of t)this.edges.push({raw:e,obj:LT.from(e),area:null})}}update(){const t=this.dirty.has(MA.MEMBERS),e=this.dirty.has(MA.NON_MEMBERS);let n=this.dirty.has(MA.EDGES);this.dirty.clear();const r=this.members.map((t=>t.obj));if(this.o.virtualEdges&&(t||e)){const t=this.nonMembers.map((t=>t.obj)),e=QT(r,t,this.o.maxRoutingIterations,this.o.morphBuffer),i=new Map(this.virtualEdges.map((t=>[t.obj.toString(),t.area])));this.virtualEdges=e.map((t=>{var e;return{raw:t,obj:t,area:null!==(e=i.get(t.toString()))&&void 0!==e?e:null}})),n=!0}let i=!1;if(t||n){const t=this.virtualEdges.concat(this.edges).map((t=>t.obj)),e=TA(r,t),n=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,o=WT.from(YT(e,n));o.equals(this.activeRegion)||(i=!0,this.activeRegion=o)}if(i){const t=Math.ceil(this.activeRegion.width/this.o.pixelGroup),e=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=$T.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach((t=>t.area=null)),this.nonMembers.forEach((t=>t.area=null)),this.edges.forEach((t=>t.area=null)),this.virtualEdges.forEach((t=>t.area=null))):t===this.potentialArea.width&&e===this.potentialArea.height||(this.potentialArea=$T.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}const o=new Map,s=t=>{if(t.area){const e=`${t.obj.width}x${t.obj.height}x${t.obj instanceof WT?"R":"C"}`;o.set(e,t.area)}},a=t=>{if(t.area)return;const e=`${t.obj.width}x${t.obj.height}x${t.obj instanceof WT?"R":"C"}`;if(o.has(e)){const n=o.get(e);return void(t.area=this.potentialArea.copy(n,{x:t.obj.x-this.o.nodeR1,y:t.obj.y-this.o.nodeR1}))}const n=t.obj instanceof WT?ZT(t.obj,this.potentialArea,this.o.nodeR1):XT(t.obj,this.potentialArea,this.o.nodeR1);t.area=n,o.set(e,n)};this.members.forEach(s),this.nonMembers.forEach(s),this.members.forEach(a),this.nonMembers.forEach((t=>{this.activeRegion.intersects(t.obj)?a(t):t.area=null})),this.edges.forEach((t=>{t.area||(t.area=qT(t.obj,this.potentialArea,this.o.edgeR1))})),this.virtualEdges.forEach((t=>{t.area||(t.area=qT(t.obj,this.potentialArea,this.o.edgeR1))}))}drawMembers(t){for(const e of this.members)e.obj.draw(t)}drawNonMembers(t){for(const e of this.nonMembers)e.obj.draw(t)}drawEdges(t){for(const e of this.edges)e.obj.draw(t)}drawPotentialArea(t,e=!0){this.potentialArea.draw(t,e)}compute(){if(0===this.members.length)return new gA([]);this.dirty.size>0&&this.update();const{o:t,potentialArea:e}=this,n=this.members.map((t=>t.area)),r=this.virtualEdges.concat(this.edges).map((t=>t.area)),i=this.nonMembers.filter((t=>null!=t.area)).map((t=>t.area)),o=this.members.map((t=>t.obj));return NA(e,n,r,i,(t=>t.containsElements(o)),t)}}function NA(t,e,n,r,i,o={}){const s=Object.assign({},EA,o);let a=s.threshold,c=s.memberInfluenceFactor,l=s.edgeInfluenceFactor,u=s.nonMemberInfluenceFactor;const h=(s.nodeR0-s.nodeR1)*(s.nodeR0-s.nodeR1),d=(s.edgeR0-s.edgeR1)*(s.edgeR0-s.edgeR1);for(let f=0;f<s.maxMarchingIterations;f++){if(t.clear(),0!==c){const n=c/h;for(const r of e)t.incArea(r,n)}if(0!==l){const e=l/d;for(const r of n)t.incArea(r,e)}if(0!==u){const e=u/h;for(const n of r)t.incArea(n,e)}const o=wA(t,a);if(o&&i(o))return o;if(a*=.95,f<=.5*s.maxMarchingIterations)c*=1.2,l*=1.2;else{if(!(0!==u&&r.length>0))break;u*=.8}}return new gA([])}function TA(t,e){if(0===t.length)return new WT(0,0,0,0);const n=WT.from(t[0]);for(const r of t)n.add(r);for(const r of e)n.add(_T(r));return n}var AA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class CA extends ET{constructor(t,e){super(t,Ng({},CA.defaultOptions,e)),this.members=new Map,this.avoidMembers=new Map,this.bubbleSetOptions={},this.drawBubbleSets=()=>{const{style:t,bubbleSetOptions:e}=this.parseOptions();qd(this.bubbleSetOptions,e)||this.init(),this.bubbleSetOptions=Object.assign({},e);const n=Object.assign(Object.assign({},t),{d:this.getPath()});this.shape?this.shape.update(n):(this.shape=new ky({style:n}),this.context.canvas.appendChild(this.shape))},this.updateBubbleSetsPath=t=>{if(!this.shape)return;const e=rg(t.data);[...this.options.members,...this.options.avoidMembers].includes(e)&&this.shape.update(Object.assign(Object.assign({},this.parseOptions().style),{d:this.getPath(e)}))},this.getPath=t=>{const{graph:e}=this.context,n=this.options.members,r=[...this.members.keys()],i=this.options.avoidMembers,o=[...this.avoidMembers.keys()];if(!t&&qd(n,r)&&qd(i,o))return this.path;const{enter:s=[],exit:a=[]}=pg(r,n,(t=>t)),{enter:c=[],exit:l=[]}=pg(o,i,(t=>t));t&&(a.push(t),s.push(t));const u=(t,n,r)=>{t.forEach((t=>{const i=r?this.members:this.avoidMembers,o=r?"pushMember":"pushNonMember",s=r?"removeMember":"removeNonMember";if(n){let n;"edge"===e.getElementType(t)?([n]=RA(e,t),this.bubbleSets.pushEdge(n)):([n]=PA(e,t),this.bubbleSets[o](n)),i.set(t,n)}else{const n=i.get(t);n&&("edge"===e.getElementType(t)?this.bubbleSets.removeEdge(n):this.bubbleSets[s](n),i.delete(t))}}))};u(a,!1,!0),u(s,!0,!0),u(l,!1,!1),u(c,!0,!1);const h=this.bubbleSets.compute(),d=h.sample(8).simplify(0).bSplines().simplify(0);return this.path=xy(d.points.map(Jg)),this.path},this.bindEvents(),this.bubbleSets=new OA(this.options)}bindEvents(){this.context.graph.on(of.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(of.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}init(){this.bubbleSets=new OA(this.options),this.members=new Map,this.avoidMembers=new Map}parseOptions(){const t=this.options,{type:e,key:n,members:r,avoidMembers:i}=t,o=AA(t,["type","key","members","avoidMembers"]),s=Object.keys(o).reduce(((t,e)=>(e in EA?t.bubbleSetOptions[e]=o[e]:t.style[e]=o[e],t)),{style:{},bubbleSetOptions:{}});return Object.assign({type:e,key:n,members:r,avoidMembers:i},s)}addMember(t){const e=Array.isArray(t)?t:[t];e.some((t=>this.options.avoidMembers.includes(t)))&&(this.options.avoidMembers=this.options.avoidMembers.filter((t=>!e.includes(t)))),this.options.members=[...new Set([...this.options.members,...e])],this.drawBubbleSets()}removeMember(t){const e=Array.isArray(t)?t:[t];this.options.members=this.options.members.filter((t=>!e.includes(t))),this.drawBubbleSets()}updateMember(t){this.options.members=nr(t)?t(this.options.members):t,this.drawBubbleSets()}getMember(){return this.options.members}addAvoidMember(t){const e=Array.isArray(t)?t:[t];e.some((t=>this.options.members.includes(t)))&&(this.options.members=this.options.members.filter((t=>!e.includes(t)))),this.options.avoidMembers=[...new Set([...this.options.avoidMembers,...e])],this.drawBubbleSets()}removeAvoidMember(t){const e=Array.isArray(t)?t:[t];this.options.avoidMembers.some((t=>e.includes(t)))&&(this.options.avoidMembers=this.options.avoidMembers.filter((t=>!e.includes(t))),this.drawBubbleSets())}updateAvoidMember(t){this.options.avoidMembers=Array.isArray(t)?t:[t],this.drawBubbleSets()}getAvoidMember(){return this.options.avoidMembers}destroy(){this.context.graph.off(of.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(of.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape.destroy(),super.destroy()}}CA.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},EA);const PA=(t,e)=>{const n=Array.isArray(e)?e:[e];return n.map((e=>{const n=t.getElementRenderBounds(e);return new WT(n.min[0],n.min[1],Yf(n),qf(n))}))},RA=(t,e)=>{const n=Array.isArray(e)?e:[e];return n.map((e=>{const n=t.getEdgeData(e),r=t.getElementPosition(n.source),i=t.getElementPosition(n.target);return LT.from({x1:r[0],y1:r[1],x2:i[0],y2:i[1]})}))};function _A(t){return`\n    <ul class="g6-contextmenu-ul">\n      ${t.map((t=>`<li  class="g6-contextmenu-li" value="${t.value}">${t.name}</li>`)).join("")}\n    </ul>\n  `}const LA="\n  .g6-contextmenu {\n    font-size: 12px;\n    background-color: rgba(255, 255, 255, 0.96);\n    border-radius: 4px;\n    overflow: hidden;\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;\n    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;\n  }\n\n  .g6-contextmenu-ul {\n    max-width: 256px;\n    min-width: 96px;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  .g6-contextmenu-li {\n    padding: 8px 12px;\n    cursor: pointer;\n    user-select: none;\n  }\n\n  .g6-contextmenu-li:hover {\n    background-color: #f5f5f5;\n    cursor: pointer;\n  }\n";var DA=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class IA extends ET{constructor(t,e){super(t,Object.assign({},IA.defaultOptions,e)),this.targetElement=null,this.onTriggerEvent=t=>{var e;null===(e=t.preventDefault)||void 0===e||e.call(t),this.show(t)},this.onMenuItemClick=t=>{const{onClick:e,trigger:n}=this.options;if(t.target instanceof HTMLElement&&t.target.className.includes("g6-contextmenu-li")){const n=t.target.getAttribute("value");null===e||void 0===e||e(n,t.target,this.targetElement),this.hide()}"click"!==n&&this.hide()},this.initElement(),this.update(e)}initElement(){this.$element=kT("contextmenu",!1,{zIndex:"99"});const{className:t}=this.options;t&&this.$element.classList.add(t);const e=this.context.canvas.getContainer();e.appendChild(this.$element),ST("g6-contextmenu-css","style",{},LA,document.head)}show(t){return DA(this,void 0,void 0,(function*(){const{enable:e,offset:n}=this.options;if("function"===typeof e&&!e(t)||!e)return void this.hide();const r=yield this.getDOMContent(t);r instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(r)):this.$element.innerHTML=r;const i=this.context.graph.getCanvas().getContainer().getBoundingClientRect();this.$element.style.left=`${t.client.x-i.left+n[0]}px`,this.$element.style.top=`${t.client.y-i.top+n[1]}px`,this.$element.style.display="block",this.targetElement=t.target}))}hide(){this.$element.style.display="none",this.targetElement=null}update(t){this.unbindEvents(),super.update(t),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.$element.remove()}getDOMContent(t){return DA(this,void 0,void 0,(function*(){const{getContent:e,getItems:n}=this.options;return n?_A(yield n(t)):yield e(t)}))}bindEvents(){const{graph:t}=this.context,{trigger:e}=this.options;t.on(`canvas:${e}`,this.onTriggerEvent),t.on(`node:${e}`,this.onTriggerEvent),t.on(`edge:${e}`,this.onTriggerEvent),t.on(`combo:${e}`,this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick)}unbindEvents(){const{graph:t}=this.context,{trigger:e}=this.options;t.off(`canvas:${e}`,this.onTriggerEvent),t.off(`node:${e}`,this.onTriggerEvent),t.off(`edge:${e}`,this.onTriggerEvent),t.off(`combo:${e}`,this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick)}}IA.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:()=>"It is a empty context menu.",enable:()=>!0};class jA extends ET{constructor(t,e){super(t,Object.assign({},jA.defaultOptions,e)),this.edgeBundles={},this.edgePoints={},this.onBundle=()=>{const{model:t,element:e}=this.context,n=t.getEdgeData();this.divideEdges(this.options.divisions);const{cycles:r,iterRate:i,divRate:o}=this.options;let{lambda:s,divisions:a,iterations:c}=this.options;for(let l=0;l<r;l++){for(let t=0;t<c;t++){const t={};n.forEach((e=>{var n;if(e.source===e.target)return;const r=rg(e);t[r]=this.getEdgeForces(e,a,s);for(let i=0;i<a+1;i++)(n=this.edgePoints)[r]||(n[r]=[]),this.edgePoints[r][i]=Ag(this.edgePoints[r][i],t[r][i])}))}s/=2,a*=o,c*=i,this.divideEdges(a)}n.forEach((t=>{const n=rg(t),r=e.getElement(n);null===r||void 0===r||r.update({d:ex(this.edgePoints[n])})}))},this.bindEvents()}get nodeMap(){const t=this.context.model.getNodeData();return Object.fromEntries(t.map((t=>[rg(t),Vg(qg(t))])))}divideEdges(t){const e=this.context.model.getEdgeData();e.forEach((e=>{var n;const r=rg(e);(n=this.edgePoints)[r]||(n[r]=[]);const i=this.nodeMap[e.source],o=this.nodeMap[e.target];if(1===t)this.edgePoints[r].push(i),this.edgePoints[r].push(Rg(Ag(i,o),2)),this.edgePoints[r].push(o);else{const e=0===this.edgePoints[r].length?Ig(i,o):UA(this.edgePoints[r]),n=e/(t+1);let s=n;const a=[i];for(let t=1;t<this.edgePoints[r].length;t++){const e=this.edgePoints[r][t-1],i=this.edgePoints[r][t];let o=Ig(i,e);while(o>s){const t=s/o,r=Ag(e,Pg(Cg(i,e),t));a.push(r),o-=s,s=n}s-=o}a.push(o),this.edgePoints[r]=a}}))}getVectorPosition(t){const e=this.nodeMap[t.source],n=this.nodeMap[t.target],[r,i]=Cg(n,e),o=Ig(e,n);return{source:e,target:n,vx:r,vy:i,length:o}}measureEdgeCompatibility(t,e){const n=this.getVectorPosition(t),r=this.getVectorPosition(e),i=FA(n,r),o=BA(n,r),s=zA(n,r),a=WA(n,r);return i*o*s*a}getEdgeBundles(){const t={},e=this.options.bundleThreshold,n=this.context.model.getEdgeData();return n.forEach(((r,i)=>{n.forEach(((n,o)=>{var s,a;if(o<=i)return;const c=this.measureEdgeCompatibility(r,n);c>=e&&(t[s=rg(r)]||(t[s]=[]),t[rg(r)].push(n),t[a=rg(n)]||(t[a]=[]),t[rg(n)].push(r))}))})),t}getSpringForce(t,e){const{pre:n,cur:r,next:i}=t;return Pg(Cg(Ag(n,i),Pg(r,2)),e)}getElectrostaticForce(t,e){ly(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());const n=this.edgeBundles[rg(e)];let r=[0,0];return null===n||void 0===n||n.forEach((n=>{const i=this.edgePoints[rg(n)][t],o=this.edgePoints[rg(e)][t],s=Cg(i,o),a=Ig(i,o);r=Ag(r,Pg(s,1/a))})),r}getEdgeForces(t,e,n){const r=this.nodeMap[t.source],i=this.nodeMap[t.target],o=this.options.K/(Ig(r,i)*(e+1)),s=[[0,0]],a=rg(t);for(let c=1;c<e;c++){const e=this.getSpringForce({pre:this.edgePoints[a][c-1],cur:this.edgePoints[a][c],next:this.edgePoints[a][c+1]||[0,0]},o),r=this.getElectrostaticForce(c,t);s.push(Pg(Ag(e,r),n))}return s.push([0,0]),s}bindEvents(){const{graph:t}=this.context;t.on(of.AFTER_RENDER,this.onBundle)}unbindEvents(){const{graph:t}=this.context;t.off(of.AFTER_RENDER,this.onBundle)}destroy(){this.unbindEvents(),super.destroy()}}jA.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};const FA=(t,e)=>Math.abs(_g([t.vx,t.vy],[e.vx,e.vy])/(t.length*e.length)),BA=(t,e)=>{const n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n)},zA=(t,e)=>{const n=(t.length+e.length)/2,r=Rg(Ag(t.source,t.target),2),i=Rg(Ag(e.source,e.target),2);return n/(n+Ig(r,i))},GA=(t,e)=>{if(e.source[0]===e.target[0])return[e.source[0],t[1]];if(e.source[1]===e.target[1])return[t[0],e.source[1]];const n=(e.source[1]-e.target[1])/(e.source[0]-e.target[0]),r=(n*n*e.source[0]+n*(t[1]-e.source[1])+t[0])/(n*n+1),i=n*(r-e.source[0])+e.source[1];return[r,i]},VA=(t,e)=>{const n=GA(e.source,t),r=GA(e.target,t),i=Rg(Ag(n,r),2),o=Rg(Ag(t.source,t.target),2);return 0===Ig(n,r)?0:Math.max(0,1-2*Ig(o,i)/Ig(n,r))},WA=(t,e)=>Math.min(VA(t,e),VA(e,t)),UA=t=>{let e=0;for(let n=1;n<t.length;n++)e+=Ig(t[n],t[n-1]);return e},HA={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0},$A=.05;class YA extends ET{constructor(t,e){super(t,Object.assign({},YA.defaultOptions,e)),this.shapes=new Map,this.r=this.options.r,this.onEdgeFilter=t=>{if("drag"===this.options.trigger&&this.isLensOn)return;const e=Jg(t.canvas);this.renderLens(e),this.renderFocusElements()},this.renderLens=t=>{const e=Object.assign({},HA,this.options.style);this.isLensOn||(this.lens=new Iy({style:e}),this.canvas.appendChild(this.lens)),Object.assign(e,Qg(t),{size:2*this.r}),this.lens.update(e)},this.getFilterData=()=>{const{filter:t}=this.options,{model:e}=this.context,n=e.getData();if(!t)return n;const{nodes:r,edges:i,combos:o}=n;return{nodes:r.filter((e=>t(rg(e),"node"))),edges:i.filter((e=>t(rg(e),"edge"))),combos:o.filter((e=>t(rg(e),"combo")))}},this.getFocusElements=t=>{const{nodes:e,edges:n}=this.getFilterData(),r=e.filter((e=>Ig(qg(e),t)<this.r)),i=r.map((t=>rg(t))),o=n.filter((t=>{const{source:e,target:n}=t,r=i.includes(e),o=i.includes(n);switch(this.options.nodeType){case"both":return r&&o;case"either":return r!==o;case"source":return r&&!o;case"target":return!r&&o;default:return!1}}));return{nodes:r,edges:o}},this.renderFocusElements=()=>{const{element:t,graph:e}=this.context;if(!this.isLensOn)return;const n=this.lens.getCenter(),{nodes:r,edges:i}=this.getFocusElements(n),o=new Set,s=n=>{const r=rg(n);o.add(r);const i=t.getElement(r);if(!i)return;const s=this.shapes.get(r)||i.cloneNode();s.setPosition(i.getPosition()),s.id=i.id,this.shapes.has(r)?Object.entries(i.attributes).forEach((([t,e])=>{s.style[t]!==e&&(s.style[t]=e)})):(this.canvas.appendChild(s),this.shapes.set(r,s));const a=e.getElementType(r),c=this.getElementStyle(a,n);s.update(c)};r.forEach(s),i.forEach(s),this.shapes.forEach(((t,e)=>{o.has(e)||(t.destroy(),this.shapes.delete(e))}))},this.scaleRByWheel=t=>{var e;this.options.preventDefault&&t.preventDefault();const{clientX:n,clientY:r,deltaX:i,deltaY:o}=t,{graph:s,canvas:a}=this.context,c=s.getCanvasByClient([n,r]),l=null===(e=this.lens)||void 0===e?void 0:e.getCenter();if(!this.isLensOn||Ig(c,l)>this.r)return;const{maxR:u,minR:h}=this.options,d=i+o>0?1/(1-$A):1-$A,f=Math.min(...a.getSize())/2;this.r=Math.max(h||0,Math.min(u||f,this.r*d)),this.renderLens(l),this.renderFocusElements()},this.isLensDragging=!1,this.onDragStart=t=>{var e;const n=Jg(t.canvas),r=null===(e=this.lens)||void 0===e?void 0:e.getCenter();!this.isLensOn||Ig(n,r)>this.r||(this.isLensDragging=!0)},this.onDrag=t=>{if(!this.isLensDragging)return;const e=Jg(t.canvas);this.renderLens(e),this.renderFocusElements()},this.onDragEnd=()=>{this.isLensDragging=!1},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}getElementStyle(t,e){const n="node"===t?this.options.nodeStyle:this.options.edgeStyle;return"function"===typeof n?n(e):n}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var t;const{graph:e}=this.context,{trigger:n,scaleRBy:r}=this.options,i=e.getCanvas().getLayer();["click","drag"].includes(n)&&i.addEventListener(ef.CLICK,this.onEdgeFilter),"pointermove"===n?i.addEventListener(ef.POINTER_MOVE,this.onEdgeFilter):"drag"===n&&(i.addEventListener(ef.DRAG_START,this.onDragStart),i.addEventListener(ef.DRAG,this.onDrag),i.addEventListener(ef.DRAG_END,this.onDragEnd)),"wheel"===r&&(null===(t=this.graphDom)||void 0===t||t.addEventListener(ef.WHEEL,this.scaleRByWheel,{passive:!1}))}unbindEvents(){var t;const{graph:e}=this.context,{trigger:n,scaleRBy:r}=this.options,i=e.getCanvas().getLayer();["click","drag"].includes(n)&&i.removeEventListener(ef.CLICK,this.onEdgeFilter),"pointermove"===n?i.removeEventListener(ef.POINTER_MOVE,this.onEdgeFilter):"drag"===n&&(i.removeEventListener(ef.DRAG_START,this.onDragStart),i.removeEventListener(ef.DRAG,this.onDrag),i.removeEventListener(ef.DRAG_END,this.onDragEnd)),"wheel"===r&&(null===(t=this.graphDom)||void 0===t||t.removeEventListener(ef.WHEEL,this.scaleRByWheel))}update(t){var e;this.unbindEvents(),super.update(t),this.r=null!==(e=t.r)&&void 0!==e?e:this.r,this.bindEvents()}destroy(){this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach(((t,e)=>{t.destroy(),this.shapes.delete(e)})),super.destroy()}}YA.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:()=>!0,style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};const qA={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12},XA=.05,KA=.1;class ZA extends ET{constructor(t,e){super(t,Object.assign({},ZA.defaultOptions,e)),this.r=this.options.r,this.d=this.options.d,this.onCreateFisheye=t=>{if("drag"===this.options.trigger&&this.isLensOn)return;const e=Jg(t.canvas);this.onMagnify(e)},this.onMagnify=t=>{t.some(isNaN)||(this.renderLens(t),this.renderFocusElements())},this.renderLens=t=>{const e=Object.assign({},qA,this.options.style);this.isLensOn||(this.lens=new Iy({style:e}),this.canvas.appendChild(this.lens)),Object.assign(e,Qg(t),{size:2*this.r,label:this.options.showDPercent,labelText:this.getDPercent()}),this.lens.update(e)},this.getDPercent=()=>{const{minD:t,maxD:e}=this.options,n=Math.round((this.d-t)/(e-t)*100);return`${n}%`},this.prevMagnifiedStyleMap=new Map,this.prevOriginStyleMap=new Map,this.renderFocusElements=()=>{if(!this.isLensOn)return;const{graph:t}=this.context,e=this.lens.getCenter(),n=(this.d+1)*this.r,r=new Map,i=new Map,o=t.getNodeData();o.forEach((o=>{const s=qg(o),a=Ig(s,e);if(a>this.r)return;const c=n*a/(this.d*a+this.r),[l,u]=s,[h,d]=e,f=(l-h)/a,p=(u-d)/a,g=[h+c*f,d+c*p],v=rg(o),y=this.getNodeStyle(o),m=yb(t.getElementRenderStyle(v),Object.keys(y));r.set(v,Object.assign(Object.assign({},Qg(g)),y)),i.set(v,Object.assign(Object.assign({},Qg(s)),m))})),this.updateStyle(r,i)},this.getNodeStyle=t=>{const{nodeStyle:e}=this.options;return"function"===typeof e?e(t):e},this.updateStyle=(t,e)=>{const{graph:n,element:r}=this.context,{enter:i,exit:o,keep:s}=pg(Array.from(this.prevMagnifiedStyleMap.keys()),Array.from(t.keys()),(t=>t)),a=new Set,c=(t,e)=>{const i=r.getElement(t);null===i||void 0===i||i.update(e),n.getRelatedEdgesData(t).forEach((t=>{a.add(rg(t))}))};[...i,...s].forEach((e=>{c(e,t.get(e))})),o.forEach((t=>{c(t,this.prevOriginStyleMap.get(t)),this.prevOriginStyleMap.delete(t)})),a.forEach((t=>{const e=r.getElement(t);null===e||void 0===e||e.update({})})),this.prevMagnifiedStyleMap=t,e.forEach(((t,e)=>{this.prevOriginStyleMap.has(e)||this.prevOriginStyleMap.set(e,t)}))},this.isWheelValid=t=>{if(this.options.preventDefault&&t.preventDefault(),!this.isLensOn)return!1;const{clientX:e,clientY:n}=t,r=this.context.graph.getCanvasByClient([e,n]),i=this.lens.getCenter();return!(Ig(r,i)>this.r)},this.scaleR=t=>{const{maxR:e,minR:n}=this.options,r=t?1/(1-XA):1-XA,i=Math.min(...this.context.canvas.getSize())/2;this.r=Math.max(n||0,Math.min(e||i,this.r*r))},this.scaleD=t=>{const{maxD:e,minD:n}=this.options,r=t?this.d+KA:this.d-KA;this.d=Math.max(n,Math.min(e,r))},this.scaleRByWheel=t=>{if(!this.isWheelValid(t))return;const{deltaX:e,deltaY:n}=t;this.scaleR(e+n>0);const r=this.lens.getCenter();this.onMagnify(r)},this.scaleDByWheel=t=>{if(!this.isWheelValid(t))return;const{deltaX:e,deltaY:n}=t;this.scaleD(e+n>0);const r=this.lens.getCenter();this.onMagnify(r)},this.isDragValid=t=>{if(this.options.preventDefault&&t.preventDefault(),!this.isLensOn)return!1;const e=Jg(t.canvas),n=this.lens.getCenter();return!(Ig(e,n)>this.r)},this.isLensDragging=!1,this.onDragStart=t=>{this.isDragValid(t)&&(this.isLensDragging=!0)},this.onDrag=t=>{if(!this.isLensDragging)return;const e=Jg(t.canvas);this.onMagnify(e)},this.onDragEnd=()=>{this.isLensDragging=!1},this.scaleRByDrag=t=>{if(!this.isLensDragging)return;const{dx:e,dy:n}=t;this.scaleR(e-n>0);const r=this.lens.getCenter();this.onMagnify(r)},this.scaleDByDrag=t=>{if(!this.isLensDragging)return;const{dx:e,dy:n}=t;this.scaleD(e-n>0);const r=this.lens.getCenter();this.onMagnify(r)},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var t;const{graph:e}=this.context,{trigger:n,scaleRBy:r,scaleDBy:i}=this.options,o=e.getCanvas().getLayer();if(["click","drag"].includes(n)&&o.addEventListener(ef.CLICK,this.onCreateFisheye),"pointermove"===n&&o.addEventListener(ef.POINTER_MOVE,this.onCreateFisheye),"drag"===n||"drag"===r||"drag"===i){o.addEventListener(ef.DRAG_START,this.onDragStart),o.addEventListener(ef.DRAG_END,this.onDragEnd);const t="drag"===n?this.onDrag:"drag"===r?this.scaleRByDrag:this.scaleDByDrag;o.addEventListener(ef.DRAG,t)}if("wheel"===r||"wheel"===i){const e="wheel"===r?this.scaleRByWheel:this.scaleDByWheel;null===(t=this.graphDom)||void 0===t||t.addEventListener(ef.WHEEL,e,{passive:!1})}}unbindEvents(){var t;const{graph:e}=this.context,{trigger:n,scaleRBy:r,scaleDBy:i}=this.options,o=e.getCanvas().getLayer();if(["click","drag"].includes(n)&&o.removeEventListener(ef.CLICK,this.onCreateFisheye),"pointermove"===n&&o.removeEventListener(ef.POINTER_MOVE,this.onCreateFisheye),"drag"===n||"drag"===r||"drag"===i){o.removeEventListener(ef.DRAG_START,this.onDragStart),o.removeEventListener(ef.DRAG_END,this.onDragEnd);const t="drag"===n?this.onDrag:"drag"===r?this.scaleRByDrag:this.scaleDByDrag;o.removeEventListener(ef.DRAG,t)}if("wheel"===r||"wheel"===i){const e="wheel"===r?this.scaleRByWheel:this.scaleDByWheel;null===(t=this.graphDom)||void 0===t||t.removeEventListener(ef.WHEEL,e)}}update(t){var e,n;this.unbindEvents(),super.update(t),this.r=null!==(e=t.r)&&void 0!==e?e:this.r,this.d=null!==(n=t.d)&&void 0!==n?n:this.d,this.bindEvents()}destroy(){var t;this.unbindEvents(),this.isLensOn&&(null===(t=this.lens)||void 0===t||t.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),super.destroy()}}ZA.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};class JA extends ET{constructor(t,e){super(t,Object.assign({},JA.defaultOptions,e)),this.$el=this.context.canvas.getContainer(),this.graphSize=[0,0],this.onFullscreenChange=()=>{var t,e,n,r;const i=!!document.fullscreenElement;this.options.autoFit&&this.setGraphSize(i),i?null===(e=(t=this.options).onEnter)||void 0===e||e.call(t):null===(r=(n=this.options).onExit)||void 0===r||r.call(n)},this.shortcut=new xv(t.graph),this.bindEvents(),this.style=document.createElement("style"),document.head.appendChild(this.style),this.style.innerHTML="\n      :not(:root):fullscreen::backdrop {\n        background: transparent;\n      }\n    "}bindEvents(){this.unbindEvents(),this.shortcut.unbindAll();const{request:t=[],exit:e=[]}=this.options.trigger;this.shortcut.bind(t,this.request),this.shortcut.bind(e,this.exit);const n=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"];n.forEach((t=>{document.addEventListener(t,this.onFullscreenChange,!1)}))}unbindEvents(){this.shortcut.unbindAll();const t=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"];t.forEach((t=>{document.removeEventListener(t,this.onFullscreenChange,!1)}))}setGraphSize(t=!0){var e,n;let r,i;t?(r=(null===(e=globalThis.screen)||void 0===e?void 0:e.width)||0,i=(null===(n=globalThis.screen)||void 0===n?void 0:n.height)||0,this.graphSize=this.context.graph.getSize()):[r,i]=this.graphSize,this.context.graph.setSize(r,i),this.context.graph.render()}request(){!document.fullscreenElement&&QA()&&this.$el.requestFullscreen().catch((t=>{vf.warn(`Error attempting to enable full-screen: ${t.message} (${t.name})`)}))}exit(){document.fullscreenElement&&document.exitFullscreen()}update(t){this.unbindEvents(),super.update(t),this.bindEvents()}destroy(){this.exit(),this.style.remove(),super.destroy()}}function QA(){return document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled")}JA.defaultOptions={trigger:{},autoFit:!0};class tC extends ET{constructor(t,e){super(t,Object.assign({},tC.defaultOptions,e)),this.$element=kT("grid-line",!0),this.offset=[0,0],this.currentScale=1,this.followZoom=t=>{const{data:{scale:e,origin:n}}=t;if(!e)return;const r=this.currentScale;this.currentScale=e;const i=e/r,o=Pg(n||this.context.graph.getCanvasCenter(),1-i),s=this.baseSize*e,a=Pg(this.offset,i),c=Gg(a,s),l=Ag(c,o);this.$element.style.backgroundSize=`${s}px ${s}px`,this.$element.style.backgroundPosition=`${l[0]}px ${l[1]}px`,this.offset=Gg(l,s)},this.followTranslate=t=>{if(!this.options.follow)return;const{data:{translate:e}}=t;e&&this.updateOffset(e)},this.onTransform=t=>{const e=this.parseFollow(this.options.follow);e.zoom&&this.followZoom(t),e.translate&&this.followTranslate(t)};const n=this.context.canvas.getContainer();n.prepend(this.$element),this.baseSize=this.options.size,this.updateStyle(),this.bindEvents()}update(t){super.update(t),void 0!==t.size&&(this.baseSize=t.size),this.updateStyle()}bindEvents(){const{graph:t}=this.context;t.on(of.AFTER_TRANSFORM,this.onTransform)}updateStyle(){const{stroke:t,lineWidth:e,border:n,borderLineWidth:r,borderStroke:i,borderStyle:o}=this.options,s=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:n?`${r}px ${o} ${i}`:"none",backgroundImage:`linear-gradient(${t} ${e}px, transparent ${e}px), linear-gradient(90deg, ${t} ${e}px, transparent ${e}px)`,backgroundSize:`${s}px ${s}px`,backgroundRepeat:"repeat"})}updateOffset(t){const e=this.baseSize*this.currentScale;this.offset=Gg(Ag(this.offset,t),e),this.$element.style.backgroundPosition=`${this.offset[0]}px ${this.offset[1]}px`}parseFollow(t){var e,n;return er(t)?{translate:t,zoom:t}:{translate:null!==(e=null===t||void 0===t?void 0:t.translate)&&void 0!==e&&e,zoom:null!==(n=null===t||void 0===t?void 0:t.zoom)&&void 0!==n&&n}}destroy(){this.context.graph.off(of.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),super.destroy()}}function eC(t){const e={Added:new Map,Updated:new Map,Removed:new Map};return t.forEach((t=>{const{type:n,value:r}=t,i=rg(r);if("NodeAdded"===n||"EdgeAdded"===n||"ComboAdded"===n)e.Added.set(i,t);else if("NodeUpdated"===n||"EdgeUpdated"===n||"ComboUpdated"===n)if(e.Added.has(i))e.Added.set(i,{type:n.replace("Updated","Added"),value:r});else if(e.Updated.has(i)){const{original:t}=e.Updated.get(i);e.Updated.set(i,{type:n,value:r,original:t})}else e.Removed.has(i)||e.Updated.set(i,t);else"NodeRemoved"!==n&&"EdgeRemoved"!==n&&"ComboRemoved"!==n||(e.Added.has(i)?e.Added.delete(i):e.Updated.has(i)?(e.Updated.delete(i),e.Removed.set(i,t)):e.Removed.set(i,t))})),[...Array.from(e.Added.values()),...Array.from(e.Updated.values()),...Array.from(e.Removed.values())]}function nC(t){const{NodeAdded:e=[],NodeUpdated:n=[],NodeRemoved:r=[],EdgeAdded:i=[],EdgeUpdated:o=[],EdgeRemoved:s=[],ComboAdded:a=[],ComboUpdated:c=[],ComboRemoved:l=[]}=jf(t,(t=>t.type));return{add:{nodes:e,edges:i,combos:a},update:{nodes:n,edges:o,combos:c},remove:{nodes:r,edges:s,combos:l}}}function rC(t,e){for(const n in t)rr(t[n])&&!Array.isArray(t[n])&&null!==t[n]?(e[n]||(e[n]={}),rC(t[n],e[n])):void 0===e[n]&&(e[n]=xf(n))}function iC(t,e=!1,n){const r={animation:e,current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},{add:i,update:o,remove:s}=nC(eC(t));return["nodes","edges","combos"].forEach((t=>{o[t]&&o[t].forEach((e=>{var i,o;const s=Object.assign({},e.value);let a=Object.assign({},e.original);if(n){const t=n.graph.getElementType(rg(e.original)),r="edge"===t?"stroke":"fill",i=n.element.getElementComputedStyle(t,e.original);a=Object.assign(Object.assign({},e.original),{style:Object.assign({[r]:i[r]},e.original.style)})}rC(s,a),(i=r.current.update)[t]||(i[t]=[]),r.current.update[t].push(s),(o=r.original.update)[t]||(o[t]=[]),r.original.update[t].push(a)})),i[t]&&i[t].forEach((e=>{var n,i;const o=Object.assign({},e.value);(n=r.current.add)[t]||(n[t]=[]),r.current.add[t].push(o),(i=r.original.remove)[t]||(i[t]=[]),r.original.remove[t].push(o)})),s[t]&&s[t].forEach((e=>{var n,i;const o=Object.assign({},e.value);(n=r.current.remove)[t]||(n[t]=[]),r.current.remove[t].push(o),(i=r.original.add)[t]||(i[t]=[]),r.original.add[t].push(o)}))})),r}tC.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};class oC extends ET{constructor(t,e){super(t,Object.assign({},oC.defaultOptions,e)),this.batchChanges=null,this.batchAnimation=!1,this.undoStack=[],this.redoStack=[],this.freezed=!1,this.executeCommand=(t,e=!0)=>{var n,r,i;this.freezed=!0,null===(r=(n=this.options).executeCommand)||void 0===r||r.call(n,t);const o=e?t.original:t.current;this.context.graph.addData(o.add),this.context.graph.updateData(o.update),this.context.graph.removeData(og(o.remove,!1)),null===(i=this.context.element)||void 0===i||i.draw({silence:!0,animation:t.animation}),this.freezed=!1},this.addCommand=t=>{var e;if(!this.freezed){if(t.type===of.AFTER_DRAW){const{dataChanges:n=[],animation:r=!0}=t.data;if(null===(e=this.context.batch)||void 0===e?void 0:e.isBatching){if(!this.batchChanges)return;return this.batchChanges.push(n),void(this.batchAnimation&&(this.batchAnimation=r))}this.batchChanges=[n],this.batchAnimation=r}this.undoStackPush(iC(this.batchChanges.flat(),this.batchAnimation,this.context)),this.notify(sf.ADD,this.undoStack[this.undoStack.length-1])}},this.initBatchCommand=t=>{const{initiate:e}=t.data;if(this.batchAnimation=!1,e)this.batchChanges=[];else{const t=this.undoStack.pop();t||(this.batchChanges=null)}},this.emitter=new Rw;const{graph:n}=this.context;n.on(of.AFTER_DRAW,this.addCommand),n.on(of.BATCH_START,this.initBatchCommand),n.on(of.BATCH_END,this.addCommand)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){var t,e,n,r;const i=this.undoStack.pop();if(i){this.executeCommand(i);const o=null===(e=(t=this.options).beforeAddCommand)||void 0===e?void 0:e.call(t,i,!1);if(!1===o)return;this.redoStack.push(i),null===(r=(n=this.options).afterAddCommand)||void 0===r||r.call(n,i,!1),this.notify(sf.UNDO,i)}return this}redo(){const t=this.redoStack.pop();return t&&(this.executeCommand(t,!1),this.undoStackPush(t),this.notify(sf.REDO,t)),this}undoAndCancel(){const t=this.undoStack.pop();return t&&(this.executeCommand(t,!1),this.redoStack=[],this.notify(sf.CANCEL,t)),this}undoStackPush(t){var e,n,r,i;const{stackSize:o}=this.options;0!==o&&this.undoStack.length>=o&&this.undoStack.shift();const s=null===(n=(e=this.options).beforeAddCommand)||void 0===n?void 0:n.call(e,t,!0);!1!==s&&(this.undoStack.push(t),null===(i=(r=this.options).afterAddCommand)||void 0===i||i.call(r,t,!0))}clear(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(sf.CLEAR,null)}notify(t,e){this.emitter.emit(t,{cmd:e}),this.emitter.emit(sf.CHANGE,{cmd:e})}on(t,e){this.emitter.on(t,e)}destroy(){const{graph:t}=this.context;t.off(of.AFTER_DRAW,this.addCommand),t.off(of.BATCH_START,this.initBatchCommand),t.off(of.BATCH_END,this.addCommand),this.emitter.off(),super.destroy(),this.undoStack=[],this.redoStack=[]}}oC.defaultOptions={stackSize:0};n(30531);const sC={toXy(t,e){if(!e)return[...t];const n=e[0].slice(1),r=e[1].slice(1);return t.map((t=>[t[n],t[r]]))},fromXy(t,e){if(!e)return[...t];const n=e[0].slice(1),r=e[1].slice(1);return t.map((([t,e])=>({[n]:t,[r]:e})))}};class aC{constructor(t,e){this._cells=[],this._cellSize=e,this._reverseCellSize=1/e;for(const n of t){const t=this.coordToCellNum(n[0]),e=this.coordToCellNum(n[1]);this._cells[t]||(this._cells[t]=[]),this._cells[t][e]||(this._cells[t][e]=[]),this._cells[t][e].push(n)}}cellPoints(t,e){var n;return(null===(n=this._cells[t])||void 0===n?void 0:n[e])||[]}rangePoints(t){const e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]),r=this.coordToCellNum(t[2]),i=this.coordToCellNum(t[3]),o=[];for(let s=e;s<=r;s++)for(let t=n;t<=i;t++){const e=this.cellPoints(s,t);for(const t of e)o.push(t)}return o}removePoint(t){const e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]),r=this._cells[e][n],i=r.findIndex((([e,n])=>e===t[0]&&n===t[1]));return i>-1&&r.splice(i,1),r}trunc(t){return Math.trunc(t)}coordToCellNum(t){return this.trunc(t*this._reverseCellSize)}extendBbox(t,e){return[t[0]-e*this._cellSize,t[1]-e*this._cellSize,t[2]+e*this._cellSize,t[3]+e*this._cellSize]}}function cC(t,e){return new aC(t,e)}const lC=+(Math.pow(2,27)+1);function uC(t,e,n){const r=t*e,i=lC*t,o=i-t,s=i-o,a=t-s,c=lC*e,l=c-e,u=c-l,h=e-u,d=r-s*u,f=d-a*u,p=f-s*h,g=a*h-p;return n?(n[0]=g,n[1]=r,n):[g,r]}function hC(t,e,n){const r=t+e,i=r-t,o=r-i,s=e-i,a=t-o;return n?(n[0]=a+s,n[1]=r,n):[a+s,r]}function dC(t,e){const n=t.length;if(1===n){const n=uC(t[0],e);return n[0]?n:[n[1]]}const r=new Array(2*n),i=[.1,.1],o=[.1,.1];let s=0;uC(t[0],e,i),i[0]&&(r[s++]=i[0]);for(let a=1;a<n;++a){uC(t[a],e,o);const n=i[1];hC(n,o[0],i),i[0]&&(r[s++]=i[0]);const c=o[1],l=i[1],u=c+l,h=u-c,d=l-h;i[1]=u,d&&(r[s++]=d)}return i[1]&&(r[s++]=i[1]),0===s&&(r[s++]=0),r.length=s,r}function fC(t,e){const n=t+e,r=n-t,i=n-r,o=e-r,s=t-i,a=s+o;return a?[a,n]:[n]}function pC(t,e){const n=0|t.length,r=0|e.length;if(1===n&&1===r)return fC(t[0],-e[0]);const i=n+r,o=new Array(i);let s=0,a=0,c=0;const l=Math.abs;let u,h,d=t[a],f=l(d),p=-e[c],g=l(p);f<g?(h=d,a+=1,a<n&&(d=t[a],f=l(d))):(h=p,c+=1,c<r&&(p=-e[c],g=l(p))),a<n&&f<g||c>=r?(u=d,a+=1,a<n&&(d=t[a],f=l(d))):(u=p,c+=1,c<r&&(p=-e[c],g=l(p)));let v,y,m,b,x,w=u+h,E=w-u,k=h-E,S=k,M=w;while(a<n&&c<r)f<g?(u=d,a+=1,a<n&&(d=t[a],f=l(d))):(u=p,c+=1,c<r&&(p=-e[c],g=l(p))),h=S,w=u+h,E=w-u,k=h-E,k&&(o[s++]=k),v=M+w,y=v-M,m=v-y,b=w-y,x=M-m,S=x+b,M=v;while(a<n)u=d,h=S,w=u+h,E=w-u,k=h-E,k&&(o[s++]=k),v=M+w,y=v-M,m=v-y,b=w-y,x=M-m,S=x+b,M=v,a+=1,a<n&&(d=t[a]);while(c<r)u=p,h=S,w=u+h,E=w-u,k=h-E,k&&(o[s++]=k),v=M+w,y=v-M,m=v-y,b=w-y,x=M-m,S=x+b,M=v,c+=1,c<r&&(p=-e[c]);return S&&(o[s++]=S),M&&(o[s++]=M),s||(o[s++]=0),o.length=s,o}function gC(t,e){const n=t+e,r=n-t,i=n-r,o=e-r,s=t-i,a=s+o;return a?[a,n]:[n]}function vC(t,e){const n=0|t.length,r=0|e.length;if(1===n&&1===r)return gC(t[0],e[0]);const i=n+r,o=new Array(i);let s=0,a=0,c=0;const l=Math.abs;let u,h,d=t[a],f=l(d),p=e[c],g=l(p);f<g?(h=d,a+=1,a<n&&(d=t[a],f=l(d))):(h=p,c+=1,c<r&&(p=e[c],g=l(p))),a<n&&f<g||c>=r?(u=d,a+=1,a<n&&(d=t[a],f=l(d))):(u=p,c+=1,c<r&&(p=e[c],g=l(p)));let v,y,m,b,x,w=u+h,E=w-u,k=h-E,S=k,M=w;while(a<n&&c<r)f<g?(u=d,a+=1,a<n&&(d=t[a],f=l(d))):(u=p,c+=1,c<r&&(p=e[c],g=l(p))),h=S,w=u+h,E=w-u,k=h-E,k&&(o[s++]=k),v=M+w,y=v-M,m=v-y,b=w-y,x=M-m,S=x+b,M=v;while(a<n)u=d,h=S,w=u+h,E=w-u,k=h-E,k&&(o[s++]=k),v=M+w,y=v-M,m=v-y,b=w-y,x=M-m,S=x+b,M=v,a+=1,a<n&&(d=t[a]);while(c<r)u=p,h=S,w=u+h,E=w-u,k=h-E,k&&(o[s++]=k),v=M+w,y=v-M,m=v-y,b=w-y,x=M-m,S=x+b,M=v,c+=1,c<r&&(p=e[c]);return S&&(o[s++]=S),M&&(o[s++]=M),s||(o[s++]=0),o.length=s,o}const yC=5,mC=11102230246251565e-32,bC=(3+16*mC)*mC,xC=(7+56*mC)*mC;function wC(t,e,n,r){return function(n,i,o){const s=t(t(e(i[1],o[0]),e(-o[1],i[0])),t(e(n[1],i[0]),e(-i[1],n[0]))),a=t(e(n[1],o[0]),e(-o[1],n[0])),c=r(s,a);return c[c.length-1]}}function EC(t,e,n,r){return function(i,o,s,a){const c=t(t(n(t(e(s[1],a[0]),e(-a[1],s[0])),o[2]),t(n(t(e(o[1],a[0]),e(-a[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]))),t(n(t(e(o[1],a[0]),e(-a[1],o[0])),i[2]),t(n(t(e(i[1],a[0]),e(-a[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),a[2])))),l=t(t(n(t(e(s[1],a[0]),e(-a[1],s[0])),i[2]),t(n(t(e(i[1],a[0]),e(-a[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),a[2]))),t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2])))),u=r(c,l);return u[u.length-1]}}function kC(t,e,n,r){return function(i,o,s,a,c){const l=t(t(t(n(t(n(t(e(a[1],c[0]),e(-c[1],a[0])),s[2]),t(n(t(e(s[1],c[0]),e(-c[1],s[0])),-a[2]),n(t(e(s[1],a[0]),e(-a[1],s[0])),c[2]))),o[3]),t(n(t(n(t(e(a[1],c[0]),e(-c[1],a[0])),o[2]),t(n(t(e(o[1],c[0]),e(-c[1],o[0])),-a[2]),n(t(e(o[1],a[0]),e(-a[1],o[0])),c[2]))),-s[3]),n(t(n(t(e(s[1],c[0]),e(-c[1],s[0])),o[2]),t(n(t(e(o[1],c[0]),e(-c[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),c[2]))),a[3]))),t(n(t(n(t(e(s[1],a[0]),e(-a[1],s[0])),o[2]),t(n(t(e(o[1],a[0]),e(-a[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]))),-c[3]),t(n(t(n(t(e(a[1],c[0]),e(-c[1],a[0])),o[2]),t(n(t(e(o[1],c[0]),e(-c[1],o[0])),-a[2]),n(t(e(o[1],a[0]),e(-a[1],o[0])),c[2]))),i[3]),n(t(n(t(e(a[1],c[0]),e(-c[1],a[0])),i[2]),t(n(t(e(i[1],c[0]),e(-c[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),c[2]))),-o[3])))),t(t(n(t(n(t(e(o[1],c[0]),e(-c[1],o[0])),i[2]),t(n(t(e(i[1],c[0]),e(-c[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),c[2]))),a[3]),t(n(t(n(t(e(o[1],a[0]),e(-a[1],o[0])),i[2]),t(n(t(e(i[1],a[0]),e(-a[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),a[2]))),-c[3]),n(t(n(t(e(s[1],a[0]),e(-a[1],s[0])),o[2]),t(n(t(e(o[1],a[0]),e(-a[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]))),i[3]))),t(n(t(n(t(e(s[1],a[0]),e(-a[1],s[0])),i[2]),t(n(t(e(i[1],a[0]),e(-a[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),a[2]))),-o[3]),t(n(t(n(t(e(o[1],a[0]),e(-a[1],o[0])),i[2]),t(n(t(e(i[1],a[0]),e(-a[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),a[2]))),s[3]),n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),-a[3]))))),u=t(t(t(n(t(n(t(e(a[1],c[0]),e(-c[1],a[0])),s[2]),t(n(t(e(s[1],c[0]),e(-c[1],s[0])),-a[2]),n(t(e(s[1],a[0]),e(-a[1],s[0])),c[2]))),i[3]),n(t(n(t(e(a[1],c[0]),e(-c[1],a[0])),i[2]),t(n(t(e(i[1],c[0]),e(-c[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),c[2]))),-s[3])),t(n(t(n(t(e(s[1],c[0]),e(-c[1],s[0])),i[2]),t(n(t(e(i[1],c[0]),e(-c[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),c[2]))),a[3]),n(t(n(t(e(s[1],a[0]),e(-a[1],s[0])),i[2]),t(n(t(e(i[1],a[0]),e(-a[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),a[2]))),-c[3]))),t(t(n(t(n(t(e(s[1],c[0]),e(-c[1],s[0])),o[2]),t(n(t(e(o[1],c[0]),e(-c[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),c[2]))),i[3]),n(t(n(t(e(s[1],c[0]),e(-c[1],s[0])),i[2]),t(n(t(e(i[1],c[0]),e(-c[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),c[2]))),-o[3])),t(n(t(n(t(e(o[1],c[0]),e(-c[1],o[0])),i[2]),t(n(t(e(i[1],c[0]),e(-c[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),c[2]))),s[3]),n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),-c[3])))),h=r(l,u);return h[h.length-1]}}function SC(t){const e=3===t?wC:4===t?EC:kC;return e(vC,uC,dC,pC)}const MC=SC(3),OC=SC(4),NC=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){const r=(t[1]-n[1])*(e[0]-n[0]),i=(t[0]-n[0])*(e[1]-n[1]),o=r-i;let s;if(r>0){if(i<=0)return o;s=r+i}else{if(!(r<0))return o;if(i>=0)return o;s=-(r+i)}const a=bC*s;return o>=a||o<=-a?o:MC(t,e,n)},function(t,e,n,r){const i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],a=t[1]-r[1],c=e[1]-r[1],l=n[1]-r[1],u=t[2]-r[2],h=e[2]-r[2],d=n[2]-r[2],f=o*l,p=s*c,g=s*a,v=i*l,y=i*c,m=o*a,b=u*(f-p)+h*(g-v)+d*(y-m),x=(Math.abs(f)+Math.abs(p))*Math.abs(u)+(Math.abs(g)+Math.abs(v))*Math.abs(h)+(Math.abs(y)+Math.abs(m))*Math.abs(d),w=xC*x;return b>w||-b>w?b:OC(t,e,n,r)}];function TC(t){let e=NC[t.length];return e||(e=NC[t.length]=SC(t.length)),e.apply(void 0,...t)}function AC(t,e,n,r,i,o,s){return function(...e){switch(e.length){case 0:case 1:return 0;case 2:return r(e[0],e[1]);case 3:return i(e[0],e[1],e[2]);case 4:return o(e[0],e[1],e[2],e[3]);case 5:return s(e[0],e[1],e[2],e[3],e[4])}return t(e)}}function CC(){while(NC.length<=yC)NC.push(SC(NC.length));const t=AC(void 0,TC,...NC);for(let e=0;e<=yC;++e)t[e]=NC[e];return t}var PC=CC();const RC=PC[3];function _C(t){const e=t.length;if(e<3){const n=new Array(e);for(let t=0;t<e;++t)n[t]=t;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}const n=new Array(e);for(let a=0;a<e;++a)n[a]=a;n.sort(((e,n)=>{const r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]}));const r=[n[0],n[1]],i=[n[0],n[1]];for(let a=2;a<e;++a){const e=n[a],o=t[e];let s=r.length;while(s>1&&RC(t[r[s-2]],t[r[s-1]],o)<=0)s-=1,r.pop();r.push(e),s=i.length;while(s>1&&RC(t[i[s-2]],t[i[s-1]],o)>=0)s-=1,i.pop();i.push(e)}const o=new Array(i.length+r.length-2);let s=0;for(let a=0,c=r.length;a<c;++a)o[s++]=r[a];for(let a=i.length-2;a>0;--a)o[s++]=i[a];return o}function LC(t,e,n,r){for(let i=0;i<2;++i){const o=t[i],s=e[i],[a,c]=[Math.min(o,s),Math.max(o,s)],l=n[i],u=r[i],[h,d]=[Math.min(l,u),Math.max(l,u)];if(d<a||c<h)return!1}return!0}function DC(t,e,n,r){const i=PC(t,n,r),o=PC(e,n,r);if(i>0&&o>0||i<0&&o<0)return!1;const s=PC(n,t,e),a=PC(r,t,e);return!(s>0&&a>0||s<0&&a<0)&&(0!==i||0!==o||0!==s||0!==a||LC(t,e,n,r))}function IC(t){const e=[t[0]];let n=t[0];for(let r=1;r<t.length;r++){const i=t[r];n[0]===i[0]&&n[1]===i[1]||e.push(i),n=i}return e}function jC(t){return t.sort((function(t,e){return t[0]-e[0]||t[1]-e[1]}))}function FC(t,e){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function BC(t,e,n){const r=[e[0]-t[0],e[1]-t[1]],i=[n[0]-t[0],n[1]-t[1]],o=FC(t,e),s=FC(t,n),a=r[0]*i[0]+r[1]*i[1];return a/Math.sqrt(o*s)}function zC(t,e){for(let n=0;n<e.length-1;n++){const r=[e[n],e[n+1]];if(!(t[0][0]===r[0][0]&&t[0][1]===r[0][1]||t[0][0]===r[1][0]&&t[0][1]===r[1][1])&&DC(t[0],t[1],r[0],r[1]))return!0}return!1}function GC(t){let e=1/0,n=1/0,r=-1/0,i=-1/0;for(let o=t.length-1;o>=0;o--)t[o][0]<e&&(e=t[o][0]),t[o][1]<n&&(n=t[o][1]),t[o][0]>r&&(r=t[o][0]),t[o][1]>i&&(i=t[o][1]);return[r-e,i-n]}function VC(t){return[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]}function WC(t,e,n){let r,i,o=null,s=$C,a=$C;for(let c=0;c<e.length;c++)r=BC(t[0],t[1],e[c]),i=BC(t[1],t[0],e[c]),r>s&&i>a&&!zC([t[0],e[c]],n)&&!zC([t[1],e[c]],n)&&(s=r,a=i,o=e[c]);return o}function UC(t,e,n,r,i){let o=!1;for(let s=0;s<t.length-1;s++){const a=[t[s],t[s+1]],c=a[0][0]+","+a[0][1]+","+a[1][0]+","+a[1][1];if(FC(a[0],a[1])<e||i.has(c))continue;let l,u,h,d=0,f=VC(a);do{f=r.extendBbox(f,d),l=f[2]-f[0],u=f[3]-f[1],h=WC(a,r.rangePoints(f),t),d++}while(null===h&&(n[0]>l||n[1]>u));l>=n[0]&&u>=n[1]&&i.add(c),null!==h&&(t.splice(s+1,0,h),r.removePoint(h),o=!0)}return o?UC(t,e,n,r,i):t}function HC(t,e,n){const r=e||20,i=IC(jC(sC.toXy(t,n)));if(i.length<4){const t=i.concat([i[0]]);return n?sC.fromXy(t,n):t}const o=GC(i),s=[o[0]*YC,o[1]*YC],a=_C(i).reverse().map((t=>i[t]));a.push(a[0]);const c=i.filter((function(t){return a.indexOf(t)<0})),l=Math.ceil(1/(i.length/(o[0]*o[1]))),u=UC(a,Math.pow(r,2),s,cC(c,l),new Set);return n?sC.fromXy(u,n):u}const $C=Math.cos(90/(180/Math.PI)),YC=.6;function qC(t,e,n){if(1===t.length)return XC(t[0],e,n);if(2===t.length)return KC(t,e,n);if(3===t.length){const[r,i,o]=vv(t);if(ov(r,i,o))return KC([r,o],e,n)}switch(n){case"smooth":return JC(t,e);case"sharp":return QC(t,e);case"rounded":default:return ZC(t,e)}}const XC=(t,e,n)=>{if("sharp"===n)return[["M",t[0]-e,t[1]-e],["L",t[0]+e,t[1]-e],["L",t[0]+e,t[1]+e],["L",t[0]-e,t[1]+e],["Z"]];const r=[e,e,0,0,0];return[["M",t[0],t[1]-e],["A",...r,t[0],t[1]+e],["A",...r,t[0],t[1]-e]]},KC=(t,e,n)=>{const r=[e,e,0,0,0],i="sharp"===n?Ag(t[0],Dg(Fg(Cg(t[0],t[1])),e)):t[0],o="sharp"===n?Ag(t[1],Dg(Fg(Cg(t[1],t[0])),e)):t[1],s=Dg(Fg(zg(Cg(i,o),!1)),e),a=Dg(s,-1),c=Ag(i,s),l=Ag(o,s),u=Ag(o,a),h=Ag(i,a);return"sharp"===n?[["M",c[0],c[1]],["L",l[0],l[1]],["L",u[0],u[1]],["L",h[0],h[1]],["Z"]]:[["M",c[0],c[1]],["L",l[0],l[1]],["A",...r,u[0],u[1]],["L",h[0],h[1]],["A",...r,c[0],c[1]]]},ZC=(t,e)=>{const n=vv(t).map(((n,r)=>{const i=(r-2+t.length)%t.length,o=(r-1+t.length)%t.length,s=(r+1)%t.length,a=t[i],c=t[o],l=t[s],u=Cg(a,c),h=Cg(c,n),d=Cg(n,l),f=(t,e)=>Bg(t,e,!0)<Math.PI,p=f(u,h),g=f(h,d),v=t=>Dg(Fg(zg(t,!1)),e),y=v(h);return[{p:Vg(Ag(c,p?v(u):y)),concave:p&&c},{p:Vg(Ag(n,g?v(d):y)),concave:g&&n}]})),r=[e,e,0,0,0],i=n.findIndex(((t,e)=>!n[(e-1+n.length)%n.length][0].concave&&!n[(e-1+n.length)%n.length][1].concave&&!t[0].concave&&!t[0].concave&&!t[1].concave)),o=n.slice(i).concat(n.slice(0,i));let s=[];return o.flatMap(((t,e)=>{const i=[],a=o[n.length-1];return 0===e&&i.push(["M",...a[1].p]),t[0].concave?s.push(t[0].p,t[1].p):i.push(["A",...r,...t[0].p]),t[1].concave?s.unshift(t[1].p):i.push(["L",...t[1].p]),3===s.length&&(i.pop(),i.push(["C",...s.flat()]),s=[]),i}))},JC=(t,e)=>{const n=vv(t).map(((e,n)=>{const r=t[(n+1)%t.length];return{p:e,v:Fg(Cg(r,e))}}));return n.forEach(((r,i)=>{const o=i>0?i-1:t.length-1,s=n[o].v,a=Fg(Ag(s,Dg(r.v,Bg(s,r.v,!0)<Math.PI?1:-1)));r.p=Ag(r.p,Dg(a,e))})),xy(n.map((t=>t.p)))},QC=(t,e)=>{const n=t.map(((n,r)=>{const i=t[0===r?t.length-1:r-1],o=Wg(Dg(Fg(zg(Cg(i,n),!1)),e));return[Ag(i,o),Ag(n,o)]})),r=n.flat(),i=r.map(((t,e)=>{if(e%2===0)return null;const n=[r[(e-1)%r.length],r[e%r.length]],i=[r[(e+1)%r.length],r[(e+2)%r.length]];return $g(n,i,!0)})).filter(Boolean);return i.map(((t,e)=>[0===e?"M":"L",t[0],t[1]])).concat([["Z"]])};var tP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class eP extends ET{constructor(t,e){super(t,Object.assign({},eP.defaultOptions,e)),this.hullMemberIds=[],this.drawHull=()=>{if(this.shape){const t=!qd(this.optionsCache,this.options);this.shape.update(this.getHullStyle(t))}else this.shape=new ky({style:this.getHullStyle()}),this.context.canvas.appendChild(this.shape);this.optionsCache=Object.assign({},this.options)},this.updateHullPath=t=>{this.shape&&this.options.members.includes(rg(t.data))&&this.shape.update({d:this.getHullPath(!0)})},this.getHullPath=(t=!1)=>{const{graph:e}=this.context,n=this.getMember();if(0===n.length)return"";const r=n.map((t=>e.getNodeData(t))),i=HC(r.map(qg),this.options.concavity).slice(1).reverse(),o=i.flatMap((t=>r.filter((e=>qd(qg(e),t))).map(rg)));return qd(o,this.hullMemberIds)&&!t||(this.hullMemberIds=o,this.path=qC(i,this.getPadding(),this.options.corner)),this.path},this.bindEvents()}bindEvents(){this.context.graph.on(of.AFTER_RENDER,this.drawHull),this.context.graph.on(of.AFTER_ELEMENT_UPDATE,this.updateHullPath)}unbindEvents(){this.context.graph.off(of.AFTER_RENDER,this.drawHull),this.context.graph.off(of.AFTER_ELEMENT_UPDATE,this.updateHullPath)}getHullStyle(t){const e=this.options,{members:n,padding:r,corner:i}=e,o=tP(e,["members","padding","corner"]);return Object.assign(Object.assign({},o),{d:this.getHullPath(t)})}getPadding(){const{graph:t}=this.context,e=this.hullMemberIds.reduce(((e,n)=>{const{halfExtents:r}=t.getElementRenderBounds(n),i=Math.max(r[0],r[1]);return Math.max(e,i)}),0);return e+this.options.padding}addMember(t){const e=Array.isArray(t)?t:[t];this.options.members=[...new Set([...this.options.members,...e])],this.shape.update({d:this.getHullPath()})}removeMember(t){const e=Array.isArray(t)?t:[t];this.options.members=this.options.members.filter((t=>!e.includes(t))),e.some((t=>this.hullMemberIds.includes(t)))&&this.shape.update({d:this.getHullPath()})}updateMember(t){this.options.members=nr(t)?t(this.options.members):t,this.shape.update(this.getHullStyle(!0))}getMember(){return this.options.members}destroy(){this.unbindEvents(),this.shape.destroy(),this.hullMemberIds=[],super.destroy()}}function nP(t,e){e(t),t.children&&t.children.forEach((function(t){t&&nP(t,e)}))}function rP(t){oP(t,!0)}function iP(t){oP(t,!1)}function oP(t,e){var n=e?"visible":"hidden";nP(t,(function(t){t.attr("visibility",n)}))}eP.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};var sP=5,aP=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=sP),Object.entries(e).forEach((function(i){var o=Ge(i,2),s=o[0],a=o[1],c=t;Object.prototype.hasOwnProperty.call(e,s)&&(a?Eg(a)?(Eg(t[s])||(c[s]={}),n<r?aP(t[s],a,n+1,r):c[s]=e[s]):kn(a)?(c[s]=[],c[s]=c[s].concat(a)):c[s]=a:c[s]=a)}))},cP=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)aP(t,e[r]);return t},lP=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(this,We([],Ge(e),!1))||this;return r.isMutationObserved=!0,r.addEventListener(_l.INSERTED,(function(){iP(r)})),r}return Ie(e,t),e}(Du);function uP(t){var e=t.appendChild(new lP({class:"offscreen"}));return iP(e),e}function hP(t){var e=t;while(e){if("offscreen"===e.className)return!0;e=e.parent}return!1}function dP(){oP(this,"hidden"!==this.attributes.visibility)}var fP=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this,cP({},{style:n},e))||this;return r.initialized=!1,r._defaultOptions=n,r}return Ie(e,t),Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=uP(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()},e.prototype.attributeChangedCallback=function(t){"visibility"===t&&dP.call(this)},e.prototype.update=function(t,e){var n;return this.attr(cP({},this.attributes,t||{})),null===(n=this.render)||void 0===n?void 0:n.call(this,this.attributes,this,e)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(t,e){},e.prototype.getSubShapeStyle=function(t){t.x,t.y,t.transform,t.transformOrigin,t.class,t.className,t.zIndex;var e=Fe(t,["x","y","transform","transformOrigin","class","className","zIndex"]);return e},e}(Ru);function pP(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function gP(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}function vP(t,e){return"".concat(e).concat(pP(t))}function yP(t,e,n){var r;void 0===n&&(n=!0);var i=e||(null===(r=t.match(/^([a-z][a-z0-9]+)/))||void 0===r?void 0:r[0])||"",o=t.replace(new RegExp("^(".concat(i,")")),"");return n?gP(o):o}function mP(t,e){Object.entries(e).forEach((function(e){var n=Ge(e,2),r=n[0],i=n[1];We([t],Ge(t.querySelectorAll(r)),!1).filter((function(t){return t.matches(r)})).forEach((function(t){if(t){var e=t;e.style.cssText+=Object.entries(i).reduce((function(t,e){return"".concat(t).concat(e.join(":"),";")}),"")}}))}))}var bP=function(t,e){if(!(null===t||void 0===t?void 0:t.startsWith(e)))return!1;var n=t[e.length];return n>="A"&&n<="Z"};function xP(t,e,n){void 0===n&&(n=!1);var r={};return Object.entries(t).forEach((function(t){var i=Ge(t,2),o=i[0],s=i[1];if("className"===o||"class"===o);else if(bP(o,"show")&&bP(yP(o,"show"),e)!==n)o===vP(e,"show")?r[o]=s:r[o.replace(new RegExp(pP(e)),"")]=s;else if(!bP(o,"show")&&bP(o,e)!==n){var a=yP(o,e);"filter"===a&&"function"===typeof s||(r[a]=s)}})),r}function wP(t,e){return Object.entries(t).reduce((function(t,n){var r=Ge(n,2),i=r[0],o=r[1];return i.startsWith("show")?t["show".concat(e).concat(i.slice(4))]=o:t["".concat(e).concat(pP(i))]=o,t}),{})}function EP(t,e){void 0===e&&(e=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(t).forEach((function(t){var o=Ge(t,2),s=o[0],a=o[1];e.includes(s)||(-1!==n.indexOf(s)?i[s]=a:r[s]=a)})),[r,i]}var kP=function(t){if(!kn(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e},SP=kP,MP=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=Fe(e,["style"]);return t.call(this,je({style:je({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},r))||this}return Ie(e,t),Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=uP(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()},e}(Xu);function OP(t,e){var n=new Map;return t.forEach((function(t){var r=e(t);n.has(r)||n.set(r,[]),n.get(r).push(t)})),n}function NP(t){throw new Error(t)}var TP=function(){function t(t,n,r,i,o,s,a){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=[null,null,null,null,null]),void 0===s&&(s=[]),void 0===a&&(a=[]),e.add(this),this._elements=Array.from(t),this._data=n,this._parent=r,this._document=i,this._enter=o[0],this._update=o[1],this._exit=o[2],this._merge=o[3],this._split=o[4],this._transitions=s,this._facetElements=a}var e,n,r;return t.prototype.selectAll=function(t){var e="string"===typeof t?this._parent.querySelectorAll(t):t;return new n(e,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(t){var e="string"===typeof t?this._parent.querySelectorAll(t):t;return new n(this._elements,null,this._parent,this._document,void 0,void 0,e)},t.prototype.select=function(t){var e="string"===typeof t?this._parent.querySelectorAll(t)[0]||null:t;return new n([e],null,e,this._document)},t.prototype.append=function(t){var e=this,r="function"===typeof t?t:function(){return e.createElement(t)},i=[];if(null!==this._data){for(var o=0;o<this._data.length;o++){var s=this._data[o],a=Ge(Array.isArray(s)?s:[s,null],2),c=a[0],l=a[1],u=r(c,o);u.__data__=c,null!==l&&(u.__fromElements__=l),this._parent.appendChild(u),i.push(u)}return new n(i,null,this._parent,this._document)}for(o=0;o<this._elements.length;o++){var h=this._elements[o];c=h.__data__,u=r(c,o);h.appendChild(u),i.push(u)}return new n(i,null,i[0],this._document)},t.prototype.maybeAppend=function(t,n){var i=Ue(this,e,"m",r).call(this,"#"===t[0]?t:"#".concat(t),n);return i.attr("id",t),i},t.prototype.maybeAppendByClassName=function(t,n){var i=t.toString(),o=Ue(this,e,"m",r).call(this,"."===i[0]?i:".".concat(i),n);return o.attr("className",i),o},t.prototype.maybeAppendByName=function(t,n){var i=Ue(this,e,"m",r).call(this,'[name="'.concat(t,'"]'),n);return i.attr("name",t),i},t.prototype.data=function(t,e,r){var i,o;void 0===e&&(e=function(t){return t}),void 0===r&&(r=function(){return null});for(var s=[],a=[],c=new Set(this._elements),l=[],u=new Set,h=new Map(this._elements.map((function(t,n){return[e(t.__data__,n),t]}))),d=new Map(this._facetElements.map((function(t,n){return[e(t.__data__,n),t]}))),f=OP(this._elements,(function(t){return r(t.__data__)})),p=0;p<t.length;p++){var g=t[p],v=e(g,p),y=r(g,p);if(h.has(v)){var m=h.get(v);m.__data__=g,m.__facet__=!1,a.push(m),c.delete(m),h.delete(v)}else if(d.has(v)){m=d.get(v);m.__data__=g,m.__facet__=!0,a.push(m),d.delete(v)}else if(f.has(v)){var b=f.get(v);l.push([g,b]);try{for(var x=(i=void 0,ze(b)),w=x.next();!w.done;w=x.next()){m=w.value;c.delete(m)}}catch(k){i={error:k}}finally{try{w&&!w.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}f.delete(v)}else if(h.has(y)){m=h.get(y);m.__toData__?m.__toData__.push(g):m.__toData__=[g],u.add(m),c.delete(m)}else s.push(g)}var E=[new n([],s,this._parent,this._document),new n(a,null,this._parent,this._document),new n(c,null,this._parent,this._document),new n([],l,this._parent,this._document),new n(u,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,E)},t.prototype.merge=function(t){var e=We(We([],Ge(this._elements),!1),Ge(t._elements),!1),r=We(We([],Ge(this._transitions),!1),Ge(t._transitions),!1);return new n(e,null,this._parent,this._document,void 0,r)},t.prototype.createElement=function(t){if(this._document)return this._document.createElement(t,{});var e=n.registry[t];return e?new e:NP("Unknown node type: ".concat(t))},t.prototype.join=function(t,e,n,r,i){void 0===t&&(t=function(t){return t}),void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(t){return t.remove()}),void 0===r&&(r=function(t){return t}),void 0===i&&(i=function(t){return t.remove()});var o=t(this._enter),s=e(this._update),a=n(this._exit),c=r(this._merge),l=i(this._split);return s.merge(o).merge(a).merge(c).merge(l)},t.prototype.remove=function(){for(var t=function(t){var n=e._elements[t],r=e._transitions[t];r?r.then((function(){return n.remove()})):n.remove()},e=this,r=0;r<this._elements.length;r++)t(r);return new n([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(t){for(var e=0;e<this._elements.length;e++){var n=this._elements[e],r=n.__data__;t.call(n,r,e)}return this},t.prototype.attr=function(t,e){var n="function"!==typeof e?function(){return e}:e;return this.each((function(r,i){void 0!==e&&(this[t]=n.call(this,r,i))}))},t.prototype.style=function(t,e,n){void 0===n&&(n=!0);var r="function"===typeof e&&n?e:function(){return e};return this.each((function(n,i){void 0!==e&&(this.style[t]=r.call(this,n,i))}))},t.prototype.styles=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=!0),this.each((function(n,r){var i=this;Object.entries(t).forEach((function(t){var o=Ge(t,2),s=o[0],a=o[1],c="function"===typeof a&&e?a:function(){return a};void 0!==a&&i.attr(s,c.call(i,n,r))}))}))},t.prototype.update=function(t,e){void 0===e&&(e=!0);var n="function"===typeof t&&e?t:function(){return t};return this.each((function(e,r){t&&this.update&&this.update(n.call(this,e,r))}))},t.prototype.maybeUpdate=function(t,e){void 0===e&&(e=!0);var n="function"===typeof t&&e?t:function(){return t};return this.each((function(e,r){t&&this.update&&this.update(n.call(this,e,r))}))},t.prototype.transition=function(t){this._transitions;var e=new Array(this._elements.length);return this.each((function(n,r){e[r]=t.call(this,n,r)})),this._transitions=SP(e),this},t.prototype.on=function(t,e){return this.each((function(){this.addEventListener(t,e)})),this},t.prototype.call=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.call.apply(t,We([this._parent,this],Ge(e),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter((function(t){return!!t}))},t.prototype.parent=function(){return this._parent},n=t,e=new WeakSet,r=function(t,e){var r=this._elements[0],i=r.querySelector(t);if(i)return new n([i],null,this._parent,this._document);var o="string"===typeof e?this.createElement(e):e();return r.appendChild(o),new n([o],null,this._parent,this._document)},t.registry={g:Du,rect:Yu,circle:Cu,path:Vu,text:MP,ellipse:_u,image:Fu,line:zu,polygon:Uu,polyline:$u,html:ju},t}();function AP(t){return new TP([t],null,t,t.ownerDocument)}function CP(t,e,n){return t.querySelector(e)?AP(t).select(e):AP(t).append(n)}var PP=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=e,this.width=n,this.height=r}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},t}();var RP=function(t,e){var n=function(t){return"".concat(e,"-").concat(t)},r=Object.fromEntries(Object.entries(t).map((function(t){var e=Ge(t,2),r=e[0],i=e[1],o=n(i);return[r,{name:o,class:".".concat(o),id:"#".concat(o),toString:function(){return o}}]})));return Object.assign(r,{prefix:n}),r};function _P(t){if(Ae(t))return[t,t,t,t];if(kn(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}function LP(t,e,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=function(t){t.node().removeChildren()}),t?n(e):(r&&i(e),null)}var DP=RP({text:"text"},"title");function IP(t){return/\S+-\S+/g.test(t)?t.split("-").map((function(t){return t[0]})):t.length>2?[t[0]]:t.split("")}function jP(t,e){var n=t.attributes,r=n.position,i=n.spacing,o=n.inset,s=n.text,a=t.getBBox(),c=e.getBBox(),l=IP(r),u=Ge(_P(s?i:0),4),h=u[0],d=u[1],f=u[2],p=u[3],g=Ge(_P(o),4),v=g[0],y=g[1],m=g[2],b=g[3],x=Ge([p+d,h+f],2),w=x[0],E=x[1],k=Ge([b+y,v+m],2),S=k[0],M=k[1];if("l"===l[0])return new PP(a.x,a.y,c.width+a.width+w+S,Math.max(c.height+M,a.height));if("t"===l[0])return new PP(a.x,a.y,Math.max(c.width+S,a.width),c.height+a.height+E+M);var O=Ge([e.attributes.width||c.width,e.attributes.height||c.height],2),N=O[0],T=O[1];return new PP(c.x,c.y,N+a.width+w+S,T+a.height+E+M)}function FP(t,e){var n=Object.entries(e).reduce((function(e,n){var r=Ge(n,2),i=r[0],o=r[1],s=t.node().attr(i);return s||(e[i]=o),e}),{});t.styles(n)}function BP(t){var e,n,r,i,o=t,s=o.width,a=o.height,c=o.position,l=Ge([+s/2,+a/2],2),u=l[0],h=l[1],d=Ge([+u,+h,"center","middle"],4),f=d[0],p=d[1],g=d[2],v=d[3],y=IP(c);return y.includes("l")&&(e=Ge([0,"start"],2),f=e[0],g=e[1]),y.includes("r")&&(n=Ge([+s,"end"],2),f=n[0],g=n[1]),y.includes("t")&&(r=Ge([0,"top"],2),p=r[0],v=r[1]),y.includes("b")&&(i=Ge([+a,"bottom"],2),p=i[0],v=i[1]),{x:f,y:p,textAlign:g,textBaseline:v}}var zP=function(t){function e(e){return t.call(this,e,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return Ie(e,t),e.prototype.getAvailableSpace=function(){var t=this,e=this.attributes,n=e.width,r=e.height,i=e.position,o=e.spacing,s=e.inset,a=t.querySelector(DP.text.class);if(!a)return new PP(0,0,+n,+r);var c=a.getBBox(),l=c.width,u=c.height,h=Ge(_P(o),4),d=h[0],f=h[1],p=h[2],g=h[3],v=Ge([0,0,+n,+r],4),y=v[0],m=v[1],b=v[2],x=v[3],w=IP(i);if(w.includes("i"))return new PP(y,m,b,x);w.forEach((function(t,e){var i,o,s,a;"t"===t&&(i=Ge(0===e?[u+p,+r-u-p]:[0,+r],2),m=i[0],x=i[1]),"r"===t&&(o=Ge([+n-l-g],1),b=o[0]),"b"===t&&(s=Ge([+r-u-d],1),x=s[0]),"l"===t&&(a=Ge(0===e?[l+f,+n-l-f]:[0,+n],2),y=a[0],b=a[1])}));var E=Ge(_P(s),4),k=E[0],S=E[1],M=E[2],O=E[3],N=Ge([O+S,k+M],2),T=N[0],A=N[1];return new PP(y+O,m+k,b-T,x-A)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new PP(0,0,0,0)},e.prototype.render=function(t,e){var n=this,r=(t.width,t.height,t.position,t.spacing,Fe(t,["width","height","position","spacing"])),i=Ge(EP(r),1),o=i[0],s=BP(t),a=s.x,c=s.y,l=s.textAlign,u=s.textBaseline;LP(!!r.text,AP(e),(function(t){n.title=t.maybeAppendByClassName(DP.text,"text").styles(o).call(FP,{x:a,y:c,textAlign:l,textBaseline:u}).node()}))},e}(fP),GP=function(){};function VP(t,e){return nr(t)?t.apply(void 0,We([],Ge(e),!1)):t}function WP(t,e){return t.reduce((function(t,n){return(t[n[e]]=t[n[e]]||[]).push(n),t}),{})}function UP(t){return"boolean"!==typeof t&&("enter"in t&&"update"in t&&"exit"in t)}function HP(t){if(!t)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],n=Object.fromEntries(Object.entries(t).filter((function(t){var n=Ge(t,1),r=n[0];return!e.includes(r)})));return Object.fromEntries(e.map((function(e){return UP(t)?!1===t[e]?[e,!1]:[e,je(je({},t[e]),n)]:[e,n]})))}function $P(t,e){t?t.finished.then(e):e()}function YP(t,e){0===t.length?e():Promise.all(t.map((function(t){return null===t||void 0===t?void 0:t.finished}))).then(e)}function qP(t,e){"update"in t?t.update(e):t.attr(e)}function XP(t,e,n){if(0===e.length)return null;if(!n){var r=e.slice(-1)[0];return qP(t,{style:r}),null}return t.animate(e,n)}function KP(t,e){return"text"===t.nodeName&&"text"===e.nodeName&&t.attributes.text===e.attributes.text}function ZP(t,e,n,r){if(void 0===r&&(r="destroy"),KP(t,e))return t.remove(),[null];var i=function(){"destroy"===r?t.destroy():"hide"===r&&iP(t),e.isVisible()&&rP(e)};if(!n)return i(),[null];var o=n.duration,s=void 0===o?0:o,a=n.delay,c=void 0===a?0:a,l=Math.ceil(+s/2),u=+s/4,h=Ge(t.getGeometryBounds().center,2),d=h[0],f=h[1],p=Ge(e.getGeometryBounds().center,2),g=p[0],v=p[1],y=Ge([(d+g)/2-d,(f+v)/2-f],2),m=y[0],b=y[1],x=t.style.opacity,w=void 0===x?1:x,E=e.style.opacity,k=void 0===E?1:E,S=t.style.transform||"",M=e.style.transform||"",O=t.animate([{opacity:w,transform:"translate(0, 0) ".concat(S)},{opacity:0,transform:"translate(".concat(m,", ").concat(b,") ").concat(S)}],je(je({fill:"both"},n),{duration:c+l+u})),N=e.animate([{opacity:0,transform:"translate(".concat(-m,", ").concat(-b,") ").concat(M),offset:.01},{opacity:k,transform:"translate(0, 0) ".concat(M)}],je(je({fill:"both"},n),{duration:l+u,delay:c+l-u}));return $P(N,i),[O,N]}function JP(t,e,n){var r={},i={};return Object.entries(e).forEach((function(e){var n=Ge(e,2),o=n[0],s=n[1];if(!Pe(s)){var a=t.style[o]||t.parsedStyle[o]||0;a!==s&&(r[o]=a,i[o]=s)}})),n?XP(t,[r,i],je({fill:"both"},n)):(qP(t,i),null)}function QP(t){var e;return(null===(e=t[0])||void 0===e?void 0:e.map((function(e,n){return t.map((function(t){return t[n]}))})))||[]}function tR(t,e,n){void 0===n&&(n=!1);var r=t.getBBox(),i=r.width,o=r.height,s=e/Math.max(i,o);return n&&(t.style.transform="scale(".concat(s,")")),s}var eR=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]},nR=eR,rR=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},iR=function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},oR=function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},sR=function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]},aR=function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},cR=function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},lR=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},uR=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},hR=function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},dR=function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},fR=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},pR=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},gR=pR,vR=function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]},yR=function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]},mR=function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]},bR=function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]};function xR(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}var wR=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]},ER=RP({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),kR=function(t){function e(e){var n=t.call(this,e,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:wR(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(t,e){return"".concat(t,"/").concat(e)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return n.playState="idle",n.contentGroup=n.appendChild(new Du({class:ER.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new Du({class:ER.playWindow.name})),n.innerCurrPage=n.defaultPage,n}return Ie(e,t),Object.defineProperty(e.prototype,"defaultPage",{get:function(){var t=this.attributes.defaultPage;return Le(t,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var t=this.pageViews,e=Ge(QP(t.map((function(t){var e=t.getBBox(),n=e.width,r=e.height;return[n,r]}))).map((function(t){return Math.max.apply(Math,We([],Ge(t),!1))})),2),n=e[0],r=e[1],i=this.attributes,o=i.pageWidth,s=void 0===o?n:o,a=i.pageHeight,c=void 0===a?r:a;return{pageWidth:s,pageHeight:c}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var e=t.prototype.getBBox.call(this),n=e.x,r=e.y,i=this.controllerShape,o=this.pageShape,s=o.pageWidth,a=o.pageHeight;return new PP(n,r,s+i.width,a)},e.prototype.goTo=function(t){var e=this,n=this.attributes.animate,r=this,i=r.currPage,o=r.playState,s=r.playWindow,a=r.pageViews;if("idle"!==o||t<0||a.length<=0||t>=a.length)return null;a[i].setLocalPosition(0,0),this.prepareFollowingPage(t);var c=Ge(this.getFollowingPageDiff(t),2),l=c[0],u=c[1];this.playState="running";var h=XP(s,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-l,", ").concat(-u,")")}],n);return $P(h,(function(){e.innerCurrPage=t,e.playState="idle",e.setVisiblePages([t]),e.updatePageInfo()})),h},e.prototype.prev=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n<=0)return null;var r=t?(n-1+e)%e:Le(n-1,0,e);return this.goTo(r)},e.prototype.next=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n>=e-1)return null;var r=t?(n+1)%e:Le(n+1,0,e);return this.goTo(r)},e.prototype.renderClipPath=function(t){var e=this.pageShape,n=e.pageWidth,r=e.pageHeight;n&&r?(this.clipPath=t.maybeAppendByClassName(ER.clipPath,"rect").styles({width:n,height:r}),this.contentGroup.attr("clipPath",this.clipPath.node())):this.contentGroup.style.clipPath=void 0},e.prototype.setVisiblePages=function(t){this.playWindow.children.forEach((function(e,n){t.includes(n)?rP(e):iP(e)}))},e.prototype.adjustControllerLayout=function(){var t=this,e=t.prevBtnGroup,n=t.nextBtnGroup,r=t.pageInfoGroup,i=this.attributes,o=i.orientation,s=i.controllerPadding,a=r.getBBox(),c=a.width,l=(a.height,Ge("horizontal"===o?[-180,0]:[-90,90],2)),u=l[0],h=l[1];e.setLocalEulerAngles(u),n.setLocalEulerAngles(h);var d=e.getBBox(),f=d.width,p=d.height,g=n.getBBox(),v=g.width,y=g.height,m=Math.max(f,c,v),b="horizontal"===o?{offset:[[0,0],[f/2+s,0],[f+c+2*s,0]],textAlign:"start"}:{offset:[[m/2,-p-s],[m/2,0],[m/2,y+s]],textAlign:"center"},x=Ge(b.offset,3),w=Ge(x[0],2),E=w[0],k=w[1],S=Ge(x[1],2),M=S[0],O=S[1],N=Ge(x[2],2),T=N[0],A=N[1],C=b.textAlign,P=r.querySelector("text");P&&(P.style.textAlign=C),e.setLocalPosition(E,k),r.setLocalPosition(M,O),n.setLocalPosition(T,A)},e.prototype.updatePageInfo=function(){var t,e=this,n=e.currPage,r=e.pageViews,i=e.attributes.formatter;r.length<2||(null===(t=this.pageInfoGroup.querySelector(ER.pageInfo.class))||void 0===t||t.attr("text",i(n+1,r.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(t){var e=this.currPage;if(e===t)return[0,0];var n=this.attributes.orientation,r=this.pageShape,i=r.pageWidth,o=r.pageHeight,s=t<e?-1:1;return"horizontal"===n?[s*i,0]:[0,s*o]},e.prototype.prepareFollowingPage=function(t){var e=this,n=e.currPage,r=e.pageViews;if(this.setVisiblePages([t,n]),t!==n){var i=Ge(this.getFollowingPageDiff(t),2),o=i[0],s=i[1];r[t].setLocalPosition(o,s)}},e.prototype.renderController=function(t){var e=this,n=this.attributes.controllerSpacing,r=this.pageShape,i=r.pageWidth,o=r.pageHeight,s=this.pageViews.length>=2,a=t.maybeAppendByClassName(ER.controller,"g");if(oP(a.node(),s),s){var c=xP(this.attributes,"button"),l=xP(this.attributes,"pageNum"),u=Ge(EP(c),2),h=u[0],d=u[1],f=h.size,p=Fe(h,["size"]),g=!a.select(ER.prevBtnGroup.class).node(),v=a.maybeAppendByClassName(ER.prevBtnGroup,"g").styles(d);this.prevBtnGroup=v.node();var y=v.maybeAppendByClassName(ER.prevBtn,"path"),m=a.maybeAppendByClassName(ER.nextBtnGroup,"g").styles(d);this.nextBtnGroup=m.node();var b=m.maybeAppendByClassName(ER.nextBtn,"path");[y,b].forEach((function(t){t.styles(je(je({},p),{transformOrigin:"center"})),tR(t.node(),f,!0)}));var x=a.maybeAppendByClassName(ER.pageInfoGroup,"g");this.pageInfoGroup=x.node(),x.maybeAppendByClassName(ER.pageInfo,"text").styles(l),this.updatePageInfo(),a.node().setLocalPosition(i+n,o/2),g&&(this.prevBtnGroup.addEventListener("click",(function(){e.prev()})),this.nextBtnGroup.addEventListener("click",(function(){e.next()})))}},e.prototype.render=function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i;this.attr("transform","translate(".concat(r,", ").concat(o,")"));var s=AP(e);this.renderClipPath(s),this.renderController(s),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var t=this,e=Mw((function(){return t.render(t.attributes,t)}),50);this.playWindow.addEventListener(_l.INSERTED,e),this.playWindow.addEventListener(_l.REMOVED,e)},e}(fP);function SR(t){var e="default";if(rr(t)&&t instanceof Image)e="image";else if(nr(t))e="symbol";else if(Re(t)){var n=new RegExp("data:(image|text)");e=t.match(n)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?"url":"symbol"}return e}function MR(t){var e=SR(t);return["base64","url","image"].includes(e)?"image":t&&"symbol"===e?"path":null}var OR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),e.prototype.render=function(t,n){var r=t.x,i=void 0===r?0:r,o=t.y,s=void 0===o?0:o,a=this.getSubShapeStyle(t),c=a.symbol,l=a.size,u=void 0===l?16:l,h=Fe(a,["symbol","size"]),d=MR(c);LP(!!d,AP(n),(function(t){t.maybeAppendByClassName("marker",d).attr("className","marker ".concat(d,"-marker")).call((function(t){if("image"===d){var n=2*u;t.styles({img:c,width:n,height:n,x:i-u,y:s-u})}else{n=u/2;var r=nr(c)?c:e.getSymbol(c);t.styles(je({d:null===r||void 0===r?void 0:r(i,s,n)},h))}}))}))},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(t,n){e.MARKER_SYMBOL_MAP.set(t,n)},e.getSymbol=function(t){return e.MARKER_SYMBOL_MAP.get(t)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e}(fP);function NR(t,e,n){var r=1.4,i=r*n;return[["M",t-n,e-i],["L",t+n,e-i],["L",t+n,e+i],["L",t-n,e+i],["Z"]]}OR.registerSymbol("cross",uR),OR.registerSymbol("hyphen",fR),OR.registerSymbol("line",lR),OR.registerSymbol("plus",dR),OR.registerSymbol("tick",hR),OR.registerSymbol("circle",eR),OR.registerSymbol("point",nR),OR.registerSymbol("bowtie",cR),OR.registerSymbol("hexagon",aR),OR.registerSymbol("square",rR),OR.registerSymbol("diamond",iR),OR.registerSymbol("triangle",oR),OR.registerSymbol("triangle-down",sR),OR.registerSymbol("line",lR),OR.registerSymbol("dot",pR),OR.registerSymbol("dash",gR),OR.registerSymbol("smooth",vR),OR.registerSymbol("hv",yR),OR.registerSymbol("vh",mR),OR.registerSymbol("hvh",bR),OR.registerSymbol("vhv",xR);var TR=1.4,AR=.4;function CR(t,e,n){var r=n,i=r*TR,o=r/2,s=r/6,a=t+i*AR;return[["M",t,e],["L",a,e+o],["L",t+i,e+o],["L",t+i,e-o],["L",a,e-o],["Z"],["M",a,e+s],["L",t+i-2,e+s],["M",a,e-s],["L",t+i-2,e-s]]}function PR(t,e,n){var r=n,i=r*TR,o=r/2,s=r/6,a=e+i*AR;return[["M",t,e],["L",t-o,a],["L",t-o,e+i],["L",t+o,e+i],["L",t+o,a],["Z"],["M",t-s,a],["L",t-s,e+i-2],["M",t+s,a],["L",t+s,e+i-2]]}OR.registerSymbol("hiddenHandle",NR),OR.registerSymbol("verticalHandle",CR),OR.registerSymbol("horizontalHandle",PR);var RR,_R;function LR(t,e,n){return void 0===t&&(t="horizontal"),"horizontal"===t?e:n}function DR(t){var e=t.getLocalBounds(),n=e.min,r=e.max,i=Ge([n,r],2),o=Ge(i[0],2),s=o[0],a=o[1],c=Ge(i[1],2),l=c[0],u=c[1];return{x:s,y:a,width:l-s,height:u-a,left:s,bottom:u,top:a,right:l}}function IR(t,e){var n=Ge(t,2),r=n[0],i=n[1],o=Ge(e,2),s=o[0],a=o[1];return r!==s&&i===a}function jR(t,e){var n,r,i=e.attributes;try{for(var o=ze(Object.entries(i)),s=o.next();!s.done;s=o.next()){var a=Ge(s.value,2),c=a[0],l=a[1];"id"!==c&&"className"!==c&&t.attr(c,l)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function FR(t){return"function"===typeof t?t():Re(t)||Ae(t)?new MP({style:{text:String(t)}}):t}var BR,zR=oT((function(t,e){var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,s=e.fontVariant;return _R?_R(t,n):(RR||(RR=gu.offscreenCanvasCreator.getOrCreateContext(void 0)),RR.font=[o,s,i,"".concat(n,"px"),r].join(" "),RR.measureText(t).width)}),(function(t,e){return[t,Object.values(e||GR(t)).join()].join("")}),4096),GR=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",i=t.style.fontVariant,o=t.style.fontSize;return o="object"===typeof o?o.value:o,{fontSize:o,fontFamily:e,fontWeight:n,fontStyle:r,fontVariant:i}};function VR(t){return"text"===t.nodeName?t:"g"===t.nodeName&&1===t.children.length&&"text"===t.children[0].nodeName?t.children[0]:null}function WR(t,e){var n=VR(t);n&&n.attr(e)}function UR(t,e,n){void 0===n&&(n="..."),WR(t,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:n})}function HR(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function $R(t,e,n,r){return e&&HR(t,e),n&&HR(t,n),r&&HR(t,r),t}function YR(t){return t instanceof Element||t instanceof Document}var qR="component-poptip",XR={CONTAINER:"component-poptip",ARROW:"component-poptip-arrow",TEXT:"component-poptip-text"},KR=(BR={},BR[".".concat(XR.CONTAINER)]={visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},BR[".".concat(XR.TEXT)]={"text-align":"center"},BR[".".concat(XR.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, -100%)"},BR[".".concat(XR.CONTAINER,"[data-position='left']")]={transform:"translate(-100%, -50%)"},BR[".".concat(XR.CONTAINER,"[data-position='right']")]={transform:"translate(0, -50%)"},BR[".".concat(XR.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 0)"},BR[".".concat(XR.CONTAINER,"[data-position='top-left']")]={transform:"translate(0,-100%)"},BR[".".concat(XR.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%,-100%)"},BR[".".concat(XR.CONTAINER,"[data-position='left-top']")]={transform:"translate(-100%, 0)"},BR[".".concat(XR.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(-100%, -100%)"},BR[".".concat(XR.CONTAINER,"[data-position='right-top']")]={transform:"translate(0, 0)"},BR[".".concat(XR.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(0, -100%)"},BR[".".concat(XR.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 0)"},BR[".".concat(XR.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 0)"},BR[".".concat(XR.ARROW)]={width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},BR[".".concat(XR.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, calc(-100% - 5px))"},BR["[data-position='top'] .".concat(XR.ARROW)]={bottom:"-2px"},BR[".".concat(XR.CONTAINER,"[data-position='left']")]={transform:"translate(calc(-100% - 5px), -50%)"},BR["[data-position='left'] .".concat(XR.ARROW)]={right:"-2px"},BR[".".concat(XR.CONTAINER,"[data-position='right']")]={transform:"translate(5px, -50%)"},BR["[data-position='right'] .".concat(XR.ARROW)]={left:"-2px"},BR[".".concat(XR.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 5px)"},BR["[data-position='bottom'] .".concat(XR.ARROW)]={top:"-2px"},BR[".".concat(XR.CONTAINER,"[data-position='top-left']")]={transform:"translate(0, calc(-100% - 5px))"},BR["[data-position='top-left'] .".concat(XR.ARROW)]={left:"10px",bottom:"-2px"},BR[".".concat(XR.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%, calc(-100% - 5px))"},BR["[data-position='top-right'] .".concat(XR.ARROW)]={right:"10px",bottom:"-2px"},BR[".".concat(XR.CONTAINER,"[data-position='left-top']")]={transform:"translate(calc(-100% - 5px), 0)"},BR["[data-position='left-top'] .".concat(XR.ARROW)]={right:"-2px",top:"8px"},BR[".".concat(XR.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(calc(-100% - 5px), -100%)"},BR["[data-position='left-bottom'] .".concat(XR.ARROW)]={right:"-2px",bottom:"8px"},BR[".".concat(XR.CONTAINER,"[data-position='right-top']")]={transform:"translate(5px, 0)"},BR["[data-position='right-top'] .".concat(XR.ARROW)]={left:"-2px",top:"8px"},BR[".".concat(XR.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(5px, -100%)"},BR["[data-position='right-bottom'] .".concat(XR.ARROW)]={left:"-2px",bottom:"8px"},BR[".".concat(XR.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 5px)"},BR["[data-position='bottom-left'] .".concat(XR.ARROW)]={top:"-2px",left:"8px"},BR[".".concat(XR.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 5px)"},BR["[data-position='bottom-right'] .".concat(XR.ARROW)]={top:"-2px",right:"8px"},BR),ZR=void 0;function JR(t,e,n,r,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!1),o)return[t,e];var s=n.getBoundingClientRect(),a=s.x,c=s.y,l=s.width,u=s.height;switch(r){case"top":return i?[a+l/2,c]:[t,c];case"left":return i?[a,c+u/2]:[a,e];case"bottom":return i?[a+l/2,c+u]:[t,c+u];case"right":return i?[a+l,c+u/2]:[a+l,e];case"top-right":case"right-top":return[a+l,c];case"left-bottom":case"bottom-left":return[a,c+u];case"right-bottom":case"bottom-right":return[a+l,c+u];case"top-left":case"left-top":default:return[a,c]}}var QR=function(t){var e;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e||(e=t.apply(ZR,n)),e}};function t_(t){var e=t&&document.getElementById(t);return e||(e=document.createElement("div"),e.setAttribute("id",t),document.body.appendChild(e)),e}function e_(t){var e=QR(t_)(t);return e}var n_=function(t){function e(n){var r=t.call(this,Ng({style:{id:qR}},e.defaultOptions,n))||this;return r.visibility="visible",r.map=new Map,r.domStyles="",r.initShape(),r.render(r.attributes,r),r}return Ie(e,t),Object.defineProperty(e.prototype,"visible",{get:function(){return"visible"===this.visibility},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){this.visibility=this.style.visibility,this.updatePoptipElement()},e.prototype.update=function(t){this.attr(Ng({},this.style,t)),this.render(this.attributes,this)},e.prototype.bind=function(t,e){var n=this;if(t){var r=this.style.text,i=function(i){var o=t,s=n.style,a=r;if(e){var c="function"===typeof e?e.call(null,i):e,l=c.html,u=c.target,h=Fe(c,["html","target"]);s=$R({},n.style,h),(u||!1===u)&&(o=u),"string"===typeof l&&(a=l)}var d=s.position,f=s.arrowPointAtCenter,p=s.follow,g=s.offset;if(o){var v=i,y=v.clientX,m=v.clientY,b=Ge(JR(y,m,o,d,f,p),2),x=b[0],w=b[1];n.showTip(x,w,{text:a,position:d,offset:g})}else n.hideTip()},o=function(){n.hideTip()};t.addEventListener("mousemove",i),t.addEventListener("mouseleave",o),this.map.set(t,[i,o])}},e.prototype.unbind=function(t){if(this.map.has(t)){var e=Ge(this.map.get(t)||[],2),n=e[0],r=e[1];n&&t.removeEventListener("mousemove",n),r&&t.removeEventListener("mouseleave",r),this.map.delete(t)}},e.prototype.clear=function(){this.container.innerHTML=""},e.prototype.destroy=function(){var e,n=this;We([],Ge(this.map.keys()),!1).forEach((function(t){return n.unbind(t)})),null===(e=this.container)||void 0===e||e.remove(),t.prototype.destroy.call(this)},e.prototype.showTip=function(t,e,n){var r=_v(n,"text");if((!r||"string"===typeof r)&&(this.applyStyles(),t&&e&&n)){var i=n.offset,o=n.position;if(o&&this.container.setAttribute("data-position",o),this.setOffsetPosition(t,e,i),"string"===typeof r){var s=this.container.querySelector(".".concat(XR.TEXT));s&&(s.innerHTML=r)}this.visibility="visible",this.container.style.visibility="visible"}},e.prototype.hideTip=function(){this.visibility="hidden",this.container.style.visibility="hidden"},e.prototype.getContainer=function(){return this.container},e.prototype.getClassName=function(){var t=this.style.containerClassName;return"".concat(XR.CONTAINER).concat(t?" ".concat(t):"")},e.prototype.initShape=function(){var t=this,e=this.style.id;this.container=e_(e),this.container.className=this.getClassName(),this.container.addEventListener("mousemove",(function(){return t.showTip()})),this.container.addEventListener("mouseleave",(function(){return t.hideTip()}))},e.prototype.updatePoptipElement=function(){var t=this.container;this.clear();var e=this.style,n=e.id,r=e.template,i=e.text;this.container.setAttribute("id",n),this.container.className=this.getClassName();var o='<span class="'.concat(XR.ARROW,'"></span>');t.innerHTML=o,Re(r)?t.innerHTML+=r:r&&YR(r)&&t.appendChild(r),i&&(t.getElementsByClassName(XR.TEXT)[0].textContent=i),this.applyStyles(),this.container.style.visibility=this.visibility},e.prototype.applyStyles=function(){var t=cP({},KR,this.style.domStyles),e=Object.entries(t).reduce((function(t,e){var n=Ge(e,2),r=n[0],i=n[1],o=Object.entries(i).reduce((function(t,e){var n=Ge(e,2),r=n[0],i=n[1];return"".concat(t).concat(r,": ").concat(i,";")}),"");return"".concat(t).concat(r,"{").concat(o,"}")}),"");if(this.domStyles!==e){this.domStyles=e;var n=this.container.querySelector("style");n&&this.container.removeChild(n),n=document.createElement("style"),n.innerHTML=e,this.container.appendChild(n)}},e.prototype.setOffsetPosition=function(t,e,n){void 0===n&&(n=this.style.offset);var r=Ge(n,2),i=r[0],o=void 0===i?0:i,s=r[1],a=void 0===s?0:s;this.container.style.left="".concat(t+o,"px"),this.container.style.top="".concat(e+a,"px")},e.tag="poptip",e.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:KR,template:'<div class="'.concat(XR.TEXT,'"></div>')}},e}(fP),r_=RP({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item"),i_={offset:[0,20],domStyles:{".component-poptip":{opacity:"1",padding:"8px 12px",background:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},".component-poptip-arrow":{display:"none"},".component-poptip-text":{color:"#000",lineHeight:"20px"}}};function o_(t){var e=t.querySelector(r_.marker.class);return e?e.style:{}}var s_=function(t){function e(e){return t.call(this,e,{span:[1,1],marker:function(){return new Cu({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Ie(e,t),Object.defineProperty(e.prototype,"showValue",{get:function(){var t=this.attributes.valueText;return!!t&&("string"===typeof t||"number"===typeof t?""!==t:"function"===typeof t||""!==t.attr("text"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var t=this.labelGroup,e=this.valueGroup,n=this.attributes.markerSize,r=t.node().getBBox(),i=r.width,o=r.height,s=e.node().getBBox(),a=s.width,c=s.height;return{markerWidth:n,labelWidth:i,valueWidth:a,height:Math.max(n,o,c)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var t=this.attributes.span;if(!t)return[1,1];var e=Ge(_P(t),2),n=e[0],r=e[1],i=this.showValue?r:0,o=n+i;return[n/o,i/o]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t,e=this.attributes,n=e.markerSize,r=e.width,i=this.actualSpace,o=i.markerWidth,s=i.height,a=this.actualSpace,c=a.labelWidth,l=a.valueWidth,u=Ge(this.spacing,2),h=u[0],d=u[1];if(r){var f=r-n-h-d,p=Ge(this.span,2),g=p[0],v=p[1];t=Ge([g*f,v*f],2),c=t[0],l=t[1]}var y=o+c+l+h+d;return{width:y,height:s,markerWidth:o,labelWidth:c,valueWidth:l}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var t=this.attributes.spacing;if(!t)return[0,0];var e=Ge(_P(t),2),n=e[0],r=e[1];return this.showValue?[n,r]:[n,0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var t=this.shape,e=t.markerWidth,n=t.labelWidth,r=t.valueWidth,i=t.width,o=t.height,s=Ge(this.spacing,2),a=s[0],c=s[1];return{height:o,width:i,markerWidth:e,labelWidth:n,valueWidth:r,position:[e/2,e+a,e+n+a+c]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var t=o_(this.markerGroup.node()),e=this.attributes,n=e.markerSize,r=e.markerStrokeWidth,i=void 0===r?t.strokeWidth:r,o=e.markerLineWidth,s=void 0===o?t.lineWidth:o,a=e.markerStroke,c=void 0===a?t.stroke:a,l=+(i||s||(c?1:0))*Math.sqrt(2),u=this.markerGroup.node().getBBox(),h=u.width,d=u.height;return(1-l/Math.max(h,d))*n},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(t){var e=this,n=this.attributes.marker,r=xP(this.attributes,"marker");this.markerGroup=t.maybeAppendByClassName(r_.markerGroup,"g").style("zIndex",0),LP(!!n,this.markerGroup,(function(){var t,i=e.markerGroup.node(),o=null===(t=i.childNodes)||void 0===t?void 0:t[0],s="string"===typeof n?new OR({style:{symbol:n},className:r_.marker.name}):n();o?s.nodeName===o.nodeName?o instanceof OR?o.update(je(je({},r),{symbol:n})):(jR(o,s),AP(o).styles(r)):(o.remove(),AP(s).attr("className",r_.marker.name).styles(r),i.appendChild(s)):(s instanceof OR||AP(s).attr("className",r_.marker.name).styles(r),i.appendChild(s)),e.markerGroup.node().scale(1/e.markerGroup.node().getScale()[0]);var a=tR(e.markerGroup.node(),e.scaleSize,!0);e.markerGroup.node().style._transform="scale(".concat(a,")")}))},e.prototype.renderLabel=function(t){var e=xP(this.attributes,"label"),n=e.text,r=Fe(e,["text"]);this.labelGroup=t.maybeAppendByClassName(r_.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(r_.label,(function(){return FR(n)})).styles(r)},e.prototype.renderValue=function(t){var e=this,n=xP(this.attributes,"value"),r=n.text,i=Fe(n,["text"]);this.valueGroup=t.maybeAppendByClassName(r_.valueGroup,"g").style("zIndex",0),LP(this.showValue,this.valueGroup,(function(){e.valueGroup.maybeAppendByClassName(r_.value,(function(){return FR(r)})).styles(i)}))},e.prototype.createPoptip=function(){var t=this.attributes.poptip,e=t||{},n=(e.render,Fe(e,["render"])),r=new n_({style:cP(i_,n)});return this.poptipGroup=r,r},e.prototype.bindPoptip=function(t){var e=this,n=this.attributes.poptip;if(n){var r=this.poptipGroup||this.createPoptip();r.bind(t,(function(){var t=e.attributes,r=t.labelText,i=t.valueText,o=t.markerFill,s="string"===typeof r?r:null===r||void 0===r?void 0:r.attr("text"),a="string"===typeof i?i:null===i||void 0===i?void 0:i.attr("text");if("function"===typeof n.render)return{html:n.render({label:s,value:a,color:o})};var c="";return"string"!==typeof s&&"number"!==typeof s||(c+='<div class="component-poptip-label">'.concat(s,"</div>")),"string"!==typeof a&&"number"!==typeof a||(c+='<div class="component-poptip-value">'.concat(a,"</div>")),{html:c}}))}},e.prototype.renderPoptip=function(t){var e=this,n=this.attributes.poptip;if(n){var r=t.maybeAppendByClassName(r_.value,"g").node(),i=t.maybeAppendByClassName(r_.label,"g").node();[r,i].forEach((function(t){t&&e.bindPoptip(t)}))}},e.prototype.renderBackground=function(t){var e=this.shape,n=e.width,r=e.height,i=xP(this.attributes,"background");this.background=t.maybeAppendByClassName(r_.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(r_.background,"rect").styles(je({width:n,height:r},i))},e.prototype.adjustLayout=function(){var t=this.layout,e=t.labelWidth,n=t.valueWidth,r=t.height,i=Ge(t.position,3),o=i[0],s=i[1],a=i[2],c=r/2;this.markerGroup.styles({transform:"translate(".concat(o,", ").concat(c,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(s,", ").concat(c,")")}),UR(this.labelGroup.select(r_.label.class).node(),Math.ceil(e)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(a,", ").concat(c,")")}),UR(this.valueGroup.select(r_.value.class).node(),Math.ceil(n)))},e.prototype.render=function(t,e){var n=AP(e),r=t.x,i=void 0===r?0:r,o=t.y,s=void 0===o?0:o;n.styles({transform:"translate(".concat(i,", ").concat(s,")")}),this.renderMarker(n),this.renderLabel(n),this.renderValue(n),this.renderBackground(n),this.renderPoptip(n),this.adjustLayout()},e}(fP),a_=RP({page:"item-page",navigator:"navigator",item:"item"},"items"),c_=function(t,e,n){return void 0===n&&(n=!0),t?e(t):n},l_=function(t){function e(e){var n=t.call(this,e,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:GP,mouseenter:GP,mouseleave:GP})||this;return n.navigatorShape=[0,0],n}return Ie(e,t),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var t=this.attributes,e=t.gridRow,n=t.gridCol,r=t.data;if(!e&&!n)throw new Error("gridRow and gridCol can not be set null at the same time");return e&&n?[e,n]:e?[e,r.length]:[r.length,n]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var t=this.attributes,e=t.data,n=t.layout,r=t.poptip,i=xP(this.attributes,"item"),o=e.map((function(t,o){var s=t.id,a=void 0===s?o:s,c=t.label,l=t.value;return{id:"".concat(a),index:o,style:je({layout:n,labelText:c,valueText:l,poptip:r},Object.fromEntries(Object.entries(i).map((function(n){var r=Ge(n,2),i=r[0],s=r[1];return[i,VP(s,[t,o,e])]}))))}}));return o},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var t=this,e=this.attributes,n=e.orientation,r=e.width,i=e.rowPadding,o=e.colPadding,s=Ge(this.navigatorShape,1),a=s[0],c=Ge(this.grid,2),l=c[0],u=c[1],h=u*l,d=0;return this.pageViews.children.map((function(e,s){var c,f,p=Math.floor(s/h),g=s%h,v=t.ifHorizontal(u,l),y=[Math.floor(g/v),g%v];"vertical"===n&&y.reverse();var m=Ge(y,2),b=m[0],x=m[1],w=(r-a-(u-1)*o)/u,E=e.getBBox().height,k=Ge([0,0],2),S=k[0],M=k[1];return"horizontal"===n?(c=Ge([d,b*(E+i)],2),S=c[0],M=c[1],d=x===u-1?0:d+w+o):(f=Ge([x*(w+o),d],2),S=f[0],M=f[1],d=b===l-1?0:d+E+i),{page:p,index:s,row:b,col:x,pageIndex:g,width:w,height:E,x:S,y:M}}))},e.prototype.getFlexLayout=function(){var t=this.attributes,e=t.width,n=t.height,r=t.rowPadding,i=t.colPadding,o=Ge(this.navigatorShape,1),s=o[0],a=Ge(this.grid,2),c=a[0],l=a[1],u=Ge([e-s,n],2),h=u[0],d=u[1],f=Ge([0,0,0,0,0,0,0,0],8),p=f[0],g=f[1],v=f[2],y=f[3],m=f[4],b=f[5],x=f[6],w=f[7];return this.pageViews.children.map((function(t,e){var n,o,s,a,u=t.getBBox(),f=u.width,E=u.height,k=0===x?0:i,S=x+k+f;if(S<=h&&c_(m,(function(t){return t<l})))return n=Ge([x+k,w,S],3),p=n[0],g=n[1],x=n[2],{width:f,height:E,x:p,y:g,page:v,index:e,pageIndex:y++,row:b,col:m++};o=Ge([b+1,0,0,w+E+r],4),b=o[0],m=o[1],x=o[2],w=o[3];var M=w+E;return M<=d&&c_(b,(function(t){return t<c}))?(s=Ge([x,w,f],3),p=s[0],g=s[1],x=s[2],{width:f,height:E,x:p,y:g,page:v,index:e,pageIndex:y++,row:b,col:m++}):(a=Ge([0,0,f,0,v+1,0,0,0],8),p=a[0],g=a[1],x=a[2],w=a[3],v=a[4],y=a[5],b=a[6],m=a[7],{width:f,height:E,x:p,y:g,page:v,index:e,pageIndex:y++,row:b,col:m++})}))},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var t="grid"===this.attributes.layout?this.getGridLayout:this.getFlexLayout,e=t.call(this);return e.slice(-1)[0].page>0?(this.navigatorShape=[55,0],t.call(this)):e},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(t,e){var n=this.attributes.orientation;return LR(n,t,e)},e.prototype.flattenPage=function(t){t.querySelectorAll(a_.item.class).forEach((function(e){t.appendChild(e)})),t.querySelectorAll(a_.page.class).forEach((function(e){var n=t.removeChild(e);n.destroy()}))},e.prototype.renderItems=function(t){var e=this.attributes,n=e.click,r=e.mouseenter,i=e.mouseleave;this.flattenPage(t);var o=this.dispatchCustomEvent.bind(this);AP(t).selectAll(a_.item.class).data(this.renderData,(function(t){return t.id})).join((function(t){return t.append((function(t){var e=t.style;return new s_({style:e})})).attr("className",a_.item.name).on("click",(function(){null===n||void 0===n||n(this),o("itemClick",{item:this})})).on("pointerenter",(function(){null===r||void 0===r||r(this),o("itemMouseenter",{item:this})})).on("pointerleave",(function(){null===i||void 0===i||i(this),o("itemMouseleave",{item:this})}))}),(function(t){return t.each((function(t){var e=t.style;this.update(e)}))}),(function(t){return t.remove()}))},e.prototype.relayoutNavigator=function(){var t,e=this.attributes,n=e.layout,r=e.width,i=(null===(t=this.pageViews.children[0])||void 0===t?void 0:t.getBBox().height)||0,o=Ge(this.navigatorShape,2),s=o[0],a=o[1];this.navigator.update("grid"===n?{pageWidth:r-s,pageHeight:i-a}:{})},e.prototype.adjustLayout=function(){var t=this,e=Object.entries(WP(this.itemsLayout,"page")).map((function(t){var e=Ge(t,2),n=e[0],r=e[1];return{page:n,layouts:r}})),n=We([],Ge(this.navigator.getContainer().children),!1);e.forEach((function(e){var r=e.layouts,i=t.pageViews.appendChild(new Du({className:a_.page.name}));r.forEach((function(t){var e=t.x,r=t.y,o=t.index,s=t.width,a=t.height,c=n[o];i.appendChild(c),Lv(c,"__layout__",t),c.update({x:e,y:r,width:s,height:a})}))})),this.relayoutNavigator()},e.prototype.renderNavigator=function(t){var e=this.attributes.orientation,n=xP(this.attributes,"nav"),r=cP({orientation:e},n),i=this;return t.selectAll(a_.navigator.class).data(["nav"]).join((function(t){return t.append((function(){return new kR({style:r})})).attr("className",a_.navigator.name).each((function(){i.navigator=this}))}),(function(t){return t.each((function(){this.update(r)}))}),(function(t){return t.remove()})),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(t,e){var n=this.attributes.data;if(n&&0!==n.length){var r=this.renderNavigator(AP(e));this.renderItems(r.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(t,e){var n=new kl(t,{detail:e});this.dispatchEvent(n)},e}(fP),u_=RP({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),h_={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},d_=(function(t){function e(e){return t.call(this,e,h_)||this}Ie(e,t),e.prototype.render=function(t,e){var n=AP(e).maybeAppendByClassName(u_.markerGroup,"g");this.renderMarker(n);var r=AP(e).maybeAppendByClassName(u_.labelGroup,"g");this.renderLabel(r)},e.prototype.renderMarker=function(t){var e=this,n=this.attributes,r=n.orientation,i=n.markerSymbol,o=void 0===i?LR(r,"horizontalHandle","verticalHandle"):i;LP(!!o,t,(function(t){var n=xP(e.attributes,"marker"),r=je({symbol:o},n);e.marker=t.maybeAppendByClassName(u_.marker,(function(){return new OR({style:r})})).update(r)}))},e.prototype.renderLabel=function(t){var e=this,n=this.attributes,r=n.showLabel,i=n.orientation,o=n.spacing,s=void 0===o?0:o,a=n.formatter;LP(r,t,(function(t){var n,r=xP(e.attributes,"label"),o=r.text,c=Fe(r,["text"]),l=(null===(n=t.select(u_.marker.class))||void 0===n?void 0:n.node().getBBox())||{},u=l.width,h=void 0===u?0:u,d=l.height,f=void 0===d?0:d,p=Ge(LR(i,[0,f+s,"center","top"],[h+s,0,"start","middle"]),4),g=p[0],v=p[1],y=p[2],m=p[3];t.maybeAppendByClassName(u_.label,"text").styles(je(je({},c),{x:g,y:v,text:a(o).toString(),textAlign:y,textBaseline:m}))}))}}(fP),{showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12}),f_=cP({},d_,{}),p_=(cP({},d_,wP(h_,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),RP({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend")),g_=function(t){function e(e){return t.call(this,e,f_)||this}return Ie(e,t),e.prototype.renderTitle=function(t,e,n){var r=this.attributes,i=r.showTitle,o=r.titleText,s=xP(this.attributes,"title"),a=Ge(EP(s),2),c=a[0],l=a[1];this.titleGroup=t.maybeAppendByClassName(p_.titleGroup,"g").styles(l);var u=je(je({width:e,height:n},c),{text:i?o:""});this.title=this.titleGroup.maybeAppendByClassName(p_.title,(function(){return new zP({style:u})})).update(u)},e.prototype.renderItems=function(t,e){var n=e.x,r=e.y,i=e.width,o=e.height,s=xP(this.attributes,"title",!0),a=Ge(EP(s),2),c=a[0],l=a[1],u=je(je({},c),{width:i,height:o,x:0,y:0});this.itemsGroup=t.maybeAppendByClassName(p_.itemsGroup,"g").styles(je(je({},l),{transform:"translate(".concat(n,", ").concat(r,")")}));var h=this;this.itemsGroup.selectAll(p_.items.class).data(["items"]).join((function(t){return t.append((function(){return new l_({style:u})})).attr("className",p_.items.name).each((function(){h.items=AP(this)}))}),(function(t){return t.update(u)}),(function(t){return t.remove()}))},e.prototype.adjustLayout=function(){var t=this.attributes.showTitle;if(t){var e=this.title.node().getAvailableSpace(),n=e.x,r=e.y;this.itemsGroup.node().style.transform="translate(".concat(n,", ").concat(r,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.showTitle,n=t.width,r=t.height;return e?this.title.node().getAvailableSpace():new PP(0,0,n,r)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var e,n,r=null===(e=this.title)||void 0===e?void 0:e.node(),i=null===(n=this.items)||void 0===n?void 0:n.node();return r&&i?jP(r,i):t.prototype.getBBox.call(this)},e.prototype.render=function(t,e){var n=this.attributes,r=n.width,i=n.height,o=n.x,s=void 0===o?0:o,a=n.y,c=void 0===a?0:a,l=AP(e);e.style.transform="translate(".concat(s,", ").concat(c,")"),this.renderTitle(l,r,i),this.renderItems(l,this.availableSpace),this.adjustLayout()},e}(fP);function v_(t){const{width:e,height:n,renderer:r}=t,i=y_(t),o=new dh({width:e,height:n,container:i,renderer:r||new fb});return[i,o]}function y_(t){var e;const{container:n,className:r,graphCanvas:i}=t;if(n)return"string"===typeof n?document.getElementById(n):n;const o=kT(r,!1),{width:s,height:a,containerStyle:c}=t,[l,u]=m_(t);return Object.assign(o.style,Object.assign({position:"absolute",left:l+"px",top:u+"px",width:s+"px",height:a+"px"},c)),null===(e=i.getContainer())||void 0===e||e.appendChild(o),o}function m_(t){const{width:e,height:n,placement:r,graphCanvas:i}=t,[o,s]=i.getSize(),[a,c]=Yg(r);return[a*(o-e),c*(s-n)]}var b_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class x_ extends ET{constructor(t,e){super(t,Object.assign({},x_.defaultOptions,e)),this.typePrefix="__data__",this.draw=!1,this.fieldMap={node:new Map,edge:new Map,combo:new Map},this.selectedItems=[],this.bindEvents=()=>{const{graph:t}=this.context;t.on(of.AFTER_DRAW,this.createElement)},this.changeState=(t,e)=>{const{graph:n}=this.context,{typePrefix:r}=this,i=_v(t,[r,"id"]),o=_v(t,[r,"style","labelText"]),[s]=i.split("__"),a=this.fieldMap[s].get(o)||[];n.setElementState(Object.fromEntries(null===a||void 0===a?void 0:a.map((t=>[t,e]))))},this.click=t=>{if("hover"===this.options.trigger)return;const e=_v(t,[this.typePrefix,"id"]);this.selectedItems.includes(e)?(this.selectedItems=this.selectedItems.filter((t=>t!==e)),this.changeState(t,[])):(this.selectedItems.push(e),this.changeState(t,"selected"))},this.mouseleave=t=>{"click"!==this.options.trigger&&(this.selectedItems=[],this.changeState(t,[]))},this.mouseenter=t=>{if("click"===this.options.trigger)return;const e=_v(t,[this.typePrefix,"id"]);this.selectedItems.includes(e)?this.selectedItems=this.selectedItems.filter((t=>t!==e)):(this.selectedItems.push(e),this.changeState(t,"active"))},this.setFieldMap=(t,e,n)=>{if(!t)return;const r=this.fieldMap[n];if(r)if(r.has(t)){const n=r.get(t);n&&(n.push(e),r.set(t,n))}else r.set(t,[e])},this.getEvents=()=>({mouseenter:this.mouseenter,mouseleave:this.mouseleave,click:this.click}),this.getMarkerData=(t,e)=>{if(!t)return[];const{model:n,element:r}=this.context,{nodes:i,edges:o,combos:s}=n.getData(),a={},c=e=>nr(t)?t(e):t,l={node:"circle",edge:"line",combo:"rect"},u={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},h=(t,e)=>{const n=null===r||void 0===r?void 0:r.getElementComputedStyle(t,e);return n},d=(t,e)=>{t.forEach((t=>{const{id:n}=t,i=_v(t,["data",c(t)]),o=(null===r||void 0===r?void 0:r.getElementType(e,t))||"circle",s=h(e,t),d=("edge"===e?null===s||void 0===s?void 0:s.stroke:null===s||void 0===s?void 0:s.fill)||"#1783ff";n&&i&&i.replace(/\s+/g,"")&&(this.setFieldMap(i,n,e),a[i]||(a[i]={id:`${e}__${n}`,label:i,marker:u[o]||l[e],elementType:e,lineWidth:1,stroke:d,fill:d}))}))};switch(e){case"node":d(i,"node");break;case"edge":d(o,"edge");break;case"combo":d(s,"combo");break;default:return[]}return Object.values(a)},this.createElement=()=>{if(this.draw)return void this.updateElement();const t=this.options,{width:e,height:n,nodeField:r,edgeField:i,comboField:o,trigger:s,position:a,container:c,containerStyle:l,className:u}=t,h=b_(t,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"]),d=this.getMarkerData(r,"node"),f=this.getMarkerData(i,"edge"),p=this.getMarkerData(o,"combo"),g=[...d,...p,...f],v=Object.assign({width:e,height:n,data:g,itemMarkerLineWidth:({lineWidth:t})=>t,itemMarker:({marker:t})=>t,itemMarkerStroke:({stroke:t})=>t,itemMarkerFill:({fill:t})=>t,gridCol:d.length},h,this.getEvents()),y=new g_({className:"legend",style:v});this.category=y;const m=this.upsertCanvas();m.appendChild(y),this.draw=!0},this.bindEvents()}update(t){super.update(t),this.clear(),this.createElement()}clear(){var t,e;null===(t=this.canvas)||void 0===t||t.destroy(),null===(e=this.container)||void 0===e||e.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}updateElement(){this.category&&this.category.update({itemMarkerOpacity:({id:t})=>!this.selectedItems.length||this.selectedItems.includes(t)?1:.5,itemLabelOpacity:({id:t})=>!this.selectedItems.length||this.selectedItems.includes(t)?1:.5})}upsertCanvas(){if(this.canvas)return this.canvas;const t=this.context.canvas,[e,n]=t.getSize(),{width:r=e,height:i=n,position:o,container:s,containerStyle:a,className:c}=this.options,[l,u]=v_({width:r,height:i,graphCanvas:t,container:s,containerStyle:a,placement:o,className:"legend"});return this.container=l,c&&l.classList.add(c),this.canvas=u,this.canvas}destroy(){this.clear(),this.context.graph.off(of.AFTER_DRAW,this.createElement),super.destroy()}}x_.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};class w_ extends ET{constructor(t,e){super(t,Object.assign({},w_.defaultOptions,e)),this.onDraw=t=>{var e;(null===(e=null===t||void 0===t?void 0:t.data)||void 0===e?void 0:e.render)||this.onRender()},this.shapes=new Map,this.landmarkMap=new Map,this.mask=null,this.isMaskDragging=!1,this.onMaskDragStart=t=>{this.mask&&(this.isMaskDragging=!0,this.mask.setPointerCapture(t.pointerId),this.mask.addEventListener("pointermove",this.onMaskDrag),this.mask.addEventListener("pointerup",this.onMaskDragEnd),this.mask.addEventListener("pointercancel",this.onMaskDragEnd))},this.onMaskDrag=t=>{if(!this.mask||!this.isMaskDragging)return;const{size:[e,n]}=this.options,{movementX:r,movementY:i}=t,{left:o,top:s,width:a,height:c}=this.mask.style,[,,l,u]=this.maskBBox;let h=parseInt(o)+r,d=parseInt(s)+i,f=parseInt(a),p=parseInt(c);h<0&&(h=0),d<0&&(d=0),h+f>e&&(h=k_(e-f,0)),d+p>n&&(d=k_(n-p,0)),f<l&&(r>0?(h=k_(h-r,0),f=E_(f+r,e)):r<0&&(f=E_(f-r,e))),p<u&&(i>0?(d=k_(d-i,0),p=E_(p+i,n)):i<0&&(p=E_(p-i,n))),Object.assign(this.mask.style,{left:h+"px",top:d+"px",width:f+"px",height:p+"px"});const g=parseInt(o)-h,v=parseInt(s)-d;if(0===g&&0===v)return;const y=this.context.canvas.getCamera().getZoom(),m=this.canvas.getCamera().getZoom(),b=y/m;this.context.graph.translateBy([g*b,v*b],!1)},this.onMaskDragEnd=t=>{this.mask&&(this.isMaskDragging=!1,this.mask.releasePointerCapture(t.pointerId),this.mask.removeEventListener("pointermove",this.onMaskDrag),this.mask.removeEventListener("pointerup",this.onMaskDragEnd),this.mask.removeEventListener("pointercancel",this.onMaskDragEnd))},this.onTransform=Ff((()=>{this.isMaskDragging||(this.updateMask(),this.setCamera())}),32,{leading:!0}),this.setOnRender(),this.bindEvents()}update(t){this.unbindEvents(),super.update(t),"delay"in t&&this.setOnRender(),this.bindEvents()}setOnRender(){this.onRender=Mw((()=>{this.renderMinimap(),this.renderMask()}),this.options.delay)}bindEvents(){const{graph:t}=this.context;t.on(of.AFTER_DRAW,this.onDraw),t.on(of.AFTER_RENDER,this.onRender),t.on(of.AFTER_ANIMATE,this.onRender),t.on(of.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:t}=this.context;t.off(of.AFTER_DRAW,this.onDraw),t.off(of.AFTER_RENDER,this.onRender),t.off(of.AFTER_ANIMATE,this.onRender),t.off(of.AFTER_TRANSFORM,this.onTransform)}renderMinimap(){const t=this.getElements(),e=this.initCanvas();this.setShapes(e,t)}getElements(){const{filter:t}=this.options,{model:e,element:n}=this.context,r=e.getData(),i={nodes:r.nodes.filter((t=>null===n||void 0===n?void 0:n.getElement(rg(t)))),edges:r.edges.filter((t=>{const e=null===n||void 0===n?void 0:n.getElement(rg(t));return e&&uw(e)})),combos:r.combos.filter((t=>null===n||void 0===n?void 0:n.getElement(rg(t))))};if(!t)return i;const{nodes:o,edges:s,combos:a}=i;return{nodes:o.filter((e=>t(rg(e),"node"))),edges:s.filter((e=>t(rg(e),"edge"))),combos:a.filter((e=>t(rg(e),"combo")))}}setShapes(t,e){const{nodes:n,edges:r,combos:i}=e,{shape:o}=this.options,{element:s}=this.context;if("key"===o){const e=new Set,o=n=>{const r=rg(n);e.add(r);const i=s.getElement(r);if(!i)return;const o=i.getShape("key"),a=this.shapes.get(r)||o.cloneNode();a.setPosition(o.getPosition()),i.style.zIndex&&(a.style.zIndex=i.style.zIndex),a.id=i.id,this.shapes.has(r)?Object.entries(o.attributes).forEach((([t,e])=>{a.style[t]!==e&&(a.style[t]=e)})):(t.appendChild(a),this.shapes.set(r,a))};return r.forEach(o),i.forEach(o),n.forEach(o),void this.shapes.forEach(((n,r)=>{e.has(r)||(t.removeChild(n),this.shapes.delete(r))}))}const a=(t,e)=>{const n=s.getElement(t),r=n.getPosition();return e.setPosition(r),e};t.removeChildren(),r.forEach((e=>t.appendChild(o(rg(e),"edge")))),i.forEach((e=>{t.appendChild(a(rg(e),o(rg(e),"combo")))})),n.forEach((e=>{t.appendChild(a(rg(e),o(rg(e),"node")))}))}initCanvas(){const{renderer:t,size:[e,n]}=this.options;if(this.canvas){const{width:r,height:i}=this.canvas.getConfig();e===r&&n===i||this.canvas.resize(e,n),t&&this.canvas.setRenderer(t)}else{const{className:r,position:i,container:o,containerStyle:s}=this.options,[a,c]=v_({renderer:t,width:e,height:n,placement:i,className:"minimap",container:o,containerStyle:s,graphCanvas:this.context.canvas});r&&a.classList.add(r),this.container=a,this.canvas=c}return this.setCamera(),this.canvas}createLandmark(t,e,n){const r=`${t.join(",")}-${e.join(",")}-${n}`;if(this.landmarkMap.has(r))return this.landmarkMap.get(r);const i=this.canvas.getCamera(),o=i.createLandmark(r,{position:t,focalPoint:e,zoom:n});return this.landmarkMap.set(r,o),o}setCamera(){var t;const{canvas:e}=this.context,n=null===(t=this.canvas)||void 0===t?void 0:t.getCamera();if(!n)return;const{size:[r,i],padding:o}=this.options,[s,a,c,l]=Hf(o),{min:u,max:h,center:d}=e.getBounds("elements"),f=h[0]-u[0],p=h[1]-u[1],g=r-l-a,v=i-s-c,y=g/f,m=v/p,b=Math.min(y,m),x=this.createLandmark(d,d,b);n.gotoLandmark(x,0)}get maskBBox(){const{canvas:t}=this.context,e=t.getSize(),n=t.getCanvasByViewport([0,0]),r=t.getCanvasByViewport(e),i=this.canvas.canvas2Viewport(Qg(n)),o=this.canvas.canvas2Viewport(Qg(r)),s=o.x-i.x,a=o.y-i.y;return[i.x,i.y,s,a]}calculateMaskBBox(){const{size:[t,e]}=this.options;let[n,r,i,o]=this.maskBBox;return n<0&&(i=E_(i+n,t),n=0),r<0&&(o=E_(o+r,e),r=0),n+i>t&&(i=k_(t-n,0)),r+o>e&&(o=k_(e-r,0)),[E_(n,t),E_(r,e),k_(i,0),k_(o,0)]}renderMask(){const{maskStyle:t}=this.options;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart),this.mask.draggable=!0,this.mask.addEventListener("dragstart",(t=>t.preventDefault&&t.preventDefault()))),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},t),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask()}updateMask(){if(!this.mask)return;const[t,e,n,r]=this.calculateMaskBBox();Object.assign(this.mask.style,{top:e+"px",left:t+"px",width:n+"px",height:r+"px"})}destroy(){var t,e,n;this.unbindEvents(),null===(t=this.canvas)||void 0===t||t.destroy(),null===(e=this.mask)||void 0===e||e.remove(),null===(n=this.container)||void 0===n||n.remove(),super.destroy()}}w_.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};const E_=(t,e)=>Math.min(t,e),k_=(t,e)=>Math.max(t,e);var S_=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};const M_={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"};class O_ extends ET{constructor(t,e){super(t,Object.assign({},O_.defaultOptions,e)),this.initSnapline=()=>{const t=this.context.canvas.getLayer("transient");this.horizontalLine||(this.horizontalLine=t.appendChild(new zu({style:Object.assign(Object.assign({},M_),this.options.horizontalLineStyle)}))),this.verticalLine||(this.verticalLine=t.appendChild(new zu({style:Object.assign(Object.assign({},M_),this.options.verticalLineStyle)})))},this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!0,this.autoSnapToLine=(t,e,n)=>S_(this,void 0,void 0,(function*(){const{verticalX:r,horizontalY:i}=n,{tolerance:o}=this.options,{min:[s,a],max:[c,l],center:[u,h]}=e;let d=0,f=0;null!==r&&(N_(c,r)<o&&(d=r-c),N_(s,r)<o&&(d=r-s),N_(u,r)<o&&(d=r-u),0!==d&&(this.isVerticalSticking=!0)),null!==i&&(N_(l,i)<o&&(f=i-l),N_(a,i)<o&&(f=i-a),N_(h,i)<o&&(f=i-h),0!==f&&(this.isHorizontalSticking=!0)),0===d&&0===f||(yield this.context.graph.translateElementBy({[t]:[d,f]},!1))})),this.enableSnap=t=>{const{target:e}=t,n=.5;if(this.isHorizontalSticking||this.isVerticalSticking){const[r,i]=this.getDelta(t);if(this.isHorizontalSticking&&this.isVerticalSticking&&Math.abs(r)<=n&&Math.abs(i)<=n)return this.context.graph.translateElementBy({[e.id]:[-r,-i]},!1),!1;if(this.isHorizontalSticking&&Math.abs(i)<=n)return this.context.graph.translateElementBy({[e.id]:[0,-i]},!1),!1;if(this.isVerticalSticking&&Math.abs(r)<=n)return this.context.graph.translateElementBy({[e.id]:[-r,0]},!1),!1;this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!1,setTimeout((()=>{this.enableStick=!0}),200)}return this.enableStick},this.calcSnaplineMetadata=(t,e)=>{const{tolerance:n,shape:r}=this.options,{min:[i,o],max:[s,a],center:[c,l]}=e;let u=null,h=null,d=null,f=null,p=null,g=null;return this.getNodes().some((e=>{if(qd(t.id,e.id))return!1;const v=T_(e,r).getRenderBounds(),{min:[y,m],max:[b,x],center:[w,E]}=v;return null===u&&(N_(w,c)<n?u=w:N_(y,i)<n||N_(y,s)<n?u=y:(N_(b,s)<n||N_(b,i)<n)&&(u=b),null!==u&&(h=Math.min(m,o),d=Math.max(x,a))),null===f&&(N_(E,l)<n?f=E:N_(m,o)<n||N_(m,a)<n?f=m:(N_(x,a)<n||N_(x,o)<n)&&(f=x),null!==f&&(p=Math.min(y,i),g=Math.max(b,s))),null!==u&&null!==f})),{verticalX:u,verticalMinY:h,verticalMaxY:d,horizontalY:f,horizontalMinX:p,horizontalMaxX:g}},this.onDragStart=()=>{this.initSnapline()},this.onDrag=t=>S_(this,void 0,void 0,(function*(){const{target:e}=t;if(this.options.autoSnap){const e=this.enableSnap(t);if(!e)return}const n=T_(e,this.options.shape).getRenderBounds(),r=this.calcSnaplineMetadata(e,n);this.hideSnapline(),null===r.verticalX&&null===r.horizontalY||this.updateSnapline(r),this.options.autoSnap&&(yield this.autoSnapToLine(e.id,n,r))})),this.onDragEnd=()=>{this.hideSnapline()},this.bindEvents()}getNodes(){var t;const{filter:e}=this.options,n=(null===(t=this.context.element)||void 0===t?void 0:t.getNodes())||[],r=n.filter((t=>{var e;return uw(t)&&(null===(e=this.context.viewport)||void 0===e?void 0:e.isInViewport(t.getRenderBounds()))}));return e?r.filter((t=>e(t))):r}hideSnapline(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden"}getLineWidth(t){const{lineWidth:e}=this.options[`${t}LineStyle`];return+(e||M_.lineWidth||1)/this.context.graph.getZoom()}updateSnapline(t){const{verticalX:e,verticalMinY:n,verticalMaxY:r,horizontalY:i,horizontalMinX:o,horizontalMaxX:s}=t,[a,c]=this.context.canvas.getSize(),{offset:l}=this.options;null!==i?Object.assign(this.horizontalLine.style,{x1:l===1/0?0:o-l,y1:i,x2:l===1/0?a:s+l,y2:i,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",null!==e?Object.assign(this.verticalLine.style,{x1:e,y1:l===1/0?0:n-l,x2:e,y2:l===1/0?c:r+l,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden"}getDelta(t){const e=this.context.graph.getZoom();return Rg([t.dx,t.dy],e)}bindEvents(){return S_(this,void 0,void 0,(function*(){const{graph:t}=this.context;t.on(af.DRAG_START,this.onDragStart),t.on(af.DRAG,this.onDrag),t.on(af.DRAG_END,this.onDragEnd)}))}unbindEvents(){const{graph:t}=this.context;t.off(af.DRAG_START,this.onDragStart),t.off(af.DRAG,this.onDrag),t.off(af.DRAG_END,this.onDragEnd)}destroyElements(){var t,e;null===(t=this.horizontalLine)||void 0===t||t.destroy(),null===(e=this.verticalLine)||void 0===e||e.destroy()}destroy(){this.destroyElements(),this.unbindEvents(),super.destroy()}}O_.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:()=>!0};const N_=(t,e)=>Math.abs(t-e),T_=(t,e)=>"function"===typeof e?e(t):t.getShape(e);function A_(t,e){var n={YYYY:t.getFullYear(),MM:t.getMonth()+1,DD:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()},r=e;return Object.keys(n).forEach((function(t){var e=n[t];r=r.replace(t,"YYYY"===t?"".concat(e):"".concat(e).padStart(2,"0"))})),r}function C_(t,e){if(t.length<=e)return t;for(var n=Math.floor(t.length/e),r=[],i=0;i<t.length;i+=n)r.push(t[i]);return r}var P_={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new Vu({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},R_=(Ng({},P_,{style:{type:"arc"}}),Ng({},P_,{style:{}}),RP({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"));function __(t,e){return[t[0]*e,t[1]*e]}function L_(t,e){return[t[0]+e[0],t[1]+e[1]]}function D_(t,e){return[t[0]-e[0],t[1]-e[1]]}function I_(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}function j_(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}function F_(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function B_(t){if(0===t[0]&&0===t[1])return[0,0];var e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/e,t[1]/e]}function z_(t,e){return e?[t[1],-t[0]]:[-t[1],t[0]]}function G_(t){return t*Math.PI/180}function V_(t){return Number((180*t/Math.PI).toPrecision(5))}function W_(t,e){return t.style.opacity||(t.style.opacity=1),JP(t,{opacity:0},e)}var U_=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function H_(t){return U_.includes(t)}function $_(t){var e={};for(var n in t)H_(n)&&(e[n]=t[n]);return e}var Y_=RP({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function q_(t){return t.reduce((function(t,e,n){return t.push(We([0===n?"M":"L"],Ge(e),!1)),t}),[])}function X_(t,e,n){var r=e.connect,i=void 0===r?"line":r,o=e.center;if("line"===i)return q_(t);if(!o)return[];var s=F_(t[0],o),a=n?0:1;return t.reduce((function(t,e,n){return 0===n?t.push(We(["M"],Ge(e),!1)):t.push(We(["A",s,s,0,0,a],Ge(e),!1)),t}),[])}function K_(t,e,n){return"surround"===e.type?X_(t,e,n):q_(t)}function Z_(t,e,n){var r=n.type,i=n.connect,o=n.center,s=n.closed,a=s?[["Z"]]:[],c=Ge([K_(t,n),K_(e.slice().reverse(),n,!0)],2),l=c[0],u=c[1],h=Ge([t[0],e.slice(-1)[0]],2),d=h[0],f=h[1],p=function(t,e){return[l,t,u,e,a].flat()};if("line"===i||"surround"===r)return p([We(["L"],Ge(f),!1)],[We(["L"],Ge(d),!1)]);if(!o)throw new Error("Arc grid need to specified center");var g=Ge([F_(f,o),F_(d,o)],2),v=g[0],y=g[1];return p([We(["A",v,v,0,0,1],Ge(f),!1),We(["L"],Ge(f),!1)],[We(["A",y,y,0,0,0],Ge(d),!1),We(["L"],Ge(d),!1)])}function J_(t,e,n,r){var i=n.animate,o=n.isBillboard,s=e.map((function(t,e){return{id:t.id||"grid-line-".concat(e),d:K_(t.points,n)}}));return t.selectAll(Y_.line.class).data(s,(function(t){return t.id})).join((function(t){return t.append("path").each((function(t,e){var n=VP($_(je({d:t.d},r)),[t,e,s]);this.attr(je({class:Y_.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:o},n))}))}),(function(t){return t.transition((function(t,e){var n=VP($_(je({d:t.d},r)),[t,e,s]);return JP(this,n,i.update)}))}),(function(t){return t.transition((function(){var t=this,e=W_(this,i.exit);return $P(e,(function(){return t.remove()})),e}))})).transitions()}function Q_(t,e,n){var r=n.animate,i=n.connect,o=n.areaFill;if(e.length<2||!o||!i)return[];for(var s=Array.isArray(o)?o:[o,"transparent"],a=function(t){return s[t%s.length]},c=[],l=0;l<e.length-1;l++){var u=Ge([e[l].points,e[l+1].points],2),h=u[0],d=u[1],f=Z_(h,d,n);c.push({d:f,fill:a(l)})}return t.selectAll(Y_.region.class).data(c,(function(t,e){return e})).join((function(t){return t.append("path").each((function(t,e){var n=VP(t,[t,e,c]);this.attr(n)})).attr("className",Y_.region.name)}),(function(t){return t.transition((function(t,e){var n=VP(t,[t,e,c]);return JP(this,n,r.update)}))}),(function(t){return t.transition((function(){var t=this,e=W_(this,r.exit);return $P(e,(function(){return t.remove()})),e}))})).transitions()}function tL(t){var e=t.data,n=void 0===e?[]:e,r=t.closed;return r?n.map((function(t){var e=t.points,n=Ge(e,1),r=n[0];return je(je({},t),{points:We(We([],Ge(e),!1),[r],!1)})})):n}var eL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),e.prototype.render=function(t,e){t.type,t.center,t.areaFill,t.closed;var n=Fe(t,["type","center","areaFill","closed"]),r=tL(t),i=AP(e).maybeAppendByClassName(Y_.lineGroup,"g"),o=AP(e).maybeAppendByClassName(Y_.regionGroup,"g"),s=J_(i,r,t,n),a=Q_(o,r,t);return We(We([],Ge(s),!1),Ge(a),!1)},e}(fP),nL=function(t,e){return function(n){return t*(1-n)+e*n}};function rL(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0;return function(i){var o=new Array(r),s=new Array(n),a=0;for(a=0;a<r;++a)o[a]=oL(t[a],e[a]);for(;a<n;++a)s[a]=e[a];for(a=0;a<r;++a)s[a]=o[a](i);return s}}function iL(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n={},r={};return Object.entries(e).forEach((function(e){var i=Ge(e,2),o=i[0],s=i[1];o in t?n[o]=oL(t[o],s):r[o]=s})),function(t){return Object.entries(n).forEach((function(e){var n=Ge(e,2),i=n[0],o=n[1];return r[i]=o(t)})),r}}function oL(t,e){return"number"===typeof t&&"number"===typeof e?nL(t,e):Array.isArray(t)&&Array.isArray(e)?rL(t,e):"object"===typeof t&&"object"===typeof e?iL(t,e):function(e){return t}}function sL(t,e,n,r){if(!r)return t.attr("__keyframe_data__",n),null;var i=r.duration,o=void 0===i?0:i,s=oL(e,n),a=Math.ceil(+o/16),c=new Array(a).fill(0).map((function(t,e,n){return{__keyframe_data__:s(e/(n.length-1))}}));return t.animate(c,je({fill:"both"},r))}function aL(t,e){var n={},r=Array.isArray(e)?e:[e];for(var i in t)r.includes(i)||(n[i]=t[i]);return n}function cL(t,e){return Object.fromEntries(Object.entries(t).map((function(t){var n=Ge(t,2),r=n[0],i=n[1];return[r,VP(i,e)]})))}function lL(t,e){return e&&nr(e)?t.filter(e):t}function uL(t,e){var n=e.startAngle,r=e.endAngle;return(r-n)*t+n}function hL(t,e){if("linear"===e.type){var n=Ge(e.startPos,2),r=n[0],i=n[1],o=Ge(e.endPos,2),s=o[0],a=o[1],c=Ge([s-r,a-i],2),l=c[0],u=c[1];return B_([l,u])}var h=G_(uL(t,e));return[-Math.sin(h),Math.cos(h)]}function dL(t,e,n){var r=hL(t,n);return z_(r,"positive"!==e)}function fL(t,e){return dL(t,e.labelDirection,e)}function pL(t,e){var n=Ge(e.startPos,2),r=n[0],i=n[1],o=Ge(e.endPos,2),s=o[0],a=o[1],c=Ge([s-r,a-i],2),l=c[0],u=c[1];return[r+l*t,i+u*t]}function gL(t,e){var n=e.radius,r=Ge(e.center,2),i=r[0],o=r[1],s=G_(uL(t,e));return[i+n*Math.cos(s),o+n*Math.sin(s)]}function vL(t,e){return"linear"===e.type?pL(t,e):gL(t,e)}function yL(t){return 0===hL(0,t)[1]}function mL(t){return 0===hL(0,t)[0]}function bL(t,e){return e-t===360}function xL(t,e,n,r,i){var o=e-t,s=Ge([i,i],2),a=s[0],c=s[1],l=Ge([G_(t),G_(e)],2),u=l[0],h=l[1],d=function(t){return[n+i*Math.cos(t),r+i*Math.sin(t)]},f=Ge(d(u),2),p=f[0],g=f[1],v=Ge(d(h),2),y=v[0],m=v[1];if(bL(t,e)){var b=(h+u)/2,x=Ge(d(b),2),w=x[0],E=x[1];return[["M",p,g],["A",a,c,0,1,0,w,E],["A",a,c,0,1,0,y,m]]}var k=o>180?1:0,S=t>e?0:1,M=!1;return M?"M".concat(n,",").concat(r,",L").concat(p,",").concat(g,",A").concat(a,",").concat(c,",0,").concat(k,",").concat(S,",").concat(y,",").concat(m,",L").concat(n,",").concat(r):"M".concat(p,",").concat(g,",A").concat(a,",").concat(c,",0,").concat(k,",").concat(S,",").concat(y,",").concat(m)}function wL(t){var e=t.attributes,n=e.startAngle,r=e.endAngle,i=e.center,o=e.radius;return We(We([n,r],Ge(i),!1),[o],!1)}function EL(t,e,n,r){var i=e.startAngle,o=e.endAngle,s=e.center,a=e.radius;return t.selectAll(R_.line.class).data([{d:xL.apply(void 0,We(We([i,o],Ge(s),!1),[a],!1))}],(function(t,e){return e})).join((function(t){return t.append("path").attr("className",R_.line.name).styles(e).styles({d:function(t){return t.d}})}),(function(t){return t.transition((function(){var t=this,e=sL(this,wL(this),We(We([i,o],Ge(s),!1),[a],!1),r.update);if(e){var n=function(){var e=_v(t.attributes,"__keyframe_data__");t.style.d=xL.apply(void 0,We([],Ge(e),!1))};e.onframe=n,e.onfinish=n}return e})).styles(e)}),(function(t){return t.remove()})).styles(n).transitions()}function kL(t,e){e.truncRange,e.truncShape,e.lineExtension}function SL(t,e,n){void 0===n&&(n=[0,0]);var r=Ge([t,e,n],3),i=Ge(r[0],2),o=i[0],s=i[1],a=Ge(r[1],2),c=a[0],l=a[1],u=Ge(r[2],2),h=u[0],d=u[1],f=Ge([c-o,l-s],2),p=f[0],g=f[1],v=Math.sqrt(Math.pow(p,2)+Math.pow(g,2)),y=Ge([-h/v,d/v],2),m=y[0],b=y[1];return[m*p,m*g,b*p,b*g]}function ML(t){var e=Ge(t,2),n=Ge(e[0],2),r=n[0],i=n[1],o=Ge(e[1],2),s=o[0],a=o[1];return{x1:r,y1:i,x2:s,y2:a}}function OL(t,e,n,r){var i=e.showTrunc,o=e.startPos,s=e.endPos,a=e.truncRange,c=e.lineExtension,l=Ge([o,s],2),u=Ge(l[0],2),h=u[0],d=u[1],f=Ge(l[1],2),p=f[0],g=f[1],v=Ge(c?SL(o,s,c):new Array(4).fill(0),4),y=v[0],m=v[1],b=v[2],x=v[3],w=function(e){return t.selectAll(R_.line.class).data(e,(function(t,e){return e})).join((function(t){return t.append("line").attr("className",(function(t){return"".concat(R_.line.name," ").concat(t.className)})).styles(n).transition((function(t){return JP(this,ML(t.line),!1)}))}),(function(t){return t.styles(n).transition((function(t){var e=t.line;return JP(this,ML(e),r.update)}))}),(function(t){return t.remove()})).transitions()};if(!i||!a)return w([{line:[[h+y,d+m],[p+b,g+x]],className:R_.line.name}]);var E=Ge(a,2),k=E[0],S=E[1],M=p-h,O=g-d,N=Ge([h+M*k,d+O*k],2),T=N[0],A=N[1],C=Ge([h+M*S,d+O*S],2),P=C[0],R=C[1],_=w([{line:[[h+y,d+m],[T,A]],className:R_.lineFirst.name},{line:[[P,R],[p+b,g+x]],className:R_.lineSecond.name}]);return kL(t,e),_}function NL(t,e,n,r){var i,o=n.showArrow,s=n.showTrunc,a=n.lineArrow,c=n.lineArrowOffset,l=n.lineArrowSize;if(i="arc"===e?t.select(R_.line.class):s?t.select(R_.lineSecond.class):t.select(R_.line.class),!o||!a||"arc"===n.type&&bL(n.startAngle,n.endAngle)){var u=i.node();u&&(u.style.markerEnd=void 0)}else{var h=FR(a);h.attr(r),tR(h,l,!0),i.style("markerEnd",h).style("markerEndOffset",-c)}}function TL(t,e,n){var r,i=e.type,o=xP(e,"line");return r="linear"===i?OL(t,e,aL(o,"arrow"),n):EL(t,e,aL(o,"arrow"),n),NL(t,i,e,o),r}function AL(t,e){return dL(t,e.gridDirection,e)}function CL(t){var e=t.type,n=t.gridCenter;return"linear"===e?n:n||t.center}function PL(t,e){var n=e.gridLength;return t.map((function(t,r){var i=t.value,o=Ge(vL(i,e),2),s=o[0],a=o[1],c=Ge(__(AL(i,e),n),2),l=c[0],u=c[1];return{id:r,points:[[s,a],[s+l,a+u]]}}))}function RL(t,e){var n=e.gridControlAngles,r=CL(e);if(!r)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!n||0===n.length)throw new Error("Invalid gridControlAngles");var i=Ge(r,2),o=i[0],s=i[1];return t.map((function(t,r){var i=t.value,a=Ge(vL(i,e),2),c=a[0],l=a[1],u=Ge([c-o,l-s],2),h=u[0],d=u[1],f=[];return n.forEach((function(t){var e=G_(t),n=Ge([Math.cos(e),Math.sin(e)],2),r=n[0],i=n[1],a=h*r-d*i+o,c=h*i+d*r+s;f.push([a,c])})),{points:f,id:r}}))}function _L(t,e,n,r){var i=xP(n,"grid"),o=i.type,s=i.areaFill,a=CL(n),c=lL(e,n.gridFilter),l="segment"===o?PL(c,n):RL(c,n),u=je(je({},i),{center:a,areaFill:nr(s)?c.map((function(t,e){return VP(s,[t,e,c])})):s,animate:r,data:l});return t.selectAll(R_.grid.class).data([1]).join((function(t){return t.append((function(){return new eL({style:u})})).attr("className",R_.grid.name)}),(function(t){return t.transition((function(){return this.update(u)}))}),(function(t){return t.remove()})).transitions()}function LL(t,e,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=!1),!!(r&&t===e||i&&t===n)||t>e&&t<n}function DL(t,e,n,r){void 0===n&&(n=2),void 0===r&&(r="top"),WR(t,{wordWrap:!0,wordWrapWidth:e,maxLines:n,textBaseline:r})}function IL(t,e,n){var r=t.getBBox(),i=r.width,o=r.height,s=Ge([e,n].map((function(t,e){var n;return t.includes("%")?parseFloat((null===(n=t.match(/[+-]?([0-9]*[.])?[0-9]+/))||void 0===n?void 0:n[0])||"0")/100*(0===e?i:o):t})),2),a=s[0],c=s[1];return[a,c]}function jL(t,e){if(e)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=e.replace(n,(function(e,n,r){return"translate(".concat(IL(t,n,r),")")}));t.attr("transform",r)}catch(i){}}var FL=function(){function t(t,e,n,r){this.set(t,e,n,r)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(t,e,n){var r=this,i=r.x1,o=r.y1,s=r.x2,a=r.y2,c=Math.cos(t),l=Math.sin(t),u=e-e*c+n*l,h=n-e*l-n*c,d=[[c*i-l*a+u,l*i+c*a+h],[c*s-l*a+u,l*s+c*a+h],[c*i-l*o+u,l*i+c*o+h],[c*s-l*o+u,l*s+c*o+h]];return d},t.prototype.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},t.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},t}();function BL(t,e){var n=t.getEulerAngles()||0;t.setEulerAngles(0);var r=t.getBounds(),i=Ge(r.min,2),o=i[0],s=i[1],a=Ge(r.max,2),c=a[0],l=a[1],u=t.getBBox(),h=u.width,d=u.height,f=d,p=0,g=0,v=o,y=s,m=VR(t);if(m){f-=1.5;var b=m.style.textAlign,x=m.style.textBaseline;"center"===b?v=(o+c)/2:"right"!==b&&"end"!==b||(v=c),"middle"===x?y=(s+l)/2:"bottom"===x&&(y=l)}var w=Ge(_P(e),4),E=w[0],k=void 0===E?0:E,S=w[1],M=void 0===S?0:S,O=w[2],N=void 0===O?k:O,T=w[3],A=void 0===T?M:T,C=new FL((p+=o)-A,(g+=s)-k,p+h+M,g+f+N);return t.setEulerAngles(n),C.rotatedPoints(G_(n),v,y)}function zL(t,e){return e[0]<=Math.max(t[0][0],t[1][0])&&e[0]<=Math.min(t[0][0],t[1][0])&&e[1]<=Math.max(t[0][1],t[1][1])&&e[1]<=Math.min(t[0][1],t[1][1])}function GL(t,e,n){var r=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return 0===r?0:r<0?2:1}function VL(t,e){var n=GL(t[0],t[1],e[0]),r=GL(t[0],t[1],e[1]),i=GL(e[0],e[1],t[0]),o=GL(e[0],e[1],t[1]);return n!==r&&i!==o||(!(0!==n||!zL(t,e[0]))||(!(0!==r||!zL(t,e[1]))||(!(0!==i||!zL(e,t[0]))||!(0!==o||!zL(e,t[1])))))}function WL(t,e){var n=t.length;if(n<3)return!1;var r=[e,[9999,e[1]]],i=0,o=0;do{var s=[t[o],t[(o+1)%n]];if(VL(s,r)){if(0===GL(s[0],e,s[1]))return zL(s,e);i++}o=(o+1)%n}while(0!==o);return!!(1&i)}function UL(t,e){return e.every((function(e){return WL(t,e)}))}function HL(t,e,n){var r=t.x1,i=t.x2,o=t.y1,s=t.y2,a=[[r,o],[i,o],[i,s],[r,s]],c=BL(e,n);return UL(a,c)}function $L(t,e){var n=Ge(t,4),r=n[0],i=n[1],o=n[2],s=n[3],a=Ge(e,4),c=a[0],l=a[1],u=a[2],h=a[3],d=o-r,f=s-i,p=u-c,g=h-l,v=d*g-p*f;if(0===v)return!1;var y=v>0,m=r-c,b=i-l,x=d*b-f*m;if(x<0===y)return!1;var w=p*b-g*m;return w<0!==y&&(x>v!==y&&w>v!==y)}function YL(t,e){var n=[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]];return n.some((function(t){return $L(e,t)}))}function qL(t,e,n){var r,i,o=BL(t,n).flat(1),s=BL(e,n).flat(1),a=[[o[0],o[1],o[2],o[3]],[o[0],o[1],o[4],o[5]],[o[4],o[5],o[6],o[7]],[o[2],o[3],o[6],o[7]]];try{for(var c=ze(a),l=c.next();!l.done;l=c.next()){var u=l.value;if(YL(s,u))return!0}}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return!1}function XL(t,e){var n=t.type,r=t.labelDirection,i=t.crossSize;if(!i)return!1;if("arc"===n){var o=t.center,s=t.radius,a=Ge(o,2),c=a[0],l=a[1],u="negative"===r?0:i,h=-s-u,d=s+u,f=Ge(_P(e),4),p=f[0],g=f[1],v=f[2],y=f[3];return new FL(c+h-y,l+h-p,c+d+g,l+d+v)}var m=Ge(t.startPos,2),b=m[0],x=m[1],w=Ge(t.endPos,2),E=w[0],k=w[1],S=Ge(mL(t)?[-e,0,e,0]:[0,e,0,-e],4),M=S[0],O=S[1],N=S[2],T=S[3],A=fL(0,t),C=__(A,i),P=new FL(b,x,E,k);return P.x1+=T,P.y1+=M,P.x2+=O+C[0],P.y2+=N+C[1],P}function KL(t,e,n){var r,i,o=e.crossPadding,s=new Set,a=null,c=XL(e,o),l=function(t){return!c||HL(c,t)},u=function(t,e){return!t||!t.firstChild||!qL(t.firstChild,e.firstChild,_P(n))};try{for(var h=ze(t),d=h.next();!d.done;d=h.next()){var f=d.value;l(f)?!a||u(a,f)?a=f:(s.add(a),s.add(f)):s.add(f)}}catch(p){r={error:p}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return Array.from(s)}function ZL(t,e){return void 0===e&&(e={}),Pe(t)?0:"number"===typeof t?t:Math.floor(zR(t,e))}function JL(t,e,n,r){if(!(t.length<=0)){var i=e.suffix,o=void 0===i?"...":i,s=e.minLength,a=e.maxLength,c=void 0===a?1/0:a,l=e.step,u=void 0===l?" ":l,h=e.margin,d=void 0===h?[0,0,0,0]:h,f=GR(r.getTextShape(t[0])),p=ZL(u,f),g=s?ZL(s,f):p,v=ZL(c,f);(Pe(v)||v===1/0)&&(v=Math.max.apply(null,t.map((function(t){return t.getBBox().width}))));for(var y=t.slice(),m=Ge(d,4),b=(m[0],m[1],m[2],m[3],function(e){if(y.forEach((function(t){r.ellipsis(r.getTextShape(t),e,o)})),y=KL(t,n,d),y.length<1)return{value:void 0}}),x=v;x>g+p;x-=p){var w=b(x);if("object"===typeof w)return w.value}}}var QL=function(t){return void 0!==t&&null!=t&&!Number.isNaN(t)},tD={parity:function(t,e){var n=e.seq,r=void 0===n?2:n;return t.filter((function(t,e){return!(e%r)||(iP(t),!1)}))}},eD=function(t){return t.filter(QL)};function nD(t,e,n,r){var i=t.length,o=e.keepHeader,s=e.keepTail;if(!(i<=1||2===i&&o&&s)){var a,c,l=tD.parity,u=function(t){return t.forEach(r.show),t},h=2,d=t.slice(),f=t.slice(),p=Math.min.apply(Math,We([1],Ge(t.map((function(t){return t.getBBox().width}))),!1));if("linear"===n.type&&(yL(n)||mL(n))){var g=DR(t[0]).left,v=DR(t[i-1]).right,y=Math.abs(v-g)||1;h=Math.max(Math.floor(i*p/y),h)}o&&(a=d.splice(0,1)[0]),s&&(c=d.splice(-1,1)[0],d.reverse()),u(d);while(h<t.length&&KL(eD(c?We(We([c],Ge(f),!1),[a],!1):We([a],Ge(f),!1)),n,null===e||void 0===e?void 0:e.margin).length){if(c&&!a&&h%2===0){var m=d.splice(0,1);m.forEach(r.hide)}else if(c&&a){m=d.splice(0,1);m.forEach(r.hide)}f=l(u(d),{seq:h}),h++}}}function rD(t,e,n,r){var i,o,s=e.optionalAngles,a=void 0===s?[0,45,90]:s,c=e.margin,l=e.recoverWhenFailed,u=void 0===l||l,h=t.map((function(t){return t.getLocalEulerAngles()})),d=function(){return KL(t,n,c).length<1},f=function(e){return t.forEach((function(t,n){var i=Array.isArray(e)?e[n]:e;r.rotate(t,+i)}))};try{for(var p=ze(a),g=p.next();!g.done;g=p.next()){var v=g.value;if(f(v),d())return}}catch(y){i={error:y}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}u&&f(h)}function iD(t){var e=t.type,n=t.labelDirection;return"linear"===e&&yL(t)?"negative"===n?"bottom":"top":"middle"}function oD(t,e,n,r,i){var o,s=e.maxLines,a=void 0===s?3:s,c=e.recoverWhenFailed,l=void 0===c||c,u=e.margin,h=void 0===u?[0,0,0,0]:u,d=VP(null!==(o=e.wordWrapWidth)&&void 0!==o?o:50,[i]),f=t.map((function(t){return t.attr("maxLines")||1})),p=Math.min.apply(Math,We([],Ge(f),!1)),g=function(){return KL(t,n,h).length<1},v=iD(n),y=function(e){return t.forEach((function(t,n){var i=Array.isArray(e)?e[n]:e;r.wrap(t,d,i,v)}))};if(!(p>a)){if("linear"===n.type&&yL(n)){if(y(a),g())return}else for(var m=p;m<=a;m++)if(y(m),g())return;l&&y(f)}}var sD=new Map([["hide",nD],["rotate",rD],["ellipsis",JL],["wrap",oD]]);function aD(t,e,n){return!(e.labelOverlap.length<1)&&("hide"===n?!hP(t[0]):"rotate"===n?!t.some((function(t){var e;return!!(null===(e=t.attr("transform"))||void 0===e?void 0:e.includes("rotate"))})):"ellipsis"!==n&&"wrap"!==n||t.filter((function(t){return t.querySelector("text")})).length>=1)}function cD(t,e,n,r){var i=e.labelOverlap,o=void 0===i?[]:i;o.length&&o.forEach((function(i){var o=i.type,s=sD.get(o);aD(t,e,o)&&(null===s||void 0===s||s(t,i,e,r,n))}))}function lD(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(t){return"positive"===t?-1:1};return t.reduce((function(t,e){return t*n(e)}),1)}function uD(t){var e=t;while(e<0)e+=360;return Math.round(e%360)}function hD(t,e){var n=Ge(t,2),r=n[0],i=n[1],o=Ge(e,2),s=o[0],a=o[1],c=Ge([r*s+i*a,r*a-i*s],2),l=c[0],u=c[1];return Math.atan2(u,l)}function dD(t){var e=(t+360)%180;return LL(e,-90,90)||(e+=180),e}function fD(t,e,n){var r,i=n.labelAlign,o=null===(r=e.style.transform)||void 0===r?void 0:r.includes("rotate");if(o)return e.getLocalEulerAngles();var s=0,a=fL(t.value,n),c=hL(t.value,n);return"horizontal"===i?0:(s="perpendicular"===i?hD([1,0],a):hD([c[0]<0?-1:1,0],c),dD(V_(s)))}function pD(t,e,n){var r=n.type,i=n.labelAlign,o=fL(t,n),s=uD(e),a=uD(V_(hD([1,0],o))),c="center",l="middle";return"linear"===r?[90,270].includes(a)&&0===s?(c="center",l=1===o[1]?"top":"bottom"):a%180||![90,270].includes(s)?0===a?(LL(s,0,90,!1,!0)||LL(s,0,90)||LL(s,270,360))&&(c="start"):90===a?LL(s,0,90,!1,!0)?c="start":(LL(s,90,180)||LL(s,270,360))&&(c="end"):270===a?LL(s,0,90,!1,!0)?c="end":(LL(s,90,180)||LL(s,270,360))&&(c="start"):180===a&&(90===s?c="start":(LL(s,0,90)||LL(s,270,360))&&(c="end")):c="center":"parallel"===i?l=LL(a,0,180,!0)?"top":"bottom":"horizontal"===i?LL(a,90,270,!1)?c="end":(LL(a,270,360,!1)||LL(a,0,90))&&(c="start"):"perpendicular"===i&&(c=LL(a,90,270)?"end":"start"),{textAlign:c,textBaseline:l}}function gD(t,e,n){e.setLocalEulerAngles(t);var r=e.__data__.value,i=pD(r,t,n),o=e.querySelector(R_.labelItem.class);o&&mD(o,i)}function vD(t,e,n){var r=n.showTick,i=n.tickLength,o=n.tickDirection,s=n.labelDirection,a=n.labelSpacing,c=e.indexOf(t),l=VP(a,[t,c,e]),u=Ge([fL(t.value,n),lD(s,o)],2),h=u[0],d=u[1],f=1===d?VP(r?i:0,[t,c,e]):0,p=Ge(L_(__(h,l+f),vL(t.value,n)),2),g=p[0],v=p[1];return{x:g,y:v}}function yD(t,e,n,r){var i=r.labelFormatter,o=nr(i)?function(){return FR(VP(i,[t,e,n,fL(t.value,r)]))}:function(){return FR(t.label||"")};return o}function mD(t,e){"text"===t.nodeName&&t.attr(e)}function bD(t,e){cD(this.node().childNodes,t,e,{hide:iP,show:rP,rotate:function(e,n){gD(+n,e,t)},ellipsis:function(t,e,n){t&&UR(t,e||1/0,n)},wrap:function(t,e,n){t&&DL(t,e,n)},getTextShape:function(t){return t.querySelector("text")}})}function xD(t,e,n,r,i){var o=n.indexOf(e),s=AP(t).append(yD(e,o,n,i)).attr("className",R_.labelItem.name).node(),a=Ge(EP(cL(r,[e,o,n])),2),c=a[0],l=a[1],u=l.transform,h=Fe(l,["transform"]);jL(s,u);var d=fD(e,s,i);return s.getLocalEulerAngles()||s.setLocalEulerAngles(d),mD(s,je(je({},pD(e.value,d,i)),c)),t.attr(h),s}function wD(t,e,n,r,i){var o,s=lL(e,n.labelFilter),a=xP(n,"label"),c=t.selectAll(R_.label.class).data(s,(function(t,e){return e})).join((function(t){return t.append("g").attr("className",R_.label.name).transition((function(t){xD(this,t,e,a,n);var r=vD(t,e,n),i=r.x,o=r.y;return this.style.transform="translate(".concat(i,", ").concat(o,")"),null}))}),(function(t){return t.transition((function(t){var i=this.querySelector(R_.labelItem.class),o=xD(this,t,e,a,n),s=ZP(i,o,r.update),c=vD(t,e,n),l=c.x,u=c.y,h=JP(this,{transform:"translate(".concat(l,", ").concat(u,")")},r.update);return We(We([],Ge(s),!1),[h],!1)}))}),(function(t){return o=t,t.transition((function(){var t=this,e=W_(this.childNodes[0],r.exit);return $P(e,(function(){return AP(t).remove()})),e})),o})).transitions();return YP(c,(function(){bD.call(t,n,i)})),c}function ED(t,e){return dL(t,e.tickDirection,e)}function kD(t,e){var n=Ge(t,2),r=n[0],i=n[1];return[[0,0],[r*e,i*e]]}function SD(t,e,n,r,i){var o=i.tickLength,s=Ge(kD(r,VP(o,[t,e,n])),2),a=Ge(s[0],2),c=a[0],l=a[1],u=Ge(s[1],2),h=u[0],d=u[1];return{x1:c,x2:h,y1:l,y2:d}}function MD(t,e,n,r,i){var o=i.tickFormatter,s=ED(e.value,i),a="line";return nr(o)&&(a=function(){return VP(o,[e,n,r,s])}),t.append(a).attr("className",R_.tickItem.name)}function OD(t,e,n,r,i,o,s){var a=ED(t.value,o),c=SD(t,e,n,a,o),l=c.x1,u=c.x2,h=c.y1,d=c.y2,f=Ge(EP(cL(s,[t,e,n,a])),2),p=f[0],g=f[1];"line"===r.node().nodeName&&r.styles(je({x1:l,x2:u,y1:h,y2:d},p)),i.attr(g),r.styles(p)}function ND(t,e,n,r,i,o){var s=MD(AP(this),t,e,n,r);OD(t,e,n,s,this,r,i);var a=Ge(vL(t.value,r),2),c=a[0],l=a[1];return JP(this,{transform:"translate(".concat(c,", ").concat(l,")")},o)}function TD(t,e,n,r){var i=lL(e,n.tickFilter),o=xP(n,"tick");return t.selectAll(R_.tick.class).data(i,(function(t){return t.id||t.label})).join((function(t){return t.append("g").attr("className",R_.tick.name).transition((function(t,e){return ND.call(this,t,e,i,n,o,!1)}))}),(function(t){return t.transition((function(t,e){return this.removeChildren(),ND.call(this,t,e,i,n,o,r.update)}))}),(function(t){return t.transition((function(){var t=this,e=W_(this.childNodes[0],r.exit);return $P(e,(function(){return t.remove()})),e}))})).transitions()}function AD(t,e,n){var r=n.titlePosition,i=void 0===r?"lb":r,o=n.titleSpacing,s=IP(i),a=t.node().getLocalBounds(),c=Ge(a.min,2),l=c[0],u=c[1],h=Ge(a.halfExtents,2),d=h[0],f=h[1],p=Ge(e.node().getLocalBounds().halfExtents,2),g=p[0],v=p[1],y=Ge([l+d,u+f],2),m=y[0],b=y[1],x=Ge(_P(o),4),w=x[0],E=x[1],k=x[2],S=x[3];if(["start","end"].includes(i)&&"linear"===n.type){var M=n.startPos,O=n.endPos,N=Ge("start"===i?[M,O]:[O,M],2),T=N[0],A=N[1],C=B_([-A[0]+T[0],-A[1]+T[1]]),P=Ge(__(C,w),2),R=P[0],_=P[1];return{x:T[0]+R,y:T[1]+_}}return s.includes("t")&&(b-=f+v+w),s.includes("r")&&(m+=d+g+E),s.includes("l")&&(m-=d+g+S),s.includes("b")&&(b+=f+v+k),{x:m,y:b}}function CD(t,e,n){var r=t.getGeometryBounds().halfExtents,i=2*r[1];if("vertical"===e){if("left"===n)return"rotate(-90) translate(0, ".concat(i/2,")");if("right"===n)return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function PD(t,e,n,r,i){var o=xP(r,"title"),s=Ge(EP(o),2),a=s[0],c=s[1],l=c.transform,u=c.transformOrigin,h=Fe(c,["transform","transformOrigin"]);e.styles(h);var d=l||CD(t.node(),a.direction,a.position);t.styles(je(je({},a),{transformOrigin:u})),jL(t.node(),d);var f=AD(AP(n._offscreen||n.querySelector(R_.mainGroup.class)),e,r),p=f.x,g=f.y,v=JP(e.node(),{transform:"translate(".concat(p,", ").concat(g,")")},i);return v}function RD(t,e,n,r){var i=n.titleText;return t.selectAll(R_.title.class).data([{title:i}].filter((function(t){return!!t.title})),(function(t,e){return t.title})).join((function(o){return o.append((function(){return FR(i)})).attr("className",R_.title.name).transition((function(){return PD(AP(this),t,e,n,r.enter)}))}),(function(i){return i.transition((function(){return PD(AP(this),t,e,n,r.update)}))}),(function(t){return t.remove()})).transitions()}function _D(t,e,n,r){var i=t.showLine,o=t.showTick,s=t.showLabel,a=e.maybeAppendByClassName(R_.lineGroup,"g"),c=LP(i,a,(function(e){return TL(e,t,r)}))||[],l=e.maybeAppendByClassName(R_.tickGroup,"g"),u=LP(o,l,(function(e){return TD(e,n,t,r)}))||[],h=e.maybeAppendByClassName(R_.labelGroup,"g"),d=LP(s,h,(function(i){return wD(i,n,t,r,e.node())}))||[];return We(We(We([],Ge(c),!1),Ge(u),!1),Ge(d),!1).filter((function(t){return!!t}))}var LD=function(t){function e(e){return t.call(this,e,P_)||this}return Ie(e,t),e.prototype.render=function(t,e,n){var r=this,i=t.titleText,o=t.data,s=t.animate,a=t.showTitle,c=t.showGrid,l=t.dataThreshold,u=t.truncRange,h=C_(o,l).filter((function(t){var e=t.value;return!(u&&e>u[0]&&e<u[1])})),d=HP(void 0===n?s:n),f=AP(e).maybeAppendByClassName(R_.gridGroup,"g"),p=LP(c,f,(function(e){return _L(e,h,t,d)}))||[],g=AP(e).maybeAppendByClassName(R_.mainGroup,"g");i&&(!this.initialized&&d.enter||this.initialized&&d.update)&&_D(t,AP(this.offscreenGroup),h,HP(!1));var v=_D(t,AP(g.node()),h,d),y=AP(e).maybeAppendByClassName(R_.titleGroup,"g"),m=LP(a,y,(function(e){return RD(e,r,t,d)}))||[];return We(We(We([],Ge(p),!1),Ge(v),!1),Ge(m),!1).flat().filter((function(t){return!!t}))},e}(fP);function DD(t){var e=t.canvas,n=t.touches,r=t.offsetX,i=t.offsetY;if(e){var o=e.x,s=e.y;return[o,s]}if(n){var a=n[0],c=a.clientX,l=a.clientY;return[c,l]}return r&&i?[r,i]:[0,0]}function ID(t,e){return+t.toPrecision(e)}var jD=function(t){return t};class FD{constructor(t){this.options=Ng({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=Ng({},this.options,t),this.rescale(t)}rescale(t){}}function BD(t,e){return e-t?n=>(n-t)/(e-t):t=>.5}function zD(t,...e){return e.reduce(((t,e)=>n=>t(e(n))),t)}function GD(t,e,n,r,i){let o=n||0,s=r||t.length;const a=i||(t=>t);while(o<s){const n=Math.floor((o+s)/2);a(t[n])>e?s=n:o=n+1}return o}var VD=n(55205),WD=n.n(VD);function UD(t,e,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function HD(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100,i=t[3];if(0===n)return[255*r,255*r,255*r,i];const o=r<.5?r*(1+n):r+n-r*n,s=2*r-o,a=UD(s,o,e+1/3),c=UD(s,o,e),l=UD(s,o,e-1/3);return[255*a,255*c,255*l,i]}function $D(t){const e=WD().get(t);if(!e)return null;const{model:n,value:r}=e;return"rgb"===n?r:"hsl"===n?HD(r):null}const YD=(t,e)=>n=>t*(1-n)+e*n,qD=(t,e)=>{const n=$D(t),r=$D(e);return null===n||null===r?n?()=>t:()=>e:t=>{const e=new Array(4);for(let c=0;c<4;c+=1){const i=n[c],o=r[c];e[c]=i*(1-t)+o*t}const[i,o,s,a]=e;return`rgba(${Math.round(i)}, ${Math.round(o)}, ${Math.round(s)}, ${a})`}},XD=(t,e)=>"number"===typeof t&&"number"===typeof e?YD(t,e):"string"===typeof t&&"string"===typeof e?qD(t,e):()=>t,KD=(t,e)=>{const n=YD(t,e);return t=>Math.round(n(t))};function ZD(t){return null===t}function JD(t){return!Kn(t)&&!ZD(t)&&!Number.isNaN(t)}const QD=Math.sqrt(50),tI=Math.sqrt(10),eI=Math.sqrt(2);function nI(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/10**i;return i>=0?(o>=QD?10:o>=tI?5:o>=eI?2:1)*10**i:-(10**-i)/(o>=QD?10:o>=tI?5:o>=eI?2:1)}const rI=(t,e,n=5)=>{const r=[t,e];let i,o=0,s=r.length-1,a=r[o],c=r[s];return c<a&&([a,c]=[c,a],[o,s]=[s,o]),i=nI(a,c,n),i>0?(a=Math.floor(a/i)*i,c=Math.ceil(c/i)*i,i=nI(a,c,n)):i<0&&(a=Math.ceil(a*i)/i,c=Math.floor(c*i)/i,i=nI(a,c,n)),i>0?(r[o]=Math.floor(a/i)*i,r[s]=Math.ceil(c/i)*i):i<0&&(r[o]=Math.ceil(a*i)/i,r[s]=Math.floor(c*i)/i),r};function iI(t,e){const n=e<t?e:t,r=t>e?t:e;return t=>Math.min(Math.max(n,t),r)}const oI=(t,e,n)=>{const[r,i]=t,[o,s]=e;let a,c;return r<i?(a=BD(r,i),c=n(o,s)):(a=BD(i,r),c=n(s,o)),zD(c,a)},sI=(t,e,n)=>{const r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=t[0]>t[r],a=s?[...t].reverse():t,c=s?[...e].reverse():e;for(let l=0;l<r;l+=1)i[l]=BD(a[l],a[l+1]),o[l]=n(c[l],c[l+1]);return e=>{const n=GD(t,e,1,r)-1,s=i[n],a=o[n];return zD(a,s)(e)}},aI=(t,e,n,r)=>{const i=Math.min(t.length,e.length),o=i>2?sI:oI,s=r?KD:n;return o(t,e,s)};class cI extends FD{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:YD,tickCount:5}}map(t){return JD(t)?this.output(t):this.options.unknown}invert(t){return JD(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,e,n,...r]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,e,n,...r)}getTicks(){const{tickMethod:t}=this.options,[e,n,r,...i]=this.getTickMethodOptions();return t(e,n,r,...i)}getTickMethodOptions(){const{domain:t,tickCount:e}=this.options,n=t[0],r=t[t.length-1];return[n,r,e]}chooseNice(){return rI}rescale(){this.nice();const[t,e]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,e,this.chooseClamp(e))}chooseClamp(t){const{clamp:e,range:n}=this.options,r=this.options.domain.map(t),i=Math.min(r.length,n.length);return e?iI(r[0],r[i-1]):jD}composeOutput(t,e){const{domain:n,range:r,round:i,interpolate:o}=this.options,s=aI(n.map(t),r,o,i);this.output=zD(s,e,t)}composeInput(t,e,n){const{domain:r,range:i}=this.options,o=aI(i,r.map(t),YD);this.input=zD(e,n,o)}}const lI=(t,e,n)=>{let r,i,o=t,s=e;if(o===s&&n>0)return[o];let a=nI(o,s,n);if(0===a||!Number.isFinite(a))return[];if(a>0){o=Math.ceil(o/a),s=Math.floor(s/a),i=new Array(r=Math.ceil(s-o+1));for(let t=0;t<r;t+=1)i[t]=(o+t)*a}else{a=-a,o=Math.ceil(o*a),s=Math.floor(s*a),i=new Array(r=Math.ceil(s-o+1));for(let t=0;t<r;t+=1)i[t]=(o+t)/a}return i};class uI extends cI{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:XD,tickMethod:lI,tickCount:5}}chooseTransforms(){return[jD,jD]}clone(){return new uI(this.options)}}function hI({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):n}function dI({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function fI({map:t,initKey:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function pI(t){return"object"===typeof t?t.valueOf():t}class gI extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=pI,null!==t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(hI({map:this.map,initKey:this.initKey},t))}has(t){return super.has(hI({map:this.map,initKey:this.initKey},t))}set(t,e){return super.set(dI({map:this.map,initKey:this.initKey},t),e)}delete(t){return super.delete(fI({map:this.map,initKey:this.initKey},t))}}const vI=Symbol("defaultUnknown");function yI(t,e,n){for(let r=0;r<e.length;r+=1)t.has(e[r])||t.set(n(e[r]),r)}function mI(t){const{value:e,from:n,to:r,mapper:i,notFoundReturn:o}=t;let s=i.get(e);if(void 0===s){if(o!==vI)return o;s=n.push(e)-1,i.set(e,s)}return r[s%r.length]}function bI(t){return t instanceof Date?t=>`${t}`:"object"===typeof t?t=>JSON.stringify(t):t=>t}class xI extends FD{getDefaultOptions(){return{domain:[],range:[],unknown:vI}}constructor(t){super(t)}map(t){return 0===this.domainIndexMap.size&&yI(this.domainIndexMap,this.getDomain(),this.domainKey),mI({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return 0===this.rangeIndexMap.size&&yI(this.rangeIndexMap,this.getRange(),this.rangeKey),mI({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[e]=this.options.domain,[n]=this.options.range;if(this.domainKey=bI(e),this.rangeKey=bI(n),!this.rangeIndexMap)return this.rangeIndexMap=new Map,void(this.domainIndexMap=new Map);t&&!t.range||this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new xI(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:e}=this.options;return this.sortedDomain=e?[...t].sort(e):t,this.sortedDomain}}function wI(t){const e=Math.min(...t);return t.map((t=>t/e))}function EI(t,e){const n=t.length,r=e-n;return r>0?[...t,...new Array(r).fill(1)]:r<0?t.slice(0,e):t}function kI(t){return Math.round(1e12*t)/1e12}function SI(t){const{domain:e,range:n,paddingOuter:r,paddingInner:i,flex:o,round:s,align:a}=t,c=e.length,l=EI(o,c),[u,h]=n,d=h-u,f=2/c*r+1-1/c*i,p=d/f,g=p*i/c,v=p-c*g,y=wI(l),m=y.reduce(((t,e)=>t+e)),b=v/m,x=new gI(e.map(((t,e)=>{const n=y[e]*b;return[t,s?Math.floor(n):n]}))),w=new gI(e.map(((t,e)=>{const n=y[e]*b,r=n+g;return[t,s?Math.floor(r):r]}))),E=Array.from(w.values()).reduce(((t,e)=>t+e)),k=d-(E-E/c*i),S=k*a,M=u+S;let O=s?Math.round(M):M;const N=new Array(c);for(let T=0;T<c;T+=1){N[T]=kI(O);const t=e[T];O+=w.get(t)}return{valueBandWidth:x,valueStep:w,adjustedRange:N}}function MI(t){var e;const{domain:n}=t,r=n.length;if(0===r)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};const i=!!(null===(e=t.flex)||void 0===e?void 0:e.length);if(i)return SI(t);const{range:o,paddingOuter:s,paddingInner:a,round:c,align:l}=t;let u,h,d=o[0];const f=o[1],p=f-d,g=2*s,v=r-a;u=p/Math.max(1,g+v),c&&(u=Math.floor(u)),d+=(p-u*(r-a))*l,h=u*(1-a),c&&(d=Math.round(d),h=Math.round(h));const y=new Array(r).fill(0).map(((t,e)=>d+e*u));return{valueStep:u,valueBandWidth:h,adjustedRange:y}}class OI extends xI{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:vI,flex:[]}}constructor(t){super(t)}clone(){return new OI(this.options)}getStep(t){return void 0===this.valueStep?1:"number"===typeof this.valueStep?this.valueStep:void 0===t?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return void 0===this.valueBandWidth?1:"number"===typeof this.valueBandWidth?this.valueBandWidth:void 0===t?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:e}=this.options;return t>0?t:e}getPaddingOuter(){const{padding:t,paddingOuter:e}=this.options;return t>0?t:e}rescale(){super.rescale();const{align:t,domain:e,range:n,round:r,flex:i}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:a}=MI({align:t,range:n,round:r,flex:i,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=a,this.valueBandWidth=s,this.adjustedRange=o}}var NI=function(t){function e(e){var n=this,r=e.style,i=Fe(e,["style"]);return n=t.call(this,Ng({},{type:"column"},je({style:r},i)))||this,n.columnsGroup=new Du({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n}return Ie(e,t),e.prototype.render=function(){var t=this.attributes,e=t.columns,n=t.x,r=t.y;this.columnsGroup.style.transform="translate(".concat(n,", ").concat(r,")"),AP(this.columnsGroup).selectAll(".column").data(e.flat()).join((function(t){return t.append("rect").attr("className","column").each((function(t){this.attr(t)}))}),(function(t){return t.each((function(t){this.attr(t)}))}),(function(t){return t.remove()}))},e.prototype.update=function(t){this.attr(cP({},this.attributes,t)),this.render()},e.prototype.clear=function(){this.removeChildren()},e}(Au),TI=function(t){function e(e){var n=this,r=e.style,i=Fe(e,["style"]);return n=t.call(this,Ng({},{type:"lines"},je({style:r},i)))||this,n.linesGroup=n.appendChild(new Du),n.areasGroup=n.appendChild(new Du),n.render(),n}return Ie(e,t),e.prototype.render=function(){var t=this.attributes,e=t.lines,n=t.areas,r=t.x,i=t.y;this.style.transform="translate(".concat(r,", ").concat(i,")"),e&&this.renderLines(e),n&&this.renderAreas(n)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(t){this.attr(cP({},this.attributes,t)),this.render()},e.prototype.renderLines=function(t){AP(this.linesGroup).selectAll(".line").data(t).join((function(t){return t.append("path").attr("className","line").each((function(t){this.attr(t)}))}),(function(t){return t.each((function(t){this.attr(t)}))}),(function(t){return t.remove()}))},e.prototype.renderAreas=function(t){AP(this.linesGroup).selectAll(".area").data(t).join((function(t){return t.append("path").attr("className","area").each((function(t){this.attr(t)}))}),(function(t){return t.each((function(t){this.style(t)}))}),(function(t){return t.remove()}))},e}(Au);function AI(t,e,n,r){var i,o,s,a,c,l,u=[],h=!!r,d=[1/0,1/0],f=[-1/0,-1/0];if(h){i=Ge(r,2),d=i[0],f=i[1];for(var p=0,g=t.length;p<g;p+=1){var v=t[p];d=I_(d,v),f=j_(f,v)}}p=0;for(var y=t.length;p<y;p+=1){v=t[p];if(0!==p||n)if(p!==y-1||n){var m=[p?p-1:y-1,p-1][n?0:1];o=t[m],s=t[n?(p+1)%y:p+1];var b=[0,0];b=D_(s,o),b=__(b,e);var x=F_(v,o),w=F_(v,s),E=x+w;0!==E&&(x/=E,w/=E);var k=__(b,-x),S=__(b,w);c=L_(v,k),a=L_(v,S),a=I_(a,j_(s,v)),a=j_(a,I_(s,v)),k=D_(a,v),k=__(k,-x/w),c=L_(v,k),c=I_(c,j_(o,v)),c=j_(c,I_(o,v)),S=D_(v,c),S=__(S,w/x),a=L_(v,S),h&&(c=j_(c,d),c=I_(c,f),a=j_(a,d),a=I_(a,f)),u.push(l),u.push(c),l=a}else c=v,u.push(l),u.push(c);else l=v}return n&&u.push(u.shift()),u}function CI(t,e,n){var r;void 0===e&&(e=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var i=!!e,o=[],s=0,a=t.length;s<a;s+=2)o.push([t[s],t[s+1]]);var c,l,u,h=AI(o,.4,i,n),d=o.length,f=[];for(s=0;s<d-1;s+=1)c=h[2*s],l=h[2*s+1],u=o[s+1],f.push(["C",c[0],c[1],l[0],l[1],u[0],u[1]]);return i&&(c=h[d],l=h[d+1],r=Ge(o,1),u=r[0],f.push(["C",c[0],c[1],l[0],l[1],u[0],u[1]])),f}function PI(t,e){var n,r=e.x,i=e.y,o=Ge(i.getOptions().range||[0,0],2),s=o[0],a=o[1];return a>s&&(n=Ge([s,a],2),a=n[0],s=n[1]),t.map((function(t){var e=t.map((function(t,e){return[r.map(e),Le(i.map(t),a,s)]}));return e}))}function RI(t,e){void 0===e&&(e=!1);var n=e?t.length-1:0,r=t.map((function(t,e){return We([e===n?"M":"L"],Ge(t),!1)}));return e?r.reverse():r}function _I(t,e){if(void 0===e&&(e=!1),t.length<=2)return RI(t);for(var n=[],r=t.length,i=0;i<r;i+=1){var o=e?t[r-i-1]:t[i];qd(o,n.slice(-2))||n.push.apply(n,We([],Ge(o),!1))}var s=CI(n,!1);return e?s.unshift(We(["M"],Ge(t[r-1]),!1)):s.unshift(We(["M"],Ge(t[0]),!1)),s}function LI(t,e,n){var r=zf(t);return r.push(["L",e,n],["L",0,n],["Z"]),r}function DI(t,e,n,r){return t.map((function(t){return LI(e?_I(t):RI(t),n,r)}))}function II(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var o=t[i],s=RI(o),a=void 0;if(0===i)a=LI(s,e,n);else{var c=t[i-1],l=RI(c,!0);l[0][0]="L",a=We(We(We([],Ge(s),!1),Ge(l),!1),[["Z"]],!1)}r.push(a)}return r}function jI(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var o=t[i],s=_I(o),a=void 0;if(0===i)a=LI(s,e,n);else{var c=t[i-1],l=_I(c,!0),u=o[0];l[0][0]="L",a=We(We(We([],Ge(s),!1),Ge(l),!1),[We(["M"],Ge(u),!1),["Z"]],!1)}r.push(a)}return r}var FI=function(t,e){if(kn(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],s=nr(e)?e(o):o[e];s<r&&(n=o,r=s)}return n}},BI=function(t,e){if(kn(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],s=nr(e)?e(o):o[e];s>r&&(n=o,r=s)}return n}};function zI(t){return 0===t.length?[0,0]:[Sn(FI(t,(function(t){return Sn(t)||0}))),Mn(BI(t,(function(t){return Mn(t)||0})))]}function GI(t){for(var e=zf(t),n=e[0].length,r=Ge([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],o=r[1],s=0;s<e.length;s+=1)for(var a=e[s],c=0;c<n;c+=1)a[c]>=0?(a[c]+=i[c],i[c]=a[c]):(a[c]+=o[c],o[c]=a[c]);return e}var VI=function(t){function e(e){return t.call(this,e,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Ie(e,t),Object.defineProperty(e.prototype,"rawData",{get:function(){var t=this.attributes.data;if(!t||0===(null===t||void 0===t?void 0:t.length))return[[]];var e=zf(t);return Ae(e[0])?[e]:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?GI(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var t=this.scales.y,e=Ge(t.getOptions().domain||[0,0],2),n=e[0],r=e[1];return r<0?t.map(r):t.map(n<0?0:n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var t=this.attributes,e=t.width,n=t.height;return{width:e,height:n}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var t=this,e=this.attributes,n=e.type,r=e.isStack,i=e.smooth;if("line"!==n)throw new Error("linesStyle can only be used in line type");var o=xP(this.attributes,"area"),s=xP(this.attributes,"line"),a=this.containerShape.width,c=this.data;if(0===c[0].length)return{lines:[],areas:[]};var l=this.scales,u=l.x,h=l.y,d=PI(c,{type:"line",x:u,y:h}),f=[];if(o){var p=this.baseline;f=r?i?jI(d,a,p):II(d,a,p):DI(d,i,a,p)}return{lines:d.map((function(e,n){return je({stroke:t.getColor(n),d:i?_I(e):RI(e)},s)})),areas:f.map((function(e,n){return je({d:e,fill:t.getColor(n)},o)}))}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var t=this,e=xP(this.attributes,"column"),n=this.attributes,r=n.isStack,i=n.type,o=n.scale;if("column"!==i)throw new Error("columnsStyle can only be used in column type");var s=this.containerShape.height,a=this.rawData;if(!a)return{columns:[]};r&&(a=GI(a));var c=this.createScales(a),l=c.x,u=c.y,h=Ge(zI(a),2),d=h[0],f=h[1],p=new uI({domain:[0,f-(d>0?0:d)],range:[0,s*o]}),g=l.getBandWidth(),v=this.rawData;return{columns:a.map((function(n,i){return n.map((function(n,o){var s=g/a.length,c=function(){return{x:l.map(o)+s*i,y:n>=0?u.map(n):u.map(0),width:s,height:p.map(Math.abs(n))}},h=function(){return{x:l.map(o),y:u.map(n),width:g,height:p.map(v[i][o])}};return je(je({fill:t.getColor(i)},e),r?h():c())}))}))}},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){CP(e,".container","rect").attr("className","container").node();var n=t.type,r=t.x,i=t.y,o="spark".concat(n),s=je({x:r,y:i},"line"===n?this.linesStyle:this.columnsStyle);AP(e).selectAll(".spark").data([n]).join((function(t){return t.append((function(t){return"line"===t?new TI({className:o,style:s}):new NI({className:o,style:s})})).attr("className","spark ".concat(o))}),(function(t){return t.update(s)}),(function(t){return t.remove()}))},e.prototype.getColor=function(t){var e=this.attributes.color;return kn(e)?e[t%e.length]:nr(e)?e.call(null,t):e},e.prototype.createScales=function(t){var e,n,r=this.attributes,i=r.type,o=r.scale,s=r.range,a=void 0===s?[]:s,c=r.spacing,l=this.containerShape,u=l.width,h=l.height,d=Ge(zI(t),2),f=d[0],p=d[1],g=new uI({domain:[null!==(e=a[0])&&void 0!==e?e:f,null!==(n=a[1])&&void 0!==n?n:p],range:[h,h*(1-o)]});return"line"===i?{type:i,x:new uI({domain:[0,t[0].length-1],range:[0,u]}),y:g}:{type:i,x:new OI({domain:t[0].map((function(t,e){return e})),range:[0,u],paddingInner:c,paddingOuter:c/2,align:.5}),y:g}},e.tag="sparkline",e}(fP),WI={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},UI={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},HI={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},$I=RP({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),YI=RP({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),qI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),e.prototype.render=function(t,e){var n=t.x,r=t.y,i=t.size,o=void 0===i?10:i,s=t.radius,a=void 0===s?o/4:s,c=t.orientation,l=Fe(t,["x","y","size","radius","orientation"]),u=o,h=2.4*u,d=AP(e).maybeAppendByClassName(YI.iconRect,"rect").styles(je(je({},l),{width:u,height:h,radius:a,x:n-u/2,y:r-h/2,transformOrigin:"center"})),f=n+1/3*u-u/2,p=n+2/3*u-u/2,g=r+1/4*h-h/2,v=r+3/4*h-h/2;d.maybeAppendByClassName("".concat(YI.iconLine,"-1"),"line").styles(je({x1:f,x2:f,y1:g,y2:v},l)),d.maybeAppendByClassName("".concat(YI.iconLine,"-2"),"line").styles(je({x1:p,x2:p,y1:g,y2:v},l)),"vertical"===c&&(d.node().style.transform="rotate(90)")},e}(fP),XI=function(t){function e(e){return t.call(this,e,HI)||this}return Ie(e,t),e.prototype.renderLabel=function(t){var e=this,n=this.attributes,r=n.x,i=n.y,o=n.showLabel,s=xP(this.attributes,"label"),a=s.x,c=void 0===a?0:a,l=s.y,u=void 0===l?0:l,h=s.transform,d=s.transformOrigin,f=Fe(s,["x","y","transform","transformOrigin"]),p=Ge(EP(f,[]),2),g=p[0],v=p[1],y=AP(t).maybeAppendByClassName(YI.labelGroup,"g").styles(v),m=je(je({},UI),g),b=m.text,x=Fe(m,["text"]);LP(!!o,y,(function(t){e.label=t.maybeAppendByClassName(YI.label,"text").styles(je(je({},x),{x:r+c,y:i+u,transform:h,transformOrigin:d,text:"".concat(b)})),e.label.on("mousedown",(function(t){t.stopPropagation()})),e.label.on("touchstart",(function(t){t.stopPropagation()}))}))},e.prototype.renderIcon=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.orientation,o=e.type,s=je(je({x:n,y:r,orientation:i},WI),xP(this.attributes,"icon")),a=this.attributes.iconShape,c=void 0===a?function(){return new qI({style:s})}:a,l=AP(t).maybeAppendByClassName(YI.iconGroup,"g");l.selectAll(YI.icon.class).data([c]).join((function(t){return t.append("string"===typeof c?c:function(){return c(o)}).attr("className",YI.icon.name)}),(function(t){return t.update(s)}),(function(t){return t.remove()}))},e.prototype.render=function(t,e){this.renderIcon(e),this.renderLabel(e)},e}(fP),KI=function(t){function e(e){var n=t.call(this,e,je(je(je({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(t){return t.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},wP(HI,"handle")),wP(WI,"handleIcon")),wP(UI,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(t){return function(e){e.stopPropagation(),n.target=t,n.prevPos=n.getOrientVal(DD(e));var r=n.availableSpace,i=r.x,o=r.y,s=n.getBBox(),a=s.x,c=s.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([i,o])-n.getOrientVal([+a,+c])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd)}},n.onDragging=function(t){var e=n.attributes,r=e.slidable,i=e.brushable,o=e.type;t.stopPropagation();var s=n.getOrientVal(DD(t)),a=s-n.prevPos;if(a){var c=n.getRatio(a);switch(n.target){case"start":r&&n.setValuesOffset(c);break;case"end":r&&n.setValuesOffset(0,c);break;case"selection":r&&n.setValuesOffset(c,c);break;case"track":if(!i)return;n.selectionWidth+=c,"range"===o?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0);break;default:break}n.prevPos=s}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1)},n.onValueChange=function(t){var e=n.attributes,r=e.onChange,i=e.type,o="range"===i?t:t[1],s="range"===i?n.getValues():n.getValues()[1],a=new kl("valuechange",{detail:{oldValue:o,value:s}});n.dispatchEvent(a),null===r||void 0===r||r(s)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n}return Ie(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(t){this.attributes.values=this.clampValues(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){var t=this.attributes.orientation;if("horizontal"!==t)return null;var e=xP(this.attributes,"sparkline");return je(je({zIndex:0},this.availableSpace),e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t=this.attributes,e=t.trackLength,n=t.trackSize,r=Ge(this.getOrientVal([[e,n],[n,e]]),2),i=r[0],o=r[1];return{width:i,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=(t.x,t.y,t.padding),n=Ge(_P(e),4),r=n[0],i=n[1],o=n[2],s=n[3],a=this.shape,c=a.width,l=a.height;return{x:s,y:r,width:c-(s+i),height:l-(r+o)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1),this.attributes.values=t;var n=!1!==e&&this.attributes.animate;this.updateSelectionArea(n),this.updateHandlesPosition(n)},e.prototype.updateSelectionArea=function(t){var e=this.calcSelectionArea();this.foregroundGroup.selectAll($I.selection.class).each((function(n,r){JP(this,e[r],t)}))},e.prototype.updateHandlesPosition=function(t){this.attributes.showHandle&&(this.startHandle&&JP(this.startHandle,this.getHandleStyle("start"),t),this.endHandle&&JP(this.endHandle,this.getHandleStyle("end"),t))},e.prototype.innerSetValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1);var n=this.values,r=this.clampValues(t);this.attributes.values=r,this.setValues(r),e&&this.onValueChange(n)},e.prototype.renderTrack=function(t){var e=this.attributes,n=e.x,r=e.y,i=xP(this.attributes,"track");this.trackShape=AP(t).maybeAppendByClassName($I.track,"rect").styles(je(je({x:n,y:r},this.shape),i))},e.prototype.renderBrushArea=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.brushable;this.brushArea=AP(t).maybeAppendByClassName($I.brushArea,"rect").styles(je({x:n,y:r,fill:"transparent",cursor:i?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(t){var e=this,n=this.attributes,r=n.x,i=n.y,o=n.orientation,s=AP(t).maybeAppendByClassName($I.sparklineGroup,"g");LP("horizontal"===o,s,(function(t){var n=je(je({},e.sparklineStyle),{x:r,y:i});t.maybeAppendByClassName($I.sparkline,(function(){return new VI({style:n})})).update(n)}))},e.prototype.renderHandles=function(){var t,e=this,n=this.attributes,r=n.showHandle,i=n.type,o="range"===i?["start","end"]:["end"],s=r?o:[],a=this;null===(t=this.foregroundGroup)||void 0===t||t.selectAll($I.handle.class).data(s.map((function(t){return{type:t}})),(function(t){return t.type})).join((function(t){return t.append((function(t){var n=t.type;return new XI({style:e.getHandleStyle(n)})})).each((function(t){var e=t.type;this.attr("class","".concat($I.handle.name," ").concat(e,"-handle"));var n="".concat(e,"Handle");a[n]=this,this.addEventListener("pointerdown",a.onDragStart(e))}))}),(function(t){return t.each((function(t){var e=t.type;this.update(a.getHandleStyle(e))}))}),(function(t){return t.each((function(t){var e=t.type,n="".concat(e,"Handle");a[n]=void 0})).remove()}))},e.prototype.renderSelection=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.type,o=e.selectionType;this.foregroundGroup=AP(t).maybeAppendByClassName($I.foreground,"g");var s=xP(this.attributes,"selection"),a=function(t){return t.style("visibility",(function(t){return t.show?"visible":"hidden"})).style("cursor",(function(t){return"select"===o?"grab":"invert"===o?"crosshair":"default"})).styles(je(je({},s),{transform:"translate(".concat(n,", ").concat(r,")")}))},c=this;this.foregroundGroup.selectAll($I.selection.class).data("value"===i?[]:this.calcSelectionArea().map((function(t,e){return{style:je({},t),index:e,show:"select"===o?1===e:1!==e}})),(function(t){return t.index})).join((function(t){return t.append("rect").attr("className",$I.selection.name).call(a).each((function(t,e){var n=this;1===e?(c.selectionShape=AP(this),this.on("pointerdown",(function(t){n.attr("cursor","grabbing"),c.onDragStart("selection")(t)})),c.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),c.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),c.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",(function(){n.attr("cursor","grabbing")})),this.addEventListener("pointerup",(function(){n.attr("cursor","pointer")})),this.addEventListener("pointerover",(function(){n.attr("cursor","pointer")}))):this.on("pointerdown",c.onDragStart("track"))}))}),(function(t){return t.call(a)}),(function(t){return t.remove()})),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(t,e){this.renderTrack(e),this.renderSparkline(e),this.renderBrushArea(e),this.renderSelection(e)},e.prototype.clampValues=function(t,e){var n;void 0===e&&(e=4);var r=Ge(this.range,2),i=r[0],o=r[1],s=Ge(this.getValues().map((function(t){return ID(t,e)})),2),a=s[0],c=s[1],l=Array.isArray(t)?t:[a,null!==t&&void 0!==t?t:c],u=Ge((l||[a,c]).map((function(t){return ID(t,e)})),2),h=u[0],d=u[1];if("value"===this.attributes.type)return[0,Le(d,i,o)];h>d&&(n=Ge([d,h],2),h=n[0],d=n[1]);var f=d-h;return f>o-i?[i,o]:h<i?a===i&&c===d?[i,d]:[i,f+i]:d>o?c===o&&a===h?[h,o]:[o-f,o]:[h,d]},e.prototype.calcSelectionArea=function(t){var e=Ge(this.clampValues(t),2),n=e[0],r=e[1],i=this.availableSpace,o=i.x,s=i.y,a=i.width,c=i.height;return this.getOrientVal([[{y:s,height:c,x:o,width:n*a},{y:s,height:c,x:n*a+o,width:(r-n)*a},{y:s,height:c,x:r*a,width:(1-r)*a}],[{x:o,width:a,y:s,height:n*c},{x:o,width:a,y:n*c+s,height:(r-n)*c},{x:o,width:a,y:r*c,height:(1-r)*c}]])},e.prototype.calcHandlePosition=function(t){var e=this.attributes.handleIconOffset,n=this.availableSpace,r=n.x,i=n.y,o=n.width,s=n.height,a=Ge(this.clampValues(),2),c=a[0],l=a[1],u="start"===t?-e:e,h=("start"===t?c:l)*this.getOrientVal([o,s])+u;return{x:r+this.getOrientVal([h,o/2]),y:i+this.getOrientVal([s/2,h])}},e.prototype.inferTextStyle=function(t){var e=this.attributes.orientation;return"horizontal"===e?{}:"start"===t?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:"end"===t?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(t){var e,n=this.attributes,r=n.type,i=n.orientation,o=n.formatter,s=n.autoFitLabel,a=xP(this.attributes,"handle"),c=xP(a,"label"),l=a.spacing,u=this.getHandleSize(),h=this.clampValues(),d="start"===t?h[0]:h[1],f=o(d),p=new MP({style:je(je(je({},c),this.inferTextStyle(t)),{text:f})}),g=p.getBBox(),v=g.width,y=g.height;if(p.destroy(),!s){if("value"===r)return{text:f,x:0,y:-y-l};var m=l+u+("horizontal"===i?v/2:0);return e={text:f},e["horizontal"===i?"x":"y"]="start"===t?-m:m,e}var b=0,x=0,w=this.availableSpace,E=w.width,k=w.height,S=this.calcSelectionArea()[1],M=S.x,O=S.y,N=S.width,T=S.height,A=l+u;if("horizontal"===i){var C=A+v/2;if("start"===t){var P=M-A-v;b=P>0?-C:C}else{var R=E-M-N-A>v;b=R?C:-C}}else{var _=A,L=y+A;x="start"===t?O-u>y?-L:_:k-(O+T)-u>y?L:-_}return{x:b,y:x,text:f}},e.prototype.getHandleLabelStyle=function(t){var e=xP(this.attributes,"handleLabel");return je(je(je({},e),this.calcHandleText(t)),this.inferTextStyle(t))},e.prototype.getHandleIconStyle=function(){var t=this.attributes.handleIconShape,e=xP(this.attributes,"handleIcon"),n=this.getOrientVal(["ew-resize","ns-resize"]),r=this.getHandleSize();return je({cursor:n,shape:t,size:r},e)},e.prototype.getHandleStyle=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.showLabel,o=e.showLabelOnInteraction,s=e.orientation,a=this.calcHandlePosition(t),c=a.x,l=a.y,u=this.calcHandleText(t),h=i;return!i&&o&&(h=!!this.target),je(je(je({},wP(this.getHandleIconStyle(),"icon")),wP(je(je({},this.getHandleLabelStyle(t)),u),"label")),{transform:"translate(".concat(c+n,", ").concat(l+r,")"),orientation:s,showLabel:h,type:t,zIndex:3})},e.prototype.getHandleSize=function(){var t=this.attributes,e=t.handleIconSize,n=t.width,r=t.height;return e||Math.floor((this.getOrientVal([+r,+n])+4)/2.4)},e.prototype.getOrientVal=function(t){var e=Ge(t,2),n=e[0],r=e[1],i=this.attributes.orientation;return"horizontal"===i?n:r},e.prototype.setValuesOffset=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var r=this.attributes.type,i=Ge(this.getValues(),2),o=i[0],s=i[1],a="range"===r?t:0,c=[o+a,s+e].sort();n?this.setValues(c):this.innerSetValues(c,!0)},e.prototype.getRatio=function(t){var e=this.availableSpace,n=e.width,r=e.height;return t/this.getOrientVal([n,r])},e.prototype.dispatchCustomEvent=function(t,e,n){var r=this;t.on(e,(function(t){t.stopPropagation(),r.dispatchEvent(new kl(n,{detail:t}))}))},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var t=this.brushArea;this.dispatchCustomEvent(t,"click","trackClick"),this.dispatchCustomEvent(t,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(t,"pointerleave","trackMouseleave"),t.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(t){var e=this.attributes.scrollable;if(e){var n=t.deltaX,r=t.deltaY,i=r||n,o=this.getRatio(i);this.setValuesOffset(o,o,!0)}},e.tag="slider",e}(fP),ZI={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},JI=RP({background:"background",labelGroup:"label-group",label:"label"},"indicator"),QI=function(t){function e(e){var n=t.call(this,e,ZI)||this;return n.point=[0,0],n.group=n.appendChild(new Du({})),n.isMutationObserved=!0,n}return Ie(e,t),e.prototype.renderBackground=function(){if(this.label){var t=this.attributes,e=t.position,n=t.padding,r=Ge(_P(n),4),i=r[0],o=r[1],s=r[2],a=r[3],c=this.label.node().getLocalBounds(),l=c.min,u=c.max,h=new PP(l[0]-a,l[1]-i,u[0]+o-l[0]+a,u[1]+s-l[1]+i),d=this.getPath(e,h),f=xP(this.attributes,"background");this.background=AP(this.group).maybeAppendByClassName(JI.background,"path").styles(je(je({},f),{d:d})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var t=this.attributes,e=t.formatter,n=t.labelText,r=xP(this.attributes,"label"),i=Ge(EP(r),2),o=i[0],s=i[1],a=(o.text,Fe(o,["text"]));if(this.label=AP(this.group).maybeAppendByClassName(JI.labelGroup,"g").styles(s),n){var c=this.label.maybeAppendByClassName(JI.label,(function(){return FR(e(n))})).style("text",e(n).toString());c.selectAll("text").styles(a)}},e.prototype.adjustLayout=function(){var t=Ge(this.point,2),e=t[0],n=t[1],r=this.attributes,i=r.x,o=r.y;this.group.attr("transform","translate(".concat(i-e,", ").concat(o-n,")"))},e.prototype.getPath=function(t,e){var n=this.attributes.radius,r=e.x,i=e.y,o=e.width,s=e.height,a=[["M",r+n,i],["L",r+o-n,i],["A",n,n,0,0,1,r+o,i+n],["L",r+o,i+s-n],["A",n,n,0,0,1,r+o-n,i+s],["L",r+n,i+s],["A",n,n,0,0,1,r,i+s-n],["L",r,i+n],["A",n,n,0,0,1,r+n,i],["Z"]],c={top:4,right:6,bottom:0,left:2},l=c[t],u=this.createCorner([a[l].slice(-2),a[l+1].slice(-2)]);return a.splice.apply(a,We([l+1,1],Ge(u),!1)),a[0][0]="M",a},e.prototype.createCorner=function(t,e){void 0===e&&(e=10);var n=.8,r=IR.apply(void 0,We([],Ge(t),!1)),i=Ge(t,2),o=Ge(i[0],2),s=o[0],a=o[1],c=Ge(i[1],2),l=c[0],u=c[1],h=Ge(r?[l-s,[s,l]]:[u-a,[a,u]],2),d=h[0],f=Ge(h[1],2),p=f[0],g=f[1],v=d/2,y=d/Math.abs(d),m=e*y,b=m/2,x=m*Math.sqrt(3)/2*n,w=Ge([p,p+v-b,p+v,p+v+b,g],5),E=w[0],k=w[1],S=w[2],M=w[3],O=w[4];return r?(this.point=[S,a-x],[["L",E,a],["L",k,a],["L",S,a-x],["L",M,a],["L",O,a]]):(this.point=[s+x,S],[["L",s,E],["L",s,k],["L",s+x,S],["L",s,M],["L",s,O]])},e.prototype.applyVisibility=function(){var t=this.attributes.visibility;"hidden"===t?iP(this):rP(this)},e.prototype.bindEvents=function(){this.label.on(_l.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e}(fP),tj=function(t){function e(n){var r=t.call(this,cP({},e.defaultOptions,n))||this;return r.hoverColor="#f5f5f5",r.selectedColor="#e6f7ff",r.background=r.appendChild(new Yu({})),r.label=r.background.appendChild(new Du({})),r}return Ie(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return _P(this.style.padding)},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(){var t=this.style,e=t.label,n=t.value,r=xP(this.attributes,"label");AP(this.label).maybeAppend(".label",(function(){return FR(e)})).attr("className","label").styles(r),this.label.attr("__data__",n)},e.prototype.renderBackground=function(){var t=this.label.getBBox(),e=Ge(this.padding,4),n=e[0],r=e[1],i=e[2],o=e[3],s=t.width,a=t.height,c=s+o+r,l=a+n+i,u=xP(this.attributes,"background"),h=this.style,d=h.width,f=void 0===d?0:d,p=h.height,g=void 0===p?0:p,v=h.selected;this.background.attr(je(je({},u),{width:Math.max(c,f),height:Math.max(l,g),fill:v?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(o,", ").concat((l-a)/2,")")})},e.prototype.render=function(){this.renderLabel(),this.renderBackground()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("pointerenter",(function(){t.style.selected||t.background.attr("fill",t.hoverColor)})),this.addEventListener("pointerleave",(function(){t.style.selected||t.background.attr("fill",t.style.backgroundFill)}));var e=this;this.addEventListener("click",(function(){var n=t.style,r=n.label,i=n.value,o=n.onClick;null===o||void 0===o||o(i,{label:r,value:i},e)}))},e.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},e}(fP),ej=function(t){function e(n){var r,i,o=t.call(this,cP({},e.defaultOptions,n))||this;o.currentValue=null===(r=e.defaultOptions.style)||void 0===r?void 0:r.defaultValue,o.isPointerInSelect=!1,o.select=o.appendChild(new Yu({className:"select",style:{cursor:"pointer",width:0,height:0}})),o.dropdown=o.appendChild(new Yu({className:"dropdown"}));var s=o.style.defaultValue;return s&&(null===(i=o.style.options)||void 0===i?void 0:i.some((function(t){return t.value===s})))&&(o.currentValue=s),o}return Ie(e,t),e.prototype.setValue=function(t){this.currentValue=t,this.render()},e.prototype.getValue=function(){return this.currentValue},Object.defineProperty(e.prototype,"dropdownPadding",{get:function(){return _P(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),e.prototype.renderSelect=function(){var t,e=this,n=this.style,r=n.x,i=n.y,o=n.width,s=n.height,a=n.bordered,c=n.showDropdownIcon,l=xP(this.attributes,"select"),u=xP(this.attributes,"placeholder");this.select.attr(je(je({x:r,y:i,width:o,height:s},l),{fill:"#fff",strokeWidth:a?1:0}));var h=this.dropdownPadding,d=10;c&&AP(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(r+o-d-h[1]-h[3],", ").concat(i+s/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var f=null===(t=this.style.options)||void 0===t?void 0:t.find((function(t){return t.value===e.currentValue})),p=je({x:r+h[3]},u);AP(this.select).selectAll(".placeholder").data(f?[]:[1]).join((function(t){return t.append("text").attr("className","placeholder").styles(p).style("y",(function(){var t=this.getBBox();return i+(s-t.height)/2}))}),(function(t){return t.styles(p)}),(function(t){return t.remove()}));var g=xP(this.attributes,"optionLabel"),v=je({x:r+h[3]},g);AP(this.select).selectAll(".value").data(f?[f]:[]).join((function(t){return t.append((function(t){return FR(t.label)})).attr("className","value").styles(v).style("y",(function(){var t=this.getBBox();return i+(s-t.height)/2}))}),(function(t){return t.styles(v)}),(function(t){return t.remove()}))},e.prototype.renderDropdown=function(){var t,e,n=this,r=this.style,i=r.x,o=r.y,s=r.width,a=r.height,c=r.options,l=r.onSelect,u=r.open,h=xP(this.attributes,"dropdown"),d=xP(this.attributes,"option"),f=this.dropdownPadding;AP(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(c,(function(t){return t.value})).join((function(t){return t.append((function(t){return new tj({className:"dropdown-item",style:je(je(je({},t),d),{width:s-f[1]-f[3],selected:t.value===n.currentValue,onClick:function(t,e,r){n.setValue(t),null===l||void 0===l||l(t,e,r),n.dispatchEvent(new kl("change",{detail:{value:t,option:e,item:r}})),iP(n.dropdown)}})})})).each((function(t,e){var n,r=null===(n=this.parentNode)||void 0===n?void 0:n.children,i=r.reduce((function(t,n,r){return r<e&&(t+=n.getBBox().height),t}),0);this.attr("transform","translate(".concat(f[3],", ").concat(f[0]+i,")"))}))}),(function(t){return t.update((function(t){return{selected:t.value===n.currentValue}}))}),(function(t){return t.remove()}));var p=null===(e=null===(t=this.dropdown.getElementsByClassName("dropdown-container"))||void 0===t?void 0:t[0])||void 0===e?void 0:e.getBBox(),g=h.spacing;this.dropdown.attr(je({transform:"translate(".concat(i,", ").concat(o+a+g,")"),width:p.width+f[1]+f[3],height:p.height+f[0]+f[2]},h)),!u&&iP(this.dropdown)},e.prototype.render=function(){this.renderSelect(),this.renderDropdown()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("click",(function(t){t.stopPropagation()})),this.select.addEventListener("click",(function(){"visible"===t.dropdown.style.visibility?iP(t.dropdown):rP(t.dropdown)})),this.addEventListener("pointerenter",(function(){t.isPointerInSelect=!0})),this.addEventListener("pointerleave",(function(){t.isPointerInSelect=!1})),null===document||void 0===document||document.addEventListener("click",(function(){t.isPointerInSelect||iP(t.dropdown)}))},e.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"请选择",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},e}(fP),nj=function(t){function e(n){var r=t.call(this,cP({},{style:{backgroundOpacity:e.backgroundOpacities.default}},e.defaultOptions,n))||this;return r.showBackground=!0,r.background=r.appendChild(new Yu({})),r.icon=r.appendChild(new Du({})),r}return Ie(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return _P(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){var t=this.attributes.size,e=Ge(this.padding,4),n=e[0],r=e[1],i=e[2],o=e[3];return Math.max(t-Math.max(o+r,n+i),2*this.lineWidth+1)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.attributes,e=t.x,n=t.y,r=t.size,i=r/2,o=xP(this.attributes,"background");this.background.attr(je({x:e-i,y:n-i,width:r,height:r},o))},e.prototype.showIndicator=function(){if(this.label){var t=this.attributes.size,e=this.background.getBBox(),n=e.x,r=e.y;this.indicator.update({x:n+t/2,y:r-5,labelText:this.label,visibility:"visible"})}},e.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},e.prototype.connectedCallback=function(){var e;t.prototype.connectedCallback.call(this);var n=this.attributes.size,r=this.background.getBBox(),i=r.x,o=r.y,s=null===(e=this.ownerDocument)||void 0===e?void 0:e.defaultView;s&&(this.indicator=s.appendChild(new QI({style:{x:i+n/2,y:o-n/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},e.prototype.disconnectedCallback=function(){this.indicator.destroy()},e.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},e.prototype.bindEvents=function(){var t=this,n=this.attributes.onClick;if(this.addEventListener("click",(function(){null===n||void 0===n||n(t)})),this.showBackground){var r=function(){return t.background.attr({opacity:e.backgroundOpacities.default})},i=function(){return t.background.attr({opacity:e.backgroundOpacities.hover})},o=function(){return t.background.attr({opacity:e.backgroundOpacities.active})};this.addEventListener("pointerenter",(function(){i(),t.showIndicator()})),this.addEventListener("pointerleave",(function(){r(),t.hideIndicator()})),this.addEventListener("pointerdown",(function(){o()})),this.addEventListener("pointerup",(function(){r()}))}},e.tag="IconBase",e.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},e.backgroundOpacities={default:0,hover:.8,active:1},e}(fP),rj=function(t,e){return void 0===e&&(e="#565758"),new Vu({style:{fill:e,d:"M ".concat(t,",").concat(t," L -").concat(t,",0 L ").concat(t,",-").concat(t," Z"),transformOrigin:"center"}})},ij=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),e.prototype.arcPath=function(t,e,n){var r=Ge([n,n],2),i=r[0],o=r[1],s=function(r){return[t+n*Math.cos(r),e+n*Math.sin(r)]},a=Ge(s(-5/4*Math.PI),2),c=a[0],l=a[1],u=Ge(s(1/4*Math.PI),2),h=u[0],d=u[1];return"M".concat(c,",").concat(l,",A").concat(i,",").concat(o,",0,1,1,").concat(h,",").concat(d)},Object.defineProperty(e.prototype,"label",{get:function(){return"重置"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=this.lineWidth,s=o+.5;AP(this.icon).maybeAppend(".reset","path").styles({stroke:r,lineWidth:o,d:this.arcPath(e,n,i/2-o),markerStart:rj(s,r)})},e}(nj),oj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"快退"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=i/2,s=i/2/Math.pow(3,.5),a=[[e,n],[e,n-s],[e-o,n],[e,n+s],[e,n],[e+o,n-s],[e+o,n+s],[e,n]];AP(this.icon).maybeAppend(".backward","polygon").styles({points:a,fill:r})},e}(nj),sj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"快进"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=i/2,s=i/2/Math.pow(3,.5),a=[[e,n],[e,n-s],[e+o,n],[e,n+s],[e,n],[e-o,n-s],[e-o,n+s],[e,n]];AP(this.icon).maybeAppend(".forward","polygon").styles({points:a,fill:r})},e}(nj),aj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"播放"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=i/3*Math.pow(3,.5)*.8,s=[[e+o,n],[e-o/2,n-i/2*.8],[e-o/2,n+i/2*.8],[e+o,n]];AP(this.icon).maybeAppend(".play","polygon").styles({points:s,fill:r})},e}(nj),cj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"暂停"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=i/3,s=[[e-o,n-i/2],[e-o,n+i/2],[e-o/2,n+i/2],[e-o/2,n-i/2],[e-o,n-i/2],[e+o/2,n-i/2],[e+o/2,n+i/2],[e+o,n+i/2],[e+o,n-i/2]];AP(this.icon).maybeAppend(".pause","polygon").styles({points:s,fill:r})},e}(nj),lj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"范围时间"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this,o=i.iconSize,s=i.lineWidth,a=s;AP(this.icon).maybeAppend(".left-line","line").styles({x1:e-o/2,y1:n-o/2,x2:e-o/2,y2:n+o/2,stroke:r,lineWidth:s}),AP(this.icon).maybeAppend(".right-line","line").styles({x1:e+o/2,y1:n-o/2,x2:e+o/2,y2:n+o/2,stroke:r,lineWidth:s}),AP(this.icon).maybeAppend(".left-arrow","line").styles({x1:e,y1:n,x2:e-o/2+2*a,y2:n,stroke:r,lineWidth:s,markerEnd:rj(2*s,r)}),AP(this.icon).maybeAppend(".right-arrow","line").styles({x1:e,y1:n,x2:e+o/2-2*a,y2:n,stroke:r,lineWidth:s,markerEnd:rj(2*s,r)})},e}(nj),uj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"单一时间"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this,o=i.iconSize,s=i.lineWidth;AP(this.icon).maybeAppend(".line","line").styles({x1:e,y1:n-o/2,x2:e,y2:n+o/2,stroke:r,lineWidth:s});var a=s;AP(this.icon).maybeAppend(".left-arrow","line").styles({x1:e-o/2-2*a,y1:n,x2:e-2*a,y2:n,stroke:r,lineWidth:s,markerEnd:rj(2*s,r)}),AP(this.icon).maybeAppend(".right-arrow","line").styles({x1:e+o/2+2*a,y1:n,x2:e+2*a,y2:n,stroke:r,lineWidth:s,markerEnd:rj(2*s,r)})},e}(nj),hj=function(t){return[[-t/2,-t/2],[-t/2,t/2],[t/2,t/2]]},dj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"折线图"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this,o=i.iconSize,s=i.lineWidth,a=s,c=(o-2*a-s)/4,l=(o-2*a-s)/2,u=Ge([e-o/2+a,n+o/2-2*a],2),h=u[0],d=u[1];AP(this.icon).maybeAppend(".coordinate","polyline").styles({points:hj(o).map((function(t){var r=Ge(t,2),i=r[0],o=r[1];return[i+e,o+n]})),stroke:r,lineWidth:s}),AP(this.icon).maybeAppend(".line","polyline").styles({points:[[h,d],[h+c,d-l],[h+2*c,d],[h+4*c,d-2*l]],stroke:r,lineWidth:s})},e}(nj),fj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"条形图"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.data,e=this.attributes,n=e.x,r=e.y,i=e.color,o=this,s=o.iconSize,a=o.lineWidth,c=a,l=(s-c)/t.length,u=(s-2*c)/4,h=Ge([n-s/2+2*c,r+s/2-c],2),d=h[0],f=h[1];AP(this.icon).maybeAppend(".coordinate","polyline").styles({points:hj(s).map((function(t){var e=Ge(t,2),i=e[0],o=e[1];return[i+n,o+r]})),stroke:i,lineWidth:a}),AP(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map((function(t,e){return{value:t,index:e}}))).join((function(t){return t.append("line").attr("className","column").style("x1",(function(t){var e=t.index;return d+l*e})).style("y1",f).style("x2",(function(t){var e=t.index;return d+l*e})).style("y2",(function(t){var e=t.value;return f-u*e})).styles({y1:f,stroke:i,lineWidth:a})}))},e}(nj),pj=function(t){function e(e){var n=t.call(this,cP({},{style:{color:"#d8d9d9"}},e))||this;return n.showBackground=!1,n}return Ie(e,t),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this,o=i.iconSize,s=i.lineWidth;AP(this.icon).maybeAppend(".split","line").styles({x1:e,y1:n-o/2,x2:e,y2:n+o/2,stroke:r,lineWidth:s})},e}(nj),gj=function(t){function e(){var e=t.apply(this,We([],Ge(arguments),!1))||this;return e.showBackground=!1,e}return Ie(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return _P(0)},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.iconSize,e=this.attributes,n=e.x,r=e.y,i=e.speed,o=void 0===i?1:i,s=wT(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),a=Le(t,20,1/0),c=20,l=je(je({},s),{x:n-a/2,y:r-c/2,width:a,height:c,defaultValue:o,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:t/5,placeholderFontSize:t/2,optionPadding:0,optionLabelFontSize:t/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});AP(this.icon).maybeAppend(".speed",(function(){return new ej({style:l})})).attr("className","speed").each((function(){this.update(l)}))},e.tag="SpeedSelect",e}(nj),vj=function(t){function e(e){var n=t.call(this,e)||this;return n.icon=n.appendChild(new Du({})),n.currentType=n.attributes.type,n}return Ie(e,t),e.prototype.getType=function(){return this.currentType},e.prototype.render=function(){var t=this,e=this.attributes,n=(e.onChange,Fe(e,["onChange"]));AP(this.icon).selectAll(".icon").data([this.currentType]).join((function(e){return e.append((function(e){var n,r=null===(n=t.toggles.find((function(t){var n=Ge(t,1),r=n[0];return r===e})))||void 0===n?void 0:n[1];if(!r)throw new Error("Invalid type: ".concat(e));return new r({})})).attr("className","icon").styles(n,!1).update({})}),(function(t){return t.styles({restStyles:n}).update({})}),(function(t){return t.remove()}))},e.prototype.bindEvents=function(){var t=this,e=this.attributes.onChange;this.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation();var r=(t.toggles.findIndex((function(e){var n=Ge(e,1),r=n[0];return r===t.currentType}))+1)%t.toggles.length,i=t.toggles[r][0];null===e||void 0===e||e(t.currentType),t.currentType=i,t.render()}))},e.tag="ToggleIcon",e}(fP),yj=function(t){function e(e){var n=t.call(this,cP({},{style:{type:"play"}},e))||this;return n.toggles=[["play",aj],["pause",cj]],n}return Ie(e,t),e}(vj),mj=function(t){function e(e){var n=t.call(this,cP({},{style:{type:"range"}},e))||this;return n.toggles=[["range",lj],["value",uj]],n}return Ie(e,t),e}(vj),bj=function(t){function e(e){var n=t.call(this,cP({},{style:{type:"column"}},e))||this;return n.toggles=[["line",dj],["column",fj]],n}return Ie(e,t),e}(vj),xj={reset:ij,speed:gj,backward:oj,playPause:yj,forward:sj,selectionType:mj,chartType:bj,split:pj},wj=function(t){function e(n){var r=t.call(this,cP({},e.defaultOptions,n))||this;return r.background=r.appendChild(new Yu({})),r.functions=r.appendChild(new Du({})),r}return Ie(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return _P(this.attributes.padding)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.style,e=t.x,n=t.y,r=t.width,i=t.height,o=xP(this.attributes,"background");this.background.attr(je({x:e,y:n,width:r,height:i},o))},e.prototype.renderFunctions=function(){var t,e=this,n=this.attributes,r=n.functions,i=n.iconSize,o=n.iconSpacing,s=n.x,a=n.y,c=n.width,l=n.height,u=n.align,h=Ge(this.padding,4),d=h[1],f=h[3],p=r.reduce((function(t,e){return t.length&&e.length?t.concat.apply(t,We(["split"],Ge(e),!1)):t.concat.apply(t,We([],Ge(e),!1))}),[]),g=p.length*(i+o)-o,v={left:f+i/2,center:(c-g)/2+i/2,right:c-g-f-d+i/2}[u]||0;null===(t=this.speedSelect)||void 0===t||t.destroy(),this.functions.removeChildren(),p.forEach((function(t,n){var r,c=xj[t],u={x:s+n*(i+o)+v,y:a+l/2,size:i};if(c===gj?(u.speed=e.attributes.speed,u.onSelect=function(n){return e.handleFunctionChange(t,{value:n})}):[yj,mj,bj].includes(c)?(u.onChange=function(n){return e.handleFunctionChange(t,{value:n})},c===yj&&(u.type="play"===e.attributes.state?"pause":"play"),c===mj&&(u.type="range"===e.attributes.selectionType?"value":"range"),c===bj&&(u.type="line"===e.attributes.chartType?"column":"line")):u.onClick=function(){return e.handleFunctionChange(t,{value:t})},c===gj){var h=null===(r=e.ownerDocument)||void 0===r?void 0:r.defaultView;h&&(e.speedSelect=new c({style:je(je({},u),{zIndex:100})}),h.appendChild(e.speedSelect))}else e.functions.appendChild(new c({style:u}))}))},e.prototype.disconnectedCallback=function(){var e;t.prototype.disconnectedCallback.call(this),null===(e=this.speedSelect)||void 0===e||e.destroy()},e.prototype.render=function(){this.renderBackground(),this.renderFunctions()},e.prototype.handleFunctionChange=function(t,e){var n=this.attributes.onChange;null===n||void 0===n||n(t,e)},e.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},e}(fP),Ej=function(t){function e(n){var r=t.call(this,cP({},e.defaultOptions,n))||this;return r.bindEvents(),r}return Ie(e,t),e.prototype.bindEvents=function(){var t=this;this.addEventListener("mouseenter",(function(){t.attr("lineWidth",Math.ceil(+(t.style.r||0)/2))})),this.addEventListener("mouseleave",(function(){t.attr("lineWidth",0)}))},e.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},e}(Cu),kj=function(t){function e(n){return t.call(this,cP({},e.defaultOptions,n))||this}return Ie(e,t),e.prototype.renderBackground=function(){var t=this.attributes,e=t.x,n=t.y,r=t.width,i=t.height,o=xP(this.attributes,"background");AP(this).maybeAppend("background","rect").attr("className","background").styles(je({x:e-r/2,y:n-i/2,width:r,height:i},o))},e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.iconSize,i=xP(this.attributes,"icon"),o=1,s=r/2;AP(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles(je({x1:e-o,y1:n-s,x2:e-o,y2:n+s},i)),AP(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles(je({x1:e+o,y1:n-s,x2:e+o,y2:n+s},i))},e.prototype.renderBorder=function(){var t=this.attributes,e=t.x,n=t.y,r=t.width,i=t.height,o=t.type,s=xP(this.attributes,"border"),a="start"===o?+r/2:-r/2;AP(this).maybeAppend("border","line").attr("className","border").styles(je({x1:a+e,y1:n-i/2,x2:a+e,y2:n+i/2},s))},e.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},e.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},e}(fP);function Sj(t,e){return"number"===typeof t?Oj(t):Mj(t,e)}function Mj(t,e){var n=new Date(t);switch(e){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(n.getHours())&&0===n.getMinutes()?A_(n,"HH:mm\nYYYY-MM-DD"):A_(n,"HH:mm");case"half-day":return n.getHours()<12?"AM\n".concat(A_(n,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(n.getDate())?A_(n,"DD\nYYYY-MM"):A_(n,"DD");case"week":return n.getDate()<=7?A_(n,"DD\nYYYY-MM"):A_(n,"DD");case"month":return[0,6].includes(n.getMonth())?A_(n,"MM月\nYYYY"):A_(n,"MM月");case"season":return[0].includes(n.getMonth())?A_(n,"MM月\nYYYY"):A_(n,"MM月");case"year":return A_(n,"YYYY");default:return A_(n,"YYYY-MM-DD HH:mm")}}function Oj(t){var e=String(Math.floor(t/3600)).padStart(2,"0"),n=String(Math.floor(t%3600/60)).padStart(2,"0"),r=String(Math.floor(t%60)).padStart(2,"0");return t<3600?"".concat(n,":").concat(r):"".concat(e,":").concat(n,":").concat(r)}var Nj=function(t){function e(n){var r=t.call(this,cP({},e.defaultOptions,n))||this;r.axis=r.appendChild(new LD({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),r.timeline=r.appendChild(new KI({style:{onChange:function(t){r.handleSliderChange(t)}}})),r.controller=r.appendChild(new wj({})),r.states={},r.handleSliderChange=function(t){var e=function(){var t=r.states.values;return Array.isArray(t)?We([],Ge(t),!1):t}();r.setBySliderValues(t),r.dispatchOnChange(e)};var i=r.attributes,o=i.selectionType,s=i.chartType,a=i.speed,c=i.state,l=i.playMode,u=i.values;return r.states={chartType:s,playMode:l,selectionType:o,speed:a,state:c},r.setByTimebarValues(u),r}return Ie(e,t),Object.defineProperty(e.prototype,"data",{get:function(){var t=this.attributes.data,e=function(t,e){return t.time<e.time?-1:t.time>e.time?1:0};return t.sort(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"space",{get:function(){var t,e=this.attributes,n=e.x,r=e.y,i=e.width,o=e.height,s=e.type,a=e.controllerHeight,c=Le(+o-a,0,+o),l=new PP(n,r+ +o-a,+i,a),u=0;"chart"===s?(u=35,t=new PP(n,r+c-u,+i,u)):t=new PP;var h="time"===s?10:c,d=new PP(n,r+("time"===s?c:c-h),+i,h-u);return{axisBBox:t,controllerBBox:l,timelineBBox:d}},enumerable:!1,configurable:!0}),e.prototype.setBySliderValues=function(t){var e,n,r=this.data,i=Ge(Array.isArray(t)?t:[0,t],2),o=i[0],s=i[1],a=r.length,c=r[Math.floor(o*a)],l=r[Math.ceil(s*a)-(Array.isArray(t)?0:1)];this.states.values=[null!==(e=null===c||void 0===c?void 0:c.time)&&void 0!==e?e:r[0].time,null!==(n=null===l||void 0===l?void 0:l.time)&&void 0!==n?n:1/0]},e.prototype.setByTimebarValues=function(t){var e,n,r,i=this.data,o=Ge(Array.isArray(t)?t:[void 0,t],2),s=o[0],a=o[1],c=i.find((function(t){var e=t.time;return e===s})),l=i.find((function(t){var e=t.time;return e===a}));this.states.values=[null!==(e=null===c||void 0===c?void 0:c.time)&&void 0!==e?e:null===(n=i[0])||void 0===n?void 0:n.time,null!==(r=null===l||void 0===l?void 0:l.time)&&void 0!==r?r:1/0]},e.prototype.setByIndex=function(t){var e,n,r,i,o=this.data,s=Ge(t,2),a=s[0],c=s[1];this.states.values=[null!==(n=null===(e=o[a])||void 0===e?void 0:e.time)&&void 0!==n?n:o[0].time,null!==(i=null===(r=this.data[c])||void 0===r?void 0:r.time)&&void 0!==i?i:1/0]},Object.defineProperty(e.prototype,"sliderValues",{get:function(){var t=this.states,e=t.values,n=t.selectionType,r=Ge(Array.isArray(e)?e:[void 0,e],2),i=r[0],o=r[1],s=this.data,a=s.length,c="value"===n,l=function(){var t=s.findIndex((function(t){var e=t.time;return e===i}));return c?0:t>-1?t/a:0},u=function(){if(o===1/0)return 1;var t=s.findIndex((function(t){var e=t.time;return e===o}));return t>-1?t/a:c?.5:1};return[l(),u()]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var t=this.states,e=t.values,n=t.selectionType,r=Ge(Array.isArray(e)?e:[this.data[0].time,e],2),i=r[0],o=r[1];return"value"===n?o:[i,o]},enumerable:!1,configurable:!0}),e.prototype.getDatumByRatio=function(t){var e=this.data,n=e.length,r=Math.floor(t*(n-1));return e[r]},Object.defineProperty(e.prototype,"chartHandleIconShape",{get:function(){var t=this.states.selectionType,e=this.space.timelineBBox.height;return"range"===t?function(t){return new kj({style:{type:t,height:e,iconSize:e/6}})}:function(){return new zu({style:{x1:0,y1:-e/2,x2:0,y2:e/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),e.prototype.getChartStyle=function(t){var e=this,n=t.x,r=t.y,i=t.width,o=t.height,s=this.states,a=s.selectionType,c=s.chartType,l=this.data,u=this.attributes,h=u.type,d=u.labelFormatter,f=xP(this.attributes,"chart"),p=(f.type,Fe(f,["type"])),g="range"===a;if("time"===h)return je({handleIconShape:function(){return new Ej({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:g?-15:0,autoFitLabel:g,handleSpacing:g?-15:0,trackFill:"#edeeef",trackLength:i,trackOpacity:.5,trackRadius:o/2,trackSize:o/2,type:a,values:this.sliderValues,formatter:function(t){if(d)return d(t);var n=e.getDatumByRatio(t).time;return"number"===typeof n?Oj(n):A_(n,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(n,", ").concat(r,")"),zIndex:1},p);var v="range"===a?5:0,y=l.map((function(t){var e=t.value;return e}));return je({handleIconOffset:v,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:y,sparklineType:c,sparklineScale:.8,trackLength:i,trackSize:o,type:a,values:this.sliderValues,transform:"translate(".concat(n,", ").concat(r,")"),zIndex:1},p)},e.prototype.renderChart=function(t){void 0===t&&(t=this.space.timelineBBox),this.timeline.update(this.getChartStyle(t))},e.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},e.prototype.getAxisStyle=function(t){var e=this.data,n=this.attributes,r=n.interval,i=n.labelFormatter,o=xP(this.attributes,"axis"),s=t.x,a=t.y,c=t.width,l=We(We([],Ge(e),!1),[{time:0}],!1).map((function(t,e,n){var r=t.time;return{label:"".concat(r),value:e/(n.length-1),time:r}})),u=je({startPos:[s,a],endPos:[s+c,a],data:l,labelFilter:function(t,e){return e<l.length-1},labelFormatter:function(t){var e=t.time;return i?i(e):Sj(e,r)}},o);return u},e.prototype.renderAxis=function(t){void 0===t&&(t=this.space.axisBBox);var e=this.attributes.type;"chart"===e&&this.axis.update(this.getAxisStyle(t))},e.prototype.renderController=function(t){void 0===t&&(t=this.space.controllerBBox);var e=this.attributes.type,n=this.states,r=n.state,i=n.speed,o=n.selectionType,s=n.chartType,a=xP(this.attributes,"controller"),c=this,l=je(je(je({},t),{iconSize:20,speed:i,state:r,selectionType:o,chartType:s,onChange:function(t,e){var n=e.value;switch(t){case"reset":c.internalReset();break;case"speed":c.handleSpeedChange(n);break;case"backward":c.internalBackward();break;case"playPause":"play"===n?c.internalPlay():c.internalPause();break;case"forward":c.internalForward();break;case"selectionType":c.handleSelectionTypeChange(n);break;case"chartType":c.handleChartTypeChange(n);break;default:break}}}),a);"time"===e&&(l.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(l)},e.prototype.dispatchOnChange=function(t){var e=this.data,n=this.attributes.onChange,r=this.states,i=r.values,o=r.selectionType,s=Ge(i,2),a=s[0],c=s[1],l=c===1/0?e.at(-1).time:c,u="range"===o?[a,l]:l,h=function(t,e){if(Array.isArray(t)){if(!Array.isArray(e))return!1;if(t[0]===e[0]){if(t[1]===e[1])return!0;if(t[1]===1/0||e[1]===1/0)return!0}return!1}return!Array.isArray(e)&&t===e};t&&h(t,u)||null===n||void 0===n||n("range"===o?[a,l]:l)},e.prototype.internalReset=function(t){var e,n,r=this.states.selectionType;this.internalPause(),this.setBySliderValues("range"===r?[0,1]:[0,0]),this.renderController(),this.updateSelection(),t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onReset)||void 0===n||n.call(e),this.dispatchOnChange())},e.prototype.reset=function(){this.internalReset()},e.prototype.moveSelection=function(t,e){var n=this.data,r=n.length,i=this.states,o=i.values,s=i.selectionType,a=i.playMode,c=Ge(o,2),l=c[0],u=c[1],h=n.findIndex((function(t){var e=t.time;return e===l})),d=n.findIndex((function(t){var e=t.time;return e===u}));-1===d&&(d=r);var f,p="backward"===t?-1:1;"range"===s?"acc"===a?(f=[h,d+p],-1===p&&h===d&&(f=[h,r])):f=[h+p,d+p]:f=[h,d+p];var g=function(t){var e=Ge(t.sort((function(t,e){return t-e})),2),n=e[0],i=e[1],o=function(t){return Le(t,0,r)};return i>r?"value"===s?[0,0]:"acc"===a?[o(n),o(n)]:[0,o(i-n)]:n<0?"acc"===a?[0,o(i)]:[o(n+r-i),r]:[o(n),o(i)]},v=g(f);return this.setByIndex(v),this.updateSelection(),v},e.prototype.internalBackward=function(t){var e,n,r=this.moveSelection("backward",t);return t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onBackward)||void 0===n||n.call(e),this.dispatchOnChange()),r},e.prototype.backward=function(){this.internalBackward()},e.prototype.internalPlay=function(t){var e,n,r=this,i=this.data,o=this.attributes.loop,s=this.states.speed,a=void 0===s?1:s;this.playInterval=window.setInterval((function(){var t=r.internalForward();t[1]!==i.length||o||(r.internalPause(),r.renderController())}),1e3/a),this.states.state="play",!t&&(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onPlay)||void 0===n||n.call(e))},e.prototype.play=function(){this.internalPlay()},e.prototype.internalPause=function(t){var e,n;clearInterval(this.playInterval),this.states.state="pause",!t&&(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onPause)||void 0===n||n.call(e))},e.prototype.pause=function(){this.internalPause()},e.prototype.internalForward=function(t){var e,n,r=this.moveSelection("forward",t);return t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onForward)||void 0===n||n.call(e),this.dispatchOnChange()),r},e.prototype.forward=function(){this.internalForward()},e.prototype.handleSpeedChange=function(t){var e,n;this.states.speed=t;var r=this.states.state;"play"===r&&(this.internalPause(!0),this.internalPlay(!0)),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onSpeedChange)||void 0===n||n.call(e,t)},e.prototype.handleSelectionTypeChange=function(t){var e,n;this.states.selectionType=t,this.renderChart(),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onSelectionTypeChange)||void 0===n||n.call(e,t)},e.prototype.handleChartTypeChange=function(t){var e,n;this.states.chartType=t,this.renderChart(),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onChartTypeChange)||void 0===n||n.call(e,t)},e.prototype.render=function(){var t=this.space,e=t.axisBBox,n=t.controllerBBox,r=t.timelineBBox;this.renderController(n),this.renderAxis(e),this.renderChart(r),"play"===this.states.state&&this.internalPlay()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.internalPause(!0)},e.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},e}(fP);function Tj(t){return t instanceof Date}var Aj=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))},Cj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Pj=["timestamp","time","date","datetime"];class Rj extends ET{get padding(){return Hf(this.options.padding)}constructor(t,e){super(t,Object.assign({},Rj.defaultOptions,e)),this.backup(),this.upsertTimebar()}play(){var t;null===(t=this.timebar)||void 0===t||t.play()}pause(){var t;null===(t=this.timebar)||void 0===t||t.pause()}forward(){var t;null===(t=this.timebar)||void 0===t||t.forward()}backward(){var t;null===(t=this.timebar)||void 0===t||t.backward()}reset(){var t;null===(t=this.timebar)||void 0===t||t.reset()}update(t){super.update(t),this.backup(),this.upsertTimebar()}backup(){this.originalData=_j(this.context.graph.getData())}upsertTimebar(){const{canvas:t}=this.context,e=this.options,{onChange:n,timebarType:r,data:i,x:o,y:s,width:a,height:c,mode:l}=e,u=Cj(e,["onChange","timebarType","data","x","y","width","height","mode"]),h=t.getSize(),[d]=this.padding;this.upsertCanvas().ready.then((()=>{var t;const e=Object.assign(Object.assign({x:h[0]/2-a/2,y:d,onChange:t=>{const e=(kn(t)?t:[t,t]).map((t=>Tj(t)?t.getTime():t));"modify"===this.options.mode?this.filterElements(e):this.hiddenElements(e),null===n||void 0===n||n(e)}},u),{data:i.map((t=>Ae(t)?{time:t,value:0}:t)),width:a,height:c,type:r});this.timebar?this.timebar.update(e):(this.timebar=new Nj({style:e}),null===(t=this.canvas)||void 0===t||t.appendChild(this.timebar))}))}upsertCanvas(){if(this.canvas)return this.canvas;const{className:t,height:e,position:n}=this.options,r=this.context.canvas,[i]=r.getSize(),[o,,s]=this.padding,[a,c]=v_({width:i,height:e+o+s,graphCanvas:r,className:"timebar",placement:n});return this.container=a,t&&a.classList.add(t),this.canvas=c,this.canvas}filterElements(t){return Aj(this,void 0,void 0,(function*(){var e;if(!this.originalData)return;const{elementTypes:n,getTime:r}=this.options,{graph:i,element:o}=this.context,s=_j(this.originalData);n.forEach((e=>{const n=`${e}s`;s[n]=(this.originalData[n]||[]).filter((e=>{const n=r(e);return!!Lj(n,t)}))}));const a=[...s.nodes,...s.combos].map((t=>rg(t)));s.edges=s.edges.filter((t=>{const e=t.source,n=t.target;return a.includes(e)&&a.includes(n)})),i.setData(s),yield null===(e=o.draw({animation:!1,silence:!0}))||void 0===e?void 0:e.finished}))}hiddenElements(t){const{graph:e}=this.context,{elementTypes:n,getTime:r}=this.options,i=[],o=[];n.forEach((e=>{var n;const s=`${e}s`,a=(null===(n=this.originalData)||void 0===n?void 0:n[s])||[];a.forEach((e=>{const n=rg(e),s=r(e);Lj(s,t)?o.push(n):i.push(n)}))})),e.hideElement(i,!1),e.showElement(o,!1)}destroy(){var t,e,n;const{graph:r}=this.context;this.originalData&&r.setData(Object.assign({},this.originalData)),null===(t=this.timebar)||void 0===t||t.destroy(),null===(e=this.canvas)||void 0===e||e.destroy(),null===(n=this.container)||void 0===n||n.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,super.destroy()}}Rj.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:t=>Dj(t,Pj,void 0),loop:!1};const _j=t=>{const{nodes:e=[],edges:n=[],combos:r=[]}=t;return{nodes:[...e],edges:[...n],combos:[...r]}},Lj=(t,e)=>{if(Ae(e))return t===e;const[n,r]=e;return t>=n&&t<=r},Dj=(t,e,n)=>{var r;for(let i=0;i<e.length;i++){const n=e[i],o=null===(r=t.data)||void 0===r?void 0:r[n];if(o)return o}return n};function Ij(t){const e={top:"unset",right:"unset",bottom:"unset",left:"unset"},n=t.split("-");return n.forEach((t=>{e[t]="8px"})),e.flexDirection=t.startsWith("top")||t.startsWith("bottom")?"row":"column",e}const jj="\n  .g6-toolbar {\n    position: absolute;\n    z-index: 100;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);\n    opacity: 0.65;\n  }\n  .g6-toolbar .g6-toolbar-item {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    padding: 4px;\n    cursor: pointer;\n    box-sizing: content-box;\n  }\n\n  .g6-toolbar .g6-toolbar-item:hover {\n    background-color: #f0f0f0;\n  }\n\n  .g6-toolbar .g6-toolbar-item svg {\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n  }\n",Fj='\n  <svg>\n    <symbol id="zoom-in" viewBox="64 64 896 896">\n      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>\n    </symbol>\n    <symbol id="zoom-out" viewBox="64 64 896 896">\n      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>\n    </symbol>\n    <symbol id="edit" viewBox="64 64 896 896">\n      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>\n    </symbol>\n    <symbol id="delete" viewBox="64 64 896 896">\n      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>\n    </symbol>\n    <symbol id="redo" viewBox="64 64 896 896">\n      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>\n    </symbol>\n    <symbol id="undo" viewBox="64 64 896 896">\n      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>\n    </symbol>\n    <symbol id="export" viewBox="64 64 896 896">\n      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>\n    </symbol>\n    <symbol id="auto-fit" viewBox="64 64 896 896">\n      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>\n      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>\n    </symbol>\n    <symbol id="reset" viewBox="64 64 896 896">\n      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>\n    </symbol>\n    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">\n      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>\n    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">\n      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>\n  </svg>\n';var Bj=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class zj extends ET{constructor(t,e){super(t,Object.assign({},zj.defaultOptions,e)),this.$element=kT("toolbar",!1),this.onToolbarItemClick=t=>{const{onClick:e}=this.options;if(t.target instanceof Element&&t.target.className.includes("g6-toolbar-item")){const n=t.target.getAttribute("value");null===e||void 0===e||e(n,t.target)}};const n=this.context.canvas.getContainer();this.$element.style.display="flex",n.appendChild(this.$element),ST("g6-toolbar-css","style",{},jj,document.head),ST("g6-toolbar-svgicon","div",{display:"none"},Fj),this.$element.addEventListener("click",this.onToolbarItemClick),this.update(e)}update(t){const e=Object.create(null,{update:{get:()=>super.update}});return Bj(this,void 0,void 0,(function*(){e.update.call(this,t);const{className:n,position:r,style:i}=this.options;this.$element.className=`g6-toolbar ${n||""}`,Object.assign(this.$element.style,i,Ij(r)),this.$element.innerHTML=yield this.getDOMContent()}))}destroy(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),super.destroy()}getDOMContent(){return Bj(this,void 0,void 0,(function*(){const t=yield this.options.getItems();return t.map((t=>{var e;return`\n          <div class="g6-toolbar-item" value="${t.value}" title="${null!==(e=t.title)&&void 0!==e?e:""}">\n            <svg aria-hidden="true" focusable="false">\n              <use xlink:href="#${t.id}"></use>\n            </svg>\n          </div>`})).join("")}))}}function Gj(t){var e=document.createElement("div");e.innerHTML=t;var n=e.childNodes[0];return n&&e.contains(n)&&e.removeChild(n),n}function Vj(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t}zj.defaultOptions={position:"top-left"};var Wj=Vj,Uj=function(t,e){null!=e?t.replaceChildren?Array.isArray(e)?t.replaceChildren.apply(t,We([],Ge(e),!1)):t.replaceChildren(e):(t.innerHTML="",Array.isArray(e)?e.forEach((function(e){return t.appendChild(e)})):t.appendChild(e)):t.innerHTML=""};function Hj(t){return void 0===t&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var $j={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function Yj(t){var e;void 0===t&&(t="");var n=Hj(t);return e={},e[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(n.NAME_LABEL)]=je({flex:1},$j),e[".".concat(n.VALUE)]=je({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},$j),e[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var qj=function(t){function e(e){var n,r,i=this,o=null===(r=null===(n=e.style)||void 0===n?void 0:n.template)||void 0===r?void 0:r.prefixCls,s=Hj(o);return i=t.call(this,e,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(s.CONTAINER,'"></div>'),title:'<div class="'.concat(s.TITLE,'"></div>'),item:'<li class="'.concat(s.LIST_ITEM,'" data-index={index}>\n        <span class="').concat(s.NAME,'">\n          <span class="').concat(s.MARKER,'" style="background:{color}"></span>\n          <span class="').concat(s.NAME_LABEL,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(s.VALUE,'" title="{value}">{value}</span>\n      </li>')},style:Yj(o)})||this,i.timestamp=-1,i.prevCustomContentKey=i.attributes.contentKey,i.initShape(),i.render(i.attributes,i),i}return Ie(e,t),Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){var t=this.element.offsetWidth,e=this.element.offsetHeight;return{width:t,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var t=this.attributes,e=t.data,n=t.template;return e.map((function(t,e){var r=t.name,i=void 0===r?"":r,o=t.color,s=void 0===o?"black":o,a=t.index,c=Fe(t,["name","color","index"]),l=je({name:i,color:s,index:null!==a&&void 0!==a?a:e},c);return Gj(Wj(n.item,l))}))},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var e;null===(e=this.element)||void 0===e||e.remove(),t.prototype.destroy.call(this)},e.prototype.show=function(t,e){var n=this;if(void 0!==t&&void 0!==e){var r="hidden"===this.element.style.visibility,i=function(){n.attributes.x=null!==t&&void 0!==t?t:n.attributes.x,n.attributes.y=null!==e&&void 0!==e?e:n.attributes.y,n.updatePosition()};r?this.closeTransition(i):i()}this.element.style.visibility="visible"},e.prototype.hide=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.attributes.enterable;n&&this.isCursorEntered(t,e)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var t=this.attributes.template;this.element=Gj(t.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(void 0===this.prevCustomContentKey||this.prevCustomContentKey!==this.attributes.contentKey){this.prevCustomContentKey=this.attributes.contentKey;var t=this.attributes.content;t&&("string"===typeof t?this.element.innerHTML=t:Uj(this.element,t))}},e.prototype.renderHTMLTooltipElement=function(){var t,e,n=this.attributes,r=n.template,i=n.title,o=n.enterable,s=n.style,a=n.content,c=Hj(r.prefixCls),l=this.element;if(this.element.style.pointerEvents=o?"auto":"none",a)this.renderCustomContent();else{i?(l.innerHTML=r.title,l.getElementsByClassName(c.TITLE)[0].innerHTML=i):null===(e=null===(t=l.getElementsByClassName(c.TITLE))||void 0===t?void 0:t[0])||void 0===e||e.remove();var u=this.HTMLTooltipItemsElements,h=document.createElement("ul");h.className=c.LIST,Uj(h,u);var d=this.element.querySelector(".".concat(c.LIST));d?d.replaceWith(h):l.appendChild(h)}mP(l,s)},e.prototype.getRelativeOffsetFromCursor=function(t){var e=this.attributes,n=e.position,r=e.offset,i=t||n,o=i.split("-"),s={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},a=this.elementSize,c=a.width,l=a.height,u=[-c/2,-l/2];return o.forEach((function(t){var e=Ge(u,2),n=e[0],i=e[1],o=Ge(s[t],2),a=o[0],h=o[1];u=[n+(c/2+r[0])*a,i+(l/2+r[1])*h]})),u},e.prototype.setOffsetPosition=function(t){var e=Ge(t,2),n=e[0],r=e[1],i=this.attributes,o=i.x,s=void 0===o?0:o,a=i.y,c=void 0===a?0:a,l=i.container,u=l.x,h=l.y;this.element.style.left="".concat(+s+u+n,"px"),this.element.style.top="".concat(+c+h+r,"px")},e.prototype.updatePosition=function(){var t=this.attributes.showDelay,e=void 0===t?60:t,n=Date.now();this.timestamp>0&&n-this.timestamp<e||(this.timestamp=n,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(t){var e=Ge(t,2),n=e[0],r=e[1],i=this.attributes,o=i.x,s=i.y,a=i.bounding,c=i.position;if(!a)return[n,r];var l=this.element,u=l.offsetWidth,h=l.offsetHeight,d=Ge([+o+n,+s+r],2),f=d[0],p=d[1],g={left:"right",right:"left",top:"bottom",bottom:"top"},v=a.x,y=a.y,m=a.width,b=a.height,x={left:f<v,right:f+u>v+m,top:p<y,bottom:p+h>y+b},w=[];c.split("-").forEach((function(t){x[t]?w.push(g[t]):w.push(t)}));var E=w.join("-");return this.getRelativeOffsetFromCursor(E)},e.prototype.isCursorEntered=function(t,e){if(this.element){var n=this.element.getBoundingClientRect(),r=n.x,i=n.y,o=n.width,s=n.height;return new PP(r,i,o,s).isPointIn(t,e)}return!1},e.prototype.closeTransition=function(t){var e=this,n=this.element.style.transition;this.element.style.transition="none",t(),setTimeout((function(){e.element.style.transition=n}),10)},e.tag="tooltip",e}(fP),Xj=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class Kj extends ET{constructor(t,e){super(t,Object.assign({},Kj.defaultOptions,e)),this.currentTarget=null,this.tooltipElement=null,this.container=null,this.isEnable=(t,e)=>{const{enable:n}=this.options;return"function"===typeof n?n(t,e):n},this.onClick=t=>{const{target:{id:e}}=t;this.currentTarget===e?this.hide(t):this.show(t)},this.onPointerMove=t=>{const{target:e}=t;this.currentTarget&&e.id!==this.currentTarget&&this.show(t)},this.onPointerLeave=t=>{this.hide(t)},this.onCanvasMove=t=>{this.hide(t)},this.onPointerOver=t=>{this.show(t)},this.showById=t=>Xj(this,void 0,void 0,(function*(){const e={target:{id:t}};yield this.show(e)})),this.getElementData=(t,e)=>{const{model:n}=this.context;switch(e){case"node":return n.getNodeData([t]);case"edge":return n.getEdgeData([t]);case"combo":return n.getComboData([t]);default:return[]}},this.show=t=>Xj(this,void 0,void 0,(function*(){var e,n;const{client:r,target:{id:i}}=t;if(gw(t.target))return;const o=this.context.graph.getElementType(i),{getContent:s,title:a}=this.options,c=this.getElementData(i,o);if(!this.tooltipElement||!this.isEnable(t,c))return;let l,u,h={};if(s){if(h.content=yield s(t,c),!h.content)return}else{const t=this.context.graph.getElementRenderStyle(i),e="node"===o?t.fill:t.stroke;h={title:a||o,data:c.map((t=>({name:"ID",value:t.id||`${t.source} -> ${t.target}`,color:e})))}}if(this.currentTarget=i,r)l=r.x,u=r.y;else{const t=_v(c,"0.style",{x:0,y:0});l=t.x,u=t.y}null===(n=(e=this.options).onOpenChange)||void 0===n||n.call(e,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:l,y:u,style:{".tooltip":{visibility:"visible"}}}),h))})),this.hide=t=>{var e,n,r,i,o;if(!t)return null===(n=(e=this.options).onOpenChange)||void 0===n||n.call(e,!1),null===(r=this.tooltipElement)||void 0===r||r.hide(),void(this.currentTarget=null);if(!this.tooltipElement)return;if(!this.currentTarget)return;const{client:{x:s,y:a}}=t;null===(o=(i=this.options).onOpenChange)||void 0===o||o.call(i,!1),this.tooltipElement.hide(s,a),this.currentTarget=null},this.initTooltip=()=>{var t;const e=new qj({className:"tooltip",style:this.tooltipStyleProps});return null===(t=this.container)||void 0===t||t.appendChild(e.HTMLTooltipElement),e},this.render(),this.bindEvents()}getEvents(){return"click"===this.options.trigger?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerover":this.onPointerOver,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerover":this.onPointerOver,"edge:pointermove":this.onPointerMove,"combo:pointerover":this.onPointerOver,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}update(t){var e;this.unbindEvents(),super.update(t),this.tooltipElement&&(null===(e=this.container)||void 0===e||e.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}render(){const{canvas:t}=this.context,e=t.getContainer();e&&(this.container=e,this.tooltipElement=this.initTooltip())}unbindEvents(){const{graph:t}=this.context,e=this.getEvents();Object.keys(e).forEach((n=>{t.off(n,e[n])}))}bindEvents(){const{graph:t}=this.context,e=this.getEvents();Object.keys(e).forEach((n=>{t.on(n,e[n])}))}get tooltipStyleProps(){const{canvas:t}=this.context,{center:e}=t.getBounds(),n=t.getContainer(),{top:r,left:i}=n.getBoundingClientRect(),{style:o,position:s,enterable:a,container:c={x:-i,y:-r},title:l,offset:u}=this.options,[h,d]=e,[f,p]=t.getSize();return{x:h,y:d,container:c,title:l,bounding:{x:0,y:0,width:f,height:p},position:s,enterable:a,offset:u,style:o}}destroy(){var t;this.unbindEvents(),this.tooltipElement&&(null===(t=this.container)||void 0===t||t.removeChild(this.tooltipElement.HTMLTooltipElement)),super.destroy()}}Kj.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var Zj=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};let Jj;function Qj(t,e){Jj||(Jj=document.createElement("canvas")),Jj.width=t,Jj.height=e;const n=Jj.getContext("2d");return n.clearRect(0,0,t,e),Jj}function tF(t,e,n,r){return Zj(this,void 0,void 0,(function*(){const i=Qj(t,e),o=i.getContext("2d"),{rotate:s,opacity:a,textFill:c,textFontSize:l,textFontFamily:u,textFontVariant:h,textFontWeight:d,textAlign:f,textBaseline:p}=r;return o.textAlign=f,o.textBaseline=p,o.translate(t/2,e/2),o.font=`${l}px ${u} ${h} ${d}`,s&&o.rotate(s),a&&(o.globalAlpha=a),c&&(o.fillStyle=c,o.fillText(`${n}`,0,0)),i.toDataURL()}))}function eF(t,e,n,r){return Zj(this,void 0,void 0,(function*(){const i=Qj(t,e),o=i.getContext("2d"),{rotate:s,opacity:a}=r;s&&o.rotate(s),a&&(o.globalAlpha=a);const c=new Image;return c.crossOrigin="anonymous",c.src=n,new Promise((n=>{c.onload=function(){const r=t>c.width?(t-c.width)/2:0,s=e>c.height?(e-c.height)/2:0;o.drawImage(c,0,0,c.width,c.height,r,s,t-2*r,e-2*s),n(i.toDataURL())}}))}))}var nF=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))},rF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class iF extends ET{constructor(t,e){super(t,Object.assign({},iF.defaultOptions,e)),this.$element=kT("watermark");const n=this.context.canvas.getContainer();n.appendChild(this.$element),this.update(e)}update(t){const e=Object.create(null,{update:{get:()=>super.update}});return nF(this,void 0,void 0,(function*(){e.update.call(this,t);const n=this.options,{width:r,height:i,text:o,imageURL:s}=n,a=rF(n,["width","height","text","imageURL"]);Object.keys(a).forEach((e=>{e.startsWith("background")&&(this.$element.style[e]=t[e])}));const c=s?yield eF(r,i,s,a):yield tF(r,i,o,a);this.$element.style.backgroundImage=`url(${c})`}))}destroy(){super.destroy(),this.$element.remove()}}iF.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};const oF=["#7E92B5","#F4664A","#FFBE3A"],sF={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},aF={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function cF(t){const{bgColor:e,textColor:n,nodeColor:r,nodeColorDisabled:i,nodeStroke:o,nodeHaloStrokeOpacityActive:s=.15,nodeHaloStrokeOpacitySelected:a=.25,nodeOpacityDisabled:c=.06,nodeIconOpacityInactive:l=.85,nodeOpacityInactive:u=.25,nodeBadgePalette:h=oF,nodePaletteOptions:d=sF,edgeColor:f,edgeColorDisabled:p,edgePaletteOptions:g=aF,comboColor:v,comboColorDisabled:y,comboStroke:m,comboStrokeDisabled:b,edgeColorInactive:x}=t;return{background:e,node:{palette:d,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:h,fill:r,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:n,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:r,portLineWidth:1,portStroke:o,portStrokeOpacity:.65,size:32,stroke:o,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:a,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:o},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:s},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:o,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:u,donutOpacity:u,fillOpacity:u,iconOpacity:l,labelFill:n,labelFillOpacity:u,strokeOpacity:u},disabled:{badgeBackgroundOpacity:.25,donutOpacity:c,fill:i,fillOpacity:c,iconFill:i,iconOpacity:.25,labelFill:n,labelFillOpacity:.25,strokeOpacity:c}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:g,style:{badgeBackgroundFill:f,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:f,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:x,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:p,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:e,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:v,halo:!1,haloLineWidth:12,haloStroke:m,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:m},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:y,fillOpacity:.25,labelOpacity:.25,stroke:b,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}}}const lF={type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},uF={bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:lF,nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"},hF=cF(uF),dF={bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"},fF=cF(dF);class pF extends mg{beforeDraw(t,e){return t}afterLayout(t,e){}}class gF extends pF{beforeDraw(t){const{model:e}=this.context,n=t.add.combos,r=t=>{const n=[];return t.forEach(((t,r)=>{const i=e.getAncestorsData(r,"combo"),o=i.map((t=>rg(t))).reverse();n.push([r,t,o.length])})),new Map(n.sort((([,,t],[,,e])=>e-t)).map((([t,e])=>[t,e])))};return t.add.combos=r(n),t.update.combos=r(t.update.combos),t}}function vF(t,e,n,r,i){const o=rg(r),s=`${n}s`,a=i?r:t.add[s].get(o)||t.update[s].get(o)||t.remove[s].get(o)||r;Object.entries(t).forEach((([t,n])=>{e===t?n[s].set(o,a):n[s].delete(o)}))}function yF(t,e){return Object.keys(t).every((n=>t[n]===e[n]))}class mF extends pF{beforeDraw(t,e){if("visibility"===e.stage)return t;if(!this.context.model.model.hasTreeStructure(cf))return t;const{model:n}=this.context,{add:r,update:i}=t,o=[...t.update.combos.entries(),...t.add.combos.entries()];while(o.length){const[e,s]=o.pop();if(Rv(s)){const s=n.getDescendantsData(e),a=s.map(rg),{internal:c,external:l}=lx(a,(t=>n.getRelatedEdgesData(t)));s.forEach((e=>{const r=rg(e),i=o.findIndex((([t])=>t===r));-1!==i&&o.splice(i,1);const s=n.getElementType(r);vF(t,"remove",s,e)})),c.forEach((e=>vF(t,"remove","edge",e))),l.forEach((t=>{var e;const n=rg(t),o=null===(e=this.context.element)||void 0===e?void 0:e.getElement(n);o?i.edges.set(n,t):r.edges.set(n,t)}))}else{const r=n.getChildrenData(e),i=r.map(rg),{edges:s}=lx(i,(t=>n.getRelatedEdgesData(t)));[...r,...s].forEach((e=>{var r;const i=rg(e),s=n.getElementType(i),a=null===(r=this.context.element)||void 0===r?void 0:r.getElement(i);vF(t,a?"update":"add",s,e),"combo"===s&&o.push([i,e])}))}}return t}}const bF=(t,e,n,r)=>{const i=`${n}s`,o=rg(r);t.add[i].has(o)||t.update[i].has(o)||t[e][i].set(rg(r),r)};class xF extends pF{getElement(t){return this.context.element.getElement(t)}handleExpand(t,e){if(bF(e,"add","node",t),Rv(t))return;const n=rg(t);bF(e,"add","node",t);const r=this.context.model.getRelatedEdgesData(n);r.forEach((t=>{vF(e,"add","edge",t)}));const i=this.context.model.getChildrenData(n);i.forEach((t=>{this.handleExpand(t,e)}))}beforeDraw(t){const{graph:e,model:n}=this.context;if(!n.model.hasTreeStructure(lf))return t;const{add:{nodes:r,edges:i},update:{nodes:o}}=t,s=new Map,a=new Map;r.forEach(((t,e)=>{Rv(t)&&s.set(e,t)})),i.forEach((t=>{if("node"!==e.getElementType(t.source))return;const n=e.getNodeData(t.source);Rv(n)&&s.set(t.source,n)})),o.forEach(((t,e)=>{const n=this.getElement(e);if(!n)return;const r=n.attributes.collapsed;Rv(t)?r||s.set(e,t):r&&a.set(e,t)}));const c=new Set;return s.forEach(((e,r)=>{const i=n.getDescendantsData(r);i.forEach((e=>{const r=rg(e);if(c.has(r))return;vF(t,"remove","node",e);const i=n.getRelatedEdgesData(r);i.forEach((e=>{vF(t,"remove","edge",e)})),c.add(r)}))})),a.forEach(((e,r)=>{const i=n.getAncestorsData(r,lf);i.some(Rv)?vF(t,"remove","node",e):this.handleExpand(e,t)})),t}}new WeakMap;function wF(t,e,n){const r=hf[t][e];r&&vf.warn(`The extension ${e} of ${t} has been registered before, and will be overridden.`),Object.assign(hf[t],{[e]:n})}
/*!
 * @antv/g-plugin-dragndrop
 * @description A G plugin for Drag n Drop implemented with PointerEvents
 * @version 2.0.38
 * @date 7/30/2025, 1:35:41 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */
var EF=function(){function t(e){h(this,t),this.dragndropPluginOptions=e}return f(t,[{key:"apply",value:function(e){var n=this,r=e.renderingService,i=e.renderingContext,o=i.root.ownerDocument,s=o.defaultView,a=function(t){var e=t.target,r=e===o,i=r&&n.dragndropPluginOptions.isDocumentDraggable?o:e.closest&&e.closest("[draggable=true]");if(i){var a=!1,c=t.timeStamp,l=[t.clientX,t.clientY],u=null,h=[t.clientX,t.clientY],d=function(){var t=Lr(Rr().mark((function t(s){var d,f,p,g,v,y;return Rr().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}if(d=s.timeStamp-c,f=Ce([s.clientX,s.clientY],l),!(d<=n.dragndropPluginOptions.dragstartTimeThreshold||f<=n.dragndropPluginOptions.dragstartDistanceThreshold)){t.next=1;break}return t.abrupt("return");case 1:s.type="dragstart",i.dispatchEvent(s),a=!0;case 2:if(s.type="drag",s.dx=s.clientX-h[0],s.dy=s.clientY-h[1],i.dispatchEvent(s),h=[s.clientX,s.clientY],r){t.next=4;break}return p="pointer"===n.dragndropPluginOptions.overlap?[s.canvasX,s.canvasY]:e.getBounds().center,t.next=3,o.elementsFromPoint(p[0],p[1]);case 3:g=t.sent,v=g[g.indexOf(e)+1],y=(null===v||void 0===v?void 0:v.closest("[droppable=true]"))||(n.dragndropPluginOptions.isDocumentDroppable?o:null),u!==y&&(u&&(s.type="dragleave",s.target=u,u.dispatchEvent(s)),y&&(s.type="dragenter",s.target=y,y.dispatchEvent(s)),u=y,u&&(s.type="dragover",s.target=u,u.dispatchEvent(s)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();s.addEventListener("pointermove",d);var f=function(t){if(a){t.detail={preventClick:!0};var e=t.clone();u&&(e.type="drop",e.target=u,u.dispatchEvent(e)),e.type="dragend",i.dispatchEvent(e),a=!1}s.removeEventListener("pointermove",d)};e.addEventListener("pointerup",f,{once:!0}),e.addEventListener("pointerupoutside",f,{once:!0})}};r.hooks.init.tap(t.tag,(function(){s.addEventListener("pointerdown",a)})),r.hooks.destroy.tap(t.tag,(function(){s.removeEventListener("pointerdown",a)}))}}])}();EF.tag="Dragndrop";var kF=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,e),t=S(this,e),t.name="dragndrop",t.options=n,t}return O(e,t),f(e,[{key:"init",value:function(){this.addRenderingPlugin(new EF(u({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(t){Object.assign(this.plugins[0].dragndropPluginOptions,t)}}])}(Vr),SF=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))},MF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const OF=["main"],NF=["background","main","label","transient"];function TF(t){return t.main}class AF{getConfig(){return this.config}getLayer(t="main"){return this.extends.layers[t]||TF(this.getLayers())}getLayers(){return this.extends.layers}getRenderer(t){return this.extends.renderers[t]}getCamera(t="main"){return this.getLayer(t).getCamera()}getRoot(t="main"){return this.getLayer(t).getRoot()}getContextService(t="main"){return this.getLayer(t).getContextService()}setCursor(t){this.config.cursor=t,this.getLayer().setCursor(t)}get document(){return this.getLayer().document}get context(){return this.getLayer().context}constructor(t){this.config={enableMultiLayer:!0},Object.assign(this.config,t);const e=this.config,{renderer:n,background:r,cursor:i,enableMultiLayer:o}=e,s=MF(e,["renderer","background","cursor","enableMultiLayer"]),a=o?NF:OF,c=CF(n,a),l=Object.fromEntries(a.map((t=>{const e=new dh(Object.assign(Object.assign({},s),{supportsMutipleCanvasesInOneContainer:o,renderer:c[t],background:o?"background"===t?r:void 0:r}));return[t,e]})));PF(l),this.extends={config:this.config,renderer:n,renderers:c,layers:l}}get ready(){return Promise.all(Object.entries(this.getLayers()).map((([,t])=>t.ready)))}resize(t,e){Object.assign(this.extends.config,{width:t,height:e}),Object.values(this.getLayers()).forEach((n=>{const r=n.getCamera(),i=r.getPosition(),o=r.getFocalPoint();n.resize(t,e),r.setPosition(i),r.setFocalPoint(o)}))}getBounds(t){return Qf(Object.values(this.getLayers()).map((e=>{const n=t?e.getRoot().childNodes.find((e=>e.classList.includes(t))):e.getRoot();return n})).filter((t=>(null===t||void 0===t?void 0:t.childNodes.length)>0)).map((t=>t.getBounds())))}getContainer(){const t=this.extends.config.container;return"string"===typeof t?document.getElementById(t):t}getSize(){return[this.extends.config.width||0,this.extends.config.height||0]}appendChild(t,e){var n;const r=(null===(n=t.style)||void 0===n?void 0:n.$layer)||"main";return this.getLayer(r).appendChild(t,e)}setRenderer(t){if(t===this.extends.renderer)return;const e=CF(t,this.config.enableMultiLayer?NF:OF);this.extends.renderers=e,Object.entries(e).forEach((([t,e])=>this.getLayer(t).setRenderer(e))),PF(this.getLayers())}getCanvasByViewport(t){return Jg(this.getLayer().viewport2Canvas(Qg(t)))}getViewportByCanvas(t){return Jg(this.getLayer().canvas2Viewport(Qg(t)))}getViewportByClient(t){return Jg(this.getLayer().client2Viewport(Qg(t)))}getClientByViewport(t){return Jg(this.getLayer().viewport2Client(Qg(t)))}getClientByCanvas(t){return this.getClientByViewport(this.getViewportByCanvas(t))}getCanvasByClient(t){const e=this.getLayer(),n=e.client2Viewport(Qg(t));return Jg(e.viewport2Canvas(n))}toDataURL(){return SF(this,arguments,void 0,(function*(t={}){const e=globalThis.devicePixelRatio||1,{mode:n="viewport"}=t,r=MF(t,["mode"]);let[i,o,s,a]=[0,0,0,0];if("viewport"===n)[s,a]=this.getSize();else if("overall"===n){const t=this.getBounds(),e=Xf(t);[i,o]=t.min,[s,a]=e}const c=Gj('<div id="virtual-image"></div>'),l=new dh({width:s,height:a,renderer:new fb,devicePixelRatio:e,container:c,background:this.extends.config.background});yield l.ready,l.appendChild(this.getLayer("background").getRoot().cloneNode(!0)),l.appendChild(this.getRoot().cloneNode(!0));const u=this.getLayer("label").getRoot().cloneNode(!0),h=l.viewport2Canvas({x:0,y:0}),d=this.getCanvasByViewport([0,0]);u.translate([d[0]-h.x,d[1]-h.y]),u.scale(1/this.getCamera().getZoom()),l.appendChild(u),l.appendChild(this.getLayer("transient").getRoot().cloneNode(!0));const f=this.getCamera(),p=l.getCamera();if("viewport"===n)p.setZoom(f.getZoom()),p.setPosition(f.getPosition()),p.setFocalPoint(f.getFocalPoint());else if("overall"===n){const[t,e,n]=p.getPosition(),[r,s,a]=p.getFocalPoint();p.setPosition([t+i,e+o,n]),p.setFocalPoint([r+i,s+o,a])}const g=l.getContextService();return new Promise((t=>{l.addEventListener(rh.RERENDER,(()=>SF(this,void 0,void 0,(function*(){yield new Promise((t=>setTimeout(t,300)));const e=yield g.toDataURL(r);t(e)}))))}))}))}destroy(){Object.values(this.getLayers()).forEach((t=>{const e=t.getCamera();e.cancelLandmarkAnimation(),t.destroy()}))}}function CF(t,e){return Object.fromEntries(e.map((e=>{const n=(null===t||void 0===t?void 0:t(e))||new fb;return n instanceof fb&&n.setConfig({enableDirtyRectangleRendering:!1}),"main"===e?n.registerPlugin(new kF({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):n.unregisterPlugin(n.getPlugin("dom-interaction")),[e,n]})))}function PF(t){Object.entries(t).forEach((([t,e])=>{const n=e.getContextService().getDomElement();(null===n||void 0===n?void 0:n.style)&&(n.style.gridArea="1 / 1 / 2 / 2",n.style.outline="none",n.tabIndex=1,"main"!==t&&(n.style.pointerEvents="none")),(null===n||void 0===n?void 0:n.parentElement)&&(n.parentElement.style.display="grid",n.parentElement.style.isolation="isolate")}))}const RF=t=>t?parseInt(t):0;function _F(t){const e=getComputedStyle(t),n=t.clientWidth||RF(e.width),r=t.clientHeight||RF(e.height),i=RF(e.paddingLeft)+RF(e.paddingRight),o=RF(e.paddingTop)+RF(e.paddingBottom);return[n-i,r-o]}function LF(t){if(!t)return[0,0];let e=640,n=480;const[r,i]=_F(t);e=r||e,n=i||n;const o=1,s=1;return[Math.max(Ae(e)?e:o,o),Math.max(Ae(n)?n:s,s)]}class DF{constructor(t){this.type=t}}class IF extends DF{constructor(t,e){super(t),this.data=e}}class jF extends DF{constructor(t,e,n,r){super(t),this.animationType=e,this.animation=n,this.data=r}}class FF extends DF{constructor(t,e,n){super(t),this.elementType=e,this.data=n}}class BF extends DF{constructor(t,e){super(t),this.data=e}}function zF(t,e){t.emit(e.type,e)}function GF(t){if(!t)return null;if(t instanceof Zu)return{type:"canvas",element:t};let e=t;while(e){if(Vx(e))return{type:"node",element:e};if(Wx(e))return{type:"edge",element:e};if(Ux(e))return{type:"combo",element:e};e=e.parentElement}return null}function VF(t){var e;return(null===(e=null===t||void 0===t?void 0:t.style)||void 0===e?void 0:e.zIndex)||0}const WF="cachedStyle",UF=t=>`__${t}__`;function HF(t,e){const n=Array.isArray(e)?e:[e];_v(t,WF)||Lv(t,WF,{}),n.forEach((e=>{Lv(_v(t,WF),UF(e),t.attributes[e])}))}function $F(t,e){return _v(t,[WF,UF(e)])}function YF(t,e){return UF(e)in(_v(t,WF)||{})}class qF{constructor(t){this.tasks=[],this.animations=new Set,this.context=t}getTasks(){const t=[...this.tasks];return this.tasks=[],t}add(t,e){this.tasks.push([t,e])}animate(t,e,n){var r,i,o;null===(r=null===e||void 0===e?void 0:e.before)||void 0===r||r.call(e);const s=this.getTasks().map((([e,r])=>{var i,o,s;const{element:a,elementType:c,stage:l}=e,u=kf(this.context.options,c,l,t);null===(i=null===r||void 0===r?void 0:r.before)||void 0===i||i.call(r);const h=u.length?Of(a,this.inferStyle(e,n),u):null;return h?(null===(o=null===r||void 0===r?void 0:r.beforeAnimate)||void 0===o||o.call(r,h),h.finished.then((()=>{var t,e;null===(t=null===r||void 0===r?void 0:r.afterAnimate)||void 0===t||t.call(r,h),null===(e=null===r||void 0===r?void 0:r.after)||void 0===e||e.call(r),this.animations.delete(h)}))):null===(s=null===r||void 0===r?void 0:r.after)||void 0===s||s.call(r),h})).filter(Boolean);s.forEach((t=>this.animations.add(t)));const a=mf(s);return a?(null===(i=null===e||void 0===e?void 0:e.beforeAnimate)||void 0===i||i.call(e,a),a.finished.then((()=>{var t,n;null===(t=null===e||void 0===e?void 0:e.afterAnimate)||void 0===t||t.call(e,a),null===(n=null===e||void 0===e?void 0:e.after)||void 0===n||n.call(e),this.release()}))):null===(o=null===e||void 0===e?void 0:e.after)||void 0===o||o.call(e),a}inferStyle(t,e){var n,r;const{element:i,elementType:o,stage:s,originalStyle:a,updatedStyle:c={}}=t;t.modifiedStyle||(t.modifiedStyle=Object.assign(Object.assign({},a),c));const{modifiedStyle:l}=t,u={},h={};if("enter"===s)Object.assign(u,{opacity:0});else if("exit"===s)Object.assign(h,{opacity:0});else if("show"===s)Object.assign(u,{opacity:0}),Object.assign(h,{opacity:null!==(n=$F(i,"opacity"))&&void 0!==n?n:xf("opacity")});else if("hide"===s)Object.assign(u,{opacity:null!==(r=$F(i,"opacity"))&&void 0!==r?r:xf("opacity")}),Object.assign(h,{opacity:0});else if("collapse"===s){const{collapse:t}=e||{},{target:n,descendants:r,position:s}=t;if("node"===o){if(r.includes(i.id)){const[t,e,n]=s;Object.assign(h,{x:t,y:e,z:n})}}else if("combo"===o){if(i.id===n||r.includes(i.id)){const[t,e]=s;Object.assign(h,{x:t,y:e,childrenNode:a.childrenNode})}}else"edge"===o&&Object.assign(h,{sourceNode:l.sourceNode,targetNode:l.targetNode})}else if("expand"===s){const{expand:t}=e||{},{target:n,descendants:r,position:s}=t;if("node"===o){if(i.id===n||r.includes(i.id)){const[t,e,n]=s;Object.assign(u,{x:t,y:e,z:n})}}else if("combo"===o){if(i.id===n||r.includes(i.id)){const[t,e,n]=s;Object.assign(u,{x:t,y:e,z:n,childrenNode:l.childrenNode})}}else"edge"===o&&Object.assign(u,{sourceNode:l.sourceNode,targetNode:l.targetNode})}return[Object.keys(u).length>0?Object.assign({},a,u):a,Object.keys(h).length>0?Object.assign({},l,h):l]}stop(){this.animations.forEach((t=>t.cancel()))}clear(){this.tasks=[]}release(){var t,e;const{canvas:n}=this.context,r=null===(e=null===(t=n.document)||void 0===t?void 0:t.timeline)||void 0===e?void 0:e.animationsWithPromises;r&&(n.document.timeline.animationsWithPromises=r.filter((t=>"finished"!==t.playState)))}destroy(){this.stop(),this.animations.clear(),this.tasks=[]}}class XF{constructor(t){this.batchCount=0,this.context=t}emit(t){const{graph:e}=this.context;e.emit(t.type,t)}startBatch(t=!0){this.batchCount++,1===this.batchCount&&this.emit(new IF(of.BATCH_START,{initiate:t}))}endBatch(){this.batchCount--,0===this.batchCount&&this.emit(new IF(of.BATCH_END))}get isBatching(){return this.batchCount>0}destroy(){this.context=null}}class KF extends yg{constructor(t){super(t),this.currentTarget=null,this.currentTargetType=null,this.category="behavior",this.forwardCanvasEvents=t=>{const{target:e}=t,n=GF(e);if(!n)return;const{graph:r,canvas:i}=this.context,{type:o,element:s}=n;if("destroyed"in s&&(gw(s)||s.destroyed))return;const{type:a,detail:c,button:l}=t,u=Object.assign(Object.assign({},t),{target:s,targetType:o,originalTarget:e});a===ef.POINTER_MOVE&&(this.currentTarget!==s&&(this.currentTarget&&r.emit(`${this.currentTargetType}:${ef.POINTER_LEAVE}`,Object.assign(Object.assign({},u),{type:ef.POINTER_LEAVE,target:this.currentTarget,targetType:this.currentTargetType})),s&&(Object.assign(u,{type:ef.POINTER_ENTER}),r.emit(`${o}:${ef.POINTER_ENTER}`,u))),this.currentTarget=s,this.currentTargetType=o),a===ef.CLICK&&2===l||(r.emit(`${o}:${a}`,u),r.emit(a,u)),a===ef.CLICK&&2===c&&(Object.assign(u,{type:ef.DBLCLICK}),r.emit(`${o}:${ef.DBLCLICK}`,u),r.emit(ef.DBLCLICK,u)),a===ef.POINTER_DOWN&&2===l&&(Object.assign(u,{type:ef.CONTEXT_MENU,preventDefault:()=>{var t;null===(t=i.getContainer())||void 0===t||t.addEventListener(ef.CONTEXT_MENU,(t=>t.preventDefault()),{once:!0})}}),r.emit(`${o}:${ef.CONTEXT_MENU}`,u),r.emit(ef.CONTEXT_MENU,u))},this.forwardContainerEvents=t=>{this.context.graph.emit(t.type,t)},this.forwardEvents(),this.setBehaviors(this.context.options.behaviors||[])}setBehaviors(t){this.setExtensions(t)}forwardEvents(){const t=this.context.canvas.getContainer();t&&[nf.KEY_DOWN,nf.KEY_UP].forEach((e=>{t.addEventListener(e,this.forwardContainerEvents)}));const e=this.context.canvas.document;e&&[ef.CLICK,ef.DBLCLICK,ef.POINTER_OVER,ef.POINTER_LEAVE,ef.POINTER_ENTER,ef.POINTER_MOVE,ef.POINTER_OUT,ef.POINTER_DOWN,ef.POINTER_UP,ef.CONTEXT_MENU,ef.DRAG_START,ef.DRAG,ef.DRAG_END,ef.DRAG_ENTER,ef.DRAG_OVER,ef.DRAG_LEAVE,ef.DROP,ef.WHEEL].forEach((t=>{e.addEventListener(t,this.forwardCanvasEvents)}))}destroy(){const t=this.context.canvas.getContainer();t&&[nf.KEY_DOWN,nf.KEY_UP].forEach((e=>{t.removeEventListener(e,this.forwardContainerEvents)})),this.context.canvas.document.removeAllEventListeners(),super.destroy()}}function ZF(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}var JF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function QF(t,e){const{data:n,style:r}=t,i=JF(t,["data","style"]),{data:o,style:s}=e,a=JF(e,["data","style"]),c=Object.assign(Object.assign({},i),a);return(n||o)&&Object.assign(c,{data:Object.assign(Object.assign({},n),o)}),(r||s)&&Object.assign(c,{style:Object.assign(Object.assign({},r),s)}),c}function tB(t){const{data:e,style:n}=t,r=JF(t,["data","style"]),i=r;return e&&(i.data=Object.assign({},e)),n&&(i.style=Object.assign({},n)),i}function eB(t={},e={}){const{states:n=[],data:r={},style:i={},children:o=[]}=t,s=JF(t,["states","data","style","children"]),{states:a=[],data:c={},style:l={},children:u=[]}=e,h=JF(e,["states","data","style","children"]),d=(t,e)=>t.length===e.length&&t.every(((t,n)=>t===e[n])),f=(t,e)=>{const n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every((n=>t[n]===e[n]))};return!!f(s,h)&&(!!d(o,u)&&(!!d(n,a)&&(!!f(r,c)&&!!f(i,l))))}var nB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function rB(t){const{id:e=rg(t),style:n,data:r}=t,i=nB(t,["id","style","data"]),o=Object.assign(Object.assign({},t),{style:Object.assign({},n),data:Object.assign({},r)});return Gf(t)?Object.assign({id:e,data:o},i):{id:e,data:o}}function iB(t){return t.data}function oB(t){if(t.hasTreeStructure(lf))return;t.attachTreeStructure(lf);const e=t.getAllEdges();for(const n of e){const{source:e,target:r}=n;t.setParent(r,e,lf)}}class sB{constructor(){this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new jw}pushChange(t){if(this.isTraceless)return;const{type:e}=t;if(e===Zd.NodeUpdated||e===Zd.EdgeUpdated||e===Zd.ComboUpdated){const{value:n,original:r}=t;this.changes.push({value:tB(n),original:tB(r),type:e})}else this.changes.push({value:tB(t.value),type:e})}getChanges(){return this.changes}clearChanges(){this.changes=[]}batch(t){this.batchCount++,this.model.batch(t),this.batchCount--}isBatching(){return this.batchCount>0}silence(t){this.isTraceless=!0,t(),this.isTraceless=!1}isCombo(t){return this.comboIds.has(t)||this.latestRemovedComboIds.has(t)}getData(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}getNodeData(t){return this.model.getAllNodes().reduce(((e,n)=>{const r=iB(n);return this.isCombo(rg(r))||(void 0===t||t.includes(rg(r)))&&e.push(r),e}),[])}getEdgeDatum(t){return iB(this.model.getEdge(t))}getEdgeData(t){return this.model.getAllEdges().reduce(((e,n)=>{const r=iB(n);return(void 0===t||t.includes(rg(r)))&&e.push(r),e}),[])}getComboData(t){return this.model.getAllNodes().reduce(((e,n)=>{const r=iB(n);return this.isCombo(rg(r))?((void 0===t||t.includes(rg(r)))&&e.push(r),e):e}),[])}getRootsData(t=lf){return this.model.getRoots(t).map(iB)}getAncestorsData(t,e){const{model:n}=this;return n.hasNode(t)&&n.hasTreeStructure(e)?n.getAncestors(t,e).map(iB):[]}getDescendantsData(t){const e=this.getElementDataById(t),n=[];return Mv(e,(t=>{t!==e&&n.push(t)}),(t=>this.getChildrenData(rg(t))),"TB"),n}getParentData(t,e){const{model:n}=this;if(!e)return void vf.warn("The hierarchy structure key is not specified");if(!n.hasNode(t)||!n.hasTreeStructure(e))return;const r=n.getParent(t,e);return r?iB(r):void 0}getChildrenData(t){const e="node"===this.getElementType(t)?lf:cf,{model:n}=this;return n.hasNode(t)&&n.hasTreeStructure(e)?n.getChildren(t,e).map(iB):[]}getElementsDataByType(t){return"node"===t?this.getNodeData():"edge"===t?this.getEdgeData():"combo"===t?this.getComboData():[]}getElementDataById(t){const e=this.getElementType(t);return"edge"===e?this.getEdgeDatum(t):this.getNodeLikeDatum(t)}getNodeLikeDatum(t){const e=this.model.getNode(t);return iB(e)}getNodeLikeData(t){return this.model.getAllNodes().reduce(((e,n)=>{const r=iB(n);return t?t.includes(rg(r))&&e.push(r):e.push(r),e}),[])}getElementDataByState(t,e){const n=this.getElementsDataByType(t);return n.filter((t=>{var n;return null===(n=t.states)||void 0===n?void 0:n.includes(e)}))}getElementState(t){var e;return(null===(e=this.getElementDataById(t))||void 0===e?void 0:e.states)||[]}hasNode(t){return this.model.hasNode(t)&&!this.isCombo(t)}hasEdge(t){return this.model.hasEdge(t)}hasCombo(t){return this.model.hasNode(t)&&this.isCombo(t)}getRelatedEdgesData(t,e="both"){return this.model.getRelatedEdges(t,e).map(iB)}getNeighborNodesData(t){return this.model.getNeighbors(t).map(iB)}setData(t){const{nodes:e=[],edges:n=[],combos:r=[]}=t,{nodes:i,edges:o,combos:s}=this.getData(),a=pg(i,e,(t=>rg(t)),eB),c=pg(o,n,(t=>rg(t)),eB),l=pg(s,r,(t=>rg(t)),eB);this.batch((()=>{const t={nodes:a.enter,edges:c.enter,combos:l.enter};this.addData(t),this.computeZIndex(t,"add",!0);const e={nodes:a.update,edges:c.update,combos:l.update};this.updateData(e),this.computeZIndex(e,"update",!0);const n={nodes:a.exit.map(rg),edges:c.exit.map(rg),combos:l.exit.map(rg)};this.removeData(n)}))}addData(t){const{nodes:e,edges:n,combos:r}=t;this.batch((()=>{this.addComboData(r),this.addNodeData(e),this.addEdgeData(n)})),this.computeZIndex(t,"add")}addNodeData(t=[]){t.length&&(this.model.addNodes(t.map((t=>(this.pushChange({value:t,type:Zd.NodeAdded}),rB(t))))),this.updateNodeLikeHierarchy(t),this.computeZIndex({nodes:t},"add"))}addEdgeData(t=[]){t.length&&(this.model.addEdges(t.map((t=>(this.pushChange({value:t,type:Zd.EdgeAdded}),rB(t))))),this.computeZIndex({edges:t},"add"))}addComboData(t=[]){if(!t.length)return;const{model:e}=this;e.hasTreeStructure(cf)||e.attachTreeStructure(cf),e.addNodes(t.map((t=>(this.comboIds.add(rg(t)),this.pushChange({value:t,type:Zd.ComboAdded}),rB(t))))),this.updateNodeLikeHierarchy(t),this.computeZIndex({combos:t},"add")}addChildrenData(t,e){const n=this.getNodeLikeDatum(t),r=e.map(rg);this.addNodeData(e),this.updateNodeData([{id:t,children:[...n.children||[],...r]}]),this.addEdgeData(r.map((e=>({source:t,target:e}))))}computeZIndex(t,e,n=!1){!n&&this.isBatching()||this.batch((()=>{const{nodes:n=[],edges:r=[],combos:i=[]}=t;i.forEach((t=>{var n,r,i;const o=rg(t);if("add"===e&&Ae(null===(n=t.style)||void 0===n?void 0:n.zIndex))return;if("update"===e&&!("combo"in t))return;const s=this.getParentData(o,cf),a=s?(null!==(i=null===(r=s.style)||void 0===r?void 0:r.zIndex)&&void 0!==i?i:0)+1:0;this.preventUpdateNodeLikeHierarchy((()=>{this.updateComboData([{id:o,style:{zIndex:a}}])}))})),n.forEach((t=>{var n,r,i;const o=rg(t);if("add"===e&&Ae(null===(n=t.style)||void 0===n?void 0:n.zIndex))return;if("update"===e&&!("combo"in t)&&!("children"in t))return;let s=0;const a=this.getParentData(o,cf);if(a)s=((null===(r=a.style)||void 0===r?void 0:r.zIndex)||0)+1;else{const t=this.getParentData(o,lf);t&&(s=(null===(i=null===t||void 0===t?void 0:t.style)||void 0===i?void 0:i.zIndex)||0)}this.preventUpdateNodeLikeHierarchy((()=>{this.updateNodeData([{id:o,style:{zIndex:s}}])}))})),r.forEach((t=>{var e,n,r,i,o;if(Ae(null===(e=t.style)||void 0===e?void 0:e.zIndex))return;let{id:s,source:a,target:c}=t;if(s){const t=this.getEdgeDatum(s);a=t.source,c=t.target}else s=rg(t);if(!a||!c)return;const l=(null===(r=null===(n=this.getNodeLikeDatum(a))||void 0===n?void 0:n.style)||void 0===r?void 0:r.zIndex)||0,u=(null===(o=null===(i=this.getNodeLikeDatum(c))||void 0===i?void 0:i.style)||void 0===o?void 0:o.zIndex)||0;this.updateEdgeData([{id:rg(t),style:{zIndex:Math.max(l,u)-1}}])}))}))}getFrontZIndex(t){var e;const n=this.getElementType(t),r=this.getElementDataById(t),i=this.getData();if(Object.assign(i,{[`${n}s`]:i[`${n}s`].filter((e=>rg(e)!==t))}),"combo"===n&&!Rv(r)){const e=new Set(this.getAncestorsData(t,cf).map(rg));i.nodes=i.nodes.filter((t=>!e.has(rg(t)))),i.combos=i.combos.filter((t=>!e.has(rg(t)))),i.edges=i.edges.filter((({source:t,target:n})=>!e.has(t)&&!e.has(n)))}return Math.max((null===(e=r.style)||void 0===e?void 0:e.zIndex)||0,0,...Object.values(i).flat().map((t=>{var e;return((null===(e=null===t||void 0===t?void 0:t.style)||void 0===e?void 0:e.zIndex)||0)+1})))}updateNodeLikeHierarchy(t){if(!this.enableUpdateNodeLikeHierarchy)return;const{model:e}=this;t.forEach((t=>{const n=rg(t),r=ig(t);void 0!==r&&(e.hasTreeStructure(cf)||e.attachTreeStructure(cf),null===r&&this.refreshComboData(n),this.setParent(n,ig(t),cf));const i=t.children||[];if(i.length){e.hasTreeStructure(lf)||e.attachTreeStructure(lf);const t=i.filter((t=>e.hasNode(t)));t.forEach((t=>this.setParent(t,n,lf))),t.length!==i.length&&this.updateNodeData([{id:n,children:t}])}}))}preventUpdateNodeLikeHierarchy(t){this.enableUpdateNodeLikeHierarchy=!1,t(),this.enableUpdateNodeLikeHierarchy=!0}updateData(t){const{nodes:e,edges:n,combos:r}=t;this.batch((()=>{this.updateNodeData(e),this.updateComboData(r),this.updateEdgeData(n)})),this.computeZIndex(t,"update")}updateNodeData(t=[]){if(!t.length)return;const{model:e}=this;this.batch((()=>{const n=[];t.forEach((t=>{const r=rg(t),i=iB(e.getNode(r));if(eB(i,t))return;const o=QF(i,t);this.pushChange({value:o,original:i,type:Zd.NodeUpdated}),e.mergeNodeData(r,o),n.push(o)})),this.updateNodeLikeHierarchy(n)})),this.computeZIndex({nodes:t},"update")}refreshData(){const{nodes:t,edges:e,combos:n}=this.getData();t.forEach((t=>{this.pushChange({value:t,original:t,type:Zd.NodeUpdated})})),e.forEach((t=>{this.pushChange({value:t,original:t,type:Zd.EdgeUpdated})})),n.forEach((t=>{this.pushChange({value:t,original:t,type:Zd.ComboUpdated})}))}syncNodeLikeDatum(t){const{model:e}=this,n=rg(t);if(!e.hasNode(n))return;const r=iB(e.getNode(n)),i=QF(r,t);e.mergeNodeData(n,i)}syncEdgeDatum(t){const{model:e}=this,n=rg(t);if(!e.hasEdge(n))return;const r=iB(e.getEdge(n)),i=QF(r,t);e.mergeEdgeData(n,i)}updateEdgeData(t=[]){if(!t.length)return;const{model:e}=this;this.batch((()=>{t.forEach((t=>{const n=rg(t),r=iB(e.getEdge(n));if(eB(r,t))return;t.source&&r.source!==t.source&&e.updateEdgeSource(n,t.source),t.target&&r.target!==t.target&&e.updateEdgeTarget(n,t.target);const i=QF(r,t);this.pushChange({value:i,original:r,type:Zd.EdgeUpdated}),e.mergeEdgeData(n,i)}))})),this.computeZIndex({edges:t},"update")}updateComboData(t=[]){if(!t.length)return;const{model:e}=this;e.batch((()=>{const n=[];t.forEach((t=>{const r=rg(t),i=iB(e.getNode(r));if(eB(i,t))return;const o=QF(i,t);this.pushChange({value:o,original:i,type:Zd.ComboUpdated}),e.mergeNodeData(r,o),n.push(o)})),this.updateNodeLikeHierarchy(n)})),this.computeZIndex({combos:t},"update")}setParent(t,e,n,r=!0){if(t===e)return;const i=this.getNodeLikeDatum(t),o=ig(i);if(o!==e&&n===cf){const n={id:t,combo:e};this.isCombo(t),this.syncNodeLikeDatum(n)}this.model.setParent(t,e,n),r&&n===cf&&ZF([o,e]).forEach((t=>{void 0!==t&&this.refreshComboData(t)}))}refreshComboData(t){const e=this.getComboData([t])[0],n=this.getAncestorsData(t,cf);e&&this.pushChange({value:e,original:e,type:Zd.ComboUpdated}),n.forEach((t=>{this.pushChange({value:t,original:t,type:Zd.ComboUpdated})}))}getElementPosition(t){const e=this.getElementDataById(t);return qg(e)}translateNodeLikeBy(t,e){this.isCombo(t)?this.translateComboBy(t,e):this.translateNodeBy(t,e)}translateNodeLikeTo(t,e){this.isCombo(t)?this.translateComboTo(t,e):this.translateNodeTo(t,e)}translateNodeBy(t,e){const n=this.getElementPosition(t),r=Ag(n,[...e,0].slice(0,3));this.translateNodeTo(t,r)}translateNodeTo(t,e){const[n=0,r=0,i=0]=e;this.preventUpdateNodeLikeHierarchy((()=>{this.updateNodeData([{id:t,style:{x:n,y:r,z:i}}])}))}translateComboBy(t,e){const[n=0,r=0,i=0]=e;if([n,r,i].some(isNaN)||[n,r,i].every((t=>0===t)))return;const o=this.getComboData([t])[0];if(!o)return;const s=new Set;Mv(o,(t=>{const e=rg(t);if(s.has(e))return;s.add(e);const[o,a,c]=qg(t),l=QF(t,{style:{x:o+n,y:a+r,z:c+i}});this.pushChange({value:l,original:t,type:this.isCombo(e)?Zd.ComboUpdated:Zd.NodeUpdated}),this.model.mergeNodeData(e,l)}),(t=>this.getChildrenData(rg(t))),"BT")}translateComboTo(t,e){var n;if(e.some(isNaN))return;const[r=0,i=0,o=0]=e,s=null===(n=this.getComboData([t]))||void 0===n?void 0:n[0];if(!s)return;const[a,c,l]=qg(s),u=r-a,h=i-c,d=o-l;Mv(s,(t=>{const e=rg(t),[n,r,i]=qg(t),o=QF(t,{style:{x:n+u,y:r+h,z:i+d}});this.pushChange({value:o,original:t,type:this.isCombo(e)?Zd.ComboUpdated:Zd.NodeUpdated}),this.model.mergeNodeData(e,o)}),(t=>this.getChildrenData(rg(t))),"BT")}removeData(t){const{nodes:e,edges:n,combos:r}=t;this.batch((()=>{this.removeEdgeData(n),this.removeNodeData(e),this.removeComboData(r),this.latestRemovedComboIds=new Set(r)}))}removeNodeData(t=[]){t.length&&this.batch((()=>{t.forEach((t=>{this.removeEdgeData(this.getRelatedEdgesData(t).map(rg)),this.pushChange({value:this.getNodeData([t])[0],type:Zd.NodeRemoved}),this.removeNodeLikeHierarchy(t)})),this.model.removeNodes(t)}))}removeEdgeData(t=[]){t.length&&(t.forEach((t=>this.pushChange({value:this.getEdgeData([t])[0],type:Zd.EdgeRemoved}))),this.model.removeEdges(t))}removeComboData(t=[]){t.length&&this.batch((()=>{t.forEach((t=>{this.pushChange({value:this.getComboData([t])[0],type:Zd.ComboRemoved}),this.removeNodeLikeHierarchy(t),this.comboIds.delete(t)})),this.model.removeNodes(t)}))}removeNodeLikeHierarchy(t){if(this.model.hasTreeStructure(cf)){const e=ig(this.getNodeLikeDatum(t));this.setParent(t,void 0,cf,!1),this.model.getChildren(t,cf).forEach((t=>{const n=iB(t),r=rg(n);this.setParent(rg(n),e,cf,!1);const i=QF(n,{id:rg(n),combo:e});this.pushChange({value:i,original:n,type:this.isCombo(r)?Zd.ComboUpdated:Zd.NodeUpdated}),this.model.mergeNodeData(rg(n),i)})),Pe(e)||this.refreshComboData(e)}}getElementType(t){if(this.model.hasNode(t))return this.isCombo(t)?"combo":"node";if(this.model.hasEdge(t))return"edge";throw new Error(gf(`Unknown element type of id: ${t}`))}destroy(){const{model:t}=this,e=t.getAllNodes(),n=t.getAllEdges();t.removeEdges(n.map((t=>t.id))),t.removeNodes(e.map((t=>t.id))),this.context={}}}var aB=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class cB{constructor(t){this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=t}init(){this.initContainer()}initContainer(){if(!this.container||this.container.destroyed){const{canvas:t}=this.context;this.container=t.appendChild(new Du({className:"elements"}))}}emit(t,e){e.silence||zF(this.context.graph,t)}forEachElementData(t){Sv.forEach((e=>{const n=this.context.model.getElementsDataByType(e);t(e,n)}))}getElementType(t,e){var n;const{options:r,graph:i}=this.context,o=(null===(n=r[t])||void 0===n?void 0:n.type)||e.type;return o?"string"===typeof o?o:o.call(i,e):"edge"===t?"line":"circle"}getTheme(t){return yf(this.context.options)[t]||{}}getThemeStyle(t){return this.getTheme(t).style||{}}getThemeStateStyle(t,e){const{state:n={}}=this.getTheme(t);return Object.assign({},...e.map((t=>n[t]||{})))}computePaletteStyle(){const{options:t}=this.context;this.paletteStyle={},this.forEachElementData(((e,n)=>{var r,i;const o=Object.assign({},Xv(null===(r=this.getTheme(e))||void 0===r?void 0:r.palette),Xv(null===(i=t[e])||void 0===i?void 0:i.palette));(null===o||void 0===o?void 0:o.field)&&Object.assign(this.paletteStyle,Kv(n,o))}))}getPaletteStyle(t,e){const n=this.paletteStyle[e];return n?"edge"===t?{stroke:n}:{fill:n}:{}}computeElementDefaultStyle(t,e){var n;const{options:r}=this.context,i=(null===(n=r[t])||void 0===n?void 0:n.style)||{};"transform"in i&&Array.isArray(i.transform)&&(i.transform=[...i.transform]),this.defaultStyle[rg(e.datum)]=Hv(i,e)}computeElementsDefaultStyle(t){const{graph:e}=this.context;this.forEachElementData(((n,r)=>{const i=r.length;for(let o=0;o<i;o++){const i=r[o];(void 0===t||t.includes(rg(i)))&&this.computeElementDefaultStyle(n,{datum:i,graph:e})}}))}getDefaultStyle(t){return this.defaultStyle[t]||{}}getElementState(t){try{const{model:e}=this.context;return e.getElementState(t)}catch(BR){return[]}}getElementStateStyle(t,e,n){var r,i;const{options:o}=this.context,s=(null===(i=null===(r=o[t])||void 0===r?void 0:r.state)||void 0===i?void 0:i[e])||{};return Hv(s,n)}computeElementStatesStyle(t,e,n){this.stateStyle[rg(n.datum)]=Object.assign({},...e.map((e=>this.getElementStateStyle(t,e,n))))}computeElementsStatesStyle(t){const{graph:e}=this.context;this.forEachElementData(((n,r)=>{const i=r.length;for(let o=0;o<i;o++){const i=r[o];if(void 0===t||t.includes(rg(i))){const t=this.getElementState(rg(i));this.computeElementStatesStyle(n,t,{datum:i,graph:e})}}}))}getStateStyle(t){return this.stateStyle[t]||{}}computeStyle(t,e){const n=["translate","zIndex"];t&&n.includes(t)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(e),this.computeElementsStatesStyle(e))}getElement(t){return this.elementMap[t]}getNodes(){return this.context.model.getNodeData().map((({id:t})=>this.elementMap[t]))}getEdges(){return this.context.model.getEdgeData().map((t=>this.elementMap[rg(t)]))}getCombos(){return this.context.model.getComboData().map((({id:t})=>this.elementMap[t]))}getElementComputedStyle(t,e){const n=rg(e),r=this.getThemeStyle(t),i=this.getPaletteStyle(t,n),o=e.style||{},s=this.getDefaultStyle(n),a=this.getThemeStateStyle(t,this.getElementState(n)),c=this.getStateStyle(n),l=Object.assign({},r,i,o,s,a,c);if("combo"===t){const t=this.context.model.getChildrenData(n),e=!!l.collapsed,r=e?[]:t.map(rg).filter((t=>this.getElement(t)));Object.assign(l,{childrenNode:r,childrenData:t})}return l}getDrawData(t){this.init();const e=this.computeChangesAndDrawData(t);if(!e)return null;const{type:n="draw",stage:r=n}=t;return this.markDestroyElement(e.drawData),this.computeStyle(r),{type:n,stage:r,data:e}}draw(t={animation:!0}){const e=this.getDrawData(t);if(!e)return;const{data:{drawData:{add:n,update:r,remove:i}}}=e;return this.destroyElements(i,t),this.createElements(n,t),this.updateElements(r,t),this.setAnimationTask(t,e)}preLayoutDraw(){return aB(this,arguments,void 0,(function*(t={animation:!0}){var e,n;const r=this.getDrawData(t);if(!r)return;const{data:{drawData:i}}=r;yield null===(n=null===(e=this.context.layout)||void 0===e?void 0:e.preLayout)||void 0===n?void 0:n.call(e,i);const{add:o,update:s,remove:a}=i;return this.destroyElements(a,t),this.createElements(o,t),this.updateElements(s,t),this.setAnimationTask(t,r)}))}setAnimationTask(t,e){const{animation:n,silence:r}=t,{data:{dataChanges:i,drawData:o},stage:s,type:a}=e;return this.context.animation.animate(n,r?{}:{before:()=>this.emit(new IF(of.BEFORE_DRAW,{dataChanges:i,animation:n,stage:s,render:"render"===a}),t),beforeAnimate:e=>this.emit(new jF(of.BEFORE_ANIMATE,Jd.DRAW,e,o),t),afterAnimate:e=>this.emit(new jF(of.AFTER_ANIMATE,Jd.DRAW,e,o),t),after:()=>this.emit(new IF(of.AFTER_DRAW,{dataChanges:i,animation:n,stage:s,render:"render"===a,firstRender:!1===this.context.graph.rendered}),t)})}computeChangesAndDrawData(t){const{model:e}=this.context,n=e.getChanges(),r=eC(n);if(0===r.length)return null;const{NodeAdded:i=[],NodeUpdated:o=[],NodeRemoved:s=[],EdgeAdded:a=[],EdgeUpdated:c=[],EdgeRemoved:l=[],ComboAdded:u=[],ComboUpdated:h=[],ComboRemoved:d=[]}=jf(r,(t=>t.type)),f=t=>new Map(t.map((t=>{const e=t.value;return[rg(e),e]}))),p={add:{nodes:f(i),edges:f(a),combos:f(u)},update:{nodes:f(o),edges:f(c),combos:f(h)},remove:{nodes:f(s),edges:f(l),combos:f(d)}},g=this.transformData(p,t);return e.clearChanges(),{dataChanges:n,drawData:g}}transformData(t,e){const n=this.context.transform.getTransformInstance();return Object.values(n).reduce(((t,n)=>n.beforeDraw(t,e)),t)}createElement(t,e,n){var r;const i=rg(e),o=this.getElement(i);if(o)return;const s=this.getElementType(t,e),a=this.getElementComputedStyle(t,e),c=df(t,s);if(!c)return vf.warn(`The element ${s} of ${t} is not registered.`);this.emit(new FF(of.BEFORE_ELEMENT_CREATE,t,e),n);const l=this.container.appendChild(new c({id:i,context:this.context,style:a}));this.shapeTypeMap[i]=s,this.elementMap[i]=l;const{stage:u="enter"}=n;null===(r=this.context.animation)||void 0===r||r.add({element:l,elementType:t,stage:u,originalStyle:Object.assign({},l.attributes),updatedStyle:a},{after:()=>{var r;this.emit(new FF(of.AFTER_ELEMENT_CREATE,t,e),n),null===(r=l.onCreate)||void 0===r||r.call(l)}})}createElements(t,e){const{nodes:n,edges:r,combos:i}=t,o=[["node",n],["combo",i],["edge",r]];o.forEach((([t,n])=>{n.forEach((n=>this.createElement(t,n,e)))}))}getUpdateStageStyle(t,e,n){const{stage:r="update"}=n;if("translate"===r){if("node"===t||"combo"===t){const{style:{x:t=0,y:n=0,z:r=0}={}}=e;return{x:t,y:n,z:r}}return{}}return this.getElementComputedStyle(t,e)}updateElement(t,e,n){var r;const i=rg(e),{stage:o="update"}=n,s=this.getElement(i);if(!s)return()=>null;this.emit(new FF(of.BEFORE_ELEMENT_UPDATE,t,e),n);const a=this.getElementType(t,e),c=this.getUpdateStageStyle(t,e,n);this.shapeTypeMap[i]!==a&&(s.destroy(),delete this.shapeTypeMap[i],delete this.elementMap[i],this.createElement(t,e,{animation:!1,silence:!0}));const l="visibility"!==o?o:"hidden"===c.visibility?"hide":"show";"hide"===l&&delete c["visibility"],null===(r=this.context.animation)||void 0===r||r.add({element:s,elementType:t,stage:l,originalStyle:Object.assign({},s.attributes),updatedStyle:c},{before:()=>{const t=this.elementMap[i];"collapse"!==o&&dw(t,c),"visibility"===o&&(YF(t,"opacity")||HF(t,"opacity"),this.visibilityCache.set(t,"show"===l?"visible":"hidden"),"show"===l&&gg(t,"visible"))},after:()=>{var r;const s=this.elementMap[i];"collapse"===o&&dw(s,c),"hide"===l&&gg(s,this.visibilityCache.get(s)),this.emit(new FF(of.AFTER_ELEMENT_UPDATE,t,e),n),null===(r=s.onUpdate)||void 0===r||r.call(s)}})}updateElements(t,e){const{nodes:n,edges:r,combos:i}=t,o=[["node",n],["combo",i],["edge",r]];o.forEach((([t,n])=>{n.forEach((n=>this.updateElement(t,n,e)))}))}markDestroyElement(t){Object.values(t.remove).forEach((t=>{t.forEach((t=>{const e=rg(t),n=this.getElement(e);n&&pw(n)}))}))}destroyElement(t,e,n){var r;const{stage:i="exit"}=n,o=rg(e),s=this.elementMap[o];if(!s)return()=>null;this.emit(new FF(of.BEFORE_ELEMENT_DESTROY,t,e),n),null===(r=this.context.animation)||void 0===r||r.add({element:s,elementType:t,stage:i,originalStyle:Object.assign({},s.attributes),updatedStyle:{}},{after:()=>{var r;this.clearElement(o),s.destroy(),null===(r=s.onDestroy)||void 0===r||r.call(s),this.emit(new FF(of.AFTER_ELEMENT_DESTROY,t,e),n)}})}destroyElements(t,e){const{nodes:n,edges:r,combos:i}=t,o=[["combo",i],["edge",r],["node",n]];o.forEach((([t,n])=>{n.forEach((n=>this.destroyElement(t,n,e)))}))}clearElement(t){delete this.paletteStyle[t],delete this.defaultStyle[t],delete this.stateStyle[t],delete this.elementMap[t],delete this.shapeTypeMap[t]}alignLayoutResultToElement(t,e){var n,r;const i=null===(n=t.nodes)||void 0===n?void 0:n.find((t=>rg(t)===e));if(i){const n=qg(this.context.model.getNodeLikeDatum(e)),o=qg(i),s=Cg(n,o);null===(r=t.nodes)||void 0===r||r.forEach((t=>{var e,n,r;(null===(e=t.style)||void 0===e?void 0:e.x)&&(t.style.x+=s[0]),(null===(n=t.style)||void 0===n?void 0:n.y)&&(t.style.y+=s[1]),(null===(r=t.style)||void 0===r?void 0:r.z)&&(t.style.z+=s[2]||0)}))}}collapseNode(t,e){return aB(this,void 0,void 0,(function*(){var n;const{animation:r}=e,{model:i}=this.context,o=this.computeChangesAndDrawData({stage:"collapse",animation:r});if(!o)return;const{drawData:s}=o,{add:a,remove:c,update:l}=s;this.markDestroyElement(s);const u={animation:r,stage:"collapse",data:s};this.destroyElements(c,u),this.createElements(a,u),this.updateElements(l,u),yield null===(n=this.context.animation.animate(r,{beforeAnimate:t=>this.emit(new jF(of.BEFORE_ANIMATE,Jd.COLLAPSE,t,s),u),afterAnimate:t=>this.emit(new jF(of.AFTER_ANIMATE,Jd.COLLAPSE,t,s),u)},{collapse:{target:t,descendants:Array.from(c.nodes).map((([,t])=>rg(t))),position:qg(l.nodes.get(t))}}))||void 0===n?void 0:n.finished}))}expandNode(t,e){return aB(this,void 0,void 0,(function*(){var n;const{model:r,layout:i}=this.context,{animation:o,align:s}=e,a=qg(r.getNodeData([t])[0]),c=this.computeChangesAndDrawData({stage:"expand",animation:o});if(this.createElements(c.drawData.add,{animation:!1,stage:"expand",target:t}),this.context.animation.clear(),this.computeStyle("expand"),!c)return;const{drawData:l}=c,{update:u,add:h}=l,d={animation:o,stage:"expand",data:l};h.edges.forEach((t=>u.edges.set(rg(t),t))),h.nodes.forEach((t=>u.nodes.set(rg(t),t))),this.updateElements(u,d),yield null===(n=this.context.animation.animate(o,{beforeAnimate:t=>this.emit(new jF(of.BEFORE_ANIMATE,Jd.EXPAND,t,l),d),afterAnimate:t=>this.emit(new jF(of.AFTER_ANIMATE,Jd.EXPAND,t,l),d)},{expand:{target:t,descendants:Array.from(h.nodes).map((([,t])=>rg(t))),position:a}}))||void 0===n?void 0:n.finished}))}collapseCombo(t,e){return aB(this,void 0,void 0,(function*(){var n;const{model:r,element:i}=this.context;if(r.getAncestorsData(t,cf).some((t=>Rv(t))))return;const o=i.getElement(t),s=o.getComboPosition(Object.assign(Object.assign({},o.attributes),{collapsed:!0})),a=this.computeChangesAndDrawData({stage:"collapse",animation:e});if(!a)return;const{dataChanges:c,drawData:l}=a;this.markDestroyElement(l);const{update:u,remove:h}=l,d={animation:e,stage:"collapse",data:l};this.destroyElements(h,d),this.updateElements(u,d);const f=t=>Array.from(t).map((([,t])=>rg(t)));yield null===(n=this.context.animation.animate(e,{before:()=>this.emit(new IF(of.BEFORE_DRAW,{dataChanges:c,animation:e}),d),beforeAnimate:t=>this.emit(new jF(of.BEFORE_ANIMATE,Jd.COLLAPSE,t,l),d),afterAnimate:t=>this.emit(new jF(of.AFTER_ANIMATE,Jd.COLLAPSE,t,l),d),after:()=>this.emit(new IF(of.AFTER_DRAW,{dataChanges:c,animation:e}),d)},{collapse:{target:t,descendants:[...f(h.nodes),...f(h.combos)],position:s}}))||void 0===n?void 0:n.finished}))}expandCombo(t,e){return aB(this,void 0,void 0,(function*(){var n;const{model:r}=this.context,i=qg(r.getComboData([t])[0]);this.computeStyle("expand");const o=this.computeChangesAndDrawData({stage:"expand",animation:e});if(!o)return;const{dataChanges:s,drawData:a}=o,{add:c,update:l}=a,u={animation:e,stage:"expand",data:a,target:t};this.createElements(c,u),this.updateElements(l,u);const h=t=>Array.from(t).map((([,t])=>rg(t)));yield null===(n=this.context.animation.animate(e,{before:()=>this.emit(new IF(of.BEFORE_DRAW,{dataChanges:s,animation:e}),u),beforeAnimate:t=>this.emit(new jF(of.BEFORE_ANIMATE,Jd.EXPAND,t,a),u),afterAnimate:t=>this.emit(new jF(of.AFTER_ANIMATE,Jd.EXPAND,t,a),u),after:()=>this.emit(new IF(of.AFTER_DRAW,{dataChanges:s,animation:e}),u)},{expand:{target:t,descendants:[...h(c.nodes),...h(c.combos)],position:i}}))||void 0===n?void 0:n.finished}))}clear(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}destroy(){this.clear(),this.container.destroy(),this.context={}}}n(14603),n(47566),n(98721);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const lB=Symbol("Comlink.proxy"),uB=Symbol("Comlink.endpoint"),hB=Symbol("Comlink.releaseProxy"),dB=Symbol("Comlink.finalizer"),fB=Symbol("Comlink.thrown"),pB=t=>"object"===typeof t&&null!==t||"function"===typeof t,gB={canHandle:t=>pB(t)&&t[lB],serialize(t){const{port1:e,port2:n}=new MessageChannel;return bB(t,e),[n,[n]]},deserialize(t){return t.start(),EB(t)}},vB={canHandle:t=>pB(t)&&fB in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}},yB=new Map([["proxy",gB],["throw",vB]]);function mB(t,e){for(const n of t){if(e===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(e))return!0}return!1}function bB(t,e=globalThis,n=["*"]){e.addEventListener("message",(function r(i){if(!i||!i.data)return;if(!mB(n,i.origin))return void console.warn(`Invalid origin '${i.origin}' for comlink proxy`);const{id:o,type:s,path:a}=Object.assign({path:[]},i.data),c=(i.data.argumentList||[]).map(IB);let l;try{const e=a.slice(0,-1).reduce(((t,e)=>t[e]),t),n=a.reduce(((t,e)=>t[e]),t);switch(s){case"GET":l=n;break;case"SET":e[a.slice(-1)[0]]=IB(i.data.value),l=!0;break;case"APPLY":l=n.apply(e,c);break;case"CONSTRUCT":{const t=new n(...c);l=LB(t)}break;case"ENDPOINT":{const{port1:e,port2:n}=new MessageChannel;bB(t,n),l=_B(e,[e])}break;case"RELEASE":l=void 0;break;default:return}}catch(u){l={value:u,[fB]:0}}Promise.resolve(l).catch((t=>({value:t,[fB]:0}))).then((n=>{const[i,a]=DB(n);e.postMessage(Object.assign(Object.assign({},i),{id:o}),a),"RELEASE"===s&&(e.removeEventListener("message",r),wB(e),dB in t&&"function"===typeof t[dB]&&t[dB]())})).catch((t=>{const[n,r]=DB({value:new TypeError("Unserializable return value"),[fB]:0});e.postMessage(Object.assign(Object.assign({},n),{id:o}),r)}))})),e.start&&e.start()}function xB(t){return"MessagePort"===t.constructor.name}function wB(t){xB(t)&&t.close()}function EB(t,e){const n=new Map;return t.addEventListener("message",(function(t){const{data:e}=t;if(!e||!e.id)return;const r=n.get(e.id);if(r)try{r(e)}finally{n.delete(e.id)}})),AB(t,n,[],e)}function kB(t){if(t)throw new Error("Proxy has been released and is not useable")}function SB(t){return jB(t,new Map,{type:"RELEASE"}).then((()=>{wB(t)}))}const MB=new WeakMap,OB="FinalizationRegistry"in globalThis&&new FinalizationRegistry((t=>{const e=(MB.get(t)||0)-1;MB.set(t,e),0===e&&SB(t)}));function NB(t,e){const n=(MB.get(e)||0)+1;MB.set(e,n),OB&&OB.register(t,e,t)}function TB(t){OB&&OB.unregister(t)}function AB(t,e,n=[],r=function(){}){let i=!1;const o=new Proxy(r,{get(r,s){if(kB(i),s===hB)return()=>{TB(o),SB(t),e.clear(),i=!0};if("then"===s){if(0===n.length)return{then:()=>o};const r=jB(t,e,{type:"GET",path:n.map((t=>t.toString()))}).then(IB);return r.then.bind(r)}return AB(t,e,[...n,s])},set(r,o,s){kB(i);const[a,c]=DB(s);return jB(t,e,{type:"SET",path:[...n,o].map((t=>t.toString())),value:a},c).then(IB)},apply(r,o,s){kB(i);const a=n[n.length-1];if(a===uB)return jB(t,e,{type:"ENDPOINT"}).then(IB);if("bind"===a)return AB(t,e,n.slice(0,-1));const[c,l]=PB(s);return jB(t,e,{type:"APPLY",path:n.map((t=>t.toString())),argumentList:c},l).then(IB)},construct(r,o){kB(i);const[s,a]=PB(o);return jB(t,e,{type:"CONSTRUCT",path:n.map((t=>t.toString())),argumentList:s},a).then(IB)}});return NB(o,t),o}function CB(t){return Array.prototype.concat.apply([],t)}function PB(t){const e=t.map(DB);return[e.map((t=>t[0])),CB(e.map((t=>t[1])))]}const RB=new WeakMap;function _B(t,e){return RB.set(t,e),t}function LB(t){return Object.assign(t,{[lB]:!0})}function DB(t){for(const[e,n]of yB)if(n.canHandle(t)){const[r,i]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:t},RB.get(t)||[]]}function IB(t){switch(t.type){case"HANDLER":return yB.get(t.name).deserialize(t.value);case"RAW":return t.value}}function jB(t,e,n,r){return new Promise((i=>{const o=FB();e.set(o,i),t.start&&t.start(),t.postMessage(Object.assign({id:o},n),r)}))}function FB(){return new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-")}class BB extends Rw{constructor(t,e,n){super(),this.graph=t,this.layout=e,this.options=n,this.spawnWorker()}spawnWorker(){this.proxy=EB(new Worker(new URL(n.p+n.u(664),n.b),{type:void 0})),this.running&&(this.running=!1,this.execute())}execute(){var t;return Be(this,void 0,void 0,(function*(){if(this.running)return this;this.running=!0;const e=this.layout.options,{onTick:n}=e,r=Fe(e,["onTick"]),i={};Object.keys(r).forEach((t=>{nr(r[t])||(i[t]=r[t])}));const o={layout:{id:this.layout.id,options:i,iterations:null===(t=this.options)||void 0===t?void 0:t.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},s=new Float32Array([0]),[a]=yield this.proxy.calculateLayout(o,[s]);return a}))}stop(){return this.running=!1,this.proxy.stopLayout(),this}kill(){this.proxy[hB]()}isRunning(){return this.running}}var zB=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))},GB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class VB{get presetOptions(){return{animation:!!wf(this.context.options,!0)}}get options(){const{options:t}=this.context;return t.layout}constructor(t){this.instances=[],this.context=t}getLayoutInstance(){return this.instances}preLayout(t){return zB(this,void 0,void 0,(function*(){var e,n,r,i;const{graph:o,model:s}=this.context,{add:a}=t;zF(o,new IF(of.BEFORE_LAYOUT,{type:"pre"}));const c=yield null===(e=this.context.layout)||void 0===e?void 0:e.simulate();null===(n=null===c||void 0===c?void 0:c.nodes)||void 0===n||n.forEach((t=>{const e=rg(t),n=a.nodes.get(e);s.syncNodeLikeDatum(t),n&&Object.assign(n.style,t.style)})),null===(r=null===c||void 0===c?void 0:c.edges)||void 0===r||r.forEach((t=>{const e=rg(t),n=a.edges.get(e);s.syncEdgeDatum(t),n&&Object.assign(n.style,t.style)})),null===(i=null===c||void 0===c?void 0:c.combos)||void 0===i||i.forEach((t=>{const e=rg(t),n=a.combos.get(e);s.syncNodeLikeDatum(t),n&&Object.assign(n.style,t.style)})),zF(o,new IF(of.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",t)}))}postLayout(){return zB(this,arguments,void 0,(function*(t=this.options){if(!t)return;const e=Array.isArray(t)?t:[t],{graph:n}=this.context;zF(n,new IF(of.BEFORE_LAYOUT,{type:"post"}));for(let r=0;r<e.length;r++){const t=e[r],i=this.getLayoutData(t),o=Object.assign(Object.assign({},this.presetOptions),t);zF(n,new IF(of.BEFORE_STAGE_LAYOUT,{options:o,index:r}));const s=yield this.stepLayout(i,o,r);zF(n,new IF(of.AFTER_STAGE_LAYOUT,{options:o,index:r})),t.animation||this.updateElementPosition(s,!1)}zF(n,new IF(of.AFTER_LAYOUT,{type:"post"})),this.transformDataAfterLayout("post")}))}transformDataAfterLayout(t,e){const n=this.context.transform.getTransformInstance();Object.values(n).forEach((n=>n.afterLayout(t,e)))}simulate(){return zB(this,void 0,void 0,(function*(){if(!this.options)return{};const t=Array.isArray(this.options)?this.options:[this.options];let e={};for(let n=0;n<t.length;n++){const r=t[n],i=this.getLayoutData(r),o=yield this.stepLayout(i,Object.assign(Object.assign(Object.assign({},this.presetOptions),r),{animation:!1}),n);e=o}return e}))}stepLayout(t,e,n){return zB(this,void 0,void 0,(function*(){return Gw(e)?yield this.treeLayout(t,e,n):yield this.graphLayout(t,e,n)}))}graphLayout(t,e,n){return zB(this,void 0,void 0,(function*(){const{animation:r,enableWorker:i,iterations:o=300}=e,s=this.initGraphLayout(e);if(!s)return{};if(this.instances[n]=s,this.instance=s,i){const e=s;return this.supervisor=new BB(e.graphData2LayoutModel(t),e.instance,{iterations:o}),Ww(yield this.supervisor.execute())}if(wO(s))return r?yield s.execute(t,{onTick:t=>{this.updateElementPosition(t,!1)}}):(s.execute(t),s.stop(),s.tick(o));const a=yield s.execute(t);if(r){const t=this.updateElementPosition(a,r);yield null===t||void 0===t?void 0:t.finished}return a}))}treeLayout(t,e,n){return zB(this,void 0,void 0,(function*(){const{type:n,animation:r}=e,i=df("layout",n);if(!i)return{};const{nodes:o=[],edges:s=[]}=t,a=new jw({nodes:o.map((t=>({id:rg(t),data:t.data||{}}))),edges:s.map((t=>({id:rg(t),source:t.source,target:t.target,data:t.data||{}})))});oB(a);const c={nodes:[],edges:[]},l={nodes:[],edges:[]},u=a.getRoots(lf);u.forEach((t=>{Mv(t,(t=>{t.children=a.getSuccessors(t.id)}),(t=>a.getSuccessors(t.id)),"TB");const n=i(t,e),{x:r,y:o,z:s=0}=n;Mv(n,(t=>{const{id:e,x:n,y:i,z:a=0}=t;c.nodes.push({id:e,style:{x:r,y:o,z:s}}),l.nodes.push({id:e,style:{x:n,y:i,z:a}})}),(t=>t.children),"TB")}));const h=this.inferTreeLayoutOffset(l);if(WB(l,h),r){WB(c,h),this.updateElementPosition(c,!1);const t=this.updateElementPosition(l,r);yield null===t||void 0===t?void 0:t.finished}return l}))}inferTreeLayoutOffset(t){var e;let[n,r]=[1/0,-1/0],[i,o]=[1/0,-1/0];null===(e=t.nodes)||void 0===e||e.forEach((t=>{const{x:e=0,y:s=0}=t.style||{};n=Math.min(n,e),r=Math.max(r,e),i=Math.min(i,s),o=Math.max(o,s)}));const{canvas:s}=this.context,a=s.getSize(),[c,l]=s.getCanvasByViewport([0,0]),[u,h]=s.getCanvasByViewport(a);if(n>=c&&r<=u&&i>=l&&o<=h)return[0,0];const d=(c+u)/2,f=(l+h)/2;return[d-(n+r)/2,f-(i+o)/2]}stopLayout(){this.instance&&wO(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0)}getLayoutData(t){const{nodeFilter:e=()=>!0,preLayout:n=!1,isLayoutInvisibleNodes:r=!1}=t,{nodes:i,edges:o,combos:s}=this.context.model.getData(),{element:a,model:c}=this.context,l=t=>a.getElement(t),u=n?t=>{var n;if(!r){if("hidden"===(null===(n=t.style)||void 0===n?void 0:n.visibility))return!1;if(c.getAncestorsData(t.id,lf).some(Rv))return!1;if(c.getAncestorsData(t.id,cf).some(Rv))return!1}return e(t)}:t=>{const n=rg(t),r=l(n);return!!r&&(!gw(r)&&e(t))},h=i.filter(u),d=new Map(h.map((t=>[rg(t),t])));s.forEach((t=>d.set(rg(t),t)));const f=o.filter((({source:t,target:e})=>d.has(t)&&d.has(e)));return{nodes:h,edges:f,combos:s}}initGraphLayout(t){var e;const{element:n,viewport:r}=this.context,{type:i,enableWorker:o,animation:s,iterations:a}=t,c=GB(t,["type","enableWorker","animation","iterations"]),[l,u]=r.getCanvasSize(),h=[l/2,u/2],d=null!==(e=null===t||void 0===t?void 0:t.nodeSize)&&void 0!==e?e:t=>{const e=null===n||void 0===n?void 0:n.getElement(t.id);return e?e.attributes.size:null===n||void 0===n?void 0:n.getElementComputedStyle("node",t).size},f=df("layout",i);if(!f)return vf.warn(`The layout of ${i} is not registered.`);const p=Object.getPrototypeOf(f.prototype)===Fw.prototype?f:Uw(f,this.context),g=new p(this.context),v={nodeSize:d,width:l,height:u,center:h};switch(g.id){case"d3-force":case"d3-force-3d":Object.assign(v,{center:{x:l/2,y:u/2,z:0}});break;default:break}return Ng(g.options,v,c),g}updateElementPosition(t,e){const{model:n,element:r}=this.context;return r?(n.updateData(t),r.draw({animation:e,silence:!0})):null}destroy(){var t;this.stopLayout(),this.context={},null===(t=this.supervisor)||void 0===t||t.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}}const WB=(t,e)=>{var n;const[r,i]=e;null===(n=t.nodes)||void 0===n||n.forEach((t=>{if(t.style){const{x:e=0,y:n=0}=t.style;t.style.x=e+r,t.style.y=n+i}else t.style={x:r,y:i}}))};function UB(t){const e=[HB];return e.reduce(((t,e)=>e(t)),t)}function HB(t){return t.layout?(Array.isArray(t.layout)||"preLayout"in t.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(t.layout.type)&&(t.layout.preLayout=!0),t):t}class $B extends yg{constructor(t){super(t),this.category="plugin",this.setPlugins(this.context.options.plugins||[])}setPlugins(t){this.setExtensions(t)}getPluginInstance(t){const e=this.extensionMap[t];if(e)return e;vf.warn(`Cannot find the plugin ${t}, will try to find it by type.`);const n=this.extensions.find((e=>e.type===t));return n?this.extensionMap[n.key]:void 0}}const YB=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"];class qB extends yg{constructor(t){super(t),this.category="transform",this.setTransforms(this.context.options.transforms||[])}getTransforms(){}setTransforms(t){this.setExtensions([...YB.slice(0,YB.length-1),...t,YB[YB.length-1]])}getTransformInstance(t){return t?this.extensionMap[t]:this.extensionMap}}var XB=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class KB{get padding(){return Hf(this.context.options.padding)}get paddingOffset(){const[t,e,n,r]=this.padding,[i,o,s]=[(r-e)/2,(t-n)/2,0];return[i,o,s]}constructor(t){this.landmarkCounter=0,this.context=t;const[e,n]=this.paddingOffset,{zoom:r,rotation:i,x:o=e,y:s=n}=t.options;this.transform({mode:"absolute",scale:r,translate:[o,s],rotate:i},!1)}get camera(){const{canvas:t}=this.context;return new Proxy(t.getCamera(),{get:(e,n)=>{const r=Object.entries(t.getLayers()).filter((([t])=>!["main"].includes(t))),i=r.map((([,t])=>t.getCamera())),o=e[n];if("function"===typeof o)return(...t)=>{const r=o.apply(e,t);return i.forEach((e=>{e[n].apply(e,t)})),r}}})}createLandmark(t){return this.camera.createLandmark("landmark-"+this.landmarkCounter++,t)}getAnimation(t){const e=wf(this.context.options,t);return!!e&&yb(Object.assign({},e),["easing","duration"])}getCanvasSize(){const{canvas:t}=this.context,{width:e=0,height:n=0}=t.getConfig();return[e,n]}getCanvasCenter(){const{canvas:t}=this.context,{width:e=0,height:n=0}=t.getConfig();return[e/2,n/2,0]}getViewportCenter(){const[t,e]=this.camera.getPosition();return[t,e,0]}getGraphCenter(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}getZoom(){return this.camera.getZoom()}getRotation(){return this.camera.getRoll()}getTranslateOptions(t){const{camera:e}=this,{mode:n,translate:r=[]}=t,i=this.getZoom(),o=e.getPosition(),s=e.getFocalPoint(),[a,c]=this.getCanvasCenter(),[l=0,u=0,h=0]=r,d=Rg([-l,-u,-h],i);return"relative"===n?{position:Ag(o,d),focalPoint:Ag(s,d)}:{position:Ag([a,c,o[2]],d),focalPoint:Ag([a,c,s[2]],d)}}getRotateOptions(t){const{mode:e,rotate:n=0}=t,r="relative"===e?this.camera.getRoll()+n:n;return{roll:r}}getZoomOptions(t){const{zoomRange:e}=this.context.options,n=this.camera.getZoom(),{mode:r,scale:i=1}=t;return Le("relative"===r?n*i:i,...e)}transform(t,e){return XB(this,void 0,void 0,(function*(){const{graph:n}=this.context,{translate:r,rotate:i,scale:o,origin:s}=t;this.cancelAnimation();const a=this.getAnimation(e);if(zF(n,new BF(of.BEFORE_TRANSFORM,t)),!i&&o&&!r&&s&&!a)return this.camera.setZoomByViewportPoint(this.getZoomOptions(t),s),void zF(n,new BF(of.AFTER_TRANSFORM,t));const c={};if(r&&Object.assign(c,this.getTranslateOptions(t)),Ae(i)&&Object.assign(c,this.getRotateOptions(t)),Ae(o)&&Object.assign(c,{zoom:this.getZoomOptions(t)}),a)return zF(n,new jF(of.BEFORE_ANIMATE,Jd.TRANSFORM,null,t)),new Promise((e=>{this.transformResolver=e,this.camera.gotoLandmark(this.createLandmark(c),Object.assign(Object.assign({},a),{onfinish:()=>{zF(n,new jF(of.AFTER_ANIMATE,Jd.TRANSFORM,null,t)),zF(n,new BF(of.AFTER_TRANSFORM,t)),this.transformResolver=void 0,e()}}))}));this.camera.gotoLandmark(this.createLandmark(c),{duration:0}),zF(n,new BF(of.AFTER_TRANSFORM,t))}))}fitView(t,e){return XB(this,void 0,void 0,(function*(){const[n,r,i,o]=this.padding,{when:s="always",direction:a="both"}=t||{},[c,l]=this.context.canvas.getSize(),u=c-o-r,h=l-n-i,d=this.context.canvas.getBounds(),f=this.getBBoxInViewport(d),[p,g]=Xf(f),v="x"===a&&p>=u||"y"===a&&g>=h||"both"===a&&p>=u&&g>=h;if("overflow"===s&&!v)return yield this.fitCenter({animation:e});const y=u/p,m=h/g,b="x"===a?y:"y"===a?m:Math.min(y,m),x=this.getAnimation(e);yield this.transform({mode:"relative",scale:b,translate:Ag(Cg(this.getCanvasCenter(),this.getBBoxInViewport(d).center),Rg(this.paddingOffset,b))},x)}))}fitCenter(t){return XB(this,void 0,void 0,(function*(){const e=this.context.canvas.getBounds();yield this.focus(e,t)}))}focusElements(t){return XB(this,arguments,void 0,(function*(t,e={}){const{element:n}=this.context;if(!n)return;const r=t=>e.shapes?t.getShape(e.shapes).getRenderBounds():t.getRenderBounds(),i=Qf(t.map((t=>r(n.getElement(t)))));yield this.focus(i,e)}))}focus(t,e){return XB(this,void 0,void 0,(function*(){const n=this.context.graph.getViewportByCanvas(t.center),r=e.position||this.getCanvasCenter(),i=Cg(r,n);yield this.transform({mode:"relative",translate:Ag(i,this.paddingOffset)},e.animation)}))}getBBoxInViewport(t){const{min:e,max:n}=t,{graph:r}=this.context,[i,o]=r.getViewportByCanvas(e),[s,a]=r.getViewportByCanvas(n),c=new Kr;return c.setMinMax([i,o,0],[s,a,0]),c}isInViewport(t,e=!1,n=0){const{graph:r}=this.context,i=this.getCanvasSize(),[o,s]=r.getCanvasByViewport([0,0]),[a,c]=r.getCanvasByViewport(i);let l=new Kr;return l.setMinMax([o,s,0],[a,c,0]),n&&(l=Jf(l,n)),Wf(t)?ep(t,l):e?tp(t,l):l.intersects(t)}cancelAnimation(){var t,e;(null===(t=this.camera.landmarks)||void 0===t?void 0:t.length)&&this.camera.cancelLandmarkAnimation(),null===(e=this.transformResolver)||void 0===e||e.call(this)}}var ZB=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class JB extends Rw{constructor(t){var e;super(),this.options={},this.rendered=!1,this.destroyed=!1,this.context={model:new sB},this.isCollapsingExpanding=!1,this.onResize=Mw((()=>{this.resize()}),300),this._setOptions(Object.assign({},JB.defaultOptions,t),!0),this.context.graph=this,this.options.autoResize&&(null===(e=globalThis.addEventListener)||void 0===e||e.call(globalThis,"resize",this.onResize))}getOptions(){return this.options}setOptions(t){this._setOptions(t,!1)}_setOptions(t,e){if(this.updateCanvas(t),Object.assign(this.options,UB(t)),e){const{data:e}=t;return void(e&&this.addData(e))}const{behaviors:n,combo:r,data:i,edge:o,layout:s,node:a,plugins:c,theme:l,transforms:u}=t;n&&this.setBehaviors(n),i&&this.setData(i),a&&this.setNode(a),o&&this.setEdge(o),r&&this.setCombo(r),s&&this.setLayout(s),l&&this.setTheme(l),c&&this.setPlugins(c),u&&this.setTransforms(u)}getSize(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}setSize(t,e){t&&(this.options.width=t),e&&(this.options.height=e),this.resize(t,e)}setZoomRange(t){this.options.zoomRange=t}getZoomRange(){return this.options.zoomRange}setNode(t){this.options.node=t,this.context.model.refreshData()}setEdge(t){this.options.edge=t,this.context.model.refreshData()}setCombo(t){this.options.combo=t,this.context.model.refreshData()}getTheme(){return this.options.theme}setTheme(t){this.options.theme=nr(t)?t(this.getTheme()):t}setLayout(t){this.options.layout=nr(t)?t(this.getLayout()):t}getLayout(){return this.options.layout}setBehaviors(t){var e;this.options.behaviors=nr(t)?t(this.getBehaviors()):t,null===(e=this.context.behavior)||void 0===e||e.setBehaviors(this.options.behaviors)}updateBehavior(t){this.setBehaviors((e=>e.map((e=>"object"===typeof e&&e.key===t.key?Object.assign(Object.assign({},e),t):e))))}getBehaviors(){return this.options.behaviors||[]}setPlugins(t){var e;this.options.plugins=nr(t)?t(this.getPlugins()):t,null===(e=this.context.plugin)||void 0===e||e.setPlugins(this.options.plugins)}updatePlugin(t){this.setPlugins((e=>e.map((e=>"object"===typeof e&&e.key===t.key?Object.assign(Object.assign({},e),t):e))))}getPlugins(){return this.options.plugins||[]}getPluginInstance(t){return this.context.plugin.getPluginInstance(t)}setTransforms(t){var e;this.options.transforms=nr(t)?t(this.getTransforms()):t,null===(e=this.context.transform)||void 0===e||e.setTransforms(this.options.transforms)}updateTransform(t){this.setTransforms((e=>e.map((e=>"object"===typeof e&&e.key===t.key?Object.assign(Object.assign({},e),t):e)))),this.context.model.refreshData()}getTransforms(){return this.options.transforms||[]}getData(){return this.context.model.getData()}getElementData(t){return Array.isArray(t)?t.map((t=>this.context.model.getElementDataById(t))):this.context.model.getElementDataById(t)}getNodeData(t){return void 0===t?this.context.model.getNodeData():Array.isArray(t)?this.context.model.getNodeData(t):this.context.model.getNodeLikeDatum(t)}getEdgeData(t){return void 0===t?this.context.model.getEdgeData():Array.isArray(t)?this.context.model.getEdgeData(t):this.context.model.getEdgeDatum(t)}getComboData(t){return void 0===t?this.context.model.getComboData():Array.isArray(t)?this.context.model.getComboData(t):this.context.model.getNodeLikeDatum(t)}setData(t){this.context.model.setData(nr(t)?t(this.getData()):t)}addData(t){this.context.model.addData(nr(t)?t(this.getData()):t)}addNodeData(t){this.context.model.addNodeData(nr(t)?t(this.getNodeData()):t)}addEdgeData(t){this.context.model.addEdgeData(nr(t)?t(this.getEdgeData()):t)}addComboData(t){this.context.model.addComboData(nr(t)?t(this.getComboData()):t)}addChildrenData(t,e){this.context.model.addChildrenData(t,e)}updateData(t){this.context.model.updateData(nr(t)?t(this.getData()):t)}updateNodeData(t){this.context.model.updateNodeData(nr(t)?t(this.getNodeData()):t)}updateEdgeData(t){this.context.model.updateEdgeData(nr(t)?t(this.getEdgeData()):t)}updateComboData(t){this.context.model.updateComboData(nr(t)?t(this.getComboData()):t)}removeData(t){this.context.model.removeData(nr(t)?t(this.getData()):t)}removeNodeData(t){this.context.model.removeNodeData(nr(t)?t(this.getNodeData()):t)}removeEdgeData(t){this.context.model.removeEdgeData(nr(t)?t(this.getEdgeData()):t)}removeComboData(t){this.context.model.removeComboData(nr(t)?t(this.getComboData()):t)}getElementType(t){return this.context.model.getElementType(t)}getRelatedEdgesData(t,e="both"){return this.context.model.getRelatedEdgesData(t,e)}getNeighborNodesData(t){return this.context.model.getNeighborNodesData(t)}getAncestorsData(t,e){return this.context.model.getAncestorsData(t,e)}getParentData(t,e){return this.context.model.getParentData(t,e)}getChildrenData(t){return this.context.model.getChildrenData(t)}getDescendantsData(t){return this.context.model.getDescendantsData(t)}getElementDataByState(t,e){return this.context.model.getElementDataByState(t,e)}initCanvas(){return ZB(this,void 0,void 0,(function*(){var t;if(this.context.canvas)return yield this.context.canvas.ready;const{container:e="container",width:n,height:r,renderer:i,cursor:o,background:s,canvas:a,devicePixelRatio:c=(null!==(t=globalThis.devicePixelRatio)&&void 0!==t?t:1)}=this.options;if(e instanceof AF)this.context.canvas=e,o&&e.setCursor(o),i&&e.setRenderer(i),yield e.ready;else{const t=Re(e)?document.getElementById(e):e,l=LF(t);this.emit(of.BEFORE_CANVAS_INIT,{container:t,width:n,height:r});const u=Object.assign(Object.assign({},a),{container:t,width:n||l[0],height:r||l[1],background:s,renderer:i,cursor:o,devicePixelRatio:c}),h=new AF(u);this.context.canvas=h,yield h.ready,this.emit(of.AFTER_CANVAS_INIT,{canvas:h})}}))}updateCanvas(t){var e,n;const{renderer:r,cursor:i,height:o,width:s}=t,a=this.context.canvas;a&&(r&&(this.emit(of.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),a.setRenderer(r),this.emit(of.AFTER_RENDERER_CHANGE,{renderer:r})),i&&a.setCursor(i),(Ae(s)||Ae(o))&&this.setSize(null!==(e=null!==s&&void 0!==s?s:this.options.width)&&void 0!==e?e:0,null!==(n=null!==o&&void 0!==o?o:this.options.height)&&void 0!==n?n:0))}initRuntime(){this.context.options=this.options,this.context.batch||(this.context.batch=new XF(this.context)),this.context.plugin||(this.context.plugin=new $B(this.context)),this.context.viewport||(this.context.viewport=new KB(this.context)),this.context.transform||(this.context.transform=new qB(this.context)),this.context.element||(this.context.element=new cB(this.context)),this.context.animation||(this.context.animation=new qF(this.context)),this.context.layout||(this.context.layout=new VB(this.context)),this.context.behavior||(this.context.behavior=new KF(this.context))}prepare(){return ZB(this,void 0,void 0,(function*(){yield Promise.resolve(),this.destroyed?console.error(gf("The graph instance has been destroyed")):(yield this.initCanvas(),this.initRuntime())}))}render(){return ZB(this,void 0,void 0,(function*(){if(yield this.prepare(),zF(this,new IF(of.BEFORE_RENDER)),this.options.layout)if(!this.rendered&&Vw(this.options.layout)){const t=yield this.context.element.preLayoutDraw({type:"render"});yield Promise.all([null===t||void 0===t?void 0:t.finished,this.autoFit()])}else{const t=this.context.element.draw({type:"render"});yield Promise.all([null===t||void 0===t?void 0:t.finished,this.context.layout.postLayout()]),yield this.autoFit()}else{const t=this.context.element.draw({type:"render"});yield Promise.all([null===t||void 0===t?void 0:t.finished,this.autoFit()])}this.rendered=!0,zF(this,new IF(of.AFTER_RENDER))}))}draw(){return ZB(this,void 0,void 0,(function*(){var t;yield this.prepare(),yield null===(t=this.context.element.draw())||void 0===t?void 0:t.finished}))}layout(t){return ZB(this,void 0,void 0,(function*(){yield this.context.layout.postLayout(t)}))}stopLayout(){this.context.layout.stopLayout()}clear(){return ZB(this,void 0,void 0,(function*(){const{model:t,element:e}=this.context;t.setData({}),t.clearChanges(),null===e||void 0===e||e.clear()}))}destroy(){var t;zF(this,new IF(of.BEFORE_DESTROY));const{layout:e,animation:n,element:r,model:i,canvas:o,behavior:s,plugin:a}=this.context;null===a||void 0===a||a.destroy(),null===s||void 0===s||s.destroy(),null===e||void 0===e||e.destroy(),null===n||void 0===n||n.destroy(),null===r||void 0===r||r.destroy(),i.destroy(),null===o||void 0===o||o.destroy(),this.options={},this.context={},this.off(),null===(t=globalThis.removeEventListener)||void 0===t||t.call(globalThis,"resize",this.onResize),this.destroyed=!0,zF(this,new IF(of.AFTER_DESTROY))}getCanvas(){return this.context.canvas}resize(t,e){var n;const r=LF(null===(n=this.context.canvas)||void 0===n?void 0:n.getContainer()),i=[t||r[0],e||r[1]];if(!this.context.canvas)return;const o=this.context.canvas.getSize();qd(i,o)||(zF(this,new IF(of.BEFORE_SIZE_CHANGE,{size:i})),this.context.canvas.resize(...i),zF(this,new IF(of.AFTER_SIZE_CHANGE,{size:i})))}fitView(t,e){return ZB(this,void 0,void 0,(function*(){var n;yield null===(n=this.context.viewport)||void 0===n?void 0:n.fitView(t,e)}))}fitCenter(t){return ZB(this,void 0,void 0,(function*(){var e;yield null===(e=this.context.viewport)||void 0===e?void 0:e.fitCenter({animation:t})}))}autoFit(){return ZB(this,void 0,void 0,(function*(){const{autoFit:t}=this.context.options;if(t)if(Re(t))"view"===t?yield this.fitView():"center"===t&&(yield this.fitCenter());else{const{type:e,animation:n}=t;"view"===e?yield this.fitView(t.options,n):"center"===e&&(yield this.fitCenter(n))}}))}focusElement(t,e){return ZB(this,void 0,void 0,(function*(){var n;yield null===(n=this.context.viewport)||void 0===n?void 0:n.focusElements(Array.isArray(t)?t:[t],{animation:e})}))}zoomBy(t,e,n){return ZB(this,void 0,void 0,(function*(){yield this.context.viewport.transform({mode:"relative",scale:t,origin:n},e)}))}zoomTo(t,e,n){return ZB(this,void 0,void 0,(function*(){yield this.context.viewport.transform({mode:"absolute",scale:t,origin:n},e)}))}getZoom(){return this.context.viewport.getZoom()}rotateBy(t,e,n){return ZB(this,void 0,void 0,(function*(){yield this.context.viewport.transform({mode:"relative",rotate:t,origin:n},e)}))}rotateTo(t,e,n){return ZB(this,void 0,void 0,(function*(){yield this.context.viewport.transform({mode:"absolute",rotate:t,origin:n},e)}))}getRotation(){return this.context.viewport.getRotation()}translateBy(t,e){return ZB(this,void 0,void 0,(function*(){yield this.context.viewport.transform({mode:"relative",translate:t},e)}))}translateTo(t,e){return ZB(this,void 0,void 0,(function*(){yield this.context.viewport.transform({mode:"absolute",translate:t},e)}))}getPosition(){return Cg([0,0],this.getCanvasByViewport([0,0]))}translateElementBy(t,e){return ZB(this,arguments,void 0,(function*(t,e,n=!0){var r,i;const[o,s]=rr(t)?[t,null===(r=e)||void 0===r||r]:[{[t]:e},n];Object.entries(o).forEach((([t,e])=>this.context.model.translateNodeLikeBy(t,e))),yield null===(i=this.context.element.draw({animation:s,stage:"translate"}))||void 0===i?void 0:i.finished}))}translateElementTo(t,e){return ZB(this,arguments,void 0,(function*(t,e,n=!0){var r,i;const[o,s]=rr(t)?[t,null===(r=e)||void 0===r||r]:[{[t]:e},n];Object.entries(o).forEach((([t,e])=>this.context.model.translateNodeLikeTo(t,e))),yield null===(i=this.context.element.draw({animation:s,stage:"translate"}))||void 0===i?void 0:i.finished}))}getElementPosition(t){return this.context.model.getElementPosition(t)}getElementRenderStyle(t){return wT(this.context.element.getElement(t).attributes,["context"])}setElementVisibility(t,e){return ZB(this,arguments,void 0,(function*(t,e,n=!0){var r,i;const[o,s]=rr(t)?[t,null===(r=e)||void 0===r||r]:[{[t]:e},n],a={nodes:[],edges:[],combos:[]};Object.entries(o).forEach((([t,e])=>{const n=this.getElementType(t);a[`${n}s`].push({id:t,style:{visibility:e}})}));const{model:c,element:l}=this.context;c.preventUpdateNodeLikeHierarchy((()=>{c.updateData(a)})),yield null===(i=l.draw({animation:s,stage:"visibility"}))||void 0===i?void 0:i.finished}))}showElement(t,e){return ZB(this,void 0,void 0,(function*(){const n=Array.isArray(t)?t:[t];yield this.setElementVisibility(Object.fromEntries(n.map((t=>[t,"visible"]))),e)}))}hideElement(t,e){return ZB(this,void 0,void 0,(function*(){const n=Array.isArray(t)?t:[t];yield this.setElementVisibility(Object.fromEntries(n.map((t=>[t,"hidden"]))),e)}))}getElementVisibility(t){var e,n;const r=this.context.element.getElement(t);return null!==(n=null===(e=null===r||void 0===r?void 0:r.style)||void 0===e?void 0:e.visibility)&&void 0!==n?n:"visible"}setElementZIndex(t,e){return ZB(this,void 0,void 0,(function*(){var n;const r={nodes:[],edges:[],combos:[]},i=rr(t)?t:{[t]:e};Object.entries(i).forEach((([t,e])=>{const n=this.getElementType(t);r[`${n}s`].push({id:t,style:{zIndex:e}})}));const{model:o,element:s}=this.context;o.preventUpdateNodeLikeHierarchy((()=>o.updateData(r))),yield null===(n=s.draw({animation:!1,stage:"zIndex"}))||void 0===n?void 0:n.finished}))}frontElement(t){return ZB(this,void 0,void 0,(function*(){const e=Array.isArray(t)?t:[t],{model:n}=this.context,r={};e.map((t=>{const e=n.getFrontZIndex(t),i=n.getElementType(t);if("combo"===i){const i=n.getAncestorsData(t,cf).at(-1)||this.getComboData(t),o=[i,...n.getDescendantsData(rg(i))],s=e-VF(i);o.forEach((t=>{r[rg(t)]=this.getElementZIndex(rg(t))+s}));const{internal:a}=lx(o.map(rg),(t=>n.getRelatedEdgesData(t)));a.forEach((t=>{const e=rg(t);r[e]=this.getElementZIndex(e)+s}))}else r[t]=e})),yield this.setElementZIndex(r)}))}getElementZIndex(t){return VF(this.context.model.getElementDataById(t))}setElementState(t,e){return ZB(this,arguments,void 0,(function*(t,e,n=!0){var r,i;const[o,s]=rr(t)?[t,null===(r=e)||void 0===r||r]:[{[t]:e},n],a=t=>t?Array.isArray(t)?t:[t]:[],c={nodes:[],edges:[],combos:[]};Object.entries(o).forEach((([t,e])=>{const n=this.getElementType(t);c[`${n}s`].push({id:t,states:a(e)})})),this.updateData(c),yield null===(i=this.context.element.draw({animation:s,stage:"state"}))||void 0===i?void 0:i.finished}))}getElementState(t){return this.context.model.getElementState(t)}getElementRenderBounds(t){return this.context.element.getElement(t).getRenderBounds()}collapseElement(t){return ZB(this,arguments,void 0,(function*(t,e=!0){const{model:n,element:r}=this.context;if(Rv(n.getNodeLikeData([t])[0]))return;if(this.isCollapsingExpanding)return;"boolean"===typeof e&&(e={animation:e,align:!0});const i=n.getElementType(t);yield this.frontElement(t),this.isCollapsingExpanding=!0,n.updateData("node"===i?{nodes:[{id:t,style:{collapsed:!0}}]}:{combos:[{id:t,style:{collapsed:!0}}]}),"node"===i?yield r.collapseNode(t,e):"combo"===i&&(yield r.collapseCombo(t,!!e.animation)),this.isCollapsingExpanding=!1}))}expandElement(t){return ZB(this,arguments,void 0,(function*(t,e=!0){const{model:n,element:r}=this.context;if(!Rv(n.getNodeLikeData([t])[0]))return;if(this.isCollapsingExpanding)return;"boolean"===typeof e&&(e={animation:e,align:!0});const i=n.getElementType(t);this.isCollapsingExpanding=!0,n.updateData("node"===i?{nodes:[{id:t,style:{collapsed:!1}}]}:{combos:[{id:t,style:{collapsed:!1}}]}),"node"===i?yield r.expandNode(t,e):"combo"===i&&(yield r.expandCombo(t,!!e.animation)),this.isCollapsingExpanding=!1}))}setElementCollapsibility(t,e){const n=this.getElementType(t);"node"===n?this.updateNodeData([{id:t,style:{collapsed:e}}]):"combo"===n&&this.updateComboData([{id:t,style:{collapsed:e}}])}toDataURL(){return ZB(this,arguments,void 0,(function*(t={}){return this.context.canvas.toDataURL(t)}))}getCanvasByViewport(t){return this.context.canvas.getCanvasByViewport(t)}getViewportByCanvas(t){return this.context.canvas.getViewportByCanvas(t)}getClientByCanvas(t){return this.context.canvas.getClientByCanvas(t)}getCanvasByClient(t){return this.context.canvas.getCanvasByClient(t)}getViewportCenter(){return this.context.viewport.getViewportCenter()}getCanvasCenter(){return this.context.viewport.getCanvasCenter()}on(t,e,n){return super.on(t,e,n)}once(t,e){return super.once(t,e)}off(t,e){return super.off(t,e)}}JB.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};class QB extends pF{beforeDraw(t){const{add:e,update:n}=t,{model:r}=this.context;return[...e.edges.entries(),...n.edges.entries()].forEach((([,t])=>{tz(r,t)})),t}}const tz=(t,e)=>{const{source:n,target:r}=e,i=t.getElementDataById(n),o=t.getElementDataById(r),s=ux(i,(e=>t.getParentData(e,cf))),a=ux(o,(e=>t.getParentData(e,cf))),c=rg(s),l=rg(a),u={sourceNode:c,targetNode:l};return e.style?Object.assign(e.style,u):e.style=u,e},ez=(t,e,n)=>{const[r,i]=e,[o,s]=n;if(i===r)return o;const a=(t-r)/(i-r);return o+a*(s-o)},nz=(t,e,n)=>{const[r,i]=e,[o,s]=n,a=Math.log(t-r+1)/Math.log(i-r+1);return o+a*(s-o)},rz=(t,e,n,r=2)=>{const[i,o]=e,[s,a]=n,c=Math.pow((t-i)/(o-i),r);return s+c*(a-s)},iz=(t,e,n)=>{const[r,i]=e,[o,s]=n,a=Math.sqrt((t-r)/(i-r));return o+a*(s-o)};class oz extends pF{constructor(t,e){super(t,Ng({},oz.defaultOptions,e)),this.assignSizeByCentrality=(t,e,n,r,i,o)=>{const s=[e,n],a=[r[0],i[0]],c=[r[1],i[1]],l=[r[2],i[2]],u=(t,e)=>{if("function"===typeof o)return o(t,s,e);switch(o){case"linear":return ez(t,s,e);case"log":return nz(t,s,e);case"pow":return rz(t,s,e,2);case"sqrt":return iz(t,s,e);default:return e[0]}};return[u(t,a),u(t,c),u(t,l)]}}beforeDraw(t){const{model:e}=this.context,n=e.getNodeData(),r=Wv(this.options.maxSize),i=Wv(this.options.minSize),o=this.getCentralities(this.options.centrality),s=o.size>0?Math.max(...o.values()):0,a=o.size>0?Math.min(...o.values()):0;return n.forEach((e=>{var n;const c=this.assignSizeByCentrality(o.get(rg(e))||0,a,s,i,r,this.options.scale),l=null===(n=this.context.element)||void 0===n?void 0:n.getElement(rg(e)),u={size:c};this.assignLabelStyle(u,c,e,l),l&&yF(u,l.attributes)||vF(t,l?"update":"add","node",Ng(e,{style:u}),!0)})),t}assignLabelStyle(t,e,n,r){var i;const o=r?r.config.style:null===(i=this.context.element)||void 0===i?void 0:i.getElementComputedStyle("node",n);if(Object.assign(t,yb(o,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){const n=this.getLabelSizeByNodeSize(e,1/0,Number(t.labelFontSize));Object.assign(t,{labelFontSize:n,labelLineHeight:n+$f(t.labelPadding)})}return t}getLabelSizeByNodeSize(t,e,n){const r=Math.min(...t)/2,[i,o]=Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[n,e];return Math.min(o,Math.max(r,i))}getCentralities(t){const{model:e}=this.context,n=e.getData();if("function"===typeof t)return t(n);const r=e.getRelatedEdgesData.bind(e);return sg(n,r,t)}}oz.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};class sz extends pF{constructor(t,e){super(t,Object.assign({},sz.defaultOptions,e))}get ref(){return this.context.model.getRootsData()[0]}afterLayout(){var t;const e=qg(this.ref),{graph:n,model:r}=this.context,i=r.getData();null===(t=i.nodes)||void 0===t||t.forEach((t=>{var i;if(rg(t)===rg(this.ref))return;const o=Ug(Cg(qg(t),e)),s=Math.abs(o)>Math.PI/2,a=!t.children||0===t.children.length,c=rg(t),l=null===(i=this.context.element)||void 0===i?void 0:i.getElement(c);if(!l||!l.isVisible())return;const u=Wv(n.getElementRenderStyle(c).size)[0]/2,h=(a?1:-1)*(u+this.options.offset),d=[["translate",h*Math.cos(o),h*Math.sin(o)],["rotate",s?hi(o)+180:hi(o)]];r.updateNodeData([{id:rg(t),style:{labelTextAlign:s===a?"right":"left",labelTextBaseline:"middle",labelTransform:d}}])})),n.draw()}}sz.defaultOptions={offset:5};const az="quadratic",cz=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"];class lz extends pF{constructor(t,e){super(t,Object.assign({},lz.defaultOptions,e)),this.cacheMergeStyle=new Map,this.getAffectedParallelEdges=t=>{const{add:{edges:e},update:{nodes:n,edges:r,combos:i},remove:{edges:o}}=t,{model:s}=this.context,a=new Map,c=(t,e)=>{const n=s.getRelatedEdgesData(e);n.forEach((t=>!a.has(rg(t))&&a.set(rg(t),t)))};n.forEach(c),i.forEach(c);const l=t=>{const e=s.getEdgeData().map((t=>tz(s,t))),n=hz(t,e,!0);n.forEach((t=>!a.has(rg(t))&&a.set(rg(t),t)))};if(o.size&&o.forEach(l),e.size&&e.forEach(l),r.size){const t=nC(eC(s.getChanges())).update.edges;r.forEach((e=>{var n;l(e);const r=null===(n=t.find((t=>rg(t.value)===rg(e))))||void 0===n?void 0:n.original;r&&!dz(e,r)&&l(r)}))}ly(this.options.edges)||a.forEach(((t,e)=>!this.options.edges.includes(e)&&a.delete(e)));const u=s.getEdgeData().map(rg);return new Map([...a].sort(((t,e)=>u.indexOf(t[0])-u.indexOf(e[0]))))},this.applyBundlingStyle=(t,e,n)=>{const{edgeMap:r,reverses:i}=uz(e);r.forEach((e=>{e.forEach(((e,r,o)=>{var s;const a=o.length,c=e.style||{};if(e.source===e.target){const t=cz.length;c.loopPlacement=cz[r%t],c.loopDist=Math.floor(r/t)*n+50}else if(1===a)c.curveOffset=0;else{const t=(r%2===0?1:-1)*(i[`${e.source}|${e.target}|${r}`]?-1:1);c.curveOffset=a%2===1?t*Math.ceil(r/2)*n*2:t*(Math.floor(r/2)*n*2+n)}const l=Object.assign(e,{type:az,style:c}),u=null===(s=this.context.element)||void 0===s?void 0:s.getElement(rg(e));u&&yF(l.style,u.attributes)||vF(t,u?"update":"add","edge",l,!0)}))}))},this.resetEdgeStyle=t=>{const e=t.style||{},n=this.cacheMergeStyle.get(rg(t))||{};return Object.keys(n).forEach((r=>{qd(e[r],n[r])&&(t[r]?e[r]=t[r]:delete e[r])})),Object.assign(t,{style:e})},this.applyMergingStyle=(t,e)=>{const{edgeMap:n,reverses:r}=uz(e);n.forEach((e=>{var n;if(1===e.length){const r=e[0],i=null===(n=this.context.element)||void 0===n?void 0:n.getElement(rg(r)),o=this.resetEdgeStyle(r);return void(i&&yF(o,i.attributes)||vF(t,i?"update":"add","edge",o))}const i=e.map((({source:t,target:e,style:n={}},i)=>{const{startArrow:o,endArrow:s}=n,a={},[c,l]=r[`${t}|${e}|${i}`]?["endArrow","startArrow"]:["startArrow","endArrow"];return er(o)&&(a[c]=o),er(s)&&(a[l]=s),a})).reduce(((t,e)=>Object.assign(Object.assign({},t),e)),{});e.forEach(((e,n,r)=>{var o;if(0!==n)return void vF(t,"remove","edge",e);const s=Object.assign({},nr(this.options.style)?this.options.style(r):this.options.style,{childrenData:r});this.cacheMergeStyle.set(rg(e),s);const a=Object.assign(Object.assign({},e),{type:"line",style:Object.assign(Object.assign(Object.assign({},e.style),i),s)}),c=null===(o=this.context.element)||void 0===o?void 0:o.getElement(rg(e));c&&yF(a.style,c.attributes)||vF(t,c?"update":"add","edge",a,!0)}))}))}}beforeDraw(t){const e=this.getAffectedParallelEdges(t);return 0===e.size||("bundle"===this.options.mode?this.applyBundlingStyle(t,e,this.options.distance):this.applyMergingStyle(t,e)),t}}lz.defaultOptions={mode:"bundle",distance:15};const uz=t=>{const e=new Map,n=new Set,r={},i=new Map;for(const[o,s]of t){if(n.has(o))continue;const{source:a,target:c}=s,l=`${a}-${c}`;e.has(l)||(e.set(l,[]),i.set(l,new Set));const u=e.get(l),h=i.get(l);u&&h&&!h.has(o)&&(u.push(s),h.add(o),n.add(o));for(const[d,f]of t)if(!n.has(d)&&d!==o&&dz(s,f)){const t=e.get(l),o=i.get(l);t&&o&&!o.has(d)&&(t.push(f),o.add(d),a===f.target&&c===f.source&&(r[`${f.source}|${f.target}|${t.length-1}`]=!0),n.add(d))}}return{edgeMap:e,reverses:r}},hz=(t,e,n)=>e.filter((e=>(n||rg(e)!==rg(t))&&dz(e,t))),dz=(t,e)=>{const{sourceNode:n,targetNode:r}=t.style||{},{sourceNode:i,targetNode:o}=e.style||{};return n===i&&r===o||n===o&&r===i};class fz extends pF{beforeDraw(t,e){const{stage:n}=e;if("visibility"===n)return t;const{model:r}=this.context,{update:{nodes:i,edges:o,combos:s}}=t,a=(t,e)=>{const n=r.getRelatedEdgesData(e);n.forEach((t=>!o.has(rg(t))&&o.set(rg(t),t)))};return i.forEach(a),s.forEach(a),t}}const pz={animation:{"combo-collapse":_f,"combo-expand":Lf,"node-collapse":Af,"node-expand":Cf,"path-in":Pf,"path-out":Rf,fade:Nf,translate:Tf},behavior:{"brush-select":wv,"click-select":Pv,"collapse-expand":yw,"create-edge":kw,"drag-canvas":Nw,"drag-element-force":qw,"drag-element":Aw,"fix-element-size":Kw,"focus-element":Jw,"hover-activate":Qw,"lasso-select":tE,"auto-adapt-label":xg,"optimize-viewport-transform":eE,"scroll-canvas":rE,"zoom-canvas":oE},combo:{circle:Nb,rect:Tb},edge:{cubic:wx,line:Mx,polyline:Bx,quadratic:zx,"cubic-horizontal":Ex,"cubic-radial":kx,"cubic-vertical":Sx},layout:{"antv-dagre":US,"combo-combined":SO,"compact-box":sE.compactBox,"d3-force":wN,"force-atlas2":CN,circular:qS,concentric:tM,dagre:MN,dendrogram:sE.dendrogram,fishbone:aT,force:nO,fruchterman:_N,grid:DN,indented:sE.indented,mds:mO,mindmap:sE.mindmap,radial:XN,random:nT,snake:dT},node:{circle:Iy,diamond:Fy,ellipse:Hy,hexagon:$y,html:bb,image:wb,rect:Eb,star:kb,donut:zy,triangle:Sb},palette:{spectral:pT,tableau:gT,oranges:vT,greens:yT,blues:mT},theme:{dark:hF,light:fF},plugin:{"bubble-sets":CA,"edge-bundling":jA,"edge-filter-lens":YA,"grid-line":tC,background:TT,contextmenu:IA,fisheye:ZA,fullscreen:JA,history:oC,hull:eP,legend:x_,minimap:w_,snapline:O_,timebar:Rj,toolbar:zj,tooltip:Kj,watermark:iF},transform:{"arrange-draw-order":gF,"collapse-expand-combo":mF,"collapse-expand-node":xF,"get-edge-actual-ends":QB,"map-node-size":oz,"place-radial-labels":sz,"process-parallel-edges":lz,"update-related-edges":fz},shape:{circle:Cu,ellipse:_u,group:Du,html:ju,image:Oy,line:zu,path:Vu,polygon:Uu,polyline:$u,rect:Yu,text:Xu,label:py,badge:gy}};function gz(){Object.entries(pz).forEach((([t,e])=>{Object.entries(e).forEach((([e,n])=>{wF(t,e,n)}))}))}gz()},77083:function(t){function e(t){return function(){return t}}t.exports=e},77305:function(t){function e(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}t.exports=e},77347:function(t,e,n){"use strict";var r=n(43724),i=n(69565),o=n(48773),s=n(6980),a=n(25397),c=n(56969),l=n(39297),u=n(35917),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=c(e),u)try{return h(t,e)}catch(n){}if(l(t,e))return s(!i(o.f,t,e),t[e])}},77629:function(t,e,n){"use strict";var r=n(96395),i=n(44576),o=n(39433),s="__core-js_shared__",a=t.exports=i[s]||o(s,{});(a.versions||(a.versions=[])).push({version:"3.41.0",mode:r?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.41.0/LICENSE",source:"https://github.com/zloirock/core-js"})},77740:function(t,e,n){"use strict";var r=n(39297),i=n(35031),o=n(77347),s=n(24913);t.exports=function(t,e,n){for(var a=i(e),c=s.f,l=o.f,u=0;u<a.length;u++){var h=a[u];r(t,h)||n&&r(n,h)||c(t,h,l(e,h))}}},77770:function(t){function e(){return[]}t.exports=e},77811:function(t){"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},77936:function(t,e,n){"use strict";var r=n(46518),i=n(95636);i&&r({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return i(this,arguments.length?arguments[0]:void 0,!1)}})},78100:function(t,e,n){"use strict";var r=n(46518),i=n(95636);i&&r({target:"ArrayBuffer",proto:!0},{transfer:function(){return i(this,arguments.length?arguments[0]:void 0,!0)}})},78227:function(t,e,n){"use strict";var r=n(44576),i=n(25745),o=n(39297),s=n(33392),a=n(4495),c=n(7040),l=r.Symbol,u=i("wks"),h=c?l["for"]||l:l&&l.withoutSetter||s;t.exports=function(t){return o(u,t)||(u[t]=a&&o(l,t)?l[t]:h("Symbol."+t)),u[t]}},78659:function(t,e,n){n(44114);var r=n(89426),i=n(26409),o=Object.prototype,s=o.hasOwnProperty;function a(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}t.exports=a},78695:function(t,e,n){var r=n(58063),i=n(64011);function o(t,e){return null!=t&&i(t,e,r)}t.exports=o},79039:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},79306:function(t,e,n){"use strict";var r=n(94901),i=n(16823),o=TypeError;t.exports=function(t){if(r(t))return t;throw new o(i(t)+" is not a function")}},79472:function(t,e,n){"use strict";var r=n(44576),i=n(18745),o=n(94901),s=n(84215),a=n(82839),c=n(67680),l=n(22812),u=r.Function,h=/MSIE .\./.test(a)||"BUN"===s&&function(){var t=r.Bun.version.split(".");return t.length<3||"0"===t[0]&&(t[1]<3||"3"===t[1]&&"0"===t[2])}();t.exports=function(t,e){var n=e?2:1;return h?function(r,s){var a=l(arguments.length,1)>n,h=o(r)?r:u(r),d=a?c(arguments,n):[],f=a?function(){i(h,this,d)}:h;return e?t(f,s):t(f)}:t}},79504:function(t,e,n){"use strict";var r=n(40616),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);t.exports=r?s:function(t){return function(){return o.apply(t,arguments)}}},79577:function(t,e,n){"use strict";var r=n(39928),i=n(94644),o=n(18727),s=n(91291),a=n(75854),c=i.aTypedArray,l=i.getTypedArrayConstructor,u=i.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();u("with",{with:function(t,e){var n=c(this),i=s(t),u=o(n)?a(e):+e;return r(n,l(n),i,u)}}["with"],!h)},80475:function(t,e,n){var r=n(14784),i=n(51683),o=n(59106),s=n(15686),a=n(87136),c=n(85366),l=n(70317),u=n(44823),h=n(19692),d=n(29562);function f(t,e,n){var f=c(t),p=f||l(t)||d(t);if(e=s(e,4),null==n){var g=t&&t.constructor;n=p?f?new g:[]:h(t)&&u(g)?i(a(t)):{}}return(p?r:o)(t,(function(t,r,i){return e(n,t,r,i)})),n}t.exports=f},80741:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},80770:function(t,e,n){t=n.nmd(t);var r=n(86903),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s&&r.process,c=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=c},81148:function(t,e,n){"use strict";var r=n(46518),i=n(72652),o=n(79306),s=n(28551),a=n(1767);r({target:"Iterator",proto:!0,real:!0},{every:function(t){s(this),o(t);var e=a(this),n=0;return!i(e,(function(e,r){if(!t(e,n++))return r()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},81780:function(t){var e=800,n=16,r=Date.now;function i(t){var i=0,o=0;return function(){var s=r(),a=n-(s-o);if(o=s,a>0){if(++i>=e)return arguments[0]}else i=0;return t.apply(void 0,arguments)}}t.exports=i},82119:function(t,e,n){var r=n(7966),i=n(71990),o=n(47744),s=n(19692),a=n(99416);function c(t,e,n,c){if(!s(t))return t;e=i(e,t);var l=-1,u=e.length,h=u-1,d=t;while(null!=d&&++l<u){var f=a(e[l]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return t;if(l!=h){var g=d[f];p=c?c(g,f,d):void 0,void 0===p&&(p=s(g)?g:o(e[l+1])?[]:{})}r(d,f,p),d=d[f]}return t}t.exports=c},82839:function(t,e,n){"use strict";var r=n(44576),i=r.navigator,o=i&&i.userAgent;t.exports=o?String(o):""},82884:function(t){var e=/\w*$/;function n(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}t.exports=n},82887:function(t,e,n){var r=n(84428);function i(t,e){r(t,e),e.add(t)}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},82900:function(t,e,n){t.exports={components:n(44166),dijkstra:n(32188),dijkstraAll:n(22046),findCycles:n(30997),floydWarshall:n(16259),isAcyclic:n(1879),postorder:n(40118),preorder:n(45),prim:n(1114),tarjan:n(85386),topsort:n(55387)}},82976:function(t){function e(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}t.exports=e},83440:function(t,e,n){"use strict";var r=n(97080),i=n(94402),o=n(89286),s=n(25170),a=n(83789),c=n(38469),l=n(40507),u=i.has,h=i.remove;t.exports=function(t){var e=r(this),n=a(t),i=o(e);return s(e)<=n.size?c(e,(function(t){n.includes(t)&&h(i,t)})):l(n.getIterator(),(function(t){u(e,t)&&h(i,t)})),i}},83650:function(t,e,n){"use strict";var r=n(97080),i=n(94402),o=n(89286),s=n(83789),a=n(40507),c=i.add,l=i.has,u=i.remove;t.exports=function(t){var e=r(this),n=s(t).getIterator(),i=o(e);return a(n,(function(t){l(e,t)?u(i,t):c(i,t)})),i}},83789:function(t,e,n){"use strict";var r=n(79306),i=n(28551),o=n(69565),s=n(91291),a=n(1767),c="Invalid size",l=RangeError,u=TypeError,h=Math.max,d=function(t,e){this.set=t,this.size=h(e,0),this.has=r(t.has),this.keys=r(t.keys)};d.prototype={getIterator:function(){return a(i(o(this.keys,this.set)))},includes:function(t){return o(this.has,this.set,t)}},t.exports=function(t){i(t);var e=+t.size;if(e!==e)throw new u(c);var n=s(e);if(n<0)throw new l(c);return new d(t,n)}},84215:function(t,e,n){"use strict";var r=n(44576),i=n(82839),o=n(22195),s=function(t){return i.slice(0,t.length)===t};t.exports=function(){return s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":r.Bun&&"string"==typeof Bun.version?"BUN":r.Deno&&"object"==typeof Deno.version?"DENO":"process"===o(r.process)?"NODE":r.window&&r.document?"BROWSER":"REST"}()},84243:function(t,e,n){var r=n(64867),i=n(19692),o=n(29299),s=NaN,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;function h(t){if("number"==typeof t)return t;if(o(t))return s;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=c.test(t);return n||l.test(t)?u(t.slice(2),n?2:8):a.test(t)?s:+t}t.exports=h},84270:function(t,e,n){"use strict";var r=n(69565),i=n(94901),o=n(20034),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!o(a=r(n,t)))return a;if(i(n=t.valueOf)&&!o(a=r(n,t)))return a;if("string"!==e&&i(n=t.toString)&&!o(a=r(n,t)))return a;throw new s("Can't convert object to primitive value")}},84276:function(t){function e(t){return function(e){return t(e)}}t.exports=e},84391:function(t){function e(t,e){var n=-1,r=null==t?0:t.length,i=0,o=[];while(++n<r){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}t.exports=e},84428:function(t){function e(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}t.exports=e,t.exports.__esModule=!0,t.exports["default"]=t.exports},84916:function(t,e,n){"use strict";var r=n(97751),i=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},o=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};t.exports=function(t,e){var n=r("Set");try{(new n)[t](i(0));try{return(new n)[t](i(-1)),!1}catch(a){if(!e)return!0;try{return(new n)[t](o(-1/0)),!1}catch(c){var s=new n;return s.add(1),s.add(2),e(s[t](o(1/0)))}}}catch(c){return!1}}},85091:function(t){function e(t){return null!=t&&"object"==typeof t}t.exports=e},85340:function(t,e,n){var r=n(13867),i=n(81780),o=i(r);t.exports=o},85366:function(t){var e=Array.isArray;t.exports=e},85386:function(t,e,n){n(44114),n(18111),n(7588);var r=n(27260);function i(t){var e=0,n=[],i={},o=[];function s(a){var c=i[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach((function(t){r.has(i,t)?i[t].onStack&&(c.lowlink=Math.min(c.lowlink,i[t].index)):(s(t),c.lowlink=Math.min(c.lowlink,i[t].lowlink))})),c.lowlink===c.index){var l,u=[];do{l=n.pop(),i[l].onStack=!1,u.push(l)}while(a!==l);o.push(u)}}return t.nodes().forEach((function(t){r.has(i,t)||s(t)})),o}t.exports=i},85677:function(t){var e=Object.prototype,n=e.toString;function r(t){return n.call(t)}t.exports=r},85858:function(t){var e="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=n+r+i,s="\\ufe0e\\ufe0f",a="["+e+"]",c="["+o+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+c+"|"+l+")",h="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",g=u+"?",v="["+s+"]?",y="(?:"+p+"(?:"+[h,d,f].join("|")+")"+v+g+")*",m=v+g+y,b="(?:"+[h+c+"?",c,d,f,a].join("|")+")",x=RegExp(l+"(?="+l+")|"+b+m,"g");function w(t){var e=x.lastIndex=0;while(x.test(t))++e;return e}t.exports=w},85926:function(t){function e(t){return this.__data__.has(t)}t.exports=e},86061:function(t){function e(t,e){return t===e||t!==t&&e!==e}t.exports=e},86250:function(t,e,n){var r=n(99315),i=n(85366),o=n(85091),s="[object String]";function a(t){return"string"==typeof t||!i(t)&&o(t)&&r(t)==s}t.exports=a},86368:function(t,e,n){"use strict";var r=n(46518),i=n(44576),o=n(59225).clear;r({global:!0,bind:!0,enumerable:!0,forced:i.clearImmediate!==o},{clearImmediate:o})},86847:function(t){function e(){}t.exports=e},86903:function(t,e,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},87136:function(t,e,n){var r=n(98230),i=r(Object.getPrototypeOf,Object);t.exports=i},87242:function(t,e,n){var r=n(97874),i=n(15219),o=n(85366),s=r?r.isConcatSpreadable:void 0;function a(t){return o(t)||i(t)||!!(s&&t&&t[s])}t.exports=a},87376:function(t,e,n){var r=n(72288),i=n(86847),o=n(61764),s=1/0,a=r&&1/o(new r([,-0]))[1]==s?function(t){return new r(t)}:i;t.exports=a},87969:function(t,e,n){n(44114),n(18111),n(7588);var r=n(34230);function i(t){var e=s(t);r.forEach(t.graph().dummyChains,(function(n){var r=t.node(n),i=r.edgeObj,s=o(t,e,i.v,i.w),a=s.path,c=s.lca,l=0,u=a[l],h=!0;while(n!==i.w){if(r=t.node(n),h){while((u=a[l])!==c&&t.node(u).maxRank<r.rank)l++;u===c&&(h=!1)}if(!h){while(l<a.length-1&&t.node(u=a[l+1]).minRank<=r.rank)l++;u=a[l]}t.setParent(n,u),n=t.successors(n)[0]}}))}function o(t,e,n,r){var i,o,s=[],a=[],c=Math.min(e[n].low,e[r].low),l=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),s.push(i)}while(i&&(e[i].low>c||l>e[i].lim));o=i,i=r;while((i=t.parent(i))!==o)a.push(i);return{path:s.concat(a.reverse()),lca:o}}function s(t){var e={},n=0;function i(o){var s=n;r.forEach(t.children(o),i),e[o]={low:s,lim:n++}}return r.forEach(t.children(),i),e}t.exports=i},88090:function(t,e,n){var r=n(50968),i=n(89915);function o(t,e){return r(t,i(t),e)}t.exports=o},88727:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},88864:function(t,e,n){var r=n(52387);function i(t){return function(e){return r(e,t)}}t.exports=i},88987:function(t,e,n){var r=n(93238),i=n(78659),o=n(48465);function s(t){return o(t)?r(t):i(t)}t.exports=s},89253:function(t,e,n){var r=n(15686),i=n(48465),o=n(88987);function s(t){return function(e,n,s){var a=Object(e);if(!i(e)){var c=r(n,3);e=o(e),n=function(t){return c(a[t],t,a)}}var l=t(e,n,s);return l>-1?a[c?e[l]:l]:void 0}}t.exports=s},89286:function(t,e,n){"use strict";var r=n(94402),i=n(38469),o=r.Set,s=r.add;t.exports=function(t){var e=new o;return i(t,(function(t){s(e,t)})),e}},89426:function(t){var e=Object.prototype;function n(t){var n=t&&t.constructor,r="function"==typeof n&&n.prototype||e;return t===r}t.exports=n},89429:function(t,e,n){"use strict";var r=n(44576),i=n(16193);t.exports=function(t){if(i){try{return r.process.getBuiltinModule(t)}catch(e){}try{return Function('return require("'+t+'")')()}catch(e){}}}},89544:function(t,e,n){"use strict";var r=n(82839);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},89545:function(t,e,n){var r=n(15841),i=n(88987);function o(t){return null==t?[]:r(t,i(t))}t.exports=o},89678:function(t,e,n){n(18111),n(7588);var r=n(34230),i=n(6247);function o(t){function e(n){var i=t.children(n),o=t.node(n);if(i.length&&r.forEach(i,e),r.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var a=o.minRank,c=o.maxRank+1;a<c;++a)s(t,"borderLeft","_bl",n,o,a),s(t,"borderRight","_br",n,o,a)}}r.forEach(t.children(),e)}function s(t,e,n,r,o,s){var a={width:0,height:0,rank:s,borderType:e},c=o[e][s-1],l=i.addDummyNode(t,"border",a,n);o[e][s]=l,t.setParent(l,r),c&&t.setEdge(c,l,{weight:1})}t.exports=o},89712:function(t,e,n){var r=n(89253),i=n(70618),o=r(i);t.exports=o},89802:function(t,e,n){var r=n(94857),i=n(74854),o=n(2409),s=n(31207),a=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&s(t,e[0],e[1])?e=[]:n>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])}));t.exports=a},89915:function(t,e,n){var r=n(84391),i=n(77770),o=Object.prototype,s=o.propertyIsEnumerable,a=Object.getOwnPropertySymbols,c=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return s.call(t,e)})))}:i;t.exports=c},90144:function(t,e,n){"use strict";n.d(e,{C4:function(){return S},EW:function(){return _t},Gc:function(){return yt},IG:function(){return Mt},Kh:function(){return vt},Pr:function(){return Pt},R1:function(){return At},X2:function(){return l},bl:function(){return M},fE:function(){return Et},g8:function(){return xt},hV:function(){return Bt},hZ:function(){return I},i9:function(){return Tt},ju:function(){return kt},lJ:function(){return Ot},qA:function(){return F},u4:function(){return D},ux:function(){return St},wB:function(){return Ft},yC:function(){return s}});n(44114),n(9678),n(57145),n(71658),n(18111),n(22489),n(7588),n(61701),n(13579),n(69479),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698);var r=n(24232);let i,o;class s{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=i,!t&&i&&(this.index=(i.scopes||(i.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let t,e;if(this._isPaused=!0,this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){let t,e;if(this._isPaused=!1,this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=i;try{return i=this,t()}finally{i=e}}else 0}on(){i=this}off(){i=this.parent}stop(t){if(this._active){let e,n;for(this._active=!1,e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(this.effects.length=0,e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0}}}function a(){return i}const c=new WeakSet;class l{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,i&&i.active&&i.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,c.has(this)&&(c.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||f(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,O(this),v(this);const t=o,e=E;o=this,E=!0;try{return this.fn()}finally{0,y(this),o=t,E=e,this.flags&=-3}}stop(){if(1&this.flags){for(let t=this.deps;t;t=t.nextDep)x(t);this.deps=this.depsTail=void 0,O(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?c.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){m(this)&&this.run()}get dirty(){return m(this)}}let u,h,d=0;function f(t,e=!1){if(t.flags|=8,e)return t.next=h,void(h=t);t.next=u,u=t}function p(){d++}function g(){if(--d>0)return;if(h){let t=h;h=void 0;while(t){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let t;while(u){let n=u;u=void 0;while(n){const r=n.next;if(n.next=void 0,n.flags&=-9,1&n.flags)try{n.trigger()}catch(e){t||(t=e)}n=r}}if(t)throw t}function v(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function y(t){let e,n=t.depsTail,r=n;while(r){const t=r.prevDep;-1===r.version?(r===n&&(n=t),x(r),w(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=t}t.deps=e,t.depsTail=n}function m(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(b(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function b(t){if(4&t.flags&&!(16&t.flags))return;if(t.flags&=-17,t.globalVersion===N)return;t.globalVersion=N;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!m(t))return void(t.flags&=-3);const n=o,i=E;o=t,E=!0;try{v(t);const n=t.fn(t._value);(0===e.version||(0,r.$H)(n,t._value))&&(t._value=n,e.version++)}catch(s){throw e.version++,s}finally{o=n,E=i,y(t),t.flags&=-3}}function x(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let t=n.computed.deps;t;t=t.nextDep)x(t,!0)}e||--n.sc||!n.map||n.map.delete(n.key)}function w(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let E=!0;const k=[];function S(){k.push(E),E=!1}function M(){const t=k.pop();E=void 0===t||t}function O(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const t=o;o=void 0;try{e()}finally{o=t}}}let N=0;class T{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class A{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!o||!E||o===this.computed)return;let e=this.activeLink;if(void 0===e||e.sub!==o)e=this.activeLink=new T(o,this),o.deps?(e.prevDep=o.depsTail,o.depsTail.nextDep=e,o.depsTail=e):o.deps=o.depsTail=e,C(e);else if(-1===e.version&&(e.version=this.version,e.nextDep)){const t=e.nextDep;t.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=t),e.prevDep=o.depsTail,e.nextDep=void 0,o.depsTail.nextDep=e,o.depsTail=e,o.deps===e&&(o.deps=t)}return e}trigger(t){this.version++,N++,this.notify(t)}notify(t){p();try{0;for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{g()}}}function C(t){if(t.dep.sc++,4&t.sub.flags){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let t=e.deps;t;t=t.nextDep)C(t)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const P=new WeakMap,R=Symbol(""),_=Symbol(""),L=Symbol("");function D(t,e,n){if(E&&o){let e=P.get(t);e||P.set(t,e=new Map);let r=e.get(n);r||(e.set(n,r=new A),r.map=e,r.key=n),r.track()}}function I(t,e,n,i,o,s){const a=P.get(t);if(!a)return void N++;const c=t=>{t&&t.trigger()};if(p(),"clear"===e)a.forEach(c);else{const o=(0,r.cy)(t),s=o&&(0,r.yI)(n);if(o&&"length"===n){const t=Number(i);a.forEach(((e,n)=>{("length"===n||n===L||!(0,r.Bm)(n)&&n>=t)&&c(e)}))}else switch((void 0!==n||a.has(void 0))&&c(a.get(n)),s&&c(a.get(L)),e){case"add":o?s&&c(a.get("length")):(c(a.get(R)),(0,r.CE)(t)&&c(a.get(_)));break;case"delete":o||(c(a.get(R)),(0,r.CE)(t)&&c(a.get(_)));break;case"set":(0,r.CE)(t)&&c(a.get(R));break}}g()}function j(t){const e=St(t);return e===t?e:(D(e,"iterate",L),Et(t)?e:e.map(Ot))}function F(t){return D(t=St(t),"iterate",L),t}const B={__proto__:null,[Symbol.iterator](){return z(this,Symbol.iterator,Ot)},concat(...t){return j(this).concat(...t.map((t=>(0,r.cy)(t)?j(t):t)))},entries(){return z(this,"entries",(t=>(t[1]=Ot(t[1]),t)))},every(t,e){return V(this,"every",t,e,void 0,arguments)},filter(t,e){return V(this,"filter",t,e,(t=>t.map(Ot)),arguments)},find(t,e){return V(this,"find",t,e,Ot,arguments)},findIndex(t,e){return V(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return V(this,"findLast",t,e,Ot,arguments)},findLastIndex(t,e){return V(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return V(this,"forEach",t,e,void 0,arguments)},includes(...t){return U(this,"includes",t)},indexOf(...t){return U(this,"indexOf",t)},join(t){return j(this).join(t)},lastIndexOf(...t){return U(this,"lastIndexOf",t)},map(t,e){return V(this,"map",t,e,void 0,arguments)},pop(){return H(this,"pop")},push(...t){return H(this,"push",t)},reduce(t,...e){return W(this,"reduce",t,e)},reduceRight(t,...e){return W(this,"reduceRight",t,e)},shift(){return H(this,"shift")},some(t,e){return V(this,"some",t,e,void 0,arguments)},splice(...t){return H(this,"splice",t)},toReversed(){return j(this).toReversed()},toSorted(t){return j(this).toSorted(t)},toSpliced(...t){return j(this).toSpliced(...t)},unshift(...t){return H(this,"unshift",t)},values(){return z(this,"values",Ot)}};function z(t,e,n){const r=F(t),i=r[e]();return r===t||Et(t)||(i._next=i.next,i.next=()=>{const t=i._next();return t.value&&(t.value=n(t.value)),t}),i}const G=Array.prototype;function V(t,e,n,r,i,o){const s=F(t),a=s!==t&&!Et(t),c=s[e];if(c!==G[e]){const e=c.apply(t,o);return a?Ot(e):e}let l=n;s!==t&&(a?l=function(e,r){return n.call(this,Ot(e),r,t)}:n.length>2&&(l=function(e,r){return n.call(this,e,r,t)}));const u=c.call(s,l,r);return a&&i?i(u):u}function W(t,e,n,r){const i=F(t);let o=n;return i!==t&&(Et(t)?n.length>3&&(o=function(e,r,i){return n.call(this,e,r,i,t)}):o=function(e,r,i){return n.call(this,e,Ot(r),i,t)}),i[e](o,...r)}function U(t,e,n){const r=St(t);D(r,"iterate",L);const i=r[e](...n);return-1!==i&&!1!==i||!kt(n[0])?i:(n[0]=St(n[0]),r[e](...n))}function H(t,e,n=[]){S(),p();const r=St(t)[e].apply(t,n);return g(),M(),r}const $=(0,r.pD)("__proto__,__v_isRef,__isVue"),Y=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(r.Bm));function q(t){(0,r.Bm)(t)||(t=String(t));const e=St(this);return D(e,"has",t),e.hasOwnProperty(t)}class X{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,n){if("__v_skip"===e)return t["__v_skip"];const i=this._isReadonly,o=this._isShallow;if("__v_isReactive"===e)return!i;if("__v_isReadonly"===e)return i;if("__v_isShallow"===e)return o;if("__v_raw"===e)return n===(i?o?ft:dt:o?ht:ut).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const s=(0,r.cy)(t);if(!i){let t;if(s&&(t=B[e]))return t;if("hasOwnProperty"===e)return q}const a=Reflect.get(t,e,Tt(t)?t:n);return((0,r.Bm)(e)?Y.has(e):$(e))?a:(i||D(t,"get",e),o?a:Tt(a)?s&&(0,r.yI)(e)?a:a.value:(0,r.Gv)(a)?i?mt(a):vt(a):a)}}class K extends X{constructor(t=!1){super(!1,t)}set(t,e,n,i){let o=t[e];if(!this._isShallow){const e=wt(o);if(Et(n)||wt(n)||(o=St(o),n=St(n)),!(0,r.cy)(t)&&Tt(o)&&!Tt(n))return!e&&(o.value=n,!0)}const s=(0,r.cy)(t)&&(0,r.yI)(e)?Number(e)<t.length:(0,r.$3)(t,e),a=Reflect.set(t,e,n,Tt(t)?t:i);return t===St(i)&&(s?(0,r.$H)(n,o)&&I(t,"set",e,n,o):I(t,"add",e,n)),a}deleteProperty(t,e){const n=(0,r.$3)(t,e),i=t[e],o=Reflect.deleteProperty(t,e);return o&&n&&I(t,"delete",e,void 0,i),o}has(t,e){const n=Reflect.has(t,e);return(0,r.Bm)(e)&&Y.has(e)||D(t,"has",e),n}ownKeys(t){return D(t,"iterate",(0,r.cy)(t)?"length":R),Reflect.ownKeys(t)}}class Z extends X{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const J=new K,Q=new Z,tt=new K(!0),et=t=>t,nt=t=>Reflect.getPrototypeOf(t);function rt(t,e,n){return function(...i){const o=this["__v_raw"],s=St(o),a=(0,r.CE)(s),c="entries"===t||t===Symbol.iterator&&a,l="keys"===t&&a,u=o[t](...i),h=n?et:e?Nt:Ot;return!e&&D(s,"iterate",l?_:R),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:c?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function it(t){return function(...e){return"delete"!==t&&("clear"===t?void 0:this)}}function ot(t,e){const n={get(n){const i=this["__v_raw"],o=St(i),s=St(n);t||((0,r.$H)(n,s)&&D(o,"get",n),D(o,"get",s));const{has:a}=nt(o),c=e?et:t?Nt:Ot;return a.call(o,n)?c(i.get(n)):a.call(o,s)?c(i.get(s)):void(i!==o&&i.get(n))},get size(){const e=this["__v_raw"];return!t&&D(St(e),"iterate",R),Reflect.get(e,"size",e)},has(e){const n=this["__v_raw"],i=St(n),o=St(e);return t||((0,r.$H)(e,o)&&D(i,"has",e),D(i,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)},forEach(n,r){const i=this,o=i["__v_raw"],s=St(o),a=e?et:t?Nt:Ot;return!t&&D(s,"iterate",R),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}};(0,r.X$)(n,t?{add:it("add"),set:it("set"),delete:it("delete"),clear:it("clear")}:{add(t){e||Et(t)||wt(t)||(t=St(t));const n=St(this),r=nt(n),i=r.has.call(n,t);return i||(n.add(t),I(n,"add",t,t)),this},set(t,n){e||Et(n)||wt(n)||(n=St(n));const i=St(this),{has:o,get:s}=nt(i);let a=o.call(i,t);a||(t=St(t),a=o.call(i,t));const c=s.call(i,t);return i.set(t,n),a?(0,r.$H)(n,c)&&I(i,"set",t,n,c):I(i,"add",t,n),this},delete(t){const e=St(this),{has:n,get:r}=nt(e);let i=n.call(e,t);i||(t=St(t),i=n.call(e,t));const o=r?r.call(e,t):void 0,s=e.delete(t);return i&&I(e,"delete",t,void 0,o),s},clear(){const t=St(this),e=0!==t.size,n=void 0,r=t.clear();return e&&I(t,"clear",void 0,void 0,n),r}});const i=["keys","values","entries",Symbol.iterator];return i.forEach((r=>{n[r]=rt(r,t,e)})),n}function st(t,e){const n=ot(t,e);return(e,i,o)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,r.$3)(n,i)&&i in e?n:e,i,o)}const at={get:st(!1,!1)},ct={get:st(!1,!0)},lt={get:st(!0,!1)};const ut=new WeakMap,ht=new WeakMap,dt=new WeakMap,ft=new WeakMap;function pt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:pt((0,r.Zf)(t))}function vt(t){return wt(t)?t:bt(t,!1,J,at,ut)}function yt(t){return bt(t,!1,tt,ct,ht)}function mt(t){return bt(t,!0,Q,lt,dt)}function bt(t,e,n,i,o){if(!(0,r.Gv)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const s=o.get(t);if(s)return s;const a=gt(t);if(0===a)return t;const c=new Proxy(t,2===a?i:n);return o.set(t,c),c}function xt(t){return wt(t)?xt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function wt(t){return!(!t||!t["__v_isReadonly"])}function Et(t){return!(!t||!t["__v_isShallow"])}function kt(t){return!!t&&!!t["__v_raw"]}function St(t){const e=t&&t["__v_raw"];return e?St(e):t}function Mt(t){return!(0,r.$3)(t,"__v_skip")&&Object.isExtensible(t)&&(0,r.yQ)(t,"__v_skip",!0),t}const Ot=t=>(0,r.Gv)(t)?vt(t):t,Nt=t=>(0,r.Gv)(t)?mt(t):t;function Tt(t){return!!t&&!0===t["__v_isRef"]}function At(t){return Tt(t)?t.value:t}const Ct={get:(t,e,n)=>"__v_raw"===e?t:At(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Tt(i)&&!Tt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Pt(t){return xt(t)?t:new Proxy(t,Ct)}class Rt{constructor(t,e,n){this.fn=t,this.setter=e,this._value=void 0,this.dep=new A(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=N-1,this.next=void 0,this.effect=this,this["__v_isReadonly"]=!e,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags||o===this))return f(this,!0),!0}get value(){const t=this.dep.track();return b(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function _t(t,e,n=!1){let i,o;(0,r.Tn)(t)?i=t:(i=t.get,o=t.set);const s=new Rt(i,o,n);return s}const Lt={},Dt=new WeakMap;let It;function jt(t,e=!1,n=It){if(n){let e=Dt.get(n);e||Dt.set(n,e=[]),e.push(t)}else 0}function Ft(t,e,n=r.MZ){const{immediate:i,deep:o,once:s,scheduler:c,augmentJob:u,call:h}=n,d=t=>o?t:Et(t)||!1===o||0===o?Bt(t,1):Bt(t);let f,p,g,v,y=!1,m=!1;if(Tt(t)?(p=()=>t.value,y=Et(t)):xt(t)?(p=()=>d(t),y=!0):(0,r.cy)(t)?(m=!0,y=t.some((t=>xt(t)||Et(t))),p=()=>t.map((t=>Tt(t)?t.value:xt(t)?d(t):(0,r.Tn)(t)?h?h(t,2):t():void 0))):p=(0,r.Tn)(t)?e?h?()=>h(t,2):t:()=>{if(g){S();try{g()}finally{M()}}const e=It;It=f;try{return h?h(t,3,[v]):t(v)}finally{It=e}}:r.tE,e&&o){const t=p,e=!0===o?1/0:o;p=()=>Bt(t(),e)}const b=a(),x=()=>{f.stop(),b&&b.active&&(0,r.TF)(b.effects,f)};if(s&&e){const t=e;e=(...e)=>{t(...e),x()}}let w=m?new Array(t.length).fill(Lt):Lt;const E=t=>{if(1&f.flags&&(f.dirty||t))if(e){const t=f.run();if(o||y||(m?t.some(((t,e)=>(0,r.$H)(t,w[e]))):(0,r.$H)(t,w))){g&&g();const n=It;It=f;try{const n=[t,w===Lt?void 0:m&&w[0]===Lt?[]:w,v];h?h(e,3,n):e(...n),w=t}finally{It=n}}}else f.run()};return u&&u(E),f=new l(p),f.scheduler=c?()=>c(E,!1):E,v=t=>jt(t,!1,f),g=f.onStop=()=>{const t=Dt.get(f);if(t){if(h)h(t,4);else for(const e of t)e();Dt.delete(f)}},e?i?E(!0):w=f.run():c?c(E.bind(null,!0),!0):f.run(),x.pause=f.pause.bind(f),x.resume=f.resume.bind(f),x.stop=x,x}function Bt(t,e=1/0,n){if(e<=0||!(0,r.Gv)(t)||t["__v_skip"])return t;if(n=n||new Set,n.has(t))return t;if(n.add(t),e--,Tt(t))Bt(t.value,e,n);else if((0,r.cy)(t))for(let r=0;r<t.length;r++)Bt(t[r],e,n);else if((0,r.vM)(t)||(0,r.CE)(t))t.forEach((t=>{Bt(t,e,n)}));else if((0,r.Qd)(t)){for(const r in t)Bt(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Bt(t[r],e,n)}return t}},90679:function(t,e,n){"use strict";var r=n(1625),i=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw new i("Incorrect invocation")}},90957:function(t,e,n){var r=n(84391),i=n(72949),o=n(15686),s=n(85366);function a(t,e){var n=s(t)?r:i;return n(t,o(e,3))}t.exports=a},91181:function(t,e,n){"use strict";var r,i,o,s=n(58622),a=n(44576),c=n(20034),l=n(66699),u=n(39297),h=n(77629),d=n(66119),f=n(30421),p="Object already initialized",g=a.TypeError,v=a.WeakMap,y=function(t){return o(t)?i(t):r(t,{})},m=function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return n}};if(s||h.state){var b=h.state||(h.state=new v);b.get=b.get,b.has=b.has,b.set=b.set,r=function(t,e){if(b.has(t))throw new g(p);return e.facade=t,b.set(t,e),e},i=function(t){return b.get(t)||{}},o=function(t){return b.has(t)}}else{var x=d("state");f[x]=!0,r=function(t,e){if(u(t,x))throw new g(p);return e.facade=t,l(t,x,e),e},i=function(t){return u(t,x)?t[x]:{}},o=function(t){return u(t,x)}}t.exports={set:r,get:i,has:o,enforce:y,getterFor:m}},91261:function(t,e,n){var r=n(50968),i=n(98184);function o(t,e){return r(t,i(t),e)}t.exports=o},91291:function(t,e,n){"use strict";var r=n(80741);t.exports=function(t){var e=+t;return e!==e||0===e?0:r(e)}},92119:function(t,e,n){t.exports={graphlib:n(74332),layout:n(22149),debug:n(18840),util:{time:n(6247).time,notime:n(6247).notime},version:n(14807)}},92140:function(t,e,n){"use strict";var r=n(78227),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},92329:function(t,e,n){var r=n(21268),i=n(89915),o=n(88987);function s(t){return r(t,o,i)}t.exports=s},92796:function(t,e,n){"use strict";var r=n(79039),i=n(94901),o=/#|\.prototype\./,s=function(t,e){var n=c[a(t)];return n===u||n!==l&&(i(e)?r(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},92911:function(t,e,n){var r=n(50968),i=n(58664);function o(t){return r(t,i(t))}t.exports=o},93238:function(t,e,n){n(44114);var r=n(77305),i=n(15219),o=n(85366),s=n(70317),a=n(47744),c=n(29562),l=Object.prototype,u=l.hasOwnProperty;function h(t,e){var n=o(t),l=!n&&i(t),h=!n&&!l&&s(t),d=!n&&!l&&!h&&c(t),f=n||l||h||d,p=f?r(t.length,String):[],g=p.length;for(var v in t)!e&&!u.call(t,v)||f&&("length"==v||h&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,g))||p.push(v);return p}t.exports=h},94094:function(t,e,n){n(44114);var r=n(1676),i=n(26284),o=n(15668),s=n(44032),a=n(87376),c=n(61764),l=200;function u(t,e,n){var u=-1,h=i,d=t.length,f=!0,p=[],g=p;if(n)f=!1,h=o;else if(d>=l){var v=e?null:a(t);if(v)return c(v);f=!1,h=s,g=new r}else g=e?[]:p;t:while(++u<d){var y=t[u],m=e?e(y):y;if(y=n||0!==y?y:0,f&&m===m){var b=g.length;while(b--)if(g[b]===m)continue t;e&&g.push(m),p.push(y)}else h(g,m,n)||(g!==p&&g.push(m),p.push(y))}return p}t.exports=u},94373:function(t,e,n){"use strict";n.d(e,{A:function(){return gn}});var r={};n.r(r),n.d(r,{hasBrowserEnv:function(){return Lt},hasStandardBrowserEnv:function(){return It},hasStandardBrowserWebWorkerEnv:function(){return jt},navigator:function(){return Dt},origin:function(){return Ft}});n(44114),n(16573),n(78100),n(77936),n(18111),n(7588),n(37467),n(44732),n(79577),n(59848);function i(t,e){return function(){return t.apply(e,arguments)}}const{toString:o}=Object.prototype,{getPrototypeOf:s}=Object,a=(t=>e=>{const n=o.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),c=t=>(t=t.toLowerCase(),e=>a(e)===t),l=t=>e=>typeof e===t,{isArray:u}=Array,h=l("undefined");function d(t){return null!==t&&!h(t)&&null!==t.constructor&&!h(t.constructor)&&v(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const f=c("ArrayBuffer");function p(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&f(t.buffer),e}const g=l("string"),v=l("function"),y=l("number"),m=t=>null!==t&&"object"===typeof t,b=t=>!0===t||!1===t,x=t=>{if("object"!==a(t))return!1;const e=s(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},w=c("Date"),E=c("File"),k=c("Blob"),S=c("FileList"),M=t=>m(t)&&v(t.pipe),O=t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||v(t.append)&&("formdata"===(e=a(t))||"object"===e&&v(t.toString)&&"[object FormData]"===t.toString()))},N=c("URLSearchParams"),[T,A,C,P]=["ReadableStream","Request","Response","Headers"].map(c),R=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _(t,e,{allOwnKeys:n=!1}={}){if(null===t||"undefined"===typeof t)return;let r,i;if("object"!==typeof t&&(t=[t]),u(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let s;for(r=0;r<o;r++)s=i[r],e.call(null,t[s],s,t)}}function L(t,e){e=e.toLowerCase();const n=Object.keys(t);let r,i=n.length;while(i-- >0)if(r=n[i],e===r.toLowerCase())return r;return null}const D=(()=>"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global)(),I=t=>!h(t)&&t!==D;function j(){const{caseless:t}=I(this)&&this||{},e={},n=(n,r)=>{const i=t&&L(e,r)||r;x(e[i])&&x(n)?e[i]=j(e[i],n):x(n)?e[i]=j({},n):u(n)?e[i]=n.slice():e[i]=n};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&_(arguments[r],n);return e}const F=(t,e,n,{allOwnKeys:r}={})=>(_(e,((e,r)=>{n&&v(e)?t[r]=i(e,n):t[r]=e}),{allOwnKeys:r}),t),B=t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),z=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},G=(t,e,n,r)=>{let i,o,a;const c={};if(e=e||{},null==t)return e;do{i=Object.getOwnPropertyNames(t),o=i.length;while(o-- >0)a=i[o],r&&!r(a,t,e)||c[a]||(e[a]=t[a],c[a]=!0);t=!1!==n&&s(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},V=(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},W=t=>{if(!t)return null;if(u(t))return t;let e=t.length;if(!y(e))return null;const n=new Array(e);while(e-- >0)n[e]=t[e];return n},U=(t=>e=>t&&e instanceof t)("undefined"!==typeof Uint8Array&&s(Uint8Array)),H=(t,e)=>{const n=t&&t[Symbol.iterator],r=n.call(t);let i;while((i=r.next())&&!i.done){const n=i.value;e.call(t,n[0],n[1])}},$=(t,e)=>{let n;const r=[];while(null!==(n=t.exec(e)))r.push(n);return r},Y=c("HTMLFormElement"),q=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),X=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),K=c("RegExp"),Z=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};_(n,((n,i)=>{let o;!1!==(o=e(n,i,t))&&(r[i]=o||n)})),Object.defineProperties(t,r)},J=t=>{Z(t,((e,n)=>{if(v(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];v(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},Q=(t,e)=>{const n={},r=t=>{t.forEach((t=>{n[t]=!0}))};return u(t)?r(t):r(String(t).split(e)),n},tt=()=>{},et=(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e;function nt(t){return!!(t&&v(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])}const rt=t=>{const e=new Array(10),n=(t,r)=>{if(m(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const i=u(t)?[]:{};return _(t,((t,e)=>{const o=n(t,r+1);!h(o)&&(i[e]=o)})),e[r]=void 0,i}}return t};return n(t,0)},it=c("AsyncFunction"),ot=t=>t&&(m(t)||v(t))&&v(t.then)&&v(t.catch),st=((t,e)=>t?setImmediate:e?((t,e)=>(D.addEventListener("message",(({source:n,data:r})=>{n===D&&r===t&&e.length&&e.shift()()}),!1),n=>{e.push(n),D.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))("function"===typeof setImmediate,v(D.postMessage)),at="undefined"!==typeof queueMicrotask?queueMicrotask.bind(D):"undefined"!==typeof process&&process.nextTick||st;var ct={isArray:u,isArrayBuffer:f,isBuffer:d,isFormData:O,isArrayBufferView:p,isString:g,isNumber:y,isBoolean:b,isObject:m,isPlainObject:x,isReadableStream:T,isRequest:A,isResponse:C,isHeaders:P,isUndefined:h,isDate:w,isFile:E,isBlob:k,isRegExp:K,isFunction:v,isStream:M,isURLSearchParams:N,isTypedArray:U,isFileList:S,forEach:_,merge:j,extend:F,trim:R,stripBOM:B,inherits:z,toFlatObject:G,kindOf:a,kindOfTest:c,endsWith:V,toArray:W,forEachEntry:H,matchAll:$,isHTMLForm:Y,hasOwnProperty:X,hasOwnProp:X,reduceDescriptors:Z,freezeMethods:J,toObjectSet:Q,toCamelCase:q,noop:tt,toFiniteNumber:et,findKey:L,global:D,isContextDefined:I,isSpecCompliantForm:nt,toJSONObject:rt,isAsyncFn:it,isThenable:ot,setImmediate:st,asap:at};n(61701),n(13579),n(61806);function lt(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ct.inherits(lt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ct.toJSONObject(this.config),code:this.code,status:this.status}}});const ut=lt.prototype,ht={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{ht[t]={value:t}})),Object.defineProperties(lt,ht),Object.defineProperty(ut,"isAxiosError",{value:!0}),lt.from=(t,e,n,r,i,o)=>{const s=Object.create(ut);return ct.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),lt.call(s,t.message,e,n,r,i),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};var dt=lt,ft=null;function pt(t){return ct.isPlainObject(t)||ct.isArray(t)}function gt(t){return ct.endsWith(t,"[]")?t.slice(0,-2):t}function vt(t,e,n){return t?t.concat(e).map((function(t,e){return t=gt(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}function yt(t){return ct.isArray(t)&&!t.some(pt)}const mt=ct.toFlatObject(ct,{},null,(function(t){return/^is[A-Z]/.test(t)}));function bt(t,e,n){if(!ct.isObject(t))throw new TypeError("target must be an object");e=e||new(ft||FormData),n=ct.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!ct.isUndefined(e[t])}));const r=n.metaTokens,i=n.visitor||u,o=n.dots,s=n.indexes,a=n.Blob||"undefined"!==typeof Blob&&Blob,c=a&&ct.isSpecCompliantForm(e);if(!ct.isFunction(i))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(ct.isDate(t))return t.toISOString();if(!c&&ct.isBlob(t))throw new dt("Blob is not supported. Use a Buffer instead.");return ct.isArrayBuffer(t)||ct.isTypedArray(t)?c&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function u(t,n,i){let a=t;if(t&&!i&&"object"===typeof t)if(ct.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else if(ct.isArray(t)&&yt(t)||(ct.isFileList(t)||ct.endsWith(n,"[]"))&&(a=ct.toArray(t)))return n=gt(n),a.forEach((function(t,r){!ct.isUndefined(t)&&null!==t&&e.append(!0===s?vt([n],r,o):null===s?n:n+"[]",l(t))})),!1;return!!pt(t)||(e.append(vt(i,n,o),l(t)),!1)}const h=[],d=Object.assign(mt,{defaultVisitor:u,convertValue:l,isVisitable:pt});function f(t,n){if(!ct.isUndefined(t)){if(-1!==h.indexOf(t))throw Error("Circular reference detected in "+n.join("."));h.push(t),ct.forEach(t,(function(t,r){const o=!(ct.isUndefined(t)||null===t)&&i.call(e,t,ct.isString(r)?r.trim():r,n,d);!0===o&&f(t,n?n.concat(r):[r])})),h.pop()}}if(!ct.isObject(t))throw new TypeError("data must be an object");return f(t),e}var xt=bt;function wt(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Et(t,e){this._pairs=[],t&&xt(t,this,e)}const kt=Et.prototype;kt.append=function(t,e){this._pairs.push([t,e])},kt.toString=function(t){const e=t?function(e){return t.call(this,e,wt)}:wt;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var St=Et;function Mt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ot(t,e,n){if(!e)return t;const r=n&&n.encode||Mt;ct.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(o=i?i(e,n):ct.isURLSearchParams(e)?e.toString():new St(e,n).toString(r),o){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}class Nt{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ct.forEach(this.handlers,(function(e){null!==e&&t(e)}))}}var Tt=Nt,At={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ct=(n(14603),n(47566),n(98721),"undefined"!==typeof URLSearchParams?URLSearchParams:St),Pt="undefined"!==typeof FormData?FormData:null,Rt="undefined"!==typeof Blob?Blob:null,_t={isBrowser:!0,classes:{URLSearchParams:Ct,FormData:Pt,Blob:Rt},protocols:["http","https","file","blob","url","data"]};const Lt="undefined"!==typeof window&&"undefined"!==typeof document,Dt="object"===typeof navigator&&navigator||void 0,It=Lt&&(!Dt||["ReactNative","NativeScript","NS"].indexOf(Dt.product)<0),jt=(()=>"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts)(),Ft=Lt&&window.location.href||"http://localhost";var Bt={...r,..._t};function zt(t,e){return xt(t,new Bt.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,r){return Bt.isNode&&ct.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function Gt(t){return ct.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}function Vt(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}function Wt(t){function e(t,n,r,i){let o=t[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=t.length;if(o=!o&&ct.isArray(r)?r.length:o,a)return ct.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&ct.isObject(r[o])||(r[o]=[]);const c=e(t,n,r[o],i);return c&&ct.isArray(r[o])&&(r[o]=Vt(r[o])),!s}if(ct.isFormData(t)&&ct.isFunction(t.entries)){const n={};return ct.forEachEntry(t,((t,r)=>{e(Gt(t),r,n,0)})),n}return null}var Ut=Wt;function Ht(t,e,n){if(ct.isString(t))try{return(e||JSON.parse)(t),ct.trim(t)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(t)}const $t={transitional:At,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,i=ct.isObject(t);i&&ct.isHTMLForm(t)&&(t=new FormData(t));const o=ct.isFormData(t);if(o)return r?JSON.stringify(Ut(t)):t;if(ct.isArrayBuffer(t)||ct.isBuffer(t)||ct.isStream(t)||ct.isFile(t)||ct.isBlob(t)||ct.isReadableStream(t))return t;if(ct.isArrayBufferView(t))return t.buffer;if(ct.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return zt(t,this.formSerializer).toString();if((s=ct.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return xt(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||r?(e.setContentType("application/json",!1),Ht(t)):t}],transformResponse:[function(t){const e=this.transitional||$t.transitional,n=e&&e.forcedJSONParsing,r="json"===this.responseType;if(ct.isResponse(t)||ct.isReadableStream(t))return t;if(t&&ct.isString(t)&&(n&&!this.responseType||r)){const n=e&&e.silentJSONParsing,o=!n&&r;try{return JSON.parse(t)}catch(i){if(o){if("SyntaxError"===i.name)throw dt.from(i,dt.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Bt.classes.FormData,Blob:Bt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ct.forEach(["delete","get","head","post","put","patch"],(t=>{$t.headers[t]={}}));var Yt=$t;const qt=ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Xt=t=>{const e={};let n,r,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),r=t.substring(i+1).trim(),!n||e[n]&&qt[n]||("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)})),e};const Kt=Symbol("internals");function Zt(t){return t&&String(t).trim().toLowerCase()}function Jt(t){return!1===t||null==t?t:ct.isArray(t)?t.map(Jt):String(t)}function Qt(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;while(r=n.exec(t))e[r[1]]=r[2];return e}const te=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ee(t,e,n,r,i){return ct.isFunction(r)?r.call(this,e,n):(i&&(e=n),ct.isString(e)?ct.isString(r)?-1!==e.indexOf(r):ct.isRegExp(r)?r.test(e):void 0:void 0)}function ne(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}function re(t,e){const n=ct.toCamelCase(" "+e);["get","set","has"].forEach((r=>{Object.defineProperty(t,r+n,{value:function(t,n,i){return this[r].call(this,e,t,n,i)},configurable:!0})}))}class ie{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function i(t,e,n){const i=Zt(e);if(!i)throw new Error("header name must be a non-empty string");const o=ct.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||e]=Jt(t))}const o=(t,e)=>ct.forEach(t,((t,n)=>i(t,n,e)));if(ct.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(ct.isString(t)&&(t=t.trim())&&!te(t))o(Xt(t),e);else if(ct.isHeaders(t))for(const[s,a]of t.entries())i(a,s,n);else null!=t&&i(e,t,n);return this}get(t,e){if(t=Zt(t),t){const n=ct.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return Qt(t);if(ct.isFunction(e))return e.call(this,t,n);if(ct.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Zt(t),t){const n=ct.findKey(this,t);return!(!n||void 0===this[n]||e&&!ee(this,this[n],n,e))}return!1}delete(t,e){const n=this;let r=!1;function i(t){if(t=Zt(t),t){const i=ct.findKey(n,t);!i||e&&!ee(n,n[i],i,e)||(delete n[i],r=!0)}}return ct.isArray(t)?t.forEach(i):i(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;while(n--){const i=e[n];t&&!ee(this,this[i],i,t,!0)||(delete this[i],r=!0)}return r}normalize(t){const e=this,n={};return ct.forEach(this,((r,i)=>{const o=ct.findKey(n,i);if(o)return e[o]=Jt(r),void delete e[i];const s=t?ne(i):String(i).trim();s!==i&&delete e[i],e[s]=Jt(r),n[s]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return ct.forEach(this,((n,r)=>{null!=n&&!1!==n&&(e[r]=t&&ct.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach((t=>n.set(t))),n}static accessor(t){const e=this[Kt]=this[Kt]={accessors:{}},n=e.accessors,r=this.prototype;function i(t){const e=Zt(t);n[e]||(re(r,t),n[e]=!0)}return ct.isArray(t)?t.forEach(i):i(t),this}}ie.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ct.reduceDescriptors(ie.prototype,(({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[n]=t}}})),ct.freezeMethods(ie);var oe=ie;function se(t,e){const n=this||Yt,r=e||n,i=oe.from(r.headers);let o=r.data;return ct.forEach(t,(function(t){o=t.call(n,o,i.normalize(),e?e.status:void 0)})),i.normalize(),o}function ae(t){return!(!t||!t.__CANCEL__)}function ce(t,e,n){dt.call(this,null==t?"canceled":t,dt.ERR_CANCELED,e,n),this.name="CanceledError"}ct.inherits(ce,dt,{__CANCEL__:!0});var le=ce;function ue(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new dt("Request failed with status code "+n.status,[dt.ERR_BAD_REQUEST,dt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}function he(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function de(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i,o=0,s=0;return e=void 0!==e?e:1e3,function(a){const c=Date.now(),l=r[s];i||(i=c),n[o]=a,r[o]=c;let u=s,h=0;while(u!==o)h+=n[u++],u%=t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),c-i<e)return;const d=l&&c-l;return d?Math.round(1e3*h/d):void 0}}var fe=de;function pe(t,e){let n,r,i=0,o=1e3/e;const s=(e,o=Date.now())=>{i=o,n=null,r&&(clearTimeout(r),r=null),t.apply(null,e)},a=(...t)=>{const e=Date.now(),a=e-i;a>=o?s(t,e):(n=t,r||(r=setTimeout((()=>{r=null,s(n)}),o-a)))},c=()=>n&&s(n);return[a,c]}var ge=pe;const ve=(t,e,n=3)=>{let r=0;const i=fe(50,250);return ge((n=>{const o=n.loaded,s=n.lengthComputable?n.total:void 0,a=o-r,c=i(a),l=o<=s;r=o;const u={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&l?(s-o)/c:void 0,event:n,lengthComputable:null!=s,[e?"download":"upload"]:!0};t(u)}),n)},ye=(t,e)=>{const n=null!=t;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},me=t=>(...e)=>ct.asap((()=>t(...e)));n(22489),n(64979);var be=Bt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Bt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Bt.origin),Bt.navigator&&/(msie|trident)/i.test(Bt.navigator.userAgent)):()=>!0,xe=Bt.hasStandardBrowserEnv?{write(t,e,n,r,i,o){const s=[t+"="+encodeURIComponent(e)];ct.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),ct.isString(r)&&s.push("path="+r),ct.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function we(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Ee(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ke(t,e,n){let r=!we(e);return t&&(r||0==n)?Ee(t,e):e}const Se=t=>t instanceof oe?{...t}:t;function Me(t,e){e=e||{};const n={};function r(t,e,n,r){return ct.isPlainObject(t)&&ct.isPlainObject(e)?ct.merge.call({caseless:r},t,e):ct.isPlainObject(e)?ct.merge({},e):ct.isArray(e)?e.slice():e}function i(t,e,n,i){return ct.isUndefined(e)?ct.isUndefined(t)?void 0:r(void 0,t,n,i):r(t,e,n,i)}function o(t,e){if(!ct.isUndefined(e))return r(void 0,e)}function s(t,e){return ct.isUndefined(e)?ct.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function a(n,i,o){return o in e?r(n,i):o in t?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e,n)=>i(Se(t),Se(e),n,!0)};return ct.forEach(Object.keys(Object.assign({},t,e)),(function(r){const o=c[r]||i,s=o(t[r],e[r],r);ct.isUndefined(s)&&o!==a||(n[r]=s)})),n}var Oe=t=>{const e=Me({},t);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:c}=e;if(e.headers=a=oe.from(a),e.url=Ot(ke(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),ct.isFormData(r))if(Bt.hasStandardBrowserEnv||Bt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[t,...e]=n?n.split(";").map((t=>t.trim())).filter(Boolean):[];a.setContentType([t||"multipart/form-data",...e].join("; "))}if(Bt.hasStandardBrowserEnv&&(i&&ct.isFunction(i)&&(i=i(e)),i||!1!==i&&be(e.url))){const t=o&&s&&xe.read(s);t&&a.set(o,t)}return e};const Ne="undefined"!==typeof XMLHttpRequest;var Te=Ne&&function(t){return new Promise((function(e,n){const r=Oe(t);let i=r.data;const o=oe.from(r.headers).normalize();let s,a,c,l,u,{responseType:h,onUploadProgress:d,onDownloadProgress:f}=r;function p(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let g=new XMLHttpRequest;function v(){if(!g)return;const r=oe.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),i=h&&"text"!==h&&"json"!==h?g.response:g.responseText,o={data:i,status:g.status,statusText:g.statusText,headers:r,config:t,request:g};ue((function(t){e(t),p()}),(function(t){n(t),p()}),o),g=null}g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout,"onloadend"in g?g.onloadend=v:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(v)},g.onabort=function(){g&&(n(new dt("Request aborted",dt.ECONNABORTED,t,g)),g=null)},g.onerror=function(){n(new dt("Network Error",dt.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let e=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||At;r.timeoutErrorMessage&&(e=r.timeoutErrorMessage),n(new dt(e,i.clarifyTimeoutError?dt.ETIMEDOUT:dt.ECONNABORTED,t,g)),g=null},void 0===i&&o.setContentType(null),"setRequestHeader"in g&&ct.forEach(o.toJSON(),(function(t,e){g.setRequestHeader(e,t)})),ct.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),h&&"json"!==h&&(g.responseType=r.responseType),f&&([c,u]=ve(f,!0),g.addEventListener("progress",c)),d&&g.upload&&([a,l]=ve(d),g.upload.addEventListener("progress",a),g.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(s=e=>{g&&(n(!e||e.type?new le(null,t,g):e),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const y=he(r.url);y&&-1===Bt.protocols.indexOf(y)?n(new dt("Unsupported protocol "+y+":",dt.ERR_BAD_REQUEST,t)):g.send(i||null)}))};const Ae=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let n,r=new AbortController;const i=function(t){if(!n){n=!0,s();const e=t instanceof Error?t:this.reason;r.abort(e instanceof dt?e:new le(e instanceof Error?e.message:e))}};let o=e&&setTimeout((()=>{o=null,i(new dt(`timeout ${e} of ms exceeded`,dt.ETIMEDOUT))}),e);const s=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach((t=>{t.unsubscribe?t.unsubscribe(i):t.removeEventListener("abort",i)})),t=null)};t.forEach((t=>t.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=()=>ct.asap(s),a}};var Ce=Ae;const Pe=function*(t,e){let n=t.byteLength;if(!e||n<e)return void(yield t);let r,i=0;while(i<n)r=i+e,yield t.slice(i,r),i=r},Re=async function*(t,e){for await(const n of _e(t))yield*Pe(n,e)},_e=async function*(t){if(t[Symbol.asyncIterator])return void(yield*t);const e=t.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},Le=(t,e,n,r)=>{const i=Re(t,e);let o,s=0,a=t=>{o||(o=!0,r&&r(t))};return new ReadableStream({async pull(t){try{const{done:e,value:r}=await i.next();if(e)return a(),void t.close();let o=r.byteLength;if(n){let t=s+=o;n(t)}t.enqueue(new Uint8Array(r))}catch(e){throw a(e),e}},cancel(t){return a(t),i.return()}},{highWaterMark:2})},De="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Ie=De&&"function"===typeof ReadableStream,je=De&&("function"===typeof TextEncoder?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Fe=(t,...e)=>{try{return!!t(...e)}catch(n){return!1}},Be=Ie&&Fe((()=>{let t=!1;const e=new Request(Bt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})),ze=65536,Ge=Ie&&Fe((()=>ct.isReadableStream(new Response("").body))),Ve={stream:Ge&&(t=>t.body)};De&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Ve[e]&&(Ve[e]=ct.isFunction(t[e])?t=>t[e]():(t,n)=>{throw new dt(`Response type '${e}' is not supported`,dt.ERR_NOT_SUPPORT,n)})}))})(new Response);const We=async t=>{if(null==t)return 0;if(ct.isBlob(t))return t.size;if(ct.isSpecCompliantForm(t)){const e=new Request(Bt.origin,{method:"POST",body:t});return(await e.arrayBuffer()).byteLength}return ct.isArrayBufferView(t)||ct.isArrayBuffer(t)?t.byteLength:(ct.isURLSearchParams(t)&&(t+=""),ct.isString(t)?(await je(t)).byteLength:void 0)},Ue=async(t,e)=>{const n=ct.toFiniteNumber(t.getContentLength());return null==n?We(e):n};var He=De&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:h="same-origin",fetchOptions:d}=Oe(t);l=l?(l+"").toLowerCase():"text";let f,p=Ce([i,o&&o.toAbortSignal()],s);const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let v;try{if(c&&Be&&"get"!==n&&"head"!==n&&0!==(v=await Ue(u,r))){let t,n=new Request(e,{method:"POST",body:r,duplex:"half"});if(ct.isFormData(r)&&(t=n.headers.get("content-type"))&&u.setContentType(t),n.body){const[t,e]=ye(v,ve(me(c)));r=Le(n.body,ze,t,e)}}ct.isString(h)||(h=h?"include":"omit");const i="credentials"in Request.prototype;f=new Request(e,{...d,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?h:void 0});let o=await fetch(f);const s=Ge&&("stream"===l||"response"===l);if(Ge&&(a||s&&g)){const t={};["status","statusText","headers"].forEach((e=>{t[e]=o[e]}));const e=ct.toFiniteNumber(o.headers.get("content-length")),[n,r]=a&&ye(e,ve(me(a),!0))||[];o=new Response(Le(o.body,ze,n,(()=>{r&&r(),g&&g()})),t)}l=l||"text";let y=await Ve[ct.findKey(Ve,l)||"text"](o,t);return!s&&g&&g(),await new Promise(((e,n)=>{ue(e,n,{data:y,headers:oe.from(o.headers),status:o.status,statusText:o.statusText,config:t,request:f})}))}catch(y){if(g&&g(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new dt("Network Error",dt.ERR_NETWORK,t,f),{cause:y.cause||y});throw dt.from(y,y&&y.code,t,f)}});const $e={http:ft,xhr:Te,fetch:He};ct.forEach($e,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(n){}Object.defineProperty(t,"adapterName",{value:e})}}));const Ye=t=>`- ${t}`,qe=t=>ct.isFunction(t)||null===t||!1===t;var Xe={getAdapter:t=>{t=ct.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let o=0;o<e;o++){let e;if(n=t[o],r=n,!qe(n)&&(r=$e[(e=String(n)).toLowerCase()],void 0===r))throw new dt(`Unknown adapter '${e}'`);if(r)break;i[e||"#"+o]=r}if(!r){const t=Object.entries(i).map((([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build")));let n=e?t.length>1?"since :\n"+t.map(Ye).join("\n"):" "+Ye(t[0]):"as no adapter specified";throw new dt("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r},adapters:$e};function Ke(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new le(null,t)}function Ze(t){Ke(t),t.headers=oe.from(t.headers),t.data=se.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);const e=Xe.getAdapter(t.adapter||Yt.adapter);return e(t).then((function(e){return Ke(t),e.data=se.call(t,t.transformResponse,e),e.headers=oe.from(e.headers),e}),(function(e){return ae(e)||(Ke(t),e&&e.response&&(e.response.data=se.call(t,t.transformResponse,e.response),e.response.headers=oe.from(e.response.headers))),Promise.reject(e)}))}const Je="1.8.4",Qe={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{Qe[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const tn={};function en(t,e,n){if("object"!==typeof t)throw new dt("options must be an object",dt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;while(i-- >0){const o=r[i],s=e[o];if(s){const e=t[o],n=void 0===e||s(e,o,t);if(!0!==n)throw new dt("option "+o+" must be "+n,dt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new dt("Unknown option "+o,dt.ERR_BAD_OPTION)}}Qe.transitional=function(t,e,n){function r(t,e){return"[Axios v"+Je+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,i,o)=>{if(!1===t)throw new dt(r(i," has been removed"+(e?" in "+e:"")),dt.ERR_DEPRECATED);return e&&!tn[i]&&(tn[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,o)}},Qe.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};var nn={assertOptions:en,validators:Qe};const rn=nn.validators;class on{constructor(t){this.defaults=t,this.interceptors={request:new Tt,response:new Tt}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const e=t.stack?t.stack.replace(/^.+\n/,""):"";try{n.stack?e&&!String(n.stack).endsWith(e.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+e):n.stack=e}catch(r){}}throw n}}_request(t,e){"string"===typeof t?(e=e||{},e.url=t):e=t||{},e=Me(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:i}=e;void 0!==n&&nn.assertOptions(n,{silentJSONParsing:rn.transitional(rn.boolean),forcedJSONParsing:rn.transitional(rn.boolean),clarifyTimeoutError:rn.transitional(rn.boolean)},!1),null!=r&&(ct.isFunction(r)?e.paramsSerializer={serialize:r}:nn.assertOptions(r,{encode:rn.function,serialize:rn.function},!0)),void 0!==e.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),nn.assertOptions(e,{baseUrl:rn.spelling("baseURL"),withXsrfToken:rn.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=i&&ct.merge(i.common,i[e.method]);i&&ct.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete i[t]})),e.headers=oe.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)}));let u,h=0;if(!a){const t=[Ze.bind(this),void 0];t.unshift.apply(t,s),t.push.apply(t,c),u=t.length,l=Promise.resolve(e);while(h<u)l=l.then(t[h++],t[h++]);return l}u=s.length;let d=e;h=0;while(h<u){const t=s[h++],e=s[h++];try{d=t(d)}catch(f){e.call(this,f);break}}try{l=Ze.call(this,d)}catch(f){return Promise.reject(f)}h=0,u=c.length;while(h<u)l=l.then(c[h++],c[h++]);return l}getUri(t){t=Me(this.defaults,t);const e=ke(t.baseURL,t.url,t.allowAbsoluteUrls);return Ot(e,t.params,t.paramsSerializer)}}ct.forEach(["delete","get","head","options"],(function(t){on.prototype[t]=function(e,n){return this.request(Me(n||{},{method:t,url:e,data:(n||{}).data}))}})),ct.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(Me(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}on.prototype[t]=e(),on.prototype[t+"Form"]=e(!0)}));var sn=on;class an{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;while(e-- >0)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const r=new Promise((t=>{n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t,r,i){n.reason||(n.reason=new le(t,r,i),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;const e=new an((function(e){t=e}));return{token:e,cancel:t}}}var cn=an;function ln(t){return function(e){return t.apply(null,e)}}function un(t){return ct.isObject(t)&&!0===t.isAxiosError}const hn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hn).forEach((([t,e])=>{hn[e]=t}));var dn=hn;function fn(t){const e=new sn(t),n=i(sn.prototype.request,e);return ct.extend(n,sn.prototype,e,{allOwnKeys:!0}),ct.extend(n,e,null,{allOwnKeys:!0}),n.create=function(e){return fn(Me(t,e))},n}const pn=fn(Yt);pn.Axios=sn,pn.CanceledError=le,pn.CancelToken=cn,pn.isCancel=ae,pn.VERSION=Je,pn.toFormData=xt,pn.AxiosError=dt,pn.Cancel=pn.CanceledError,pn.all=function(t){return Promise.all(t)},pn.spread=ln,pn.isAxiosError=un,pn.mergeConfig=Me,pn.AxiosHeaders=oe,pn.formToJSON=t=>Ut(ct.isHTMLForm(t)?new FormData(t):t),pn.getAdapter=Xe.getAdapter,pn.HttpStatusCode=dn,pn.default=pn;var gn=pn},94402:function(t,e,n){"use strict";var r=n(79504),i=Set.prototype;t.exports={Set:Set,add:r(i.add),has:r(i.has),remove:r(i["delete"]),proto:i}},94483:function(t,e,n){"use strict";var r,i,o,s,a=n(44576),c=n(89429),l=n(1548),u=a.structuredClone,h=a.ArrayBuffer,d=a.MessageChannel,f=!1;if(l)f=function(t){u(t,{transfer:[t]})};else if(h)try{d||(r=c("worker_threads"),r&&(d=r.MessageChannel)),d&&(i=new d,o=new h(2),s=function(t){i.port1.postMessage(null,[t])},2===o.byteLength&&(s(o),0===o.byteLength&&(f=s)))}catch(p){}t.exports=f},94644:function(t,e,n){"use strict";var r,i,o,s=n(77811),a=n(43724),c=n(44576),l=n(94901),u=n(20034),h=n(39297),d=n(36955),f=n(16823),p=n(66699),g=n(36840),v=n(62106),y=n(1625),m=n(42787),b=n(52967),x=n(78227),w=n(33392),E=n(91181),k=E.enforce,S=E.get,M=c.Int8Array,O=M&&M.prototype,N=c.Uint8ClampedArray,T=N&&N.prototype,A=M&&m(M),C=O&&m(O),P=Object.prototype,R=c.TypeError,_=x("toStringTag"),L=w("TYPED_ARRAY_TAG"),D="TypedArrayConstructor",I=s&&!!b&&"Opera"!==d(c.opera),j=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},z=function(t){if(!u(t))return!1;var e=d(t);return"DataView"===e||h(F,e)||h(B,e)},G=function(t){var e=m(t);if(u(e)){var n=S(e);return n&&h(n,D)?n[D]:G(e)}},V=function(t){if(!u(t))return!1;var e=d(t);return h(F,e)||h(B,e)},W=function(t){if(V(t))return t;throw new R("Target is not a typed array")},U=function(t){if(l(t)&&(!b||y(A,t)))return t;throw new R(f(t)+" is not a typed array constructor")},H=function(t,e,n,r){if(a){if(n)for(var i in F){var o=c[i];if(o&&h(o.prototype,t))try{delete o.prototype[t]}catch(s){try{o.prototype[t]=e}catch(l){}}}C[t]&&!n||g(C,t,n?e:I&&O[t]||e,r)}},$=function(t,e,n){var r,i;if(a){if(b){if(n)for(r in F)if(i=c[r],i&&h(i,t))try{delete i[t]}catch(o){}if(A[t]&&!n)return;try{return g(A,t,n?e:I&&A[t]||e)}catch(o){}}for(r in F)i=c[r],!i||i[t]&&!n||g(i,t,e)}};for(r in F)i=c[r],o=i&&i.prototype,o?k(o)[D]=i:I=!1;for(r in B)i=c[r],o=i&&i.prototype,o&&(k(o)[D]=i);if((!I||!l(A)||A===Function.prototype)&&(A=function(){throw new R("Incorrect invocation")},I))for(r in F)c[r]&&b(c[r],A);if((!I||!C||C===P)&&(C=A.prototype,I))for(r in F)c[r]&&b(c[r].prototype,C);if(I&&m(T)!==C&&b(T,C),a&&!h(C,_))for(r in j=!0,v(C,_,{configurable:!0,get:function(){return u(this)?this[L]:void 0}}),F)c[r]&&p(c[r],L,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:j&&L,aTypedArray:W,aTypedArrayConstructor:U,exportTypedArrayMethod:H,exportTypedArrayStaticMethod:$,getTypedArrayConstructor:G,isView:z,isTypedArray:V,TypedArray:A,TypedArrayPrototype:C}},94751:function(t){function e(t,e){return t<e}t.exports=e},94804:function(t){function e(t,e){return null!=t&&e in Object(t)}t.exports=e},94857:function(t,e,n){var r=n(62297),i=n(87242);function o(t,e,n,s,a){var c=-1,l=t.length;n||(n=i),a||(a=[]);while(++c<l){var u=t[c];e>0&&n(u)?e>1?o(u,e-1,n,s,a):r(a,u):s||(a[a.length]=u)}return a}t.exports=o},94901:function(t){"use strict";var e="object"==typeof document&&document.all;t.exports="undefined"==typeof e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},95353:function(t){var e="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=n+r+i,s="\\ufe0e\\ufe0f",a="\\u200d",c=RegExp("["+a+e+o+s+"]");function l(t){return c.test(t)}t.exports=l},95636:function(t,e,n){"use strict";var r=n(44576),i=n(79504),o=n(46706),s=n(57696),a=n(55169),c=n(67394),l=n(94483),u=n(1548),h=r.structuredClone,d=r.ArrayBuffer,f=r.DataView,p=Math.min,g=d.prototype,v=f.prototype,y=i(g.slice),m=o(g,"resizable","get"),b=o(g,"maxByteLength","get"),x=i(v.getInt8),w=i(v.setInt8);t.exports=(u||l)&&function(t,e,n){var r,i=c(t),o=void 0===e?i:s(e),g=!m||!m(t);if(a(t),u&&(t=h(t,{transfer:[t]}),i===o&&(n||g)))return t;if(i>=o&&(!n||g))r=y(t,0,o);else{var v=n&&!g&&b?{maxByteLength:b(t)}:void 0;r=new d(o,v);for(var E=new f(t),k=new f(r),S=p(o,i),M=0;M<S;M++)w(k,M,x(E,M))}return u||l(t),r}},95722:function(t,e,n){var r=n(25114),i=r("length");t.exports=i},95726:function(t,e,n){n(44114),n(18111),n(7588);var r=n(34230),i=n(6247);function o(t,e){var n=i.partition(t,(function(t){return r.has(t,"barycenter")})),o=n.lhs,c=r.sortBy(n.rhs,(function(t){return-t.i})),l=[],u=0,h=0,d=0;o.sort(a(!!e)),d=s(l,c,d),r.forEach(o,(function(t){d+=t.vs.length,l.push(t.vs),u+=t.barycenter*t.weight,h+=t.weight,d=s(l,c,d)}));var f={vs:r.flatten(l,!0)};return h&&(f.barycenter=u/h,f.weight=h),f}function s(t,e,n){var i;while(e.length&&(i=r.last(e)).i<=n)e.pop(),t.push(i.vs),n++;return n}function a(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}t.exports=o},96123:function(t,e,n){n(18111),n(61701),n(18237);var r=n(34230);function i(t,e){return r.map(e,(function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,(function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}}))}t.exports=i},96319:function(t,e,n){"use strict";var r=n(28551),i=n(9539);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(s){i(t,"throw",s)}}},96395:function(t){"use strict";t.exports=!1},96599:function(t,e,n){n(18111),n(61701);var r=n(27260),i=n(8961);function o(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:s(t),edges:a(t)};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e}function s(t){return r.map(t.nodes(),(function(e){var n=t.node(e),i=t.parent(e),o={v:e};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o}))}function a(t){return r.map(t.edges(),(function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i}))}function c(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),r.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}t.exports={write:o,read:c}},96660:function(t,e,n){"use strict";n(44114),n(18111),n(20116),n(7588),n(61701),n(18237);var r=n(34230),i=n(74332).Graph,o=n(6247);function s(t,e){var n={};function i(e,i){var o=0,s=0,a=e.length,u=r.last(i);return r.forEach(i,(function(e,h){var d=c(t,e),f=d?t.node(d).order:a;(d||e===u)&&(r.forEach(i.slice(s,h+1),(function(e){r.forEach(t.predecessors(e),(function(r){var i=t.node(r),s=i.order;!(s<o||f<s)||i.dummy&&t.node(e).dummy||l(n,r,e)}))})),s=h+1,o=f)})),i}return r.reduce(e,i),n}function a(t,e){var n={};function i(e,i,o,s,a){var c;r.forEach(r.range(i,o),(function(i){c=e[i],t.node(c).dummy&&r.forEach(t.predecessors(c),(function(e){var r=t.node(e);r.dummy&&(r.order<s||r.order>a)&&l(n,e,c)}))}))}function o(e,n){var o,s=-1,a=0;return r.forEach(n,(function(r,c){if("border"===t.node(r).dummy){var l=t.predecessors(r);l.length&&(o=t.node(l[0]).order,i(n,a,c,s,o),a=c,s=o)}i(n,a,n.length,o,e.length)})),n}return r.reduce(e,o),n}function c(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}function l(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function u(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function h(t,e,n,i){var o={},s={},a={};return r.forEach(e,(function(t){r.forEach(t,(function(t,e){o[t]=t,s[t]=t,a[t]=e}))})),r.forEach(e,(function(t){var e=-1;r.forEach(t,(function(t){var c=i(t);if(c.length){c=r.sortBy(c,(function(t){return a[t]}));for(var l=(c.length-1)/2,h=Math.floor(l),d=Math.ceil(l);h<=d;++h){var f=c[h];s[t]===t&&e<a[f]&&!u(n,t,f)&&(s[f]=t,s[t]=o[t]=o[f],e=a[f])}}}))})),{root:o,align:s}}function d(t,e,n,i,o){var s={},a=f(t,e,n,o),c=o?"borderLeft":"borderRight";function l(t,e){var n=a.nodes(),r=n.pop(),i={};while(r)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}function u(t){s[t]=a.inEdges(t).reduce((function(t,e){return Math.max(t,s[e.v]+a.edge(e))}),0)}function h(e){var n=a.outEdges(e).reduce((function(t,e){return Math.min(t,s[e.w]-a.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(s[e]=Math.max(s[e],n))}return l(u,a.predecessors.bind(a)),l(h,a.successors.bind(a)),r.forEach(i,(function(t){s[t]=s[n[t]]})),s}function f(t,e,n,o){var s=new i,a=t.graph(),c=m(a.nodesep,a.edgesep,o);return r.forEach(e,(function(e){var i;r.forEach(e,(function(e){var r=n[e];if(s.setNode(r),i){var o=n[i],a=s.edge(o,r);s.setEdge(o,r,Math.max(c(t,e,i),a||0))}i=e}))})),s}function p(t,e){return r.minBy(r.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,(function(e,r){var o=b(t,r)/2;n=Math.max(e+o,n),i=Math.min(e-o,i)})),n-i}))}function g(t,e){var n=r.values(e),i=r.min(n),o=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(s){var a,c=n+s,l=t[c];if(l!==e){var u=r.values(l);a="l"===s?i-r.min(u):o-r.max(u),a&&(t[c]=r.mapValues(l,(function(t){return t+a})))}}))}))}function v(t,e){return r.mapValues(t.ul,(function(n,i){if(e)return t[e.toLowerCase()][i];var o=r.sortBy(r.map(t,i));return(o[1]+o[2])/2}))}function y(t){var e,n=o.buildLayerMatrix(t),i=r.merge(s(t,n),a(t,n)),c={};r.forEach(["u","d"],(function(o){e="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(e=r.map(e,(function(t){return r.values(t).reverse()})));var s=("u"===o?t.predecessors:t.successors).bind(t),a=h(t,e,i,s),l=d(t,e,a.root,a.align,"r"===n);"r"===n&&(l=r.mapValues(l,(function(t){return-t}))),c[o+n]=l}))}));var l=p(t,c);return g(c,l),v(c,t.graph().align)}function m(t,e,n){return function(i,o,s){var a,c=i.node(o),l=i.node(s),u=0;if(u+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":a=-c.width/2;break;case"r":a=c.width/2;break}if(a&&(u+=n?a:-a),a=0,u+=(c.dummy?e:t)/2,u+=(l.dummy?e:t)/2,u+=l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":a=l.width/2;break;case"r":a=-l.width/2;break}return a&&(u+=n?a:-a),a=0,u}}function b(t,e){return t.node(e).width}t.exports={positionX:y,findType1Conflicts:s,findType2Conflicts:a,addConflict:l,hasConflict:u,verticalAlignment:h,horizontalCompaction:d,alignCoordinates:g,findSmallestWidthAlignment:p,balance:v}},96801:function(t,e,n){"use strict";var r=n(43724),i=n(48686),o=n(24913),s=n(28551),a=n(25397),c=n(71072);e.f=r&&!i?Object.defineProperties:function(t,e){s(t);var n,r=a(e),i=c(e),l=i.length,u=0;while(l>u)o.f(t,n=i[u++],r[n]);return t}},96837:function(t){"use strict";var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},97040:function(t,e,n){"use strict";var r=n(43724),i=n(24913),o=n(6980);t.exports=function(t,e,n){r?i.f(t,e,o(0,n)):t[e]=n}},97080:function(t,e,n){"use strict";var r=n(94402).has;t.exports=function(t){return r(t),t}},97311:function(t,e,n){var r=n(29299);function i(t,e,n){var i=-1,o=t.length;while(++i<o){var s=t[i],a=e(s);if(null!=a&&(void 0===c?a===a&&!r(a):n(a,c)))var c=a,l=s}return l}t.exports=i},97382:function(t,e,n){var r=n(29531),i=n(68606),o=r(i,"WeakMap");t.exports=o},97751:function(t,e,n){"use strict";var r=n(44576),i=n(94901),o=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t]):r[t]&&r[t][e]}},97874:function(t,e,n){var r=n(68606),i=r.Symbol;t.exports=i},98184:function(t,e,n){var r=n(62297),i=n(87136),o=n(89915),s=n(77770),a=Object.getOwnPropertySymbols,c=a?function(t){var e=[];while(t)r(e,o(t)),t=i(t);return e}:s;t.exports=c},98230:function(t){function e(t,e){return function(n){return t(e(n))}}t.exports=e},98619:function(t){function e(t,e){return null==t?void 0:t[e]}t.exports=e},98721:function(t,e,n){"use strict";var r=n(43724),i=n(79504),o=n(62106),s=URLSearchParams.prototype,a=i(s.forEach);r&&!("size"in s)&&o(s,"size",{get:function(){var t=0;return a(this,(function(){t++})),t},configurable:!0,enumerable:!0})},99002:function(t,e,n){var r=n(68706),i=n(19903),o=i((function(t,e){return null==t?{}:r(t,e)}));t.exports=o},99231:function(t,e,n){var r=n(56817),i=n(85091);function o(t,e,n,s,a){return t===e||(null==t||null==e||!i(t)&&!i(e)?t!==t&&e!==e:r(t,e,n,s,o,a))}t.exports=o},99315:function(t,e,n){var r=n(97874),i=n(60038),o=n(85677),s="[object Null]",a="[object Undefined]",c=r?r.toStringTag:void 0;function l(t){return null==t?void 0===t?a:s:c&&c in Object(t)?i(t):o(t)}t.exports=l},99389:function(t,e,n){n(18111),n(22489),n(7588),n(61701);var r=n(34230),i=n(96123),o=n(43646),s=n(95726);function a(t,e,n,u){var h=t.children(e),d=t.node(e),f=d?d.borderLeft:void 0,p=d?d.borderRight:void 0,g={};f&&(h=r.filter(h,(function(t){return t!==f&&t!==p})));var v=i(t,h);r.forEach(v,(function(e){if(t.children(e.v).length){var i=a(t,e.v,n,u);g[e.v]=i,r.has(i,"barycenter")&&l(e,i)}}));var y=o(v,n);c(y,g);var m=s(y,u);if(f&&(m.vs=r.flatten([f,m.vs,p],!0),t.predecessors(f).length)){var b=t.node(t.predecessors(f)[0]),x=t.node(t.predecessors(p)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+b.order+x.order)/(m.weight+2),m.weight+=2}return m}function c(t,e){r.forEach(t,(function(t){t.vs=r.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}function l(t,e){r.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}t.exports=a},99416:function(t,e,n){var r=n(29299),i=1/0;function o(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}t.exports=o},99590:function(t,e,n){"use strict";var r=n(91291),i=RangeError;t.exports=function(t){var e=r(t);if(e<0)throw new i("The argument can't be less than 0");return e}}}]);
//# sourceMappingURL=chunk-vendors.2625a60a.js.map